webpackJsonp([13,407,419,450],{1410:function(e,n,a){a(4176);a(4177);a(4178);a(4179);a(4180);a(4181);a(3624);a(4182);a(4183);a(3640);a(3642);a(3668);a(4184);a(4185);e.exports=a(4186)},3624:function(e,n){(function(){"use strict";TS.registerModule("i18n",{DEFAULT_LOCALE:"en-US",onStart:function e(){u();f();if(TS.client&&TS.client.login_sig)TS.client.login_sig.add(m)},locale:function e(){u();return i},getDefaultLocale:function e(){return TS.i18n.DEFAULT_LOCALE},localesEnabled:function e(){var n={};if(TS.boot_data.feature_locale_de_DE)n["de-DE"]="Deutsch";n["en-US"]="English (US)";if(TS.boot_data.feature_locale_es_ES)n["es-ES"]="Español";if(TS.boot_data.feature_locale_fr_FR)n["fr-FR"]="Français";if(TS.boot_data.feature_locale_ja_JP)n["ja-JP"]="日本語";if(TS.boot_data.feature_pseudo_locale)n.pseudo="Þsèúδôtřáñsℓátïôñ";return n},localeOrPseudo:function e(){if(r)return"pseudo";return TS.i18n.locale()},isLocaleCJK:function e(){return"ja-JP"===TS.i18n.locale()},zdLocale:function e(){u();var n=TS.i18n.DEFAULT_LOCALE.toLowerCase();if(c&&c[i.toLowerCase()])n=c[i.toLowerCase()];return n},t:function e(a,o){u();if(!o&&n){var s=TS.error?TS.error:console.error;s.call(this,"TS.i18n.t requires a namespace string as the second argument. Currently "+o+".");return function(){return""}}var c=i+":"+o+":"+a;if(void 0===l[c]){if(r||"pseudo"===i)l[c]=new MessageFormat(i,S(a)).format;else{if(n&&o&&window.sha1&&window.tsTranslations&&window.tsTranslations[o])a=window.tsTranslations[o][window.sha1(a)]||a;l[c]=new MessageFormat(i,a).format}if(n&&t)l[c].toString=p(c,o)}return l[c]},number:function e(n){u();return Intl.NumberFormat(i).format(n)},sorter:function e(n,a){u();if(!n||!a)return!n?-1:1;if(s)return s.compare(n,a);return n.localeCompare(a)},mappedSorter:function e(n){return function(e,a){if(!e||!a)return!e?-1:1;var t=(""+n).split(".");if(t.length>1)t.forEach(function(n){e=e[n];a=a[n]});else{e=e[n];a=a[n]}return TS.i18n.sorter(e,a)}},possessive:function e(n){u();switch(TS.i18n.locale()){case"fr-FR":var a=_.deburr(n);return a.match(/^[aeiouy]/i)?"d’":"de ";case"es-ES":return"de ";case"de-DE":return n.match(/[sßxz]$/i)?"’":"s";case"ja-JP":return"の";default:return"’s"}},fullPossessiveString:function e(n){u();switch(TS.i18n.locale()){case"es-ES":case"fr-FR":return TS.i18n.possessive(n)+n;default:return n+TS.i18n.possessive(n)}},listify:function e(n,a){u();var t;var o=[];var r=n.length;var s=a&&"or"===a.conj?TS.i18n.t("or","general")():TS.i18n.t("and","general")();var l=r>2?",":"";var c=a&&a.strong?"<strong>":"";var d=a&&a.strong?"</strong>":"";var f=a&&a.no_escape;var m=a&&a.item_prefix?a.item_prefix:"";switch(i){case"ja-JP":t=", ";break;default:t=l+" "+s+" "}n.forEach(function(e,n){if(!f)e=_.escape(e);o.push(c+m+e+d);if(n<r-2)o.push(", ");else if(n<r-1)o.push(t)});return o},deburr:function e(n){n=_.deburr(n);n=a(n);n=o(n);return n},getStaticTranslation:function e(n,a){if(!g())return null;var t=TS.storage.fetchStaticTranslations();var o=_.get(t,"data."+a);if(!o||!o[n])return null;return o[n]},start_of_the_week:{"en-US":0},number_abbreviations:{"de-DE":{12:"Bio.",9:"Mrd.",6:"Mio.",3:"Tsd."},"es-ES":{12:"Bill",9:"Mrd",6:"Mill",3:"Mil"},"fr-FR":{12:"T",9:"iG",6:"M",3:"k"},"ja-JP":{12:"兆",9:"億",6:"万",3:"千"},"en-US":{12:"T",9:"B",6:"M",3:"K"}},locales_number_formatting:{default:{decimal_symbol:".",thousands_separator:","},"en-US":{decimal_symbol:".",thousands_separator:","},"es-ES":{decimal_symbol:",",thousands_separator:" "},"fr-FR":{decimal_symbol:",",thousands_separator:" "},"ja-JP":{decimal_symbol:".",thousands_separator:","},"de-DE":{decimal_symbol:",",thousands_separator:"."}},test:{setLocale:function e(n){i=n;if(Intl.Collator)s=Intl.Collator(i);if(window.moment)window.moment.locale(i)}}});var e;var n;var t;var r;var i;var s;var l={};var c;var d=[];var u=function a(){if(e)return;n=location.host.match(/^([^.]+\.)?(?:enterprise\.)?(dev[0-9]*)\.slack\.com/);t=TS.qs_args&&TS.qs_args.local_assets||TS.qs_args&&TS.qs_args.js_path;var o=location.search.match(new RegExp("\\?locale=(.*?)($|&)","i"));if(o)i=o[1];if(!i)i=document.documentElement.lang||TS.i18n.DEFAULT_LOCALE;if("pseudo"===i)r=true;if(Intl.Collator)s=Intl.Collator(i);else s=null;e=true};var f=function e(){if(TS.boot_data&&TS.boot_data.slack_to_zd_locale)c=TS.boot_data.slack_to_zd_locale};var m=function e(){if(!TS.boot_data.feature_localization||TS.i18n.locale()===TS.i18n.DEFAULT_LOCALE)return;if(!g())TS.api.call("i18n.translations.get").then(function(e){var n=e.data;if(!n||!n.ok){TS.error("Failed to fetch static i18n translations, recieved this response: ",e);return}TS.model.static_translations_cache_ts=n.cache_ts;TS.storage.storeStaticTranslations({data:n,cache_ts:TS.model.static_translations_cache_ts,locale:n.locale})})};var g=function e(){var n=TS.storage.fetchStaticTranslations();if(!n)return false;if(TS.model.static_translations_cache_ts!==n.cache_ts)return false;if(TS.i18n.locale()!==n.locale)return false;return true};var p=function e(n,a){return function(){var e=a+"."+n;if(d.indexOf(e)>=0)return;d.push(e);var t="TS.i18n.t("+JSON.stringify(n)+", "+JSON.stringify(a)+")";TS.console.logStackTrace("Tried to use an i18n function as a string — you probably did "+t+" when you meant to do "+t+"()");alert("Dev-only alert: tried to use an i18n function as a string! See console for stack trace.\n\nNamespace: "+a+"\nString: "+n);return""}};var S=function e(n){var a=false;if(n.endsWith(":")){a=true;n=n.substr(0,n.length-1)}var t=/(<[^>]+>)|(&\w+;)/gi;var o=n.match(t)||[];n=n.replace(t,"<>");var r=parseMessageFormatString(n);if(r.error)TS.error(r.error);var i;n=r.tokens.map(function(e){if("text"===e[0]){i=e[1];_.forOwn(h,function(e){i=i.replace(e[0],e[1])});return i.split(" ").map(function(e){e+=new Array(Math.floor(.3*e.length)+1).join("~");return e}).join(" ")}return e[1]}).join("");n=n.split("<>").map(function(e,n){return e+(o[n]||"")}).join("");if(a)n+=":";return n};var h={a:[/a/g,"á"],b:[/b/g,"β"],c:[/c/g,"ç"],d:[/d/g,"δ"],e:[/e/g,"è"],f:[/f/g,"ƒ"],g:[/g/g,"ϱ"],h:[/h/g,"λ"],i:[/i/g,"ï"],j:[/j/g,"ǰ"],k:[/k/g,"ƙ"],l:[/l/g,"ℓ"],m:[/m/g,"₥"],n:[/n/g,"ñ"],o:[/o/g,"ô"],p:[/p/g,"ƥ"],q:[/q/g,"9"],r:[/r/g,"ř"],u:[/u/g,"ú"],v:[/v/g,"Ʋ"],w:[/w/g,"ω"],x:[/x/g,"ж"],y:[/y/g,"¥"],z:[/z/g,"ƺ"],A:[/A/g,"Â"],B:[/B/g,"ß"],C:[/C/g,"Ç"],D:[/D/g,"Ð"],E:[/E/g,"É"],I:[/I/g,"Ì"],L:[/L/g,"£"],O:[/O/g,"Ó"],P:[/P/g,"Þ"],S:[/S/g,"§"],U:[/U/g,"Û"],Y:[/Y/g,"Ý"]}})();var a=function e(n){return n&&n.replace(/([\u3000-\u301f\u30a0-\u30ff\uff00-\uffef])/g,t)};var t=function e(n){var a={"ガ":"ｶﾞ","ギ":"ｷﾞ","グ":"ｸﾞ","ゲ":"ｹﾞ","ゴ":"ｺﾞ","ザ":"ｻﾞ","ジ":"ｼﾞ","ズ":"ｽﾞ","ゼ":"ｾﾞ","ゾ":"ｿﾞ","ダ":"ﾀﾞ","ヂ":"ﾁﾞ","ヅ":" ﾂﾞ","デ":"ﾃﾞ","ド":"ﾄﾞ","バ":"ﾊﾞ","パ":"ﾊﾟ","ビ":"ﾋﾞ","ピ":"ﾋﾟ","ブ":"ﾌﾞ","プ":"ﾌﾟ","ベ":"ﾍﾞ","ペ":"ﾍﾟ","ボ":"ﾎﾞ","ポ":"ﾎﾟ","ヴ":"ｳﾞ","ァ":"ｧ","ア":"ｱ","ィ":"ｨ","イ":"ｲ","ゥ":"ｩ","ウ":"ｳ","ェ":"ｪ","エ":"ｴ","ォ":"ｫ","オ":"ｵ","カ":"ｶ","キ":"ｷ","ク":"ｸ","ケ":"ｹ","コ":"ｺ","サ":"ｻ","シ":"ｼ","ス":"ｽ","セ":"ｾ","ソ":"ｿ","タ":"ﾀ","チ":"ﾁ","ッ":"ｯ","ツ":"ﾂ","テ":"ﾃ","ト":"ﾄ","ナ":"ﾅ","ニ":"ﾆ","ヌ":"ﾇ","ネ":"ﾈ","ノ":"ﾉ","ハ":"ﾊ","ヒ":"ﾋ","フ":"ﾌ","ヘ":"ﾍ","ホ":"ﾎ","マ":"ﾏ","ミ":"ﾐ","ム":"ﾑ","メ":"ﾒ","モ":"ﾓ","ャ":"ｬ","ヤ":"ﾔ","ュ":"ｭ","ユ":"ﾕ","ョ":"ｮ","ヨ":"ﾖ","ラ":"ﾗ","リ":"ﾘ","ル":"ﾙ","レ":"ﾚ","ロ":"ﾛ","ワ":"ﾜ","ヲ":"ｦ","ン":"ﾝ","。":"｡","「":"｢","」":"｣","、":"､","・":"･","ー":"ｰ","゛":"ﾞ","゜":"ﾟ","　":" ","￠":"¢","￡":"£","￢":"¬","￣":"¯","￤":"¦","￥":"¥","￦":"₩"};var t=n.charCodeAt(0);if(n in a)return a[n];else if(t>=65280&&t<=65374)return String.fromCharCode(t-65248);return n};var o=function e(n){return n&&n.replace(/([\u0400-\u04ff])/g,r)};var r=function e(n){var a={"А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"Jo","Ж":"Zh","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"H","Ц":"C","Ч":"Ch","Ш":"Sh","Щ":"Sch","Ъ":"","Ы":"Y","Ь":"","Э":"Je","Ю":"Ju","Я":"Ja","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"jo","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"sch","ъ":"","ы":"y","ь":"","э":"je","ю":"ju","я":"ja"};if(n in a)return a[n];return n}},3640:function(e,n){(function(){"use strict";TS.registerModule("clog",{onStart:function e(){t=TS.log&&TS.has_pri[t]?t:null;var n=3e4;var a=5e3;var o=Math.floor(Math.random()*a);setInterval(d,n+o);$(window).on("beforeunload pagehide",d);$("body").on("click",'[data-clog-click="true"], [data-clog-ui-action="click"], [data-clog-event=WEBSITE_CLICK]',f);g();TS.clog.flush()},setUser:function e(n){s=n},setTeam:function e(n){r=n},setEnterprise:function e(n){i=n},toggleDebugMode:function e(){l=!l;return l},track:function e(n,a){_(n,a)},trackClick:function e(n,a,t){$(n).on("click",function(){_(a,t)})},trackForm:function e(n,a,t){$(n).on("submit",function(){_(a,t)})},flush:function e(){d()},test:function n(){return{createLogURLs:u,sendDataAndEmptyQueue:d,detectClogEndpoint:c,getLogs:function e(){return o},getClogEndpoint:function n(){return e},reset:function n(){o=[];e=void 0}}},parseParams:function e(n){if(!n)return{};n=n.split(",");var a={};var t=0;var o=n.length;var r;for(t;t<o;t+=1){r=n[t].split("=");a[r[0]]=r[1]}return a}});var e;var n=2e3;var a=1e3;var t=a;var o=[];var r;var i;var s;var l=false;var c=function n(a){var t=a.match(/^([^.]+\.)?(?:enterprise\.)?(dev[0-9]*)\.slack\.com/);var o=a.match(/^([^.]+\.)?(?:enterprise\.)?(qa[0-9]*)\.slack\.com/);var r=a.match(/^([^.]+\.)?(?:enterprise\.)?(staging)\.slack\.com/);if(t)e="https://"+t[2]+".slack.com/clog/track/";else if(o)e="https://"+o[2]+".slack.com/clog/track/";else if(r)e="https://staging.slack.com/clog/track/";else e="https://slack.com/clog/track/"};var _=function e(n,c){if("string"!==typeof n)return;if(!c)c=null;var _={tstamp:Date.now(),event:n,args:c};g();if(r)_.team_id=r;if(i)_.enterprise_id=i;if(s)_.user_id=s;o.push(_);if(TS.log){if(l)TS.console.log(a,_);if(TS.has_pri[t])TS.log(t,"Event called:",n,c)}else if(l)try{console.log(_)}catch(e){}};var d=function e(){if(0===o.length)return;if(TS.log&&TS.has_pri[t]){TS.log(t,"Sending clog data, emptying queue");TS.log(t,"Logs: ",o)}var n=u(o);var a;for(var r=0;r<n.length;r+=1){a=n[r];var i=new Image;i.src=a;if(TS.log&&TS.has_pri[t])TS.log(t,"Logged event: "+a)}o=[]};var u=function a(o){if(!e)c(location.host);var r=[];var i=[];var s="";var l=function n(a){return e+"?logs="+encodeURIComponent(JSON.stringify(a))};var _;for(var d=0;d<o.length;d+=1){_=o[d];i.push(_);s=l(i);if(s.length>n){i.pop();r.push(l(i));i=[_]}}r.push(l(i));if(TS.log&&TS.has_pri[t])TS.log(t,"URLs:",r);return r};var f=function e(){var n=this.getAttribute("data-clog-event");if(!n){if(TS.warn)TS.warn("Logging clicks with data-clog-click requires a data-clog-event attribute");return}var a={};var t=TS.clog.parseParams(this.getAttribute("data-clog-params"));var o=this.getAttribute("data-clog-ui-action");if(o){a={ui_element:this.getAttribute("data-clog-ui-element"),action:this.getAttribute("data-clog-ui-action"),step:this.getAttribute("data-clog-ui-step")};a={contexts:{ui_context:a}}}switch(n.toUpperCase()){case"WEBSITE_CLICK":t.page_url=location.href}a=m(t,a);TS.clog.track(n,a)};var m=function e(n,a){var t={};Object.keys(n).forEach(function(e){t[e]=n[e]});Object.keys(a).forEach(function(e){t[e]=a[e]});return t};var g=function e(){if(TS.model){if(TS.model.enterprise&&TS.model.enterprise.id)TS.clog.setEnterprise(TS.model.enterprise.id);if(TS.model.team&&TS.model.team.id)TS.clog.setTeam(TS.model.team.id);if(TS.model.user&&TS.model.user.id)TS.clog.setUser(TS.model.user.id)}}})()},3642:function(e,n){(function(){"use strict";TS.registerModule("experiment",{onStart:function a(){e=!!(TS.api&&TS.api.call);if(e)n=TS.api.call;else n=window.callSlackAPIUnauthed;if(TS.boot_data&&TS.boot_data.experiment_assignments)c(TS.boot_data.experiment_assignments)},loadLeadAssignments:function e(n){if(void 0===n){if(TS.warn)TS.warn("TS.experiment.loadLeadAssignments requires a lead_id");return Promise.resolve(false)}if(!r)r=l("experiments.getByLead",{lead_id:n});return r},loadVisitorAssignments:function e(){if(!s)s=l("experiments.getByVisitor");return s},loadUserAssignments:function n(){if(!e){if(TS.warn)TS.warn("TS.experiment.loadUserAssignments requires a user to be logged in");return Promise.resolve(false)}if(!i)i=l("experiments.getByUser");return i},getGroup:function e(n,t){if(!a[n])return null;if(a[n].log_exposures)d(n,a[n]);if(t&&a[n].group)t.forEach(function(e){o[e]=o[e]||[];if(o[e].indexOf(n)<0)o[e].push(n)});return a[n].group},getExperimentsForMetric:function e(n){var t=o[n];if(!t)return[];return t.map(function(e){return a[e]})},getAllAssignmentsForDebugging:function e(){return a},test:function e(){var n={};Object.defineProperty(n,"_recordAssignments",{get:function e(){return c},set:function e(n){c=n}});Object.defineProperty(n,"_metric_experiments",{get:function e(){return o},set:function e(n){o=n}});return n}});var e;var n;var a={};var t={};var o={};var r;var i;var s;var l=function e(a,t){return new Promise(function(e){n(a,_.extend(TS.utility.url.queryStringParse(location.search.substring(1)),t),function(n,a){if(n&&a.assignments)c(a.assignments);e(n)})})};var c=function e(n){var o;for(o in n){if(!_.isEqual(t[o],n[o]))t[o]=null;a[o]=n[o]}};var d=function e(n,a){if(TS.clog&&!_.isEqual(t[n],a)){TS.clog.track("EXPERIMENT_EXPOSURE",{experiment_name:n,experiment_type:a.type,experiment_id:a.experiment_id,experiment_group:a.group,experiment_trigger:a.trigger,exposure_id:a.exposure_id});t[n]=a}}})()},3668:function(e,n){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){"use strict";TS.registerModule("emoji",{onStart:function e(){if(TS.web)TS.web.login_sig.add(TS.emoji.onLogin);if(TS.client)TS.client.login_sig.add(TS.emoji.onLogin);TS.prefs.jumbomoji_changed_sig.add(b);if(TS.boot_data.feature_update_emoji_to_v4){h();S.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)})}var n=true;T=TS.utility.throttleFunc(T,3e3,n)},onLogin:function e(){b()},isValidName:function n(a){if(!a)return false;a=TS.emoji.stripWrappingColons(a).toLowerCase();if("undefined"===typeof e[a])return false;return a},substringMatchesName:function e(n,a){if(!n||!a||!_.isString(n)||!_.isString(a))return false;if("::"===a)return false;var t=":"===a.charAt(0);var o=":"===a.slice(-1);a=TS.emoji.stripWrappingColons(a.toLowerCase());if(!a)return true;if(t&&o)return a===n;if(t)return n.slice(0,a.length)===a;if(o)return n.slice(-1*a.length)===a;var r=-1!==n.indexOf(a);if(r)return true;return false},emojiMatchesTerm:function e(n,a,t){if(!n||!a)return false;var o=TS.emoji.nameToBaseName(n.display_name||n.name);if(TS.boot_data.feature_localization){a=TS.emoji.normalizeSearchTerm(a);o=TS.i18n.deburr(o)}if(TS.emoji.substringMatchesName(o,a))return true;var r=n.display_names||n.names;if(TS.boot_data.feature_localization){r=TS.i18n.deburr(r);if(n.display_names&&n.display_names!==n.names)r+=" "+n.names}var i=r.split(" ");for(var s=0;s<i.length;s+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(i[s]),a))return true;return-1!==_.indexOf(t,o)},normalizeSearchTerm:function e(n){if(!n||!_.isString(n))return;n=n.toLowerCase();n=TS.i18n.deburr(n);n=n.replace(/['ʼ’]/g,"'");return n},nameToBaseName:function e(n){if(!_.isString(n))return"";if(TS.boot_data.feature_localization)n=TS.emoji.stripLocalizedSkinTone(n);else n=n.replace(/(:skin-tone-[2-6]:)/,"");n=TS.emoji.stripWrappingColons(n);return n},stripLocalizedSkinTone:function e(n){var a=/::skin-tone-[2-6]:/g;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE){var t=TS.emoji.getLocalSkinToneName();a=new RegExp("::"+t+"-[2-6]:","g")}n=n.replace(a,":");return n},stripWrappingColons:function e(n){if(!n)return"";n="string"===typeof n?n:""+n;if(":"===n[0]){if(":"===n[n.length-1])return n.slice(1,n.length-1);return n.slice(1,n.length)}else if(":"===n[n.length-1])return n.slice(0,n.length-1);return n},nameToCanonicalName:function e(n){n=TS.emoji.stripWrappingColons(n);if(!n)return"";n=String(n).toLowerCase();var a=function(){var e=n.split("::");if(2!=e.length)return"";n=e[0];return"::"+e[1]}();return(u()[n]||n)+a},emojiHasAliases:function e(n){return-1!==n.names.indexOf(" ")},addCustomEmoji:function e(n,a,t){y(n,a,t)},removeCustomEmoji:function e(n,a){var t;y(n,t,a)},ingestCustoms:function e(n){TS.model.all_custom_emoji.length=0;TS.model.emoji_complex_customs={};o={};var t;var r;var i=[];_.forOwn(g.data,function(e){i.push.apply(i,e[3])});function s(e){return g.map.colons.hasOwnProperty(e)||i.indexOf(e)>=0}function l(e){var n=TSFEmoji.getCanonicalEmojiString(e,TS.i18n.locale());return n!==e}_.forOwn(n,function(e,n){if("object"===("undefined"===typeof e?"undefined":a(e))){TS.model.emoji_complex_customs[n]=e;g.data[n]=[[],null,null,[n],null,null,null,e.apple];g.map.colons[n]=n;TS.model.all_custom_emoji.push(n)}else{if(0===e.indexOf("alias:"))return;if(s(n)){TS.error("can't ingest custom emoji :"+n+": because that already exists");return}g.data[n]=[[],null,null,[n],null,null,null,e];g.map.colons[n]=n;TS.model.all_custom_emoji.push(n)}});_.forOwn(n,function(e,n){if("object"===("undefined"===typeof e?"undefined":a(e))||0!==e.indexOf("alias:"))return;if(s(n)){TS.error("can't ingest custom emoji :"+n+": because that already exists");return}t=e.replace("alias:","");r=g.data.hasOwnProperty(t)&&g.data[t];if(r){r[3].push(n);g.map.colons[n]=t;return}t=g.map.colons.hasOwnProperty(t)&&g.map.colons[t];r=g.data.hasOwnProperty(t)&&g.data[t];if(r){r[3].push(n);g.map.colons[n]=t;return}if(TS.boot_data&&TS.boot_data.feature_tinyspeck)TS.warn('alias for "'+n+'":"'+e+'" not recognized')});if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)_.forOwn(n,function(e,n){if(l(n))o[n]=true});TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort();if(g&&g.inits){delete g.inits.emoticons;g.init_emoticons()}d=f()},setUpEmoji:function e(){return new Promise(function(e){if(!g){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Done setting up emoji, there was nothing to do");return e()}var n=function n(){g.buildKeywordIndex();w();if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Done setting up emoji");e()};v();if(!TS.boot_data.page_needs_custom_emoji)return n();if(!TS.boot_data.page_needs_custom_emoji_fresh){var a=TS.storage.fetchCustomEmoji();if(a&&TS.model.emoji_cache_ts==a.cache_ts){TS.model.did_we_load_with_emoji_cache=true;TS.emoji.ingestCustoms(a.data);return n()}}if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Fetching emoji list before setting up emoji");TS.api.call("emoji.list",{include_complex_values:1},function(e,a){if(!e||!a.emoji)return n();TS.model.emoji_cache_ts=a.cache_ts;TS.storage.storeCustomEmoji({data:a.emoji,cache_ts:TS.model.emoji_cache_ts});TS.emoji.ingestCustoms(a.emoji);n()})})},resetUpEmoji:function e(){TS.storage.storeCustomEmoji("");T()},maybeRemakeMenuListsIfFrequentsChanged:function e(){if(TS.boot_data.feature_react_emoji_picker_frecency)return;var a=l();if(!TS.utility.areSimpleObjectsEqual(a,n,"maybemakeMenuLists"))if(TS.boot_data.feature_localization)c(a);else TS.emoji.makeMenuLists()},replaceFrecentlyUsed:function e(){if(!TS.boot_data.feature_react_emoji_picker_frecency)return;var n=E();if(!n.length)return;if(!_.isEqual(n,t)){c(n);t=n}},makeMenuLists:function a(){TS.model.emoji_groups.length=0;TS.model.emoji_names.length=0;e={};var t=_.cloneDeep(S);var r=k();if(r&&r.length)t.push({display_name:TS.i18n.t("Custom","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:r});n=l();t.unshift({name:"mine",display_name:TS.i18n.t("Frequently Used","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:n});var i;var s;var c=[];for(i=0;i<t.length;i+=1)c=c.concat(t[i].emoji_names);var d={};Object.keys(g.data).forEach(function(n){var a=g.data[n][3];var t=TS.emoji.isIdxSkinToneModifiable(n);a.forEach(function(a,o,r){var i=a;var s=r;TS.model.emoji_names.push(a);e[a]=true;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE){i=TSFEmoji.getLocalEmojiString(a,TS.i18n.locale());s=r.map(function(e){return TSFEmoji.getLocalEmojiString(e,TS.i18n.locale())})}d[a]={html:TS.emoji.graphicReplace(":"+a+":"),name:":"+a+":",names:":"+r.join(": :")+":",display_name:":"+i+":",display_names:":"+s.join(": :")+":"};TS.model.emoji_map.push({id:"E"+n+(o>0?"_alias_"+o:""),name:a,name_with_colons:":"+a+":",display_name:i,is_skin:t,is_emoji:true});if(t){d[a].is_skin=true;d[a].skin_tone_id="1";g.skin_tones.forEach(function(t){if(!m(n,t))return;var o=g.data[t];var l=o[3][0];var c=a+"::"+l;TS.model.emoji_names.push(c);e[c]=true;var _=":"+c+":";var u=r.map(function(e){return e+"::"+l});var f=_;var p=u;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE){var S=TSFEmoji.getLocalEmojiString(l,TS.i18n.locale());f=":"+i+"::"+S+":";p=s.map(function(e){return e+"::"+S})}d[c]={is_skin:true,skin_tone_id:l.substr(-1,1),html:TS.emoji.graphicReplace(_),name:_,names:":"+u.join(": :")+":",display_name:f,display_names:":"+p.join(": :")+":"}})}})});p=d;TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id");for(i=0;i<c.length;i+=1){var u=c[i];if(!d[u])TS.info(u+" not in cat_map?")}var f;var h;var T;var b;for(i=0;i<t.length;i+=1){f=t[i];h=[];T=null;b="";if(f.tab_icon_html)b=f.tab_icon_html;for(s=0;s<f.emoji_names.length;s+=1){T=d[f.emoji_names[s]];h.push(T);if(b)continue;if(f.emoji_names[s]==f.name)b=T.html}T=h[0];TS.model.emoji_groups.push({name:f.name,display_name:f.display_name,tab_html:b||T.html,tab_icon:f.tab_icon,tab_icon_name:f.tab_icon_name,items:h})}var v=TS.emoji.getCurrentSheetUrl();if(_.get(TS,"model.prefs.ss_emojis")&&v){var w=new Image;w.onload=function(){w.onload=null;w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";w=null};w.src=v}TS.model.emoji_names.sort();TS.emoji.friendlyReorder();var y=TS.model.emoji_names.indexOf("ok");var A=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[y]="ok_hand";TS.model.emoji_names[A]="ok";if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)_.each(o,function(e,n){_.remove(TS.model.emoji_map,{name:n})});var j=function e(n){var a=TS.model.emoji_names.concat();["skin-tone-2","skin-tone-3","skin-tone-4","skin-tone-5","skin-tone-6"].forEach(function(e){_.pull(a,e)});n.forEach(function(e){e.emoji_names.forEach(function(e){_.pull(a,e);var n=g.map.colons[e];var t=g.data[n];if(t)t[3].forEach(function(e){[e,e+"::skin-tone-2",e+"::skin-tone-3",e+"::skin-tone-4",e+"::skin-tone-5",e+"::skin-tone-6"].forEach(function(e){_.pull(a,e)})})})});if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)_.each(o,function(e,n){_.pull(a,n)});if(a.length)TS.error("testGroupings() expected these emoji names to be in a category, but they were not found! "+a.join(","))};if("dev"===TS.boot_data.version_ts)j(t)},friendlyReorder:function e(){var n=[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}];n.forEach(function(e){var n=_.reduce(TS.model.emoji_names,function(n,a,t){if(0===a.indexOf(e.filter)){var o=TS.model.all_custom_emoji.indexOf(a)>-1;var r=!o&&0===a.indexOf(e.first);var i=!o&&!r&&0===a.indexOf(e.second);n.emoji.push({name:a,is_first:r,is_second:i});n.indexes.push(t)}return n},{indexes:[],emoji:[]});n.emoji=_.orderBy(n.emoji,["is_first","is_second","name"],["desc","desc","asc"]);_.forEach(n.emoji,function(e,a){var t=n.indexes[a];TS.model.emoji_names[t]=e.name})})},isIdxSkinToneModifiable:function e(n){return m(n,g.skin_tones[0])},isNameSkinToneModifiable:function e(n){n=TS.emoji.stripWrappingColons(n);n=String(n).toLowerCase();var a=g.map.colons[n];return TS.emoji.isIdxSkinToneModifiable(a)},graphicReplace:function e(n,a){if(!n)return"";a=a||{};if(a.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(n))return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+n.replace(/:/g,"")+'"></ts-icon>';g.init_env();var t=g.text_mode;var o=g.include_title;var r=g.include_text;var i=g.supports_css;var s=g.allow_skin_tone_squares;if(a.force_img&&a.obey_emoji_mode_pref){a.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")}if(a.force_style&&a.obey_emoji_mode_pref){a.obey_emoji_mode_pref=false;TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+a.force_style)}g.text_mode=a.obey_emoji_mode_pref&&"as_text"===_.get(TS,"model.prefs.emoji_mode");if(a.force_style){TS.emoji.setEmojiMode(a.force_style);g.use_sheet=false}g.include_title=!!a.include_title;g.include_text=!!a.include_text;g.supports_css=!a.force_img;g.allow_skin_tone_squares=!a.no_skin_tone_squares;var l=g.replace_colons(n,{stop_animations:a.stop_animations});if(a.jumbomoji)l=l.replace("emoji-sizer","emoji-sizer emoji-only");if(a.force_style)TS.emoji.setEmojiMode();g.text_mode=t;g.include_title=o;g.include_text=r;g.supports_css=i;g.allow_skin_tone_squares=s;return l},replaceColons:function e(n){if(n.indexOf(":")<0)return n;return g.replace_colons(n)},maybeUnifiedReplace:function e(n){if("unified"!==g.replace_mode)return n;return g.replace_colons_with_unified(n)},replaceEmoticons:function e(n){return g.replace_emoticons_with_colons(n)},eachEmoticon:function e(n,a){n.replace(g.rx_emoticons,a)},getLocalSkinToneName:function e(){var n="skin-tone";if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)n=TSFEmoji.getLocalSkinToneName(TS.i18n.locale());return n},getChosenSkinTone:function e(n){var a=parseInt(_.get(TS,"model.prefs.preferred_skin_tone"),10);if(!a||"1"==a||!_.includes([2,3,4,5,6],a))return"";var t=n?TS.emoji.getLocalSkinToneName():"skin-tone";return t+"-"+a},getChosenSkinToneModifier:function e(n){var a=TS.emoji.getChosenSkinTone(n);if(!a)return"";return":"+a+":"},setEmojiMode:function e(n){var a=["google","emojione","twitter","apple"];n=n||_.get(TS,"model.prefs.emoji_mode");g.text_mode="as_text"===n;g.do_emoticons=!!_.get(TS,"model.prefs.graphic_emoticons");g.allow_native=false;g.use_sheet=function(){if(!_.get(TS,"model.prefs.ss_emojis"))return false;return!!TS.boot_data.page_needs_custom_emoji}();g.img_set=_.includes(a,n)?n:"apple";if(!TS.model.emoji_complex_customs)return;for(var t in TS.model.emoji_complex_customs){if(!g.data[t])continue;g.data[t][7]=TS.model.emoji_complex_customs[t][g.img_set]}},getColonsRx:function e(){return g.rx_colons},getEmojiByName:function e(n){if(!n)return;return _.find(TS.model.emoji_map,{name:n})},getEmojiById:function e(n){var a=_.find(TS.model.emoji_map,{id:n});if(!a){TS.warn("no emoji ob found for "+n);return}return a},getEmojiMap:function e(){return TS.model.emoji_map},getEmojiForSpaces:function e(){var n={emoticonEmojiNames:g.emoticons_data,emoji:{},sheetSize:g.sheet_size,sheetPath:TS.emoji.getCurrentSheetUrl(),replace:function e(){var n=g.colons_mode;g.colons_mode=true;var a=g.replace_unified.apply(g,arguments);if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)a=TSFEmoji.translateEmojiStringToCanonical(a,TS.i18n.locale());g.colons_mode=n;return a}};if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)n.getLocalEmojiString=function(e){return TSFEmoji.getLocalEmojiString(e,TS.i18n.locale())||e};Object.keys(g.data).forEach(function(e){var a=g.data[e];var t=a[3];var o=a[4];var r=a[5];var i=a[7];var s;if(null!==o&&null!==r)s=[o,r];else if(i)s=false===_.get(TS,"model.prefs.a11y_animations")?TS.utility.getImgProxyURLWithOptions(i,{emoji:true}):i;else{TS.error('WTF, _emoji "'+e+'" is missing coords or and a url, or something!');return}t.forEach(function(e){n.emoji[e]=s})});return n},getCurrentSheetUrl:function e(){return g.img_sets[g.img_set].sheet},getCurrentImagePath:function e(){return g.img_sets[g.img_set].path},test:function e(){return{emoji:g}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function e(n){var a=0;n.concat().forEach(function(e,t){var o=g.map.colons[e];var r=g.data.hasOwnProperty(o)&&g.data[o];if(!r)return;g.skin_tones.forEach(function(r){if(!m(o,r))return;var i=g.data[r];var s=i[3][0];var l=e+"::"+s;if(-1!==n.indexOf(l))return;a+=1;var c=a+t;n.splice(c,0,l)})})},findByKeyword:function e(n){return g.findByKeyword(n)},maybeGetCanonicalEmojiString:function e(n){if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)return TSFEmoji.translateEmojiStringToCanonical(n,TS.i18n.locale());return n},maybeGetLocalizedEmojiString:function e(n){if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)return TSFEmoji.translateEmojiStringToLocal(n,TS.i18n.locale());return n},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/ecf3e/img/emoji_missing.png);"></span>'});var e={};var n;var t;var o={};var r="E";var i=36;var s=50;var l=function e(){var n;var a={};_.each(_.keys(TS.model.emoji_use),function(e){n=TS.emoji.nameToCanonicalName(e.split("::")[0]);if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)if(A(n))return;if(!a.hasOwnProperty(n))a[n]=0;a[n]+=TS.model.emoji_use[e]});TS.dir(777,a,"condensed emoji names:");var t=Object.keys(a).sort(function(e,n){var t=a[e];var o=a[n];if(t==o){if(e<n)return-1;if(e>n)return 1}return-(t-o)});t.length=Math.min(t.length,4*TS.model.emoji_menu_columns);var o=["slightly_smiling_face","heart","+1","100","bug"];var r;while(t.length<5&&o.length){r=o.shift();if(-1===t.indexOf(r))t.push(r)}TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(t);return t};var c=function e(a){n=a;var t=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});if(!t)TS.emoji.makeMenuLists();var o=[];n.forEach(function(e){var n=p[e];if(n)o.push(n)});t.items=o};var d;var u=function e(){d=d||f();return d};var f=function e(){var n={};var a;Object.keys(g.data).forEach(function(e){a=g.data[e];n[a[3][0]]=null;a[3].forEach(function(e){if(n.hasOwnProperty(e))return;n[e]=a[3][0]})});return n};var m=function e(n,a){if(TS.boot_data.feature_update_emoji_to_v4)return!!(g.variations_data[n]&&g.variations_data[n][a]);return!!g.variations_data[n+"-"+a]};var g=emoji;var p={};var S=[{name:"people",display_name:TS.i18n.t("People","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grimacing","grin","joy","smiley","smile","sweat_smile","laughing","innocent","wink","blush","slightly_smiling_face","upside_down_face","relaxed","yum","relieved","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","stuck_out_tongue","money_mouth_face","nerd_face","sunglasses","hugging_face","smirk","no_mouth","neutral_face","expressionless","unamused","face_with_rolling_eyes","thinking_face","flushed","disappointed","worried","angry","rage","pensive","confused","slightly_frowning_face","white_frowning_face","persevere","confounded","tired_face","weary","triumph","open_mouth","scream","fearful","cold_sweat","hushed","frowning","anguished","cry","disappointed_relieved","sleepy","sweat","sob","dizzy_face","astonished","zipper_mouth_face","mask","face_with_thermometer","face_with_head_bandage","sleeping","zzz","hankey","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","ghost","alien","robot_face","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","raised_hands","clap","wave","+1","-1","facepunch","fist","v","ok_hand","hand","open_hands","muscle","pray","point_up","point_up_2","point_down","point_left","point_right","middle_finger","raised_hand_with_fingers_splayed","the_horns","spock-hand","writing_hand","nail_care","lips","tongue","ear","nose","eye","eyes","bust_in_silhouette","busts_in_silhouette","speaking_head_in_silhouette","baby","boy","girl","man","woman","person_with_blond_hair","older_man","older_woman","man_with_gua_pi_mao","man_with_turban","cop","construction_worker","guardsman","sleuth_or_spy","santa","angel","princess","bride_with_veil","walking","runner","dancer","dancers","couple","two_men_holding_hands","two_women_holding_hands","bow","information_desk_person","no_good","ok_woman","raising_hand","person_with_pouting_face","person_frowning","haircut","massage","couple_with_heart","woman-heart-woman","man-heart-man","couplekiss","woman-kiss-woman","man-kiss-man","family","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","womans_clothes","shirt","jeans","necktie","dress","bikini","kimono","lipstick","kiss","footprints","high_heel","sandal","boot","mans_shoe","athletic_shoe","womans_hat","tophat","helmet_with_white_cross","mortar_board","crown","school_satchel","pouch","purse","handbag","briefcase","eyeglasses","dark_sunglasses","ring","closed_umbrella"]},{name:"nature",display_name:TS.i18n.t("Nature","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["dog","cat","mouse","hamster","rabbit","bear","panda_face","koala","tiger","lion_face","cow","pig","pig_nose","frog","octopus","monkey_face","see_no_evil","hear_no_evil","speak_no_evil","monkey","chicken","penguin","bird","baby_chick","hatching_chick","hatched_chick","wolf","boar","horse","unicorn_face","bee","bug","snail","beetle","ant","spider","scorpion","crab","snake","turtle","tropical_fish","fish","blowfish","dolphin","whale","whale2","crocodile","leopard","tiger2","water_buffalo","ox","cow2","dromedary_camel","camel","elephant","goat","ram","sheep","racehorse","pig2","rat","mouse2","rooster","turkey","dove_of_peace","dog2","poodle","cat2","rabbit2","chipmunk","feet","dragon","dragon_face","cactus","christmas_tree","evergreen_tree","deciduous_tree","palm_tree","seedling","herb","shamrock","four_leaf_clover","bamboo","tanabata_tree","leaves","fallen_leaf","maple_leaf","ear_of_rice","hibiscus","sunflower","rose","tulip","blossom","cherry_blossom","bouquet","mushroom","chestnut","jack_o_lantern","shell","spider_web","earth_americas","earth_africa","earth_asia","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","new_moon","waxing_crescent_moon","first_quarter_moon","moon","new_moon_with_face","full_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","sun_with_face","crescent_moon","star","star2","dizzy","sparkles","comet","sunny","mostly_sunny","partly_sunny","barely_sunny","partly_sunny_rain","cloud","rain_cloud","thunder_cloud_and_rain","lightning","zap","fire","boom","snowflake","snow_cloud","snowman_without_snow","snowman","wind_blowing_face","dash","tornado","fog","umbrella","umbrella_with_rain_drops","droplet","sweat_drops","ocean"]},{name:"food_and_drink",display_name:TS.i18n.t("Food & Drink","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["green_apple","apple","pear","tangerine","lemon","banana","watermelon","grapes","strawberry","melon","cherries","peach","pineapple","tomato","eggplant","hot_pepper","corn","sweet_potato","honey_pot","bread","cheese_wedge","poultry_leg","meat_on_bone","fried_shrimp","egg","hamburger","fries","hotdog","pizza","spaghetti","taco","burrito","ramen","stew","fish_cake","sushi","bento","curry","rice_ball","rice","rice_cracker","oden","dango","shaved_ice","ice_cream","icecream","cake","birthday","custard","candy","lollipop","chocolate_bar","popcorn","doughnut","cookie","beer","beers","wine_glass","cocktail","tropical_drink","champagne","sake","tea","coffee","baby_bottle","fork_and_knife","knife_fork_plate"]},{name:"activity",display_name:TS.i18n.t("Activity","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["soccer","basketball","football","baseball","tennis","volleyball","rugby_football","8ball","golf","golfer","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","ice_hockey_stick_and_puck","field_hockey_stick_and_ball","cricket_bat_and_ball","ski","skier","snowboarder","ice_skate","bow_and_arrow","fishing_pole_and_fish","rowboat","swimmer","surfer","bath","person_with_ball","weight_lifter","bicyclist","mountain_bicyclist","horse_racing","man_in_business_suit_levitating","trophy","running_shirt_with_sash","sports_medal","medal","reminder_ribbon","rosette","ticket","admission_tickets","performing_arts","art","circus_tent","microphone","headphones","musical_score","musical_keyboard","saxophone","trumpet","guitar","violin","clapper","video_game","space_invader","dart","game_die","slot_machine","bowling"]},{name:"travel_and_places",display_name:TS.i18n.t("Travel & Places","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["car","taxi","blue_car","bus","trolleybus","racing_car","police_car","ambulance","fire_engine","minibus","truck","articulated_lorry","tractor","racing_motorcycle","bike","rotating_light","oncoming_police_car","oncoming_bus","oncoming_automobile","oncoming_taxi","aerial_tramway","mountain_cableway","suspension_railway","railway_car","train","monorail","bullettrain_side","bullettrain_front","light_rail","mountain_railway","steam_locomotive","train2","metro","tram","station","helicopter","small_airplane","airplane","airplane_departure","airplane_arriving","boat","motor_boat","speedboat","ferry","passenger_ship","rocket","satellite","seat","anchor","construction","fuelpump","busstop","vertical_traffic_light","traffic_light","checkered_flag","ship","ferris_wheel","roller_coaster","carousel_horse","building_construction","foggy","tokyo_tower","factory","fountain","rice_scene","mountain","snow_capped_mountain","mount_fuji","volcano","japan","camping","tent","national_park","motorway","railway_track","sunrise","sunrise_over_mountains","desert","beach_with_umbrella","desert_island","city_sunrise","city_sunset","cityscape","night_with_stars","bridge_at_night","milky_way","stars","sparkler","fireworks","rainbow","house_buildings","european_castle","japanese_castle","stadium","statue_of_liberty","house","house_with_garden","derelict_house_building","office","department_store","post_office","european_post_office","hospital","bank","hotel","convenience_store","school","love_hotel","wedding","classical_building","church","mosque","synagogue","kaaba","shinto_shrine"]},{name:"objects",display_name:TS.i18n.t("Objects","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["watch","iphone","calling","computer","keyboard","desktop_computer","printer","three_button_mouse","trackball","joystick","compression","minidisc","floppy_disk","cd","dvd","vhs","camera","camera_with_flash","video_camera","movie_camera","film_projector","film_frames","telephone_receiver","phone","pager","fax","tv","radio","studio_microphone","level_slider","control_knobs","stopwatch","timer_clock","alarm_clock","mantelpiece_clock","hourglass_flowing_sand","hourglass","satellite_antenna","battery","electric_plug","bulb","flashlight","candle","wastebasket","oil_drum","money_with_wings","dollar","yen","euro","pound","moneybag","credit_card","gem","scales","wrench","hammer","hammer_and_pick","hammer_and_wrench","pick","nut_and_bolt","gear","chains","gun","bomb","hocho","dagger_knife","crossed_swords","shield","smoking","skull_and_crossbones","coffin","funeral_urn","amphora","crystal_ball","prayer_beads","barber","alembic","telescope","microscope","hole","pill","syringe","thermometer","label","bookmark","toilet","shower","bathtub","key","old_key","couch_and_lamp","sleeping_accommodation","bed","door","bellhop_bell","frame_with_picture","world_map","umbrella_on_ground","moyai","shopping_bags","balloon","flags","ribbon","gift","confetti_ball","tada","dolls","wind_chime","crossed_flags","izakaya_lantern","email","envelope_with_arrow","incoming_envelope","e-mail","love_letter","postbox","mailbox_closed","mailbox","mailbox_with_mail","mailbox_with_no_mail","package","postal_horn","inbox_tray","outbox_tray","scroll","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","page_facing_up","date","calendar","spiral_calendar_pad","card_index","card_file_box","ballot_box_with_ballot","file_cabinet","clipboard","spiral_note_pad","file_folder","open_file_folder","card_index_dividers","rolled_up_newspaper","newspaper","notebook","closed_book","green_book","blue_book","orange_book","notebook_with_decorative_cover","ledger","books","book","link","paperclip","linked_paperclips","scissors","triangular_ruler","straight_ruler","pushpin","round_pushpin","triangular_flag_on_post","waving_white_flag","waving_black_flag","closed_lock_with_key","lock","unlock","lock_with_ink_pen","lower_left_ballpoint_pen","lower_left_fountain_pen","black_nib","memo","pencil2","lower_left_crayon","lower_left_paintbrush","mag","mag_right"]},{name:"symbols",display_name:TS.i18n.t("Symbols","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["heart","yellow_heart","green_heart","blue_heart","purple_heart","broken_heart","heavy_heart_exclamation_mark_ornament","two_hearts","revolving_hearts","heartbeat","heartpulse","sparkling_heart","cupid","gift_heart","heart_decoration","peace_symbol","latin_cross","star_and_crescent","om_symbol","wheel_of_dharma","star_of_david","six_pointed_star","menorah_with_nine_branches","yin_yang","orthodox_cross","place_of_worship","ophiuchus","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","id","atom_symbol","u7a7a","u5272","radioactive_sign","biohazard_sign","mobile_phone_off","vibration_mode","u6709","u7121","u7533","u55b6","u6708","eight_pointed_black_star","vs","accept","white_flower","ideograph_advantage","secret","congratulations","u5408","u6e80","u7981","a","b","ab","cl","o2","sos","no_entry","name_badge","no_entry_sign","x","o","anger","hotsprings","no_pedestrians","do_not_litter","no_bicycles","non-potable_water","underage","no_mobile_phones","exclamation","grey_exclamation","question","grey_question","bangbang","interrobang","100","low_brightness","high_brightness","trident","fleur_de_lis","part_alternation_mark","warning","children_crossing","beginner","recycle","u6307","chart","sparkle","eight_spoked_asterisk","eject","negative_squared_cross_mark","white_check_mark","diamond_shape_with_a_dot_inside","cyclone","loop","globe_with_meridians","m","atm","sa","passport_control","customs","baggage_claim","left_luggage","wheelchair","no_smoking","wc","parking","potable_water","mens","womens","baby_symbol","restroom","put_litter_in_its_place","cinema","signal_strength","koko","ng","ok","up","cool","new","free","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","keycap_star","1234","arrow_forward","double_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","black_square_for_stop","black_circle_for_record","black_right_pointing_double_triangle_with_vertical_bar","black_left_pointing_double_triangle_with_vertical_bar","fast_forward","rewind","twisted_rightwards_arrows","repeat","repeat_one","arrow_backward","arrow_up_small","arrow_down_small","arrow_double_up","arrow_double_down","arrow_right","arrow_left","arrow_up","arrow_down","arrow_upper_right","arrow_lower_right","arrow_lower_left","arrow_upper_left","arrow_up_down","left_right_arrow","arrows_counterclockwise","arrow_right_hook","leftwards_arrow_with_hook","arrow_heading_up","arrow_heading_down","hash","information_source","abc","abcd","capital_abcd","symbols","musical_note","notes","wavy_dash","curly_loop","heavy_check_mark","arrows_clockwise","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_multiplication_x","heavy_dollar_sign","currency_exchange","copyright","registered","tm","end","back","on","top","soon","ballot_box_with_check","radio_button","white_circle","black_circle","red_circle","large_blue_circle","small_orange_diamond","small_blue_diamond","large_orange_diamond","large_blue_diamond","small_red_triangle","black_small_square","white_small_square","black_large_square","white_large_square","small_red_triangle_down","black_medium_square","white_medium_square","black_medium_small_square","white_medium_small_square","black_square_button","white_square_button","speaker","sound","loud_sound","mute","mega","loudspeaker","bell","no_bell","black_joker","mahjong","spades","clubs","hearts","diamonds","flower_playing_cards","thought_balloon","right_anger_bubble","speech_balloon","left_speech_bubble","clock1","clock2","clock3","clock4","clock5","clock6","clock7","clock8","clock9","clock10","clock11","clock12","clock130","clock230","clock330","clock430","clock530","clock630","clock730","clock830","clock930","clock1030","clock1130","clock1230"]},{name:"flags",display_name:TS.i18n.t("Flags","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","flag-cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","flag-de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","flag-es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","flag-fr","flag-ga","flag-gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","flag-it","flag-je","flag-jm","flag-jo","flag-jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","flag-kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","flag-ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw"]}];if(!TS.boot_data.feature_update_emoji_to_v4)S.forEach(function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)});var h=function e(){_.find(S,{name:"people"}).emoji_names=["grinning","smiley","smile","grin","laughing","sweat_smile","joy","rolling_on_the_floor_laughing","relaxed","blush","innocent","slightly_smiling_face","upside_down_face","wink","relieved","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","yum","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","stuck_out_tongue","money_mouth_face","hugging_face","nerd_face","sunglasses","clown_face","face_with_cowboy_hat","smirk","unamused","disappointed","pensive","worried","confused","slightly_frowning_face","white_frowning_face","persevere","confounded","tired_face","weary","triumph","angry","rage","no_mouth","neutral_face","expressionless","hushed","frowning","anguished","open_mouth","astonished","dizzy_face","flushed","scream","fearful","cold_sweat","cry","disappointed_relieved","drooling_face","sob","sweat","sleepy","sleeping","face_with_rolling_eyes","thinking_face","lying_face","grimacing","zipper_mouth_face","nauseated_face","sneezing_face","mask","face_with_thermometer","face_with_head_bandage","smiling_imp","imp","japanese_ogre","japanese_goblin","hankey","ghost","skull","skull_and_crossbones","alien","space_invader","robot_face","jack_o_lantern","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","open_hands","raised_hands","clap","pray","handshake","+1","-1","facepunch","fist","left-facing_fist","right-facing_fist","hand_with_index_and_middle_fingers_crossed","v","the_horns","ok_hand","point_left","point_right","point_up_2","point_down","point_up","hand","raised_back_of_hand","raised_hand_with_fingers_splayed","spock-hand","wave","call_me_hand","muscle","middle_finger","writing_hand","selfie","nail_care","ring","lipstick","kiss","lips","tongue","ear","nose","footprints","eye","eyes","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","baby","boy","girl","man","woman","blond-haired-woman","person_with_blond_hair","older_man","older_woman","man_with_gua_pi_mao","woman-wearing-turban","man_with_turban","female-police-officer","cop","female-construction-worker","construction_worker","female-guard","guardsman","female-detective","sleuth_or_spy","female-doctor","male-doctor","female-farmer","male-farmer","female-cook","male-cook","female-student","male-student","female-singer","male-singer","female-teacher","male-teacher","female-factory-worker","male-factory-worker","female-technologist","male-technologist","female-office-worker","male-office-worker","female-mechanic","male-mechanic","female-scientist","male-scientist","female-artist","male-artist","female-firefighter","male-firefighter","female-pilot","male-pilot","female-astronaut","male-astronaut","female-judge","male-judge","mother_christmas","santa","princess","prince","bride_with_veil","man_in_tuxedo","angel","pregnant_woman","woman-bowing","bow","information_desk_person","man-tipping-hand","no_good","man-gesturing-no","ok_woman","man-gesturing-ok","raising_hand","man-raising-hand","face_palm","woman-facepalming","man-facepalming","shrug","woman-shrugging","man-shrugging","person_with_pouting_face","man-pouting","person_frowning","man-frowning","haircut","man-getting-haircut","massage","man-getting-massage","man_in_business_suit_levitating","dancer","man_dancing","dancers","man-with-bunny-ears-partying","woman-walking","walking","woman-running","runner","couple","two_women_holding_hands","two_men_holding_hands","couple_with_heart","woman-heart-woman","man-heart-man","couplekiss","woman-kiss-woman","man-kiss-man","family","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-boy","woman-girl","woman-girl-boy","woman-boy-boy","woman-girl-girl","man-boy","man-girl","man-girl-boy","man-boy-boy","man-girl-girl","womans_clothes","shirt","jeans","necktie","dress","bikini","kimono","high_heel","sandal","boot","mans_shoe","athletic_shoe","womans_hat","tophat","mortar_board","crown","helmet_with_white_cross","school_satchel","pouch","purse","handbag","briefcase","eyeglasses","dark_sunglasses","closed_umbrella","umbrella","man-woman-boy","woman-heart-man","woman-kiss-man","male-police-officer","blond-haired-man","man-wearing-turban","male-construction-worker","male-guard","male-detective","woman-with-bunny-ears-partying","man-running","woman-getting-massage","woman-getting-haircut","man-walking","woman-tipping-hand","woman-gesturing-no","woman-gesturing-ok","man-bowing","woman-raising-hand","woman-frowning","woman-pouting"];_.find(S,{name:"nature"}).emoji_names=["dog","cat","mouse","hamster","rabbit","fox_face","bear","panda_face","koala","tiger","lion_face","cow","pig","pig_nose","frog","monkey_face","see_no_evil","hear_no_evil","speak_no_evil","monkey","chicken","penguin","bird","baby_chick","hatching_chick","hatched_chick","duck","eagle","owl","bat","wolf","boar","horse","unicorn_face","bee","bug","butterfly","snail","shell","beetle","ant","spider","spider_web","turtle","snake","lizard","scorpion","crab","squid","octopus","shrimp","tropical_fish","fish","blowfish","dolphin","shark","whale","whale2","crocodile","leopard","tiger2","water_buffalo","ox","cow2","deer","dromedary_camel","camel","elephant","rhinoceros","gorilla","racehorse","pig2","goat","ram","sheep","dog2","poodle","cat2","rooster","turkey","dove_of_peace","rabbit2","mouse2","rat","chipmunk","feet","dragon","dragon_face","cactus","christmas_tree","evergreen_tree","deciduous_tree","palm_tree","seedling","herb","shamrock","four_leaf_clover","bamboo","tanabata_tree","leaves","fallen_leaf","maple_leaf","mushroom","ear_of_rice","bouquet","tulip","rose","wilted_flower","sunflower","blossom","cherry_blossom","hibiscus","earth_americas","earth_africa","earth_asia","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","new_moon","waxing_crescent_moon","first_quarter_moon","moon","new_moon_with_face","full_moon_with_face","sun_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","crescent_moon","dizzy","star","star2","sparkles","zap","fire","boom","comet","sunny","mostly_sunny","partly_sunny","barely_sunny","partly_sunny_rain","rainbow","cloud","rain_cloud","thunder_cloud_and_rain","lightning","snow_cloud","snowman","snowman_without_snow","snowflake","wind_blowing_face","dash","tornado","fog","ocean","droplet","sweat_drops","umbrella_with_rain_drops"];_.find(S,{name:"food_and_drink"}).emoji_names=["green_apple","apple","pear","tangerine","lemon","banana","watermelon","grapes","strawberry","melon","cherries","peach","pineapple","kiwifruit","avocado","tomato","eggplant","cucumber","carrot","corn","hot_pepper","potato","sweet_potato","chestnut","peanuts","honey_pot","croissant","bread","baguette_bread","cheese_wedge","egg","fried_egg","bacon","pancakes","fried_shrimp","poultry_leg","meat_on_bone","pizza","hotdog","hamburger","fries","stuffed_flatbread","taco","burrito","green_salad","shallow_pan_of_food","spaghetti","ramen","stew","fish_cake","sushi","bento","curry","rice","rice_ball","rice_cracker","oden","dango","shaved_ice","ice_cream","icecream","cake","birthday","custard","lollipop","candy","chocolate_bar","popcorn","doughnut","cookie","glass_of_milk","baby_bottle","coffee","tea","sake","beer","beers","clinking_glasses","wine_glass","tumbler_glass","cocktail","tropical_drink","champagne","spoon","fork_and_knife","knife_fork_plate"];_.find(S,{name:"activity"}).emoji_names=["soccer","basketball","football","baseball","tennis","volleyball","rugby_football","8ball","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","goal_net","ice_hockey_stick_and_puck","field_hockey_stick_and_ball","cricket_bat_and_ball","golf","bow_and_arrow","fishing_pole_and_fish","boxing_glove","martial_arts_uniform","ice_skate","ski","skier","snowboarder","woman-lifting-weights","weight_lifter","fencer","wrestlers","woman-wrestling","man-wrestling","person_doing_cartwheel","woman-cartwheeling","man-cartwheeling","woman-bouncing-ball","person_with_ball","handball","woman-playing-handball","man-playing-handball","woman-golfing","golfer","woman-surfing","surfer","woman-swimming","swimmer","water_polo","woman-playing-water-polo","man-playing-water-polo","woman-rowing-boat","rowboat","horse_racing","woman-biking","bicyclist","woman-mountain-biking","mountain_bicyclist","running_shirt_with_sash","sports_medal","medal","first_place_medal","second_place_medal","third_place_medal","trophy","rosette","reminder_ribbon","ticket","admission_tickets","circus_tent","juggling","woman-juggling","man-juggling","performing_arts","art","clapper","microphone","headphones","musical_score","musical_keyboard","drum_with_drumsticks","saxophone","trumpet","guitar","violin","game_die","dart","bowling","video_game","slot_machine","man-bouncing-ball","man-lifting-weights","man-golfing","man-surfing","man-swimming","man-rowing-boat","man-biking","man-mountain-biking"];_.find(S,{name:"travel_and_places"}).emoji_names=["car","taxi","blue_car","bus","trolleybus","racing_car","police_car","ambulance","fire_engine","minibus","truck","articulated_lorry","tractor","scooter","bike","motor_scooter","racing_motorcycle","rotating_light","oncoming_police_car","oncoming_bus","oncoming_automobile","oncoming_taxi","aerial_tramway","mountain_cableway","suspension_railway","railway_car","train","mountain_railway","monorail","bullettrain_side","bullettrain_front","light_rail","steam_locomotive","train2","metro","tram","station","helicopter","small_airplane","airplane","airplane_departure","airplane_arriving","rocket","satellite","seat","canoe","boat","motor_boat","speedboat","passenger_ship","ferry","ship","anchor","construction","fuelpump","busstop","vertical_traffic_light","traffic_light","world_map","moyai","statue_of_liberty","fountain","tokyo_tower","european_castle","japanese_castle","stadium","ferris_wheel","roller_coaster","carousel_horse","umbrella_on_ground","beach_with_umbrella","desert_island","mountain","snow_capped_mountain","mount_fuji","volcano","desert","camping","tent","railway_track","motorway","building_construction","factory","house","house_with_garden","house_buildings","derelict_house_building","office","department_store","post_office","european_post_office","hospital","bank","hotel","convenience_store","school","love_hotel","wedding","classical_building","church","mosque","synagogue","kaaba","shinto_shrine","japan","rice_scene","national_park","sunrise","sunrise_over_mountains","stars","sparkler","fireworks","city_sunrise","city_sunset","cityscape","night_with_stars","milky_way","bridge_at_night","foggy"];_.find(S,{name:"objects"}).emoji_names=["watch","iphone","calling","computer","keyboard","desktop_computer","printer","three_button_mouse","trackball","joystick","compression","minidisc","floppy_disk","cd","dvd","vhs","camera","camera_with_flash","video_camera","movie_camera","film_projector","film_frames","telephone_receiver","phone","pager","fax","tv","radio","studio_microphone","level_slider","control_knobs","stopwatch","timer_clock","alarm_clock","mantelpiece_clock","hourglass","hourglass_flowing_sand","satellite_antenna","battery","electric_plug","bulb","flashlight","candle","wastebasket","oil_drum","money_with_wings","dollar","yen","euro","pound","moneybag","credit_card","gem","scales","wrench","hammer","hammer_and_pick","hammer_and_wrench","pick","nut_and_bolt","gear","chains","gun","bomb","hocho","dagger_knife","crossed_swords","shield","smoking","coffin","funeral_urn","amphora","crystal_ball","prayer_beads","barber","alembic","telescope","microscope","hole","pill","syringe","thermometer","toilet","potable_water","shower","bathtub","bath","bellhop_bell","key","old_key","door","couch_and_lamp","bed","sleeping_accommodation","frame_with_picture","shopping_bags","shopping_trolley","gift","balloon","flags","ribbon","confetti_ball","tada","dolls","izakaya_lantern","wind_chime","email","envelope_with_arrow","incoming_envelope","e-mail","love_letter","inbox_tray","outbox_tray","package","label","mailbox_closed","mailbox","mailbox_with_mail","mailbox_with_no_mail","postbox","postal_horn","scroll","page_with_curl","page_facing_up","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","spiral_note_pad","spiral_calendar_pad","calendar","date","card_index","card_file_box","ballot_box_with_ballot","file_cabinet","clipboard","file_folder","open_file_folder","card_index_dividers","rolled_up_newspaper","newspaper","notebook","notebook_with_decorative_cover","ledger","closed_book","green_book","blue_book","orange_book","books","book","bookmark","link","paperclip","linked_paperclips","triangular_ruler","straight_ruler","pushpin","round_pushpin","scissors","lower_left_ballpoint_pen","lower_left_fountain_pen","black_nib","lower_left_paintbrush","lower_left_crayon","memo","pencil2","mag","mag_right","lock_with_ink_pen","closed_lock_with_key","lock","unlock"];_.find(S,{name:"symbols"}).emoji_names=["heart","yellow_heart","green_heart","blue_heart","purple_heart","black_heart","broken_heart","heavy_heart_exclamation_mark_ornament","two_hearts","revolving_hearts","heartbeat","heartpulse","sparkling_heart","cupid","gift_heart","heart_decoration","peace_symbol","latin_cross","star_and_crescent","om_symbol","wheel_of_dharma","star_of_david","six_pointed_star","menorah_with_nine_branches","yin_yang","orthodox_cross","place_of_worship","ophiuchus","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","id","atom_symbol","accept","radioactive_sign","biohazard_sign","mobile_phone_off","vibration_mode","u6709","u7121","u7533","u55b6","u6708","eight_pointed_black_star","vs","white_flower","ideograph_advantage","secret","congratulations","u5408","u6e80","u5272","u7981","a","b","ab","cl","o2","sos","x","o","octagonal_sign","no_entry","name_badge","no_entry_sign","100","anger","hotsprings","no_pedestrians","do_not_litter","no_bicycles","non-potable_water","underage","no_mobile_phones","no_smoking","exclamation","grey_exclamation","question","grey_question","bangbang","interrobang","low_brightness","high_brightness","part_alternation_mark","warning","children_crossing","trident","fleur_de_lis","beginner","recycle","white_check_mark","u6307","chart","sparkle","eight_spoked_asterisk","negative_squared_cross_mark","globe_with_meridians","diamond_shape_with_a_dot_inside","m","cyclone","zzz","atm","wc","wheelchair","parking","u7a7a","sa","passport_control","customs","baggage_claim","left_luggage","mens","womens","baby_symbol","restroom","put_litter_in_its_place","cinema","signal_strength","koko","symbols","information_source","abc","abcd","capital_abcd","ng","ok","up","cool","new","free","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","1234","hash","keycap_star","arrow_forward","double_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","black_square_for_stop","eject","black_circle_for_record","black_right_pointing_double_triangle_with_vertical_bar","black_left_pointing_double_triangle_with_vertical_bar","fast_forward","rewind","arrow_double_up","arrow_double_down","arrow_backward","arrow_up_small","arrow_down_small","arrow_right","arrow_left","arrow_up","arrow_down","arrow_upper_right","arrow_lower_right","arrow_lower_left","arrow_upper_left","arrow_up_down","left_right_arrow","arrow_right_hook","leftwards_arrow_with_hook","arrow_heading_up","arrow_heading_down","twisted_rightwards_arrows","repeat","repeat_one","arrows_counterclockwise","arrows_clockwise","musical_note","notes","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_multiplication_x","heavy_dollar_sign","currency_exchange","tm","copyright","registered","wavy_dash","curly_loop","loop","end","back","on","top","soon","heavy_check_mark","ballot_box_with_check","radio_button","white_circle","black_circle","red_circle","large_blue_circle","small_red_triangle","small_red_triangle_down","small_orange_diamond","small_blue_diamond","large_orange_diamond","large_blue_diamond","white_square_button","black_square_button","black_small_square","white_small_square","black_medium_small_square","white_medium_small_square","black_medium_square","white_medium_square","black_large_square","white_large_square","speaker","mute","sound","loud_sound","bell","no_bell","mega","loudspeaker","eye-in-speech-bubble","speech_balloon","left_speech_bubble","thought_balloon","right_anger_bubble","spades","clubs","hearts","diamonds","black_joker","flower_playing_cards","mahjong","clock1","clock2","clock3","clock4","clock5","clock6","clock7","clock8","clock9","clock10","clock11","clock12","clock130","clock230","clock330","clock430","clock530","clock630","clock730","clock830","clock930","clock1030","clock1130","clock1230","female_sign","male_sign","staff_of_aesculapius"];_.find(S,{name:"flags"}).emoji_names=["checkered_flag","crossed_flags","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","flag-cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","flag-de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","flag-es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","flag-fr","flag-ga","flag-gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","flag-it","flag-je","flag-jm","flag-jo","flag-jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","flag-kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","flag-ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","flag-us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","rainbow-flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"]};var T=function e(){TS.emoji.setUpEmoji()};var b=function e(){if(TS.client&&TS.model.ms_logged_in_once){TS.client.msg_pane.rebuildMsgsWithReason("_toggleJumbomoji");TS.view.rebuildMentions();TS.view.rebuildStars();if(TS.model.previewed_file_id)TS.client.ui.files.rebuildFilePreview()}};var v=function e(){if(g.unaltered_data){g.data=_.cloneDeep(g.unaltered_data);g.inits={}}g.ts_init_colons()};var w=function e(){TS.emoji.setEmojiMode();TS.emoji.makeMenuLists();var n=false;var a=!!TS.model.ms_logged_in_once;var t=true;if(TS.client&&a)TS.client.ui.rebuildAll(n,t)};var y=function e(n,a,t){if(!g)return;var o=TS.storage.fetchCustomEmoji();if(!o){TS.emoji.resetUpEmoji();return}if("undefined"===typeof a){delete TS.model.emoji_use[n];if(!o.data.hasOwnProperty(n))return;delete o.data[n];_.remove(TS.model.emoji_map,{name:n})}else o.data[n]=a;TS.model.emoji_cache_ts=t;TS.storage.storeCustomEmoji({data:o.data,cache_ts:TS.model.emoji_cache_ts});v();TS.emoji.ingestCustoms(o.data);w()};var k=function e(){var n=TS.model.all_custom_emoji;if(TS.boot_data.feature_localization&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)n=j(n);return n};var A=function e(n){return!!o[n]};var j=function e(n){return _.filter(n,function(e){return!A(e)})};var E=function e(){var n=TS.ui.frecency.getMostCommonWithPrefix(r,s);n=_.map(n,"id");if(!n.length)return[];var a=TS.emoji.getChosenSkinTone(!!TS.boot_data.feature_localization);var t=_.keyBy(TS.model.emoji_map,"id");var o=[];return _.chain(n).map(function(e){var n=t[e];if(!n)return null;var r=n.display_name;if(a&&n.is_skin)r=r+"::"+a;var i=p[r];if(!i)return null;if(TS.emoji.emojiHasAliases(i)){var s=i.names.split(" ");for(var l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(o.includes(c))return null}}o.push(r);return r}).compact().take(i).value()}})()},4176:function(e,n){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){"use strict";var e=function e(n,a){var t=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none");var o=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none");var r={description:a,error_json:JSON.stringify(n),team:t,user:o,version:TS.boot_data.version_ts};$.post(TS.boot_data.beacon_error_url,r)};var n=function e(n,a,t){if(!window.console||!console[n])return;var o=TS.qs_args.clean_log;var i=null!==a;t=Array.prototype.slice.call(t);if(i){if(!TS.console.shouldLog(a))return;t.splice(0,1)}t=_.map(t,function(e){return r(e)});var s=true;var l=t.length;while(s&&l){l-=1;s="string"===typeof t[l]}if(o&&"error"!==n&&(a!==parseInt(TS.qs_args.pri,10)||!i))return;if(s){var c=TS.makeLogDate();if(i&&!o)c+="[** "+a+" **]";t.unshift(c);console[n](t.join(" "))}else console[n].apply(console,t)};if(!window.TS)window.TS={};TS.console={onStart:function e(){TS.console.setAppropriatePri(true);TS.console.watchForErrors()},count:function e(){n("count",null,arguments)},dir:function e(n,a,t){if(!window.console||!console.dir)return;if(n&&!TS.shouldLog(n))return;t=t||"";a=r(a);var o=parseInt(TS.qs_args.dir_json,10);if(o){var i=1==o?"2000":o;try{var s=JSON.stringify(a,null,"  ");if(s.length>i)throw new Error("too long");console.info(TS.makeLogDate()+"[** "+n+" **] "+t+" "+s);return}catch(e){if("too long"!==e){console.info(TS.makeLogDate()+"[** "+n+" **] "+t+" "+a);return}}}try{var l=_.cloneDeep(a);console.info(TS.makeLogDate()+"[** "+n+" **] "+t+" 👇");console.dir(l)}catch(e){TS.warn("could not dir ob:"+a+" err:"+e)}},error:function e(){n("error",null,arguments)},group:function e(){n("group",null,arguments)},groupCollapsed:function e(){n("groupCollapsed",null,arguments)},groupEnd:function e(){n("groupEnd",null,arguments)},maybeError:function e(a){n("error",a,arguments)},getStackTrace:function e(){var n="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path");var a=(new Error).stack;if(n){var t=new Error;var o=Promise.resolve();if(_.isFunction(o._attachExtraTrace)){o._attachExtraTrace(t);a=t.stack||"";var r=a.split("\n");if(r.length&&r.indexOf("From previous event:")>=0){var i=r.indexOf("From previous event:")+1;a=[r[0]].concat(r.slice(i)).join("\n")}}}var s;if(!a)s=["no stacktrace available"];else s=a.split&&a.split("\n")||["[could not parse stack]",a];s=_.filter(s,function(e){if(0===e.indexOf("Error"))return false;return e.trim().length&&-1===e.indexOf("StackTrace")});s=_.map(s,function(e){return e.trim()});var l=s.join("\n");return l},info:function e(){n("info",null,arguments)},log:function e(a){n("log",a,arguments)},logError:function n(a,t,o,r){var i=a instanceof Error?a:new Error;var s={subtype:o||"none",message:a instanceof Error?a.message||a.description:JSON.stringify(a),fileName:i.fileName||i.sourceURL,lineNumber:i.lineNumber||i.line,stack:i.stack||i.backtrace||i.stacktrace};e(s,t);if(!r&&window.console&&console.error)console.error(TS.makeLogDate()+"logging "+(a?"e: "+a:"")+(a&&a.stack?" e.stack: "+a.stack:"")+(t?" desc: "+t:"")+(a&&a.message?" e.message: "+a.message:""))},logStackTrace:function e(n){var a=_.isUndefined(n)?"":n+"\n";TS.console.info(a+"Stacktrace: ↴\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function n(a,t,o){if(!t||!o||!a){TS.console.warn("Invalid parameters, will not log stack trace");return}var r=TS.console.getStackTrace();var i=_.get(r.split("\n"),"[1]");TS.metrics.count(t+"_v"+o);var s={message:a+". Immediate caller: "+i,stack:r};var l=i.match(/\((.+):(\d+:\d+)\)/);if(l&&3==l.length){s.fileName=l[1];s.lineNumber=l[2]}var c=t+"_caller_v"+o;e(s,c)},profile:function e(){n("profile",null,arguments)},profileEnd:function e(){n("profileEnd",null,arguments)},replaceConsoleFunction:function e(a){var t=n;n=a;return t},setAppropriatePri:function e(n){var a="";if(TS.qs_args.pri)a+=TS.qs_args.pri;if(n&&TS.boot_data.client_logs_pri){if(""!==a)a+=",";a+=TS.boot_data.client_logs_pri}if(TS.model&&TS.model.prefs&&TS.model.prefs.client_logs_pri){if(""!==a)a+=",";a+=TS.model.prefs.client_logs_pri}if(""!==a)a+=",";a+="0";TS.pri=_.uniq(a.split(",")).join(",");t()},shouldLog:function e(n){var a=String(TS.pri).split(",");if(-1!==a.indexOf("all")||-1!==a.indexOf("*"))return true;if(-1!==a.indexOf(String(n)))return true;return"undefined"!==typeof TS.has_pri[n]},table:function e(){n("table",null,arguments)},time:function e(){n("time",null,arguments)},timeEnd:function e(){n("timeEnd",null,arguments)},timeStamp:function e(){n("timeStamp",null,arguments)},warn:function e(){n("warn",null,arguments)},maybeWarn:function e(a){n("warn",a,arguments)},watchForErrors:function e(){if(!TS.boot_data||!TS.boot_data.feature_tinyspeck)return;var n=true;window.addEventListener("error",s,n)},trace:function e(){n("trace",null,arguments)},maybeTrace:function e(a){n("trace",a,arguments)},test:function e(){return{_maybeRedactFields:r,_windowErrorHandler:s}}};var t=function e(){var n=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter(function(e){var a=TS.boot_data.client_logs[e];return n.some(function(e){if("*"===e)return true;if(a.numbers.indexOf(parseInt(e,10))>-1)return true;if(a.name&&a.name.indexOf(e)>-1)return true;if(a.owner&&a.owner.indexOf(e)>-1)return true;return false})}).map(function(e){if(parseInt(e,10)>=0)return parseInt(e,10);return e}).keyBy(function(e){return e}).value()};var o={name:1,real_name:1,src:1,text:1,msgs:1};var r=function e(n,a){if(!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts)return n;if(!n||!_.isObject(n))return n;if(a)a+=1;else a=1;if(a>=10)return n;var t;if(_.isArray(n))t=[];else t={};_.each(n,function(n,r){if(o[r])t[r]="[redacted "+i(n)+"]";else t[r]=e(n,a)});return t};var i=function(e){var n={};return function(t){var o="undefined"===typeof t?"undefined":a(t);if(null===t)return"null";if(t===e)return"global";if("object"!==o)return o;if(t.nodeType)return"DOM node";var r=n[o={}.toString.call(t)]||(n[o]=o.slice(8,-1).toLowerCase());return r}}(this);var s=function e(){var n=arguments&&arguments[0];var a;var t="";var o;var r=true;if(!n)return;t="";a=n.srcElement||n.target;if(a&&a.nodeName)if("SCRIPT"===a.nodeName)t=(n.type||"error")+" from script at "+a.src+" (failed to load?)";else if("IMG"===a.nodeName){if(TS.pri&&TS.console&&TS.console.warn)TS.console.warn("<img> fired error with url = "+(a.src||a.currentSrc||"unkonwn"));return}if(n.error&&n.error.stack)t+=n.error.stack;else if(n.filename)t=" from "+n.filename+(n.lineno?" @ line "+n.lineno+", col "+n.colno:"");o=(!n.error||!n.error.stack?n.message||"":"")+" "+t;if(o&&o.replace)o=o.replace(/\s+/g," ").trim();if(!o||!o.length){if(a)o="error event from node of "+(a.nodeName||"unknown")+", no message provided?";else o="error event fired, no relevant message or node found";r=false}o="🐞 "+o;(TS.console&&TS.console.error||window.console.error||function(){})(o);if(r){var i=null;var s=false;TS.console.logError(n.error||n,o,i,s)}a=null;o=null}})()},4177:function(e,n){(function(){"use strict";if(!window.TS)window.TS={};TS.features={isEnabled:function e(n){if(0===n.indexOf("feature_")){TS.console.warn("Do not prefix your feature flag check with `feature_`. Flag:",n);return}if(_.isUndefined(TS.boot_data)){TS.console.warn("Trying to check feature flag before TS.boot_data is available");return}var a="feature_"+n;if(_.isUndefined(TS.boot_data[a])){TS.console.warn("Trying to access feature flag not present in TS.boot_data -- Expose your feature flag to JS. Flag:",n);return}return TS.boot_data[a]}}})()},4178:function(e,n){(function(){"use strict";var e=window.TS&&TS.raw_templates;var n=window.TS&&TS.console;var a=window.TS&&TS.features;var t=0;var o;var r;var i=false;var s=7e4;window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:n,features:a,exportToLegacy:function e(n,a){if(_.has(TS,n))throw new Error("exportToLegacy: there is already something at "+n+"; we cannot overwrite it");if(!n||0!==n.indexOf("interop"))throw new Error("exportToLegacy: Name "+n+' must start with "interop".');if(a.onStart)throw new Error("exportToLegacy: may not export objects with onStart methods");if(O)_.set(TS,n,a);else TS.registerModule(n,a)},boot:function e(n){U(n);r=new Promise(function(e){o=e});TS.boot_data=n;if(TS.qs_args.js_path)TS.boot_data.version_ts="local_js";TS.console.onStart();if(TS.client)TS.client.setClientLoadWatchdogTimer();TS.model.api_url=TS.boot_data.api_url;TS.model.async_api_url=TS.boot_data.async_api_url;TS.model.api_token=TS.boot_data.api_token;if(TS.boot_data.feature_fast_boot_prototype)localStorage.setItem("token",TS.boot_data.api_token);TS.model.webhook_url=TS.boot_data.webhook_url;if(TS.boot_data.page_needs_enterprise)TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token;TS.info("booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)");if(TS.web&&TS.web.space)TS.web.space.showFastPreview();if(TS.incremental_boot.shouldIncrementalBoot()){TS.info("Starting incremental boot (early)");x=TS.incremental_boot.startIncrementalBoot()}$(document).ready(N)},useReactDownloads:function e(){return window.TS&&TS.environment.isSSBAndAtLeastVersion("2.7")},useReactSidebar:function e(){return TS.boot_data.feature_react_sidebar},useReactMessages:function e(){return TS.client&&(TS.boot_data.feature_react_messages||TS.boot_data.use_react_messages)},useReduxMembers:function e(){return TS.boot_data.feature_store_members_in_redux||TS.boot_data.use_react_messages},useReactLFS:function e(){return TS.boot_data.feature_react_lfs},useSocket:function e(){return K()},isSocketManagerEnabled:function e(){if(!TS.useSocket())return false;return"experiment"===TS.boot_data.ws_refactor_bucket},getSocketStartArgs:function e(){return m()},registerModule:function e(n,a,t){H(a);if(O)return TS.error('module "'+n+'" must be registered on before dom ready');if(z[n])return TS.error('module "'+n+'" already exists');var o=l(n,a,"module");if(void 0===o){if(t)TS.error('module "'+n+'" cannot be registered after delay; "'+n.split(".").slice(0,-1).join(".")+'" is not registered');else D[n]=a;return}a._name=n;z[n]=a},registerComponent:function e(n,a){if(O)return TS.error('component "'+n+'" must be registered on before dom ready');if(q[n])return TS.error('component "'+n+'" already exists');if("function"===typeof a)a=a();if("function"!==typeof a.destroy)return TS.error('component "'+n+'" cannot be registered as it does not have a destroy method');var o=function e(){if(this._constructor)this._constructor.apply(this,arguments);if(!this.id){this.id=n+"_auto_guid_"+t;t+=1}if(this.test&&c())this.test=void 0;else if("function"===typeof this.test)this.test=this.test();e._add(this.id,this)};var r=l(n,o,"component");if(void 0===r){R[n]=a;return}var i=a.destroy;a.destroy=function(){o._remove(this.id);i.call(this)};o.prototype=Object.create(a);o.instances={};o._name=n;q[n]=o;o._add=function(e,a){if(q[n].instances[e])TS.warn("A "+n+" component with the instance id "+e+"already exists");q[n].instances[e]=a};o._remove=function(e){q[n].instances[e]=null};o.get=function(e){return q[n].instances[e]};o.getAll=function(){return q[n].instances}},makeLogDate:function e(){if(window.TSMakeLogDate)return TSMakeLogDate();return"(TSMakeLogDate not loaded) "},shouldLog:function e(n){return TS.console.shouldLog(n)},replaceConsoleFunction:function e(n){return TS.console.replaceConsoleFunction(n)},log:function e(n){TS.console.log.apply(this,[].slice.call(arguments,0))},info:function e(){TS.console.info.apply(this,[].slice.call(arguments,0))},maybeWarn:function e(n){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function e(){TS.console.warn.apply(this,[].slice.call(arguments,0))},dir:function e(n,a,t){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function e(n){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function e(){TS.console.error.apply(this,[].slice.call(arguments,0))},logError:function e(n,a,t,o){TS.console.logError.apply(this,[].slice.call(arguments,0))},getQsArgsForUrl:function e(n){if(!n&&C)return C;C="";for(var a in TS.qs_args){if("export_test"===a)continue;C+="&"+a+"="+encodeURIComponent(TS.qs_args[a])}return C},getOtherAccountsCount:function e(){var n=0;if(!TS.boot_data.other_accounts)return n;n=Object.keys(TS.boot_data.other_accounts).length;return n},refreshTeams:function e(){if(!TS.boot_data)return;if(!TS.model)return;if(!TS.model.team)return;if(!TS.model.user)return;TS.api.call("auth.currentSessions").then(function(e){var n=e.data;TS.boot_data.other_accounts={};var a=0;for(var t in n.accounts){if(t==TS.model.user.id)continue;TS.boot_data.other_accounts[t]=n.accounts[t];a+=1}if(TS.view&&!a)TS.view.updateTitleBarColor()}).catch(function(e){if(TS.console&&TS.console.warn&&TS.console.error){TS.console.warn(8675309,"unable to do anything with refreshTeams rsp");TS.console.error(8675309,e)}})},ssbChromeClicked:function e(n){if(n)return;$("html").trigger("touchstart");$(".modal-backdrop").trigger("click")},reload:function e(n,a,t){if(n){TS.info("TS.reload called: "+n);TS.generic_dialog.start({title:TS.i18n.t("Reloading!","ts")(),body:n,show_cancel_button:false,esc_for_ok:true,onGo:function e(){TS.reload()}});return}if(a)a=JSON.stringify(a);TS.info("TS.reload() called: "+(a||"no reason specified"));if(TS.console)TS.console.logStackTrace();window.location.reload(t)},reloadIfVersionsChanged:function e(n){if(TS.model.ms_logged_in_once&&n.min_version_ts&&"dev"!==TS.boot_data.version_ts)if(parseInt(TS.boot_data.version_ts,10)<parseInt(n.min_version_ts,10)){TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)");return true}if(TS.model.ms_logged_in_once&&n.cache_version)if(n.cache_version!=TS.storage.msgs_version){TS.reload(null,"data.cache_version "+n.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version);return true}return false},isPartiallyBooted:function e(){return!!(TS._incremental_boot||TS._did_incremental_boot&&!TS._did_full_boot)},ensureFullyBooted:function e(){return r},test:function e(){var e={_registerDelayedComponentsAndModules:Z,_deleteModule:function e(n){delete TS[n];delete z[n]},_deleteComponent:function e(n){delete TS[n];delete q[n]}};Object.defineProperty(e,"_getMSLoginArgs",{get:function e(){return m},set:function e(n){m=n}});Object.defineProperty(e,"_shouldConnectToMS",{get:function e(){return K},set:function e(n){K=n}});Object.defineProperty(e,"_maybeStartPerfTrace",{get:function e(){return Q},set:function e(n){Q=n}});return e}};var l=function e(n,a,t){var o=n;var r=TS;var i=o.split(".");var s=i.length-1;if(s>=3)TS.error(t+' "'+o+'" cannot be registered, as we only support a depth of two sub modules right now');else if(s){o=i[s];var l=0;for(l;l<s;l+=1){if(!i[l])TS.error(t+' "'+n+'" cannot be registered because of a bad name');r=r[i[l]];if(void 0===r)return r}}if(void 0!==r[o])TS.error(t+' "'+n+'" cannot be registered; "'+o+'" already exists on "'+(r._name||"TS")+'"');else r[o]=a;return r};if(e){TS.raw_templates=e;e=null}var c=function e(){return!("undefined"!==typeof window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)};var d=function e(){if(TS.isSocketManagerEnabled())return;TS.console.logStackTrace("MS reconnection requested");if(TS.ms.isAsleep()){TS.error("NOT reconnecting, we are asleep");return}else if(TS.model.ms_connected){TS.warn("Reconnect requested, but we are already connected; doing nothing.");return}else if(TS.model.ms_connecting){TS.warn("Reconnect requested, but we are already connecting; doing nothing.");return}TS.metrics.mark("ms_reconnect_requested");if(!TS.api.paused_sig.has(u))TS.api.paused_sig.addOnce(u);if(TS.isSocketManagerEnabled()){if(!TS.interop.SocketManager.connectedSig.has(f))TS.interop.SocketManager.connectedSig.addOnce(f)}else if(!TS.ms.connected_sig.has(f))TS.ms.connected_sig.addOnce(f);if(TS.isPartiallyBooted()){var n=g();y(n)}else g().then(b)};var u=function e(){if(TS.isSocketManagerEnabled())return;TS.info("API queue got paused while waiting for MS reconnection");if(TS.isSocketManagerEnabled())TS.interop.SocketManager.remove(f);else TS.ms.connected_sig.remove(f);TS.api.unpaused_sig.addOnce(function(){if(TS.model.calling_rtm_start){TS.info("API queue got unpaused, but rtm.start calling is pending, so doing nothing");return}d()})};var f=function e(){if(TS.isSocketManagerEnabled())return;var n=TS.metrics.measureAndClear("ms_reconnect_delay","ms_reconnect_requested");TS.info("OK, MS is now reconnected -- it took "+_.round(n/1e3,2)+" seconds");TS.api.paused_sig.remove(u);TS.api.unpaused_sig.remove(d)};var m=function e(){var n={agent:"webapp_"+TS.boot_data.version_uid,simple_latest:true,no_unreads:true,presence_sub:true,mpim_aware:true,canonical_avatars:true,eac_cache_ts:true,no_users:true,no_bots:true,no_members:true,cache_ts:0};Object.keys(TS.qs_args).filter(function(e){return 0===e.indexOf("feature_")}).forEach(function(e){if(TS.has_pri[X])TS.log(X,"Flannel: Appending "+e+" ("+TS.qs_args[e]+") to login_args");n[e]=TS.qs_args[e]});if("client"!==TS.boot_data.app)n.no_presence=true;if("calls"===TS.boot_data.app)n.no_subteams=true;if(!TS.boot_data.page_needs_all_ims)n.only_relevant_ims=true;if(TS.boot_data.feature_name_tagging_client)n.name_tagging=true;if(TS.boot_data.feature_ms_latest)n.ms_latest=true;if(TS.has_pri[X])TS.log(X,"Flannel: MS login args:",n);return n};var g=function e(){var n=S();M=n;if(!x){TS.info("Starting non-incremental boot");return p(n)}var a=x;x=void 0;return a.then(function(e){e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts");e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts");e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts");return e}).catch(function(){TS.info("Recovering from incremental boot error");M=void 0;return p(n)})};var p=function e(n){return n.catch(function(e){T(e);throw e})};var S=function e(){if(TS.qs_args.no_rtm_start)return new Promise(function(n,a){TS.resumeRTMStart=function(){delete TS.resumeRTMStart;delete TS.qs_args.no_rtm_start;e().then(function(e){n(e)}).catch(a)}});if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var n=Promise.resolve({ok:true,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});delete TS.boot_data.rtm_start_response;return n}if(!TS.isSocketManagerEnabled()&&j){TS.info("Want to call rtm.start, but will wait "+j+" ms first");return new Promise(function(n){setTimeout(function(){TS.info("OK, now calling rtm.start, having waited for delay");j=void 0;n(e())},j)})}if(!TS.isSocketManagerEnabled()){if(TS.model.calling_rtm_start){var a="_promiseToCallRTMStart was called but TS.model.calling_rtm_start=true";TS.error(a);return Promise.reject(new Error(a))}TS.ms.logConnectionFlow("login");TS.model.rtm_start_throttler+=1;TS.info("Setting calling_rtm_start to true");TS.model.calling_rtm_start=true}var t;if(TS.isSocketManagerEnabled())t=F();else{if(!E){if(TS.model.ms_connected){if(TS.has_pri[X])TS.log(X,"Bad news: we're trying to do an rtm.start from Flannel while we're already connected, and that won't work.");return Promise.reject(new Error("rtm.start-over-WebSocket failed"))}E=Q().then(L)}t=E;E=void 0}return t.then(function(e){if(TS.has_pri[X])TS.log(X,"Flannel: got rtm.start response 💕");return{ok:true,args:{},data:e}}).finally(function(){if(!TS.isSocketManagerEnabled()){TS.model.calling_rtm_start=false;TS.info("Setting calling_rtm_start to false (after rtm.start from Flannel)")}})};var h=function e(n){switch(n){case"user_removed_from_team":TS.warn("You have been removed from the "+TS.model.team.name+" team.");if(TS.client)TS.client.userRemovedFromTeam(TS.model.team.id);break;case"account_inactive":case"team_disabled":case"invalid_auth":TSSSB.call("invalidateAuth");TS.reload(null,"Reloading due to error "+n);break;case"clear_cache":case"org_login_required":case"team_added_to_org":var a=true;TS.storage.flush(a);TS.reload(null,"Flushing storage and reloading due to '"+n+"' error");break;case"ratelimited":te();break;default:TS.warn("Unexpected start error: "+n)}};var T=function e(n){var a=n.data&&n.data.error;if(a)h();if(!TS.isSocketManagerEnabled())TS.ms.logConnectionFlow("on_login_failure");if(!TS.isSocketManagerEnabled())TS.ms.onFailure("rtm.start call failed with error: "+(a||"no error on resp.data"));var t=5;var o=60;var r=parseInt(_.get(n,"data.retry_after"),10);TS.info("rtm.start failed; retry_after = "+r);j=1e3*_.clamp(r,t,o);return null};var b=function e(n){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Got rtm.start login data");TS.model.emoji_cache_ts=n.data.emoji_cache_ts;TS.model.apps_cache_ts=n.data.apps_cache_ts;TS.model.commands_cache_ts=n.data.commands_cache_ts;if(!TS.model.ms_logged_in_once&&!TS.storage.fetchLastEventTS()&&n.data.latest_event_ts){var a=function e(){TS.ms.storeLastEventTS(n.data.latest_event_ts,"_processStartData")};if(TS.isSocketManagerEnabled())TS.interop.SocketManager.connectedSig.addOnce(a);else TS.ms.connected_sig.addOnce(a)}if(TS.client)if(TS.reloadIfVersionsChanged(n.data))return;if(!n.data.self){TS.error("No self?");return}if(!n.data.team){TS.error("No team?");return}if(!TS.isSocketManagerEnabled())TS.ms.logConnectionFlow("on_login");if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Setting up model");return V(n.data,n.args).then(function(){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Model did set up; setting up apps");TS.apps.setUp();if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Setting up commands");TS.cmd_handlers.setUpCmds();if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Setting up UI");v();if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Finding initial channel");if(TS.client)TS.client.calculateInitialCid();if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Setting up emoji and shared channels");return Promise.join(TS.emoji.setUpEmoji().catch(function(){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Setting up emoji failed, trying to move forward anyway...")}),TS.members?TS.members.maybeFetchAccessibleUserIds():Promise.resolve())}).then(function(){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Nearly there! Finalizing...");if(!TS.model.ms_logged_in_once)w(n.data);if(TS.client)TS.client.onEveryLoginMS(n.data);if(TS.web)TS.web.onEveryLoginMS(n.data);k();var e;if(TS._did_incremental_boot)e=TS.model.ms_logged_in_once;else e=!TS.model.ms_logged_in_once;if(e&&o){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Divine clementine, we are finalizing a full boot!");o();o=null;TSSSB.call("didFinishLoading");i=true;if(W)TS.info("BOOT: Finished first boot "+Math.ceil(performance.now()-W)+" ms after DOM ready")}TS.model.ms_logged_in_once=true;if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: Holy guacamole, we're all done!");TS.info("User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"))}).catch(function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided"));if(TS.isSocketManagerEnabled()&&TS.boot_data.ws_refactor_bucket){var n=true;TS.logError(e,"sm_logs_setup_err",void 0,n)}TS.dir(e);TS.info(e.stack);TS._last_boot_error=e})};var v=function e(){TS.ui.setThemeClasses();if(TS.client){TSSSB.call("setCurrentTeam",TS.model.team.domain);TS.client.updateTeamIcon()}};var w=function e(n){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _finalizeFirstBoot");if(TS.model.ms_logged_in_once){TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error.");return}if(TS.client){TS.client.onFirstLoginMS(n);if(TS.isPartiallyBooted()){y(M);M=void 0}else TS.incremental_boot.afterFullBoot();if(TS.isSocketManagerEnabled())TS.interop.Eventlog.initialize()}if(TS.web)TS.web.onFirstLoginMS(n)};var y=function e(n){TS.info("Finalizing incremental boot");TS.incremental_boot.beforeFullBoot();p(n).then(function(e){b(e);TS.incremental_boot.afterFullBoot();TS.info("Completed incremental boot")}).catch(function(e){TS.error("Tried to finalize incremental boot, but rtm.start failed. Will recover when we reconnect.");throw e})};var k=function e(){if(TS.isPartiallyBooted()){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS not connecting to MS until we complete incremental boot");return}if(!K()){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS will not connect to MS");return}if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS wants to connect to MS");if(TS.isSocketManagerEnabled())if(TS.interop.SocketManager.isProvisionallyConnected()){TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS will finalize SocketManager");try{TS.interop.SocketManager.finalizeProvisionalConnection();TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS did finalize SocketManager")}catch(e){TS.log("BOOT: _maybeFinalizeOrOpenConnectionToMS failed to finalize SocketManager");var n=true;TS.console.logError(e,"sm_finalize_failed_2",void 0,n);TS.interop.SocketManager.disconnect()}}else{TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS wanted to finalize SocketManager but it had no provisional connection");if(TS.interop.SocketManager.hasNeverConnected()){if("calls"===TS.boot_data.app)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS: opening our SocketManager connection now");else TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS: we have never had a connection. This should not happen!");F().then(function(e){b({ok:true,args:{},data:e})})}else{TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS: we had a connection but it is gone for some reason; wait for it to come back");TS.interop.SocketManager.start();TS.interop.SocketManager.provisionallyConnectedSig.addOnce(e)}}else if(TS.ms.hasProvisionalConnection()&&TS.ms.finalizeProvisionalConnection()){if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS finalized MS connection");if(TS.has_pri[ee])TS.log(ee,"Successfully finalized a provisional MS connection")}else{if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS made a new MS connection");if(TS.has_pri[ee])TS.log(ee,"No valid provisional MS connection; making a new connection");TS.ms.connectImmediately(TS.model.team.url||TS.boot_data.ms_connect_url)}if(TS.boot_data.feature_tinyspeck)TS.info("BOOT: _maybeFinalizeOrOpenConnectionToMS did connect to MS")};var A=function e(){TS.shared.getAllModelObsForUser().forEach(function(e){if(e._consistency_has_been_checked)e._consistency_has_been_checked=false;if(e._consistency_is_being_checked)e._consistency_is_being_checked=false})};var j;var E;var x;var M;TS.qs_args=function(){var e=location.search.substring(1);var n={};var a;a=e.split("&");for(var t=0;t<a.length;t+=1){var o=a[t].indexOf("=");if(-1!=o){var r=a[t].substring(0,o);var i=a[t].substring(o+1);n[r]=unescape(i)}else if(a[t].length)n[a[t]]=""}return n}();TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri;_.each(TS.pri&&TS.pri.split(","),function(e){if(e)TS.has_pri[e]=true});var O=false;var C;var B=function e(){TS.interop.SocketManager.disconnectedSig.add(A);TS.interop.SocketManager.connectedSig.addOnce(function(){TS.interop.SocketManager.provisionallyConnectedSig.add(function(e){e.then(function(e){TS.info("Got start data from Socket Manager; hydrating it");var n=e.rtm_start;TS.interop.boot.data.hydrateStartData(n).then(function(e){TS.info("Successfully hydrated start data from Socket Manager; processing it");b({ok:true,args:{},data:e})}).catch(function(e){TS.warn("Error while hydrating start data from Socket Manager; passing non-hydrated version on since it is better than nothing");TS.logError(e);b({ok:true,args:{},data:n})})})})})};var F=function e(){if(!TS.isSocketManagerEnabled())return Promise.reject(new Error("_connectAndFetchStartDataWithSocketManager can only be used when TS.isSocketManagerEnabled is true"));if(!TS.interop.SocketManager.hasNeverConnected()){var n=new Error("_connectAndFetchStartDataWithSocketManager can only be called if Socket Manager has never connected");TS.console.logError(n,"_connectAndFetchStartDataWithSocketManager called too many times");return Promise.reject(n)}TS.interop.SocketManager.socketErrorMessageReceivedSig.add(h);var a=new Promise(function(e){function n(a){a.then(function(a){var t=a.rtm_start;TS.interop.boot.data.hydrateStartData(t).then(function(a){TS.interop.SocketManager.provisionallyConnectedSig.remove(n);e(a)})}).catch(function(e){TS.warn("Unable to get start data from socket");TS.logError(e)})}TS.interop.SocketManager.provisionallyConnectedSig.add(n)});if(TS.boot_data.ws_refactor_bucket){TS.has_pri["1996"]=true;TS.metrics.count("sm_flow_exposure_9");TS.interop.SocketManager.connectedSig.addOnce(function(){var e=void 0;TS.interop.SocketManager.disconnectedSig.add(function(){e=performance.now()});TS.interop.SocketManager.connectedSig.add(function(n){if(n&&e){var a=performance.now()-e;TS.metrics.store("sm_reconnect_delay_8",a)}e=void 0})})}TS.interop.SocketManager.start();return a};var L=function e(){if(TS.isSocketManagerEnabled())return Promise.reject(new Error("_connectAndFetchStartDataWithoutSocketManager can only be used when TS.isSocketManagerEnabled is false"));TS.log(1996,"Opening a tokenless MS connection and fetching rtm.start over it");var n=TS.flannel.getFlannelConnectionUrl();var a=TS.ms.connectProvisionallyAndFetchRtmStart(n);if(!a)throw new Error("TS.ms.connect did not return an rtm.start promise");if(TS.boot_data.ws_refactor_bucket){TS.metrics.count("ms_flow_exposure_9");TS.ms.connected_sig.addOnce(function(){var e=void 0;TS.ms.disconnected_sig.add(function(){e=performance.now()});TS.ms.connected_sig.add(function(n){if(n&&e){var a=performance.now()-e;TS.metrics.store("ms_reconnect_delay_8",a)}e=void 0})})}return a.then(function(e){return TS.interop.boot.data.hydrateStartData(e.rtm_start)})};var I=function e(n){if(TS.client)TSSSB.call("didStartLoading",6e4);if(K())if(TS.isSocketManagerEnabled())B();else{TS.ms.reconnect_requested_sig.add(d);TS.ms.disconnected_sig.add(A)}J();O=true;if(TS.model.is_our_app)Y();TS.ui.setUpWindowUnloadHandlers();if("client"===TS.boot_data.app)TS.client.gogogo();else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app)TS.web.gogogo();if(TS.boot_data.no_login){TS.info("running without a user");if(TS.web)TS.web.no_login_complete_sig.dispatch()}else if(n)b(n);else TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")};var P=function e(){if(!window.sessionStorage)return;try{var n=TS.client?"session_load_count_client":"session_load_count_web";var a=parseInt(sessionStorage.getItem(n)||0,10)+1;sessionStorage.setItem(n,a);TS.info(n+": "+a);TS.metrics.store(n,a,{is_count:true})}catch(e){TS.warn("could not log session load count: "+e)}};var U=function e(n){Promise.config({longStackTraces:"dev"===n.version_ts||TS.qs_args.js_path,warnings:{wForgottenReturn:false},cancellation:true})};var z={};var D={};var q={};var R={};var W;var N=function e(){W=performance.now();TS.info("_onDOMReady");setTimeout(function(){if(!TS.model.is_our_app)return;if(TS.environment.isSSBAndAtLeastVersion("2.6"))return;if(!i){TSSSB.call("didFinishLoading");i=true;TS.metrics.count("fake_call_did_finish_loading_for_older_SSBs")}},s);P();if(TS.qs_args.ws_flakiness)try{var n=parseFloat(TS.qs_args.ws_flakiness);TS.interop.SocketManager.debugSetSocketConnectFlakiness(n)}catch(e){}if(window.macgap&&macgap.downloads||window.winssb&&winssb.downloads){TS.model.supports_downloads=true;TS.model.flex_names.push("downloads")}if(TS.client)TSSSB.call("didStartLoading",3e4);else TS.info("no TS.client on page:"+document.location.href);TS.api.paused_sig.add(function(e){if(TS.boot_data.feature_tinyspeck)TS.api.debugShowQueue();if(TS.client)TS.client.apiPaused(e);else TS.web.apiPaused(e)});TS.api.unpaused_sig.add(function(){if(TS.client)TS.client.apiUnpaused();else TS.web.apiUnpaused()});soundManager.ignoreFlash=true;soundManager.setup({url:"/img/sm/",debugMode:false});TS.storage.onStart();Z();var a=TS.boot_data.no_login?Promise.resolve():g();var t=[G(),a];if(TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login)t.push(TS.enterprise.promiseToEnsureEnterprise());if(TS.web&&TS.boot_data.page_needs_team_profile_fields)t.push(TS.team.ensureTeamProfileFields());Promise.all(t).then(function(){a.then(I);return null})};var G=function e(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0)return Promise.resolve();var n;if(TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts)n=TS.boot_data.hbs_templates_version;else if("dev"===TS.boot_data.version_ts)n=Date.now();else n=TS.boot_data.version_ts;var a="/templates.php?cb="+n+TS.getQsArgsForUrl();if(TS.boot_data.template_groups)a+="&template_groups="+TS.boot_data.template_groups;if(TS.boot_data.template_exclude_feature_flagged)a+="&template_exclude_feature_flagged=1";if(/&locale=[a-zA-Z-]/.test(a)){a=a.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"");a=a.replace(/&locale=[a-zA-Z-]/,"")}if(TS.i18n.locale()&&TS.i18n.locale()!==TS.i18n.DEFAULT_LOCALE)a+="&locale="+TS.i18n.locale();var t=0;function o(){t+=1;return new Promise(function(e){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length>0){e();return}TS.utility.getCachedScript(a).done(function(){if(0==Object.keys(TS.raw_templates).length){TS.error(a+" returned no templates D:");return}e()}).fail(function(e,n,r){var i=Math.min(1e3*t,1e4);TS.warn("loading "+a+" failed (textStatus:"+n+" errorThrown:"+r+" attempts:"+t+"), trying again in "+i+"ms");setTimeout(o,i)})})}return o()};var Z=function e(){_.sortBy(Object.keys(D),"length").forEach(function(e){TS.registerModule(e,D[e],true)});_.sortBy(Object.keys(R),"length").forEach(function(e){TS.registerComponent(e,R[e],true)})};var J=function e(){TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()");if("client"===TS.boot_data.app){TS.client.onStart();TS.client.onStart=_.noop}else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app){TS.web.onStart();TS.web.onStart=_.noop}else if("test"===TS.boot_data.app)return;else if("api"===TS.boot_data.app||"oauth"===TS.boot_data.app);else{TS.error("WTF app? "+TS.boot_data.app);return}var n;var a=!TS.qs_args.keep_onstart;try{_.forOwn(z,function(e){if(!e.onStart)return;n=e._name;e.onStart();if(a)e.onStart=_.noop})}catch(e){TS.error("TS."+n+".onStart encountered an error:");TS.logError(e);if(window.TSBeacon)window.TSBeacon("call_onstarts_error",1);throw e}if(a)J=_.noop};var V=function e(n,a){return new Promise(function(e,t){var o=!TS.model.ms_logged_in_once;TS.team.upsertTeam(n.team);TS.model.team.url=n.url;if(TS.boot_data.page_needs_enterprise&&void 0!==n.can_manage_shared_channels)TS.model.team.prefs.can_user_manage_shared_channels=n.can_manage_shared_channels;if(!TS.model.last_team_name){TS.model.last_team_name=TS.model.team.name;TS.model.last_team_domain=TS.model.team.domain}TS.model.team.activity=[];if(TS.model.break_token)TS.model.team.url+="f";if(o){TS.model.rooms=[];if(!TS.useReduxMembers()){TS.model.members=[];TS.model.bots=[]}TS.model.user_groups=[];TS.model.read_only_channels=[];if(TS.boot_data.feature_default_shared_channels){TS.model.thread_only_channels=[];TS.model.non_threadable_channels=[]}TS.model.online_users=[]}else{var r=TS._did_incremental_boot&&!TS._did_full_boot;if(!r)TS.refreshTeams()}if(n.online_users&&_.isArray(n.online_users)){TS.model.online_users=_.filter(n.online_users,function(e){return"USLACKBOT"!==e});if(TS.boot_data.page_needs_enterprise){var i=0;var s=Date.now();TS.model.online_users=_.filter(TS.model.online_users,function(e){var n=TS.members.getMemberById(e);if(n){if("active"!==n.presence){n.presence="active";if(!o){i+=1;TS.members.presence_changed_sig.dispatch(n)}}return false}return true});if(i){var l=Date.now()-s;if(l>500)TS.warn("_setUpModel: took "+l+" msec to dispatch "+i+" presence_changed signals.")}}}TS.prefs.setPrefs(n.self.prefs);delete n.self.prefs;var c;var d;var u;var f=function e(n){TS.model.user=n;TS.model.user.is_self=true};var m=["args.cache_ts:"+a.cache_ts];var g=_.clone(a);if(g.token)g.token="REDACTED";try{m.push("api args: "+JSON.stringify(g))}catch(e){m.push("api args: "+g)}TS.members.startBatchUpsert();TS.bots.startBatchUpsert();var p=n.updated_users||n.users||[];var S=n.updated_bots||n.bots||[];var h={};if(TS._did_incremental_boot&&!TS._incremental_boot&&!TS._did_full_boot);else for(c=0;c<p.length;c+=1)h[p[c].id]=true;var T=TS.boot_data.page_needs_enterprise&&TS.boot_data.exclude_org_members;for(c=0;c<p.length;c+=1){u=p[c];if(T&&!TS.members.isLocalTeamMember(u))continue;u.presence=_.has(u,"presence")&&"active"===u.presence?"active":"away";if(_.get(u,"profile.always_active"))u.presence="active";d=TS.members.upsertAndSignal(u);if(TS.has_pri[ne])TS.log(ne,"upsert from DATA: "+u.id+" "+d.status);if(d.member.id==n.self.id)f(d.member)}var b={};for(c=0;c<S.length;c+=1)b[S[c].id]=true;for(c=0;c<S.length;c+=1)TS.bots.upsertAndSignal(S[c]);m.push("members from updated_users in rtm.start:"+p.length+" (slackbot will always be here)");m.push("bots from updated_bots in rtm.start:"+S.length);if(p.length<TS.model.members.length/20)TS.model.did_we_load_with_user_cache=true;b=null;h=null;TS.info(m.join("\n"));if(!TS.model.user){TS.error("No TS.model.user");TS.log(m.join("\n"));t(Error("No TS.model.user"));return}TS.members.finishBatchUpsert();TS.bots.finishBatchUpsert();TS.members.upsertMember(n.self);TS.model.makeYouRegex();TS.prefs.setHighlightWords(TS.model.prefs.highlight_words);if(n.subteams){TS.user_groups.startBatchUpsert();n.subteams.all.forEach(function(e){TS.user_groups.upsertUserGroup(e)});TS.user_groups.finishBatchUpsert();n.subteams.self.forEach(function(e){TS.user_groups.upsertSelfUserGroup(e)})}var v=0;n.channels.forEach(function(e){if(e.is_member)v+=1});n.ims.forEach(function(e){if(e.is_open)v+=1});n.groups.forEach(function(e){if(!e.is_archived)v+=1});if(n.mpims)n.mpims.forEach(function(e){if(e.is_open&&!e.is_archived)v+=1});if(n.read_only_channels)TS.model.read_only_channels=n.read_only_channels;if(TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels)TS.model.non_threadable_channels=n.non_threadable_channels;if(TS.boot_data.feature_default_shared_channels&&n.thread_only_channels)TS.model.thread_only_channels=n.thread_only_channels;TS.model.initial_msgs_cnt=42;if(TS.qs_args.api_count){var w=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,w)}var y=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(y,2*TS.model.initial_msgs_cnt);TS.model.special_initial_msgs_cnt=Math.min(y,2*TS.model.initial_msgs_cnt);TS.info("open channels/groups/ims:"+v+" initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);var k=function e(){var a=1==TS.qs_args.just_general;TS.utility.msgs.startBatchUnreadCalc();TS.metrics.mark("upsert_channels_start");var t=true;var o=_.map(n.channels,function(e){if(a&&!e.is_general)return;var o=false;var r=false;var i=false;if(n.read_only_channels)o=n.read_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&n.thread_only_channels)r=n.thread_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels)i=n.non_threadable_channels.indexOf(e.id)>-1;e=_.assign(e,{is_read_only:o,is_thread_only:r,is_non_threadable:i});return TS.channels.upsertChannel(e,t)});TS.metrics.measureAndClear("upsert_channels","upsert_channels_start");var r=TS.boot_data.page_needs_enterprise&&TS.boot_data.exclude_org_members;if(!r)var i=_.map(n.ims,function(e){if(a&&"USLACKBOT"!==e.user)return;return TS.ims.upsertIm(e,t)});TS.metrics.mark("upsert_groups_start");if(!TS.isPartiallyBooted()){var s=_.map(TS.model.groups,"id");var l=_.map(n.groups,"id");var c=false;_.difference(s,l).forEach(function(e){var n=TS.groups.getGroupById(e);TS.groups.removeGroup(n);TS.groups.left_sig.dispatch(n);c=true});if(c)TS.members.invalidateMembersUserCanSeeArrayCaches()}var d=_.map(n.groups,function(e){if(a)return;var o=false;var r=false;var i=false;if(n.read_only_channels)o=n.read_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&n.thread_only_channels)r=n.thread_only_channels.indexOf(e.id)>-1;if(TS.boot_data.feature_default_shared_channels&&n.non_threadable_channels)i=n.non_threadable_channels.indexOf(e.id)>-1;e=_.assign(e,{is_read_only:o,is_thread_only:r,is_non_threadable:i});return TS.groups.upsertGroup(e,t)});TS.metrics.measureAndClear("upsert_groups","upsert_groups_start");if(n.mpims)if(!r)var u=_.map(n.mpims,function(e){if(a)return;return TS.mpims.upsertMpim(e,t)});var f=_.compact(o.concat(i).concat(d).concat(u));TS.redux.channels.bulkAddEntities(f);TS.utility.msgs.finishBatchUnreadCalc();if(TS.model.user.is_restricted&&!TS._incremental_boot&&TS._did_incremental_boot)TS.members.invalidateMembersUserCanSeeArrayCaches()};if(n.dnd){if(n.dnd.dnd_enabled){if(n.dnd.next_dnd_start_ts)TS.model.dnd.next_dnd_start_ts=n.dnd.next_dnd_start_ts;if(n.dnd.next_dnd_end_ts)TS.model.dnd.next_dnd_end_ts=n.dnd.next_dnd_end_ts}else{TS.model.dnd.next_dnd_start_ts=null;TS.model.dnd.next_dnd_end_ts=null}if(n.dnd.snooze_enabled)TS.model.dnd.snooze_enabled=n.dnd.snooze_enabled;if(n.dnd.snooze_endtime)TS.model.dnd.snooze_endtime=n.dnd.snooze_endtime}if(!TS._incremental_boot){var A=n.ims.concat(n.mpims||[],n.groups||[]);return TS.members.ensureMembersArePresentInSharedModelObs(A).then(function(){k();e()},function(e){t(Error("could not fetch all external members: "+(e&&e.message)))})}k();e()})};var H=function e(n){if(n.test&&!n.__esModule&&c())delete n.test;else if("function"===typeof n.test){var a=n.test;Object.defineProperty(n,"test",{get:a})}};H(TS);var K=function e(){if(!TS.boot_data.no_login)return true;return!!(TS.client||TS.web&&TS.boot_data.page_has_ms)};var Q=function e(){if(!TS.boot_data.feature_automated_perfectrics)return Promise.resolve();return TS.client?TS.client.traces.maybeTrace(10,{reason:"automated"}):Promise.resolve()};var Y=function e(){var n=false;var a=function e(){TS.info("sleep event!");n=true;if(TS.client)if(TS.isSocketManagerEnabled())TS.interop.SocketManager.sleep();else TS.ms.sleep();if(TS.web&&TS.web.space)TS.ds.sleep()};var t=function e(){if(!n)return;n=false;TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms);if(TS.client)if(TS.isSocketManagerEnabled())TS.interop.SocketManager.wake();else TS.ms.wake();if(TS.web&&TS.web.space)TS.ds.wake()};window.addEventListener("sleep",a,false);window.addEventListener("wake",t,false)};var X=1989;var ee=1996;var ne=481;var ae;var te=function e(){if(ae)return;ae=true;TS.metrics.count("rate_limit_dialog_shown");var n="Bear with us";var a="Dismiss";var t="Lots of your teammates are connecting to Slack right now, so it’s taking longer than usual. We’re really sorry about this, and we’ll have you online soon.";var o=TS.generic_dialog.alert(t,n,a);var r=function e(){if(o.isPending())TS.generic_dialog.cancel();ae=false};if(TS.isSocketManagerEnabled())TS.interop.SocketManager.connectedSig.addOnce(r);else TS.ms.connected_sig.addOnce(r)}})()},4179:function(e,n){(function(){"use strict";TS.registerModule("incremental_boot",{onStart:function e(){TS.channels.switched_sig.add(i);TS.ims.switched_sig.add(i);TS.groups.switched_sig.add(i);TS.mpims.switched_sig.add(i);if(TS.isSocketManagerEnabled())TS.interop.SocketManager.connectedSig.addOnce(i);else TS.ms.connected_sig.addOnce(i)},startIncrementalBoot:function n(){if(TS._did_incremental_boot)return Promise.reject(new Error("_startIncrementalBoot called more than once; this is a programming error."));TS._did_incremental_boot=true;var a=TS.boot_data.incremental_boot_data;delete TS.boot_data.incremental_boot_data;var t={canonical_avatars:true,include_full_users:true,count:TS.model.initial_msgs_cnt-1,ignore_replies:true,include_pin_count:true,no_members:true};if(TS.boot_data.feature_name_tagging_client)t.name_tagging=true;var r=s();if(r){TS.model.c_name_in_url=r;t.name=r;TS.info("Performing incremental boot for channel in URL: "+r)}else{var i=localStorage[l()];if(i){t.channel=i;TS.info("Performing incremental boot for channel from history: "+i)}}o(true);TS.model.change_channels_when_offline=false;return c("channels.view",t).then(function(n){TS._incremental_boot=true;var t=e(a,n.data);return{ok:true,data:t,args:n.args}}).catch(function(e){TS.warn("Incremental boot failed with error: "+e);TS._incremental_boot=false;TS._did_incremental_boot=false;TS.model.change_channels_when_offline=true;o(false);throw e})},beforeFullBoot:function e(){if(!TS._incremental_boot)return;if(!TS._did_incremental_boot)return;if(TS._did_full_boot)return;TS._incremental_boot=false;a=setTimeout(t,1e4);if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container)TS.client.ui.$messages_input_container.one(n,t);if(TS.isSocketManagerEnabled())TS.interop.SocketManager.connectedSig.addOnce(t);else TS.ms.connected_sig.addOnce(t)},afterFullBoot:function e(){if(TS._did_incremental_boot){TS._did_full_boot=true;TS.model.change_channels_when_offline=true}o(false);if(TS.boot_data.feature_react_sidebar)TS.redux.dispatch(TS.interop.redux.features.incrementalBoot.setFullyBooted(true))},shouldIncrementalBoot:function e(){if(TS._did_incremental_boot)return false;if(!TS.boot_data.incremental_boot_data)return false;if(TS.model.ms_logged_in_once)return false;if(false===_.get(TS.boot_data.incremental_boot_data,"self.prefs.seen_welcome_2",void 0)||false===TS.boot_data.prefs_seen_welcome_2){delete TS.boot_data.incremental_boot_data;return false}if("client"!==TS.boot_data.app||0!==location.pathname.indexOf("/messages")){delete TS.boot_data.incremental_boot_data;return false}return true},userDidInteractWithUI:function e(){TS.sounds.play("beep");t()}});var e=function e(n,a){var t=a;t.channels=t.channels||[];t.groups=t.groups||[];t.ims=t.ims||[];t.mpims=t.mpims||[];var o=t.channel||t.group||t.im;TS.model.initial_cid=o.id;delete t.channel;delete t.group;if(t.history&&t.history.messages)o.msgs=t.history.messages;else o.msgs=[];if(TS.pins&&t.history)TS.pins.updateCount(o,t.history.pin_count);Object.keys(n).forEach(function(e){t[e]=_.merge(n[e],t[e])});if(!t.self||t.self.id!=TS.boot_data.user_id)throw new Error("Missing `self` from incremental boot data");if(!_.find(t.users,{id:t.self.id}))t.users.push(t.self);t.users.forEach(function(e){if("USLACKBOT"===e.id||e.id==TS.boot_data.user_id)e.presence="active";delete e.updated});if(o.is_channel)r(o,t.channels);else if(o.is_mpim)r(o,t.mpims);else if(o.is_group)r(o,t.groups);else if(o.is_im)r(o,t.ims);else throw new Error("Unexpected model object type from channels.view");return t};var n="change.incremental_boot keydown.incremental_boot paste.incremental_boot";var a;var t=function e(){if(TS.client&&TS.client.ui&&TS.client.ui.$messages_input_container){TS.client.ui.$messages_input_container.off(n);TS.client.ui.$messages_input_container.removeClass("pretend-to-be-online")}if(TS.isSocketManagerEnabled())TS.interop.SocketManager.connectedSig.remove(e);else TS.ms.connected_sig.remove(e);if(a){clearTimeout(a);a=void 0}};var o=function e(n){$("#col_channels, #team_menu").toggleClass("placeholder",n);$(document.body).toggleClass("incremental_boot",n)};var r=function e(n,a){var t=_.find(a,{id:n.id});if(t)_.extend(t,n);else a.push(n)};var i=function e(){var n=TS.shared.getActiveModelOb();if(n&&n.id)localStorage[l()]=n.id;else delete localStorage[l()]};var s=function e(){var n=location.pathname.match(/\/messages\/([^/]+)/);return n&&n[1]};var l=function e(){return window.boot_data.team_id+"_"+window.boot_data.user_id+"_incr_boot_last_model_ob_id_v2"};var c=function e(n,a){return new Promise(function(e,t){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4!==o.readyState)return;if(200!==o.status){t(new Error("Received non-200 response from "+n));return}var r=JSON.parse(o.responseText);if(!r.ok){t(new Error("Received not-OK from "+n));return}e({ok:true,args:a,data:r})};o.onerror=function(){t(new Error("XHR encountered an error"))};var r=new FormData;Object.keys(a).forEach(function(e){return r.append(e,a[e])});r.append("token",window.boot_data.api_token);var i=""+window.boot_data.api_url+n;o.open("POST",i,!a._synchronously);o.setRequestHeader("X-Slack-Version-Ts",TS.boot_data.version_ts);o.send(r)})}})()},4180:function(e,n){(function(){"use strict";TS.registerModule("metrics",{special_start_mark_labels:["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","domLoading","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive"],onStart:function e(){if(TS.web)TS.web.login_sig.add(TS.metrics.onLogin);if(TS.client)TS.client.login_sig.add(TS.metrics.onLogin);t=TS.utility.enableFeatureForUser(1)},onLogin:function a(){var t=Math.floor(Math.random()*n);setInterval(i,e+t);if(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron)m();$(window).on("beforeunload",r);var o=TS.experiment?TS.experiment.getGroup("link_preload_test"):"";if(!window.performance||!performance.timing||!performance.timing.loadEventEnd)return;if(TS.utility.enableFeatureForUser(1)||o){var s="dom_ready"+(o?"_"+o:"");TS.metrics.store(s,window.performance.timing.loadEventEnd-window.performance.timing.navigationStart)}},mark:function e(n){if(window.performance&&performance.mark)performance.mark(n)},getLatestMark:function e(n){if(!window.performance||!performance.getEntriesByName)return;var a=performance.getEntriesByName(n);if(0===a.length)return false;return a[a.length-1]},clearMarks:function e(n){if(window.performance&&performance.clearMarks)performance.clearMarks(n)},measure:function e(n,a,t,o){if("start_nav"===a)a="navigationStart";var r=false;if(!t){r=true;t=n+"__"+a+"_end";if(window.performance&&performance.mark)performance.mark(t)}var i=performance.timing;var s;if(i&&TS.metrics.special_start_mark_labels.indexOf(a)>-1){var l=i[a];if(!l)return;var c=performance.getEntriesByName(t);if(0===c.length)return;var _=i.navigationStart;var d=_+c[c.length-1].startTime;s=d-l;if(r&&window.performance&&performance.clearMarks)performance.clearMarks(t);return TS.metrics.store(n,s,o)}try{performance.measure(n,a,t)}catch(e){TS.warn("Couldn't complete TS.metrics measurement for start mark \""+a+'"');return}var u=performance.getEntriesByName(n);if(0===u.length)return;s=u[u.length-1].duration;s=TS.metrics.store(n,s,o);performance.clearMeasures(n);if(r)performance.clearMarks(t);return s},measureAndClear:function e(n,a){var t=TS.metrics.measure(n,a);TS.metrics.clearMarks(a);return t},store:function e(n,a,t){if(!t)t={};var o;var r=t.allow_zero?0:1;if(a>=r){if(t.in_seconds){a=d(a);o=" seconds"}else if(t.is_count){a=Math.round(a);o=" (count)"}else{a=TS.utility?TS.utility.roundToThree(a):a;o="ms"}if(!t.ephemeral)u(n,a);if(l(n))TS.info("[TIMING] "+n+": "+a+o+" "+(t.ephemeral?"(ephemeral)":""))}return a},count:function e(n,a){a=a||1;TS.metrics.store(n,a,{is_count:true})},flush:function e(){i()},logPerfTimingSections:function e(){var n=performance.timing;if(!n)return;TS.metrics.special_start_mark_labels.forEach(function(e){var a=n[e]-n.navigationStart;if(a)TS.metrics.store("pt_"+e,a,{allow_zero:true})});f.forEach(function(e){if(n[e[2]]&&n[e[1]])TS.metrics.store("pt_section_"+e[0],n[e[2]]-n[e[1]],{allow_zero:true})})},test:function e(){return{createBeaconURLs:s,getMeasures:function e(){return o},reset:function e(){performance.clearMarks();performance.clearMeasures();o={}}}}});var e=25e3;var n=1e4;var a=2e3;var t=false;var o={};var r=function e(){if(TS.client&&TS.metrics.getLatestMark("start_load"))TS.metrics.measure("session_lifespan","start_load",null,{in_seconds:true});i()};var i=function e(){if(0===Object.keys(o).length)return;if(TS.utility.enableFeatureForUser(1))if(window.performance&&performance.memory&&performance.memory.usedJSHeapSize)o.used_js_heap_size=[TS.utility.roundToThree(TS.utility.convertBytesToMegabytes(performance.memory.usedJSHeapSize))];if(t){var n=document.getElementsByTagName("*").length;TS.metrics.store("dom_node_count",n,{is_count:true})}if(TS.boot_data.feature_electron_memory_logging&&TS.model.is_electron)m();var a=s(o);a.forEach(function(e){var n=new Image;n.src=e});if(window.performance&&performance.clearMeasures)performance.clearMeasures();o={}};var s=function e(n){var t=TS.boot_data.beacon_timing_url||window.ts_endpoint_url;if(!t)return[];var o=[];var r="";var i=[];var s;var l;var _={team_id:TS.model&&TS.model.team&&TS.model.team.id||"",user_id:TS.model&&TS.model.user&&TS.model.user.id||"",team_size:TS.model&&TS.model.members&&TS.model.members.length||0,ver:TS.boot_data.version_ts,session_age:0,data:null};if(TS.client&&TS.metrics.getLatestMark("start_load"))_.session_age=TS.metrics.measure("session_age","start_load",null,{ephemeral:true,in_seconds:true});var d=function e(n,a){n.data=a.join(";");return t+"?"+c(n)};for(s in n){if(!n.hasOwnProperty(s))continue;l=s+":"+n[s].join(",");i.push(l);r=d(_,i);if(r.length>a){i.pop();o.push(d(_,i));i=[l]}}o.push(d(_,i));return o};var l=function e(n){return TS.qs_args.log_timings||TS.qs_args.log_timing===n||true===TS.metrics.log||TS.metrics.log===n||TS.metrics.log instanceof Array&&-1!==TS.metrics.log.indexOf(n)};var c=function e(n){var a=[];for(var t in n)if(n.hasOwnProperty(t))a.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return a.join("&")};var d=function e(n){return Math.round(n/1e3)};var u=function e(n,a,t){if(!o[n])o[n]=[];o[n].push(a);if(!t){if(TS.boot_data.experiment_client_metrics&&TS.boot_data.experiment_client_metrics[n])TS.boot_data.experiment_client_metrics[n].forEach(function(t){var o=TS.boot_data["exp_"+t];if(!o)return;var r=true;e("exp_"+t+"_"+o+"_"+n,a,r)});var r=TS.experiment?TS.experiment.getExperimentsForMetric(n):[];r.forEach(function(t){var o=true;e("exp--"+t.experiment_id+"--"+t.group+"--"+n,a,o)})}};var f=[["redirect","redirectStart","redirectEnd"],["app_cache","fetchStart","domainLookupStart"],["dns","domainLookupStart","domainLookupEnd"],["tcp","connectStart","connectEnd"],["secure_tcp","secureConnectionStart","connectEnd"],["request","requestStart","responseStart"],["response","responseStart","responseEnd"],["processed","domLoading","domComplete"],["parsed","domLoading","domInteractive"],["ready","domInteractive","domComplete"],["scripts_executed","domContentLoadedEventStart","domContentLoadedEventEnd"]];var m=function e(){if(!desktop||!desktop.stats)return;if(desktop.stats.getAppMetrics)g();else if(desktop.stats.getTeamsMemoryUsage&&desktop.stats.getCombinedMemoryUsage)p();else if(desktop.stats.getMemoryUsage)S()};var g=function e(){var n=desktop.stats.getMemoryUsage();var a=desktop.stats.getAppMetrics();if(n){var t=Math.ceil(TS.utility.convertKilobytesToMegabytes(n.privateBytes));TS.metrics.store("memory_team_mb_full_client",t)}a.then(function(e){var n=e.filter(function(e){return"Tab"===e.type});var a=n.length-1;var t=_.sum(e,function(e){return e.memory.privateBytes});var o=_.sum(e,function(e){return e.memory.workingSetSize});var r=Math.ceil(TS.utility.convertKilobytesToMegabytes(t));var i=Math.ceil(TS.utility.convertKilobytesToMegabytes(o));TS.metrics.store("memory_app_mb_"+a+"_teams",i);TS.metrics.store("memory_app_private_mb_"+a+"_teams",r)}).catch(function(e){TS.warn("TS.metrics: Invalid data returned by desktop.stats",e)})};var p=function e(){var n;var a;var t;var o;var r=desktop.stats.getTeamsMemoryUsage();var i=desktop.stats.getCombinedMemoryUsage();Promise.all([r,i]).then(function(e){var r=e[0];var i=e[1];if(!r)throw r;_.forOwn(r,function(e){n=Math.ceil(TS.utility.convertKilobytesToMegabytes(e.memory.privateBytes));TS.metrics.store("memory_team_mb_"+e.state,n)});if(!i||!i.memory)throw i;t=Math.ceil(TS.utility.convertKilobytesToMegabytes(i.memory.sharedBytes));o=Math.ceil(TS.utility.convertKilobytesToMegabytes(i.memory.privateBytes));a=t+o;TS.metrics.store("memory_app_mb_"+i.numTeams+"_teams",a);TS.metrics.store("memory_app_shared_mb_"+i.numTeams+"_teams",t);TS.metrics.store("memory_app_private_mb_"+i.numTeams+"_teams",o)}).catch(function(e){TS.warn("TS.metrics: Invalid data returned by desktop.stats",e)})};var S=function e(){var n=desktop.stats.getMemoryUsage();var a=desktop.stats.getCombinedMemoryUsage();if(n){var t=TS.utility.roundToThree(TS.utility.convertKilobytesToMegabytes(n.memory.privateBytes+n.memory.sharedBytes));TS.metrics.store("memory_usage_team_mb",t)}if(a)a.then(function(e){if(e&&e.memory){var n=e.memory.privateBytes+e.memory.sharedBytes;var a=n/e.numTeams;TS.metrics.store("memory_usage_all_mb",TS.utility.roundToThree(TS.utility.convertKilobytesToMegabytes(n)));TS.metrics.store("memory_usage_all_per_team_mb",TS.utility.roundToThree(TS.utility.convertKilobytesToMegabytes(a)))}else TS.warn("Unexpected results from call to getCombinedMemoryUsage()",e)}).catch(function(e){TS.warn("Error logging combined memory stats",e)})}})()},4181:function(e,n){(function(){"use strict";TS.registerModule("statsd",{onStart:function e(){var n=3e4;var a=5e3;var t=Math.floor(Math.random()*a);setInterval(o,n+t);$(window).on("beforeunload",o)},count:function e(n,a){if(_.isUndefined(a))a=1;t(n,"count",a)},timing:function e(n,a){t(n,"timing",a)},flush:function e(){o()},mark:function e(n){TS.metrics.mark(n)},clearMarks:function e(n){TS.metrics.clearMarks(n)},measure:function e(n,a,t){var o=TS.metrics.measure(n,a,t,{ephemeral:true});if(_.isNaN(o)||_.isUndefined(o))return;TS.statsd.timing(n,o);return o},measureAndClear:function e(n,a){var t=TS.statsd.measure(n,a);TS.statsd.clearMarks(a);return t},test:function e(){var n={getStats:function e(){return a},reset:function e(){a=[]}};Object.defineProperty(n,"_record",{get:function e(){return t},set:function e(n){t=n}});Object.defineProperty(n,"_sendDataAndEmptyQueue",{get:function e(){return o},set:function e(n){o=n}});return n}});var e=2e3;var n;var a=[];var t=function e(n,t,o){var r;if("count"===t){r=" (count)";o=_.round(o,0)}else if("timing"===t){r="ms";o=_.round(o,3)}else{TS.error("TS.statsd._record called with invalid type: "+t);return}if(i(n))TS.info("[STATSD "+t.toUpperCase()+"] "+n+": "+o+r);a.push({stat:n,type:t,value:o})};var o=function n(){if(!a.length)return;var t=[];var o=[];var s="";var l=function e(n){return r()+"?stats="+encodeURIComponent(JSON.stringify(n))};a.forEach(function(n){o.push(n);s=l(o);if(s.length>e){o.pop();t.push(l(o));o=[n]}});t.push(l(o));t.forEach(function(e){var n=new Image;n.src=e});if(i())TS.info("[STATSD] Sending data: "+JSON.stringify(a));a=[]};var r=function e(){if(n)return n;if(TS.environment.is_dev){var a=location.host.match(/^([^.]+\.)?(?:enterprise\.)?(dev[0-9]*)\.slack\.com/)[2];n="https://"+a+".slack.com/beacon/statsd"}else if(location.host.match(/staging.slack.com/))n="https://staging.slack.com/beacon/statsd";else n="https://slack.com/beacon/statsd";return n};var i=function e(n){if(!n)return TS.qs_args.log_timings||true===TS.statsd.log;return TS.qs_args.log_timings||TS.qs_args.log_timing===n||true===TS.statsd.log||TS.statsd.log===n||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(n)}})()},4182:function(e,n){(function(){"use strict";TS.registerModule("model",{did_we_load_with_user_cache:false,did_we_load_with_emoji_cache:false,did_we_load_with_app_cache:false,did_we_load_with_cmd_cache:false,api_url:"",api_token:"",async_api_url:"",webhook_url:"",all_im_ids:[],all_group_ids:[],user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,teams:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_im_opens:{},requested_group_opens:{},requested_mpim_opens:{},requested_channel_joins:{},created_channels:{},created_channel_ids:{},created_groups:{},archives_and_recreated_groups:{},last_team_name:"",last_team_domain:"",initial_cid:"",enterprise:null,initial_unread_view:false,initial_threads_view:false,initial_app_space_view:false,RESERVED_USERNAMES:["all","archive","archived","archives","channel","channels","create","delete","deleted-channel","edit","everyone","general","group","groups","here","me","ms","slack","slackbot","today","you","canal","aquí","todos","mí","grupo","hier","alle","mir","gruppe","chaîne","chaine","ici","tous","moi","groupe","チャンネル","ここ","全員","自分","グループ"],RESERVED_KEYWORDS:["channel","here","everyone","slackbot","canal","aquí","todos","hier","alle","chaîne","chaine","ici","tous","チャンネル","ここ","全員"],BROADCAST_KEYWORDS:[{id:"BKeveryone",ms_name:"everyone",cmd:"<!everyone>",name:TS.i18n.t("everyone","broadcast_keywords")(),description:TS.boot_data.feature_teams_to_workspaces?TS.i18n.t("Notify everyone in your workspace.","broadcast_keywords")():TS.i18n.t("Notify everyone on your team.","broadcast_keywords")(),is_broadcast_keyword:true},{id:"BKchannel",ms_name:"channel",alias:"group",cmd:"<!channel>",name:TS.i18n.t("channel","broadcast_keywords")(),description:TS.i18n.t("Notify everyone in this channel.","broadcast_keywords")(),is_broadcast_keyword:true},{id:"BKhere",ms_name:"here",cmd:"<!here|@here>",name:TS.i18n.t("here","broadcast_keywords")(),description:TS.i18n.t("Notify every online desktop-using member in this channel.","broadcast_keywords")(),is_broadcast_keyword:true}],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.i18n.t("All Unreads","model")(),is_view:true},{id:"Vall_threads",name:TS.i18n.t("Threads","threads")(),alt_names:[TS.i18n.t("All Threads","threads")(),TS.i18n.t("New Threads","threads")()],is_view:true},{id:"Vapp_space",name:TS.i18n.t("Apps","model")(),is_view:true}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,code_wrap_long_lines:true,last_reads_set_by_client:{},ms_connected:false,ms_connecting:false,ms_logged_in_once:false,calling_rtm_start:false,ds_asleep:false,ds_connected:false,ds_connecting:false,ds_logged_in_once:false,window_unloading:false,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],nav_history:[],nav_current_index:-1,nav_used:false,user_colors:null,emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,muted_channels:[],prev_muted_channels:[],newly_muted_channels:[],newly_unmuted_channels:[],highlight_words:null,highlight_words_regex:null,everyone_regex:/<!everyone\b/,channel_regex:/<!channel\b/,group_regex:/<!group\b/,here_regex:/<!here\b/,you_regex:null,your_user_group_regex:{},channel_id_prefixes:["C","G","D"],channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:false,break_token:false,rtm_start_throttler:0,ds_reconnect_ms:0,ds_reconnect_time:0,rtd_start_throttler:0,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:false,threads_mention_count:0,c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps"],default_flex_name:"files",prefs:null,ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},last_net_send:0,previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:21,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,msg_preview_showing:false,archive_view_is_showing:false,menu_is_showing:false,overlay_is_showing:false,unread_view_is_showing:false,threads_view_is_showing:false,app_space_view_is_showing:false,seen_onboarding_this_session:false,seen_welcome_2:true,showing_welcome_2:false,cancelled_welcome_2_this_session:false,show_inline_img_size_pref_reminder:false,shown_inline_img_size_pref_reminder_once:false,last_key_down_e:null,group_prefix:"",ms_conn_log:[],ds_conn_log:[],mac_ssb_version:TSSSB.env.mac_ssb_version,mac_ssb_version_minor:TSSSB.env.mac_ssb_version_minor,mac_ssb_build:TSSSB.env.mac_ssb_build,win_ssb_version:TSSSB.env.win_ssb_version,win_ssb_version_minor:TSSSB.env.win_ssb_version_minor,lin_ssb_version:TSSSB.env.lin_ssb_version,lin_ssb_version_minor:TSSSB.env.lin_ssb_version_minor,desktop_app_version:TSSSB.env.desktop_app_version,supports_downloads:false,supports_spaces_in_windows:false,supports_growl_subtitle:false,supports_voice_calls:false,supports_video_calls:false,supports_screen_sharing:false,supports_screenhero:false,supports_mmap_minipanel_calls:false,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:false,insert_key_pressed:false,alt_key_pressed:false,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.i18n.t("All File Types","model")(),posts:TS.i18n.t("Posts","model")(),spaces:TS.i18n.t("Posts","model")(),arugula:"Arugula",snippets:TS.i18n.t("Snippets","model")(),emails:TS.i18n.t("Emails","model")(),images:TS.i18n.t("Images","model")(),videos:TS.i18n.t("Videos","model")(),pdfs:TS.i18n.t("PDF Files","model")(),gdocs:TS.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:true,ampersands_are_inconsistent_in_from_urls:true,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_channels_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!!(document.hasFocus&&document.hasFocus()&&window.macgap_is_in_active_space),msgs_are_auto_scrolling:false,is_mouse_down:false,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:true,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},data_urls:{app_icon_32px_green:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2lJREFUeNqMVk1vGkEMndmu4MLmkOWQoCqkh0APqAdUVNpKiXLux/+tFKlSDlEitcm15RI4BBBiucCFjdDUs571eL1L1EEC450d28/P9ujvH7+qbBljFFtaa9SgAN9ij9Xnb/LNdBrKIUn0rNKGKi1vvkpPQqi0syYiIBvlN7lt2kM7C6ErE2gr6BfcpCXO4mg4AURlCg6ZHCIrGuk1Kckp/q20P13u1NknW4E7VMkAreE8ONTLEA0Lpep0jDvgSReZIGRQbkSNuBnT0+ggOowP0X3uB0cC1qvu6453Te8lT3/Qv7i8SLfpbDrDN4efh4MPg91ut1gsMBprqYSEY1EledA1fNo+bcN3kiS0HzVgz7pMwGrJhRBs5glS+EuVQbkDZKIoAmHyOEEP2m/s6WmaJsnKRZ5XoijJkIrAWtKG8sP5dNw6ds46Puhmswni+HFsmclKnZe9M0BmiXD4uFavdbod3ERC713PRZDhA2GhJlkmmBuOj0vkt+EXbhl5BnY6bzvDT0P1f+v25nb0Z8SZ6rikMwO51gcGf8G7xkEDNtRqtfPLc1Be/7zebreYkv77PghXP65g5ypZWT3RP3ufjIWeOb6A7LPNZrNerymfIE/GE4wSKgAZNX2aenIrhwF5jzZCOpg3Ly4jf1bIlozsWF+zpxmxQ+liN81UWBaBMrIjOhpoZwkpBGl0hW0U1vNmvXGFooycHMbHFJY7OO4jwqAB6BOkieMYM9GrW818Oge4CuzUDCIqcW4GDsU00iKm0jrrnqFw/+t+uVxyHhZA9jRlZuAvOg5wgyXI8N3NHb55cnoCxgCxh98P6A1gBR/uIkc7LGQ4xx0WFA4lAEAAwuA76Ph85jR82ogJmje7whD37RBfOGodYYaJ4GgSMKFZW25BHiiVzwMaOx47KLF6DfPpupAxkFioO99Eiye6GhYRFEZYcdi2Wi0sMYCYJwYCek6fOdC+GRt5zQmlC8wSdGNgiG3RxlX46O8ITfojlBHDkuLwzU7cscr1LLqhd5y3hfK8Iogq7lLZ8jZK9zU+9co3KK4P+LnCca9nG8T9RedLXBL8tUUMIGwvojXtc99dthiqLnoWViADNHvvAGL2uROVFtcykZjwhZdFcAJc6TjbwTEM3QAq3lP40VSThRxU3U0rgf0nwADpJQebhAz3/AAAAABJRU5ErkJggg==",app_icon_32px_green_unreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4JJREFUeNqMVj1MFEEUntlsx1FzQgmXnI13JGA0XIWJmvgTEzAxBhXbw0Rjg4VWamFLIjWGUkwgFoIFNkAhJN5VHGEpMVBz1OPbfW/evJldyc1d9t7Nzrzf7/3o+9fvqmwZY5RYWmvcQQKewZl0396Uh5kb0jFT/K5QhsotJ75on4lYaZIWWMAy8jelbD7DJz3TlYl0SugL1OQV8JLeIAJIZTyFjHVRSppQa95kpeRTacc9PKmzT7YiYqpCA1PB1jjcD000wpQi7mh3JIMeRII9k8eYp4oyUg/pCVix5zJdAFAg+kp98x/f1Mbr3bPu45uPkN3aznd4tndb716+ZT+z7nw3QhTltaMLGa+JGw3gjuzw/JWxGp7s6y+lKiM7Gwp2XWoByLQBUvjLmcEXRqojyK4FArIzvNPea1G8tZZ3WemYzUklaWejxFNtrE7sMgvg05hskMjfLSVSXaY9CQhcJiMGXAYGB4AoD5VxZ2KygRYPWwtGqpVKtQI735ZXgiyhQN67dkdKplAbNf3k4dPmM9XbSjrJ6+evJFIJSzrLA7trI5N5CXXvcW1vbiltPSrSIs0VsCBwnKEkpUjMzb+49eA2EIufPq+v/oBjUzPTaNyXxSXwDOqbL7pUTW0KK1m8JM3uTg4SxG5tnDB6+veUqoBWQT5hqOAZKRNWRFIkMxlSjBGZ7B8i2J3IziGKDDsHwT79G+crOPG9XIG/jnsnwVwr9Zfgi5vloUvwPeokkOEeOrVIWOhoaIvMZ+D1fuFDjxHm+uFSSjg5MlzDtSvUAO3eIXRyfBIEkksnJZos8Sh8ZfkrhBSI2eYsehwAc3RwBMTUzBT6CvDT3mvDmfOzrqxCxu+Asd/EDQOitftHxnNjdb3bPYdLzfk5wv6vrWQ/8Qq1bNS2vsZeERWRAHq4OsxOAEdjhMuDZQuqpKCRcA5bvMZeC/ObbX181CuZWtevjrqq52tNrHMZF8ms81ouVIuhAcYoZjjXD6jbdIUbgHEhlO06LmxhqALwPTleAv9AqcFXP9c20Hs7m9uyqJFOHGqR2Ronu8KZR3g21bZwCAumIzEREPqjoDbJHHH7/3EjR5hfSYy4RPPGN+VyJGh+8qScnaQRqB/PWPA3Cg00xTOAlOFxVDoYyyRS0yBfcDkwzjk3531vBDZezYjxV1nMkY2y//DMI2NQNJsWOvafAAMAxE3MJSrFyPAAAAAASUVORK5CYII=",app_icon_32px_green_mentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABExJREFUeNqkVktsG0UYnpl9OF6/4JDYaWirNrFIgTbvNEilByS4FHogQeJQoCcOidQjiF6LBGcEnIs4cABBKZeUQw+IQkUicFDVJo0TJ0gtSW2paWLHr90d/t2ZnZ11TBubie3Mzu7+3//9b3z2xdeQuyilKLhMy6yb8KmVq+VLPT0j0RhqfakgF2MMO/YrlnfOYa098PsFQJjLamBA3SVQdyyrPQCCHdWbMJCx4PtPrdYmA64+osgjIJA4MMKEkFy10iYDLgv5QoWtYA+i4Qc+i+Xy/wJgPBo9QZ0PcWHyprVU3m3LyZJXGQ0B46huExAfiUSmzk2VCg/R3VzrDHCTDGBsYKMQomAyOjH63InnN48e3ia4nSjypLJ48fHYLeDR198XiUY6nk5cteotA/iJxv48T7gWc6yvEGVodCgWi8UT8av37y+36AlVeJgpDtEqwvTUy6e6urtM0zx45NDWw61EIv7C8MB3j7YvVMwwwi07WbiXZcTU22++M/0uXAFAtVI1IkY8kXjjrcnNjc3fF7On/7qD6b4BuPpSPgNG8kCSPQEm0jTNMAxAqtfr8M2nj96s1k4urZJ9FCj8+sQZBiAsQxHnz4w2/f7MK2dfrdVqn3/y2eyPs6ZVP/nSxND4sLq6NvLHrfiTbEXEA9Rb2NszQn3H0uBqILGeW9cUVVXUkfGRzmQnerbv43plfmf7SSZyFRYkRBF1vI0wRCfEKJwAxtrdHPyqSD0+fBxMpev631vbF/P5gXD4vVR3Omw8LorkngPSHbnH0nAJ0tlJdjE7MDYIJx1GONWdKpV29ZD+zKGDncmulbX1mdzqoGGMRaKnE08ldT3gA+hoTFk5n0HWpU8/aqza7rJtm8VVpVIpl3aLpVLhQeHihQ/h3LJNeKBH06KKciQUUjGGa5XLxTzT2GW6P90kHljxUBSnymKiqqquaaFwR2Gz0KGHbGpblgYK5Kn9wLRzZpnFixpoyJ4zvv3qm+xSFjbnp8/3ulb68ovLK0srsJk8N3lidABr+MrX3y/ML0DfLj7a0VTNIUdseMB2Mwl7MtVAlrm2YpeZuT9BASYd1rUrs8ViCV6a/mCGUbn582/Lt5eZQhBaTEvgwaIGds4tTIOZLHkC9r39vWy/cW+juFOETTQWTR1IcbffyTIkpylRN/wwJRD3DIBwk6h+FdozXgyODbHNwnyGnQ+OeydzGT/tRfOgvPo6ogi/RURoikcFiWQPrxYQo8xjon5k5jKiqPDXpXxiZvZ94LewIBuQu3HvMtjnxvVf2K2ffrjGrPfr9RtckNxCvNEBS/UDs8lOToK9eIiPYLTpfNYwi3gFjY8pBAXflPu+f/4fZhSjgrjV0A0DHU0gixdkiXIUyPpSRGUSckfhg08jQdp8BpAxAhIRlj0n93Ze7B7zcgM537h7rO8mqTxp+jZU2X/kxZxcsQPAXq/2WneAVmDUDBr2XwEGADZFpKJDFtSPAAAAAElFTkSuQmCC",app_icon_32px_yellow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6VJREFUeNp8Vr1PVEEQn3m+Ais+TOQ4TCCeARMxRyESC6EwkUIDpf530kqnJVZqZayMFBI5wpGAYMEdDZzR3Dqzszs7b+9gL7k3b97sfP5mdnH9yUvwyzkHZiGicISg/0yG+XGnFVZtQpdK6behNmBgJfPD+EqUgMFaFoHaGNxpbauMSlZCB1cgE3iNm7oyXTYbgSASXMUhF1PEpMu9VqY6Zf8Bk/ZcEv3PryIohTxANhyDE34eojOhDNMucRe26FklNDNCj4/CdC3pnxjD+mRw3/phM0HrxvydueQaXgmetVX3eqPf60GrLRtxY63/4pn7+w8Oj1CiYUsDmQgoGgoecU2+Lswz/+gEVN5zcL/tXdbEYo6FkmzGAoE8tTO0dpSZ8TEmdnaDgwvz/HrZg6NT3ib67F51ukiNJr9YCV+usO7OsHTrAAMeEKdrrHfnB2uCak9k+SjVrAJO7N0cgaVmwPXjZqjP02XnI+5LxibGiMM5o9S12i7rkliDgdkgSh/eh+erfUi5w8asa8yC0ML3HH59t42ttnE0ZpuI0uAXbXl/HsCbLepzDuXVOou/fV9cXPKueo1AxbY3tyjD8Os3Xlya5mKkpimZIsDUQPytew6drov1xE6XKyw+3hpn/vEJ7h3ITielCc0EaVzQW6mKhxaKaI8f59ESwD51m01STsIkT3Mg6vEsaYtCuzzlR3CFYf89zjtSGQO0XOjns25sFHD5yRFgH1OUTXCRW1kmMU50w2N0YhQJQiJWr3EE9RqujPAm6u3jU9M9Jt2cIm1xa6YxQxBysSK8lhbB5NZzmoIx2P5YUHzqfna6lGn2IqiZ/UPc3GL21CRPoU6XgSguPphzS4sM/A+fCu8NnJ1DVkjbz2WlwjHvtChwHwqDYq/NgJE9j5reg8ixp012gsqnonqIm1ntaSnA8Yk0ecien3pOz1oFSLDHuEpIKSqdbCpBNLVYnQGDFIG4RPi5yYXloa2TMY0A6eEsgsGjVZ3yAKUCQOc88L37VADs/al4nVS7VG3Ba5m7YEpE05gQ8n03jnGAr99YA5lMZQSXHZZqLA277I6lNqiMYRjET+T45y8QnDNDLUQfzw/b2eXgzUejSSAZuK/ZsTh4g7L8wurNBlHiG4Hs/hLPJMwuCenaUmnxeOBko+kq98Nlq4oOPVGEU+QBuivvANnZFzQCZtcywMpMKa/ZnAWXJTd33EjYHJbyhOo9xarWu2WlBsPupkMT+1+AAQCmPwV2bobFnwAAAABJRU5ErkJggg==",app_icon_32px_yellow_unreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1hJREFUeNqMVr1PFUEQn9lcIc+ORylHB9gBNpLY+dEISKWhNHYWdhb+FRaa+CeYWJnYKVoJdAiVQMc7Oh90go1vnX2zOzs7dxj2JXfz9mbne36zuLa8AuPlvQe1EJF3mKCn4Qn76aRmFmlMV0LJt04d0FpZfde+EBVg1GY8EB3tk1q38Ahn4Tp4h4HA/5gpy8jS0YgEkeALg3wKUSC9tVo2xSj9BMzSLSeOf+PlolCwDgbFyTnety565UqXdPbb6aSbTEhk2jVWmAJe26EjQasqQoYdBUrExDX/7Kmfnx2dX8DLV47FvX39l54HR/jmHUqcxXY5G6uos3jYNPq6tEjSA8/BITL/3Gzk7PUCH4g3aGuhohMpQcBv6QzJ3fR0FHd4FHnqaZ92MOYbUZ8Vo11uNP6lTIwjFhebLx7QztJiVPnzIJtv+oNXZUKmM3ZrwU9Ohs2pfuReXGDOUX0jSqlrmKmDNV++2i5JOWgVBoflwT14tDIyuVlf9QCFgetjnsEJkoJsaIo2EU7Vb9TMldDvdyDHZWv3B3Do2Expi9Arq7cfarwELgpV+xtP/J3lQLz/4L5vh2P373p27uMnMhzZ3jboxipKLQydiSJaCqY5ifg1l3J+dparw/QTFyc9XXZHyp8NGbtMLSb5PB5E/BKVx01UaSdHLPvwt2ojeJRbh78ia9AgN9f1nu9NRGOpuqb6vmmQOlwHWRwKGaWJxr7o+iVZL56PrphhwQ+pIh1k5wXDMQP1TH31CoLhEE0iBTpzHwjEs/LPmxQT0g3razEHVDDNSThAJcSNTfVDSEc8FxcZVPQEtY2m4XAMk+GYZHhrG8//BJzbeJxqfx8HA3HaFqjgqys6WWWC6Dph3PA0BJpOU3qnUgOSdCNRAL/woBhh5bCdn4PkTdy/OV+CqAZOhodWxznddcXIhWxs08QOZ+wLIHqYZ0YeZJinZpGD9ghjEwYN/Bri6Sns7kUM396hkI6I3tsvQC3aJKlWkaraNx8J6NaOS+5Hnt/nfvObM1OvfYPS+85gk+6RvH9JGKXe5ZOuETvRRLMcMMNPc+q7k0ZGPVF4x1kH/aV3ADP7ZHiYa1meNiYH7cPGORNca7ji0DGs+A3lPaWYP3Ln0Tnoupt2BvafAAMA603M1k3efM4AAAAASUVORK5CYII=",app_icon_32px_yellow_mentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABBhJREFUeNqkVk1vG0UYfudj/bExbWo3kJLaKRWO3aaooIoKOMCBDwlBI06F/oEeQOIHcIU7N34CEieQekMIkBDtBaEgDk1aRIgdRGiSpqSpN1nvzPDOzuzurO2SxozX69lZz/vM836ThRffhngopSA/IhH1I7zCYD/4eGbmQuUxOPzgKJcQgjNzT0eybmHFEPyjAgCxsgYYqHikqPeFGA+AEn30EQxcLPz+FYZjMrDHBwUJgRTJAgOhlK7s743JwMqCTGiqK5yjaLzhtRQE/wvA8Bi0hNIXjWE2IrEc9MYHsFaN1ZTC6KPjl1K/RBbepJv1u2MBkBERYNjghFHKCD13lj59mv4xtf0PhON4USLV+EuGZ14hh0ad+WVWrNAvg/VDA2SBZj6JJTRMrH1G2ZkWmZjglQq/dmfn9iEtwVon54adx0wuPAfzZ+WpWTh/DqRUeG3dVUti5yI95hF6aIBMdHx74zW4clm256DVNHrT+ntyWvnV/hrsNnePZbo90Ivs8RMMs7NWs4QoBY+TcolVfH7kiDc5Wdid3vt2alXAI2UncumFtwxAqhllOVhrv/eueumi7Efy8y/ghxtRJPrPzIft5r7/d/GVtVNHqXewm7rZTSMlc0Noto4kCOd0fZ16jHPG59terVoIZ8JPdn/76f7OQdk0PnBKIk2iqHNcLpdU46TGYpSs/YlOhRt4q6n6EXge6T4QH213zpfLV6dPNMv+QwAcx09PreU29GOjblZgtUNacwhPSyU1VeO9PVLw6InHRXWS3V7vf7Dy+7O+//xE5eWjk08UCjkbYEUzh3XjuTUHH74vB7N2/F5IJSIVhnI/FMGe7AXR9rb49DN0YilkhEJmPK/C2FPFIicEn7mVS2ykmcfZxih/0ElF64pwncEZJx6XxQK9d0+VCjpOhPCUkhtK3onkShQYf+G5gpwY4+tvoNPFIId3FrQN8M1X10h3TfvD668qjAw0+3ffw81lJoR80FOIhLsk1aRlnDRJIpO7Cc7oyjwu3dIHMNJx/HidoN5x05XLlsrir3R1Fd1B64AzaU6JPIzX4EwLJIrnlOBYAuf1up1vbkEvZuyX4XjNmr3TsZGvi5KK3Y8oin5vAKhVCU+z0HB70W5Bwsaun2lbyOVb2T+z4qFs9tWiqH1FU9dM/5qSOJ5ki27XRni1alduLidbkhrlxpNRc2aDrITl2XS6sLFJtrbg50Wbw6/fwNwlcb74SyLILSFJ6+DmQWI6OzcIhvHAtmBqZH82kOSThGbbFAr5nW5hyNYfosa0VUhfDVTDXEVLkdMNrkTXC9zzKlAuCZvNwGl8Bgmq0T2Ai5GTCMS1nFvbbbL7j80D5DLlDmk/DlK308x0yM0vJD7nZuwcMKicDfK0cq1mXrH/CjAAfjaCPa5V5tYAAAAASUVORK5CYII=",app_icon_32px_red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2pJREFUeNp8Vr13EzEMly5uQl+nlKnpRrtRNsp7DO1Ilz5W/gZW/iG6MrLCyMhIN9JsKVvDlH7dRdiWLcu6K27fxaeTrY/fT7Lx/dtziIOIQA1EZAlP/NPoBHleqZVlN547mcm3QRvQG8X8kFwmDjBZMxGIjf5KbVt0RLMKHajBMMH/uCnD7KWzkSZ+ClQ5RDlFYUrWaxGKU/oJWHa3mhj/4mjSpmADDIZzcCy3IZIKZWh3jrvRoBskJDM8nzawPyr7745w1iT3tR86E3401XZAg+Txr2fP4NMOHbmy8t2EPu7Aybj4J1mWHPiRWDRIHnaNv/LWyw2IPksWm6AHkli0XHA+Xxkg4F+pDMFu38E0hnr5mDw42grPW4JlF5bxfnqtOO2kCIIlJMFH8+lFzPVVK3zACAYFewFV1NVa/GMDJYNUIbaNcDxOlt6Mk7bPOGtyfnYbOJkE7WXnzZOpklzJvd7AaXm1FWDUXw9c+AdVSlESXr/e4VUEVZiatDAayFLU8P5u6fM6ZMOH8mE7qH+5xXV0ajbCs2j7Yh3w+7PB9UYVV2BqYWOJAEsBhW9/CVatnxLjudrAZcsJx+cR8OsO5i1DRQxNKiYVo39zsrFuXno+jQgHgub+tRcNeMyFHYB1N42iACf4QiPbERMNMK0/jNW7bHNhU6rnm00uFCB7ciTa5xSZDs56p5MUx4EQJnNpFg3MHJ5yKB36dFXsRJUidoGtiRm/qaHQ8dh28uOtpPDtHpctifvmdHGl9yKImUWHF+sg3hvR2SQg7InIfrx05I154n+/T3y7iRQyXUiy7SqEc9798IHHUAIp5h3Ocx29jqEsskTaWGmU9Qno6kOchBC84GAUntctpQLzJhnzjuSs7begkiigpqpkhQSXGOM575JLnj/bmDgqnbG0ACLL19BN9RFWH7aHMT8egFWmMrcKD8Bd7AZV4+QCI3vNcdYFZcl3Y8+QX4+pnfvHz4egsiKVE31GCU2wxsDcscSGh3HeVn3wDvHHAx+uoJtaCiKfH7qyXf/mI9EUOvfua7ot9m9QWt7ofU0jKnKlYO4vmIe5JJRrizmAuL2Y1vSU++mypTqjPlFY0tgA6ck7gDn70o6A5loGul9rDPqLTXAmudZxpaFz6PgX6nuK3lpqssJg6G46mNh/AgwA1LYLPz5hMyUAAAAASUVORK5CYII=",app_icon_32px_red_unreads:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzFJREFUeNqMVr1zUzEMlxyHtincsdDOyUo6Aytz6Qoz3HVk5y/gr6ATQ2dgBWZYKWvDDAsDaZvmJUZ+smVZ77UXp5e4sqyPn76MR08OoV0hBFALEZnCG/o2PJGeb2pmkcZ7Lzs569UBnVXU99Fl4wGTNuOB6Oje1LqFRzgr1yE4jBu8xUxZRpZGI21oC6EyKGSI4jZYq4UoRulvwCLdcmL7aZdLQsE6GBVn55huXQzKlT7p7LfTQTeREGS6OVaZAkHboZGg5SvIsCdBaTOC8PoeTH2YBzj+mwx/fz8enS3h7RwEZ7Fd7qYs6k0eNo1OH90h6cDimH86TJy7LvKBeIM2FzzpzAEC/pXKkNiNs59nTeIZDxSF442o74rRrhQaf3IkWsTSmoqC1gOikE+KUtWEwcMbyHTEHg/hgYvEvZQKQHLZY/FgPMDJIHr18SqYKskx6CQGw3K0jc93bGxe7ABAqCnx39mKFChDM9q0cSp/k2bOBLZ9w/XtOkHHZkpZxEou5pcCimcnl/DuIjK+GsHTrUg/ucDPi2jjsy1g504vo+FsrzRdVD62dYC2l5lGNvZpTzhwsj/MVv1ZR2mqL5R64lDRtyvuSPpzXrUuj1Q8z5sUIMna81WqLzs5UtrHf323g7Pcia+yhczn4trF+Mdr3+G+oyOc6+pRcEfEaKKxLzp/Sdabu5tGWPqHZJEG2QXp4Vga9WSAm6fQ7zWYQErrLHUgLZ6Vf7gK5DhppsRnlChhfq3ihcPtwIVN+fOziTzzdWkqeoLaQtPtkNaPpo1nBurLAubtpZejnPtLmDWCe9WCClCQ54GMnZKggBJhAoGAptsUXmkbswaMRGn4lQfVCKuH7cEwFU1qmYgHQzCUaoKGquL4yOlpXo1c6haDUBmr+gc1UZkZZZBhmZpVDLojjE0guaeriA+1Gj76ep1K9/sSdFNLNkmoFVK++/IRQElcdj/x/FuHTws0U6/7gtJ0p+WaRlToN8Ao+S5HOkfsRBPNcsEMP82p3066M+qJwhRnHQw3vgHM7JPhYZ5lgNVM8rdcNs4ZcK3hikNj6PkX6neKFl3ePDoGfW/TXmD/CzAAcryyBfjeu1oAAAAASUVORK5CYII=",app_icon_32px_red_mentions:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+pJREFUeNqkVktvHEUQ7q7unp19xAkHJ6BFAhshgeI8pAgpuSAO3OLkCJw5cOEXwBX4F/yAiBMCxA1yyQWUG4kEIsoGoyiWDYg4jsc7091F9XRPT8/YkeNlPLvunUd99X1V1VX8+pV1Vh+IyLqHNrrSdJbFvPhsOr00OcGOf0iyyzmnlf+OR3M9wJoD8M8LwHiw1WOA9RFRnxizGABw5/ohDFIs+jwqywUZBPcZsoZARArAjAPAbL6/IINgi7VGo1a0JtP0ReevRfG/ADyPfiTQnVDDbGvzW7G3OECIai1ThHGu0wdgzPl7Y3i8+89CAPyQCvBsaCEABIeLA/FGJh7uPd6pykWyqLHq86XF87eIw0oGIyEHnH+9vXlsgLbQ/F8TCQdTqy9AnM/ERIolJb/9d+f3Y0YCYoR9CFK5Liu2PsCrOZ9KGAt5Qqo3c/HVo43iOEUne9LHUF/P+ftDx0IjKw1JJJakvDZWW/Py1ubs3elrrbZHMgjuN/Xs31yGQEWQFwBDQSrJk0q9oFSh57c2N55zd+LXLl/1ALGAkQXfvFwfjtg7GVbWfrmLPxSVNtUlVq6xciAHV868siTV0Wma7m4OqVl7QqvS1RqReIighJRCns+z5UFmTPnFg3u3n+wcFYPa4UgibqIUCbo8Yrgi3COE8YdllFSSybNDXmmmOGzMq0//3LgwHH704kuvD0fPDHLMnOg12V2VDoOs+wqZGbaWETzkyE4rXnCeAbyci2Wp71XVx7P7F0ejt8aTt0+eOpNlnRhQR/POpgm6ptgnk0N2bTotokYsjd23hvJ1z5i/KvP5jrHWGkt3cKrURIiVwUByykCUwS4PleZ/roqmrFNffFLVyeDKD7gCyEH8zU2eWYvWGIVot9FuaTvThfdJdhpyE4xv9nFmnEQfDJlX6UbBHhgHsZ7jWemS+fsC71ag0ewaUJKIoQXLaoq1JMGm7FRZrZX/+Yt2BbfSCPXjnD2tHaGs9U/c1vy+pnSQ9JwU1ntJPHzW0MoZ5Nit5CQStH5VhPWWZU/dEsecnYYm7Dq0PNeUsE4/jkB57wEgSCLj7n9wvDinQiTu6EDxnGK9K23ugXPYL5wpCLcgpmZ8NJJYbhjMdMiiuH/cqZpXmh6V1pMXsY1B28K6bMjuDeP0+akMt26WjhPZ+bliwVDaQprRId0HZTqtpDDeXJNd4Zldi9/NOzNHHEb6c1tzHVK7vamivf4MGeOoEG/1umGno0Xk+EJqMc2C1F9kmI45aUcJg0+fIB4+A6QYHYuMp5FLe3s/Bgdf7pHridt3vDNpthpK/581EUt37A4ww04MurQ6o2ZX2P8EGAAu1YEi4TmT9gAAAABJRU5ErkJggg=="},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_complex_customs:null,emoji_menu_columns:9,emoji_menu_colors:6,files_url:null,archives_url:null,bots_url:null,team_url:null,dnd:{next_dnd_start_ts:null,next_dnd_end_ts:null,snooze_enabled:null,snooze_endtime:null,team:{}},frecency_jumper:{},typing_msg:TS.i18n.t("several people are typing","model")(),pdf_viewer_enabled:true,onStart:function e(n){n=n||navigator.userAgent;if(TS.isSocketManagerEnabled()){var a=function e(){throw new Error("This is read-only")};Object.defineProperty(TS.model,"ms_connected",{get:TS.interop.SocketManager.isConnected,set:a});Object.defineProperty(TS.model,"ms_connecting",{get:TS.interop.SocketManager.isConnecting,set:a})}TS.model.files_url=TS.utility.normalizeDevHost("https://"+document.location.hostname+"/files");TS.model.archives_url=TS.utility.normalizeDevHost("https://"+document.location.hostname+"/archives");TS.model.bots_url=TS.utility.normalizeDevHost("https://"+document.location.hostname+"/services");TS.model.team_url=TS.utility.normalizeDevHost("https://"+document.location.hostname+"/team");var t=[];if(TS.model.is_safari_desktop)t.push("is_safari_desktop");if(TS.model.is_electron&&TS.model.is_mac&&TSSSB.call("isMainWindowFrameless"))t.push("is_electron_mac");if(TS.model.is_electron)t.push("is_electron");if(TS.model.is_mac)t.push("is_mac");if(TS.model.is_win)t.push("is_win");$("html").addClass(t.join(" "));var r=o(n);var i=!TS.model.is_electron&&TS.model.mac_ssb_version&&TS.utility.compareSemanticVersions(TS.model.mac_ssb_version.toString(),"0.61")>=0;var s=TS.model.is_electron&&TS.model.mac_ssb_version&&TS.utility.compareSemanticVersions(TS.model.mac_ssb_version.toString(),"2.2")>=0;TS.model.supports_growl_subtitle=(i||s)&&TS.utility.compareSemanticVersions(r,"10.7")>0;var l=false;Object.defineProperty(TS.model,"dialog_is_showing",{get:function e(){return l},set:function e(n){l=n;TSSSB.call("dialogIsShowing",n)},enumerable:true,configurable:true});TS.model.supports_voice_calls=false;if(window.winssb){TS.model.supports_voice_calls=!!(winssb.screenhero||winssb.calls);if(TS.model.win_ssb_version&&TS.model.win_ssb_version<2)TS.model.supports_voice_calls=false}else if(window.macgap){TS.model.supports_voice_calls=!!(macgap.screenhero||macgap.calls);if(TS.model.mac_ssb_version<2)TS.model.supports_voice_calls=false}else if(TS.model.is_chrome_desktop)TS.model.supports_voice_calls=true;TS.model.supports_video_calls=false;TS.model.supports_screen_sharing=false;TS.model.supports_screenhero=false;TS.model.supports_mmap_minipanel_calls=false;if(window.winssb){if(winssb.calls&&winssb.calls.requestCapabilities){var c=winssb.calls.requestCapabilities();if(c){if(c.supports_video)TS.model.supports_video_calls=true;if(c.supports_screen_sharing&&winssb.stats&&winssb.stats.getDisplayInformation)TS.model.supports_screen_sharing=true;if(c.supports_screenhero&&!c.is_mas&&!c.is_ws)TS.model.supports_screenhero=true;if(c.supports_mmap_minipanel)TS.model.supports_mmap_minipanel_calls=true;TS.model.is_mas_or_ws=c.is_mas||c.is_ws}}}else if(TS.model.is_chrome_desktop)TS.model.supports_video_calls=true;TS.model.supports_spaces_in_windows=false;if(window.macgap&&macgap.window&&macgap.window.list){if(window.WebKitMutationObserver||window.MutationObserver)TS.model.supports_spaces_in_windows=true}else if(window.winssb&&winssb.window&&winssb.window.list)TS.model.supports_spaces_in_windows=true;if(TS.boot_data.special_flex_panes)_.forOwn(TS.boot_data.special_flex_panes,function(e){TS.model.flex_names.push(e.flex_name)});TS.model.expandable_state=TS.storage.fetchExpandableState()},makeYouRegex:function e(){var n=TS.model.user;if(n)if(TS.boot_data.feature_name_tagging_client)TS.model.you_regex=new RegExp("<@("+n.id+")\\b");else TS.model.you_regex=new RegExp("<@("+n.id+"|"+n.name+")\\b")},addProfilingKeyTime:function e(n,a){if(!a||!n)return;if(!TS.model.profiling_key_times)TS.model.profiling_key_times=[];TS.model.profiling_key_times.push({name:n,ms:a})},incrementUnknownIdHandled:function n(a){e[a]=e[a]||{tries:0,state:0};var t=e[a];t.tries+=1;t.state=0;if(t.tries>2)TS.maybeError(48,'calling the API for id: "'+a+'", try #'+t.tries);else if(t.tries>1)TS.maybeWarn(48,'calling the API for id: "'+a+'", try #'+t.tries);else TS.log(48,'calling the API for id: "'+a+'", try #'+t.tries);return t.tries},reportResultOfUnknownIdHandled:function n(a,t){var o=e[a];if(!o)return;o.state=t?1:-1;if(1==o.state)TS.log(48,'API call for id: "'+a+'" SUCCEEDED, try #'+o.tries);else TS.maybeWarn(48,'API call for id: "'+a+'" FAILED, try #'+o.tries)},logUnknownIdsHandled:function e(n,t){var o=a(n,t);TS.info("_unknown_ids_handled: "+JSON.stringify(o,null,2))},getUnknownIdsHandled:function e(n,t){return a(n,t)},test:function e(){return{getOSXVersion:o,isWin7Plus:t,sniffUserAgent:r}},getBroadcastKeywordById:function e(n){var a=_.find(TS.model.BROADCAST_KEYWORDS,{id:n});if(!a){TS.warn("no broadcast_keyword ob found for "+n);return}return a},getViewById:function e(n){var a=_.find(TS.model.NAMED_VIEWS,{id:n});if(!a){TS.warn("no view ob found for "+n);return}return a},isMac:function e(){return TS.model.is_mac},getUserModel:function e(){return TS.model.user},getUserPrefs:function e(){return TS.model.prefs}});_.merge(TS.model,r(navigator.userAgent));var e={};var n=[-1,0,1];var a=function a(t,o){t=parseInt(t,10)||1;o=_.includes(n,o)?o:"any";var r={};Object.keys(e).forEach(function(n){var a=e[n];if(t>a.tries)return;if("any"!==o&&a.state!=o)return;r[n]=e[n]});return{state:o,min_tries:t,count:Object.keys(r).length,obs:r}};function t(e){var n=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);if(!n||n.length<2)return false;return parseInt(n[1],10)>=6}function o(e){var n=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);if(!n)n=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/);if(!n||!n[1])return 0;return n[1].replace("_",".")}function r(e){var n=/(OS X)/g.test(e);var a=-1!==e.indexOf("Windows");var r=/(WOW64|Win64)/g.test(e);var i=-1!==e.indexOf("Linux");var s=/(iPad|iPhone|iPod)/g.test(e);var l=/(Android)/g.test(e);var c=/(Edge)/g.test(e);var _=/(Chrome)/g.test(e)&&!c;var d=_&&(s||l);var u=/(Slack)/g.test(e);var f=/(MSIE|Trident)/g.test(e);var m=/(Firefox)/g.test(e);var g=/(Safari)/g.test(e);var p=/(AtomShell)/g.test(e);var S=/(MSIE)/g.test(e);return{is_iOS:s,is_IE:f,is_FF:m,is_edge:c,is_chrome_desktop:_&&!d&&!u,is_chrome_mobile:d,is_safari_desktop:g&&!_&&n&&!s,is_mac:n,mac_version:o(e)||void 0,is_win:a,is_win_64:r,is_win_7_plus:t(e),is_lin:i,is_our_app:u,is_electron:p,is_old_ie:S}}})()},4183:function(e,n){(function(){"use strict";TS.registerModule("environment",{is_apple_webkit:false,is_dev:false,is_macgap:false,is_retina:false,retina_changed_sig:new signals.Signal,supports_sticky_position:false,supports_custom_scrollbar:false,slim_scrollbar:false,supports_flexbox:false,supports_line_clamp:false,supports_intersection_observer:false,onStart:function e(){c();r();d()},isSSBAndAtLeastVersion:function e(n){if(!TS.model.is_our_app)return false;var a=n.split(".");var t={major:0,minor:0};var o={major:0,minor:0};if(a.length>2)t.minor=parseFloat(a.pop());t.major=parseFloat(a.join("."));if(TS.model.mac_ssb_version){o.major=TS.model.mac_ssb_version;o.minor=TS.model.mac_ssb_version_minor}else if(TS.model.win_ssb_version){o.major=TS.model.win_ssb_version;o.minor=TS.model.win_ssb_version_minor}else if(TS.model.lin_ssb_version){o.major=TS.model.lin_ssb_version;o.minor=TS.model.lin_ssb_version_minor}return TS.utility.compareVersions(o,t)>=0},doesSupportStickyPosition:function e(){return TS.environment.supports_sticky_position},test:function e(){var n={_decoratePageWithSupport:r,_initialSetup:c};Object.defineProperty(n,"cssPropertySupported",{get:function e(){return i},set:function e(n){i=n}});Object.defineProperty(n,"cssValueSupported",{get:function e(){return s},set:function e(n){s=n}});return n}});var e=["-webkit-","-moz-","-o-","-ms-",""];var n=["Webkit","Moz","O","ms",""];var a=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")");var t=new RegExp("^("+n.slice(0,n.length-1).join("|")+")");function o(){return window.devicePixelRatio>1}function r(){var e=["is_apple_webkit","is_macgap","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_flexbox","supports_line_clamp"];var n=_.partition(e,function(e){return TS.environment[e]});var a=$("html");a.addClass(n[0].join(" "));a.removeClass(n[1].join(" "))}function i(e){if("scrollbar"===e)return u();var o=document.createElement("css_property_supported").style;e=e.replace(t,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(a,"").toLowerCase();e=_.camelCase(e,"-");var r=_.upperFirst(e);if(void 0!==o[e])return true;return n.some(function(n){return void 0!==o[n+r]||void 0!==o[n+e]})}function s(n,t){var o=document.createElement("css_value_supported");t=t.replace(a,"").toLowerCase();o.style.cssText=n+":"+e.join(t+";"+n+":")+t+";";return!!o.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky");if("Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&o())TS.environment.supports_sticky_position=false;TS.redux.dispatch(TS.interop.redux.entities.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!!(TS.model.mac_ssb_version||TS.model.is_safari_desktop);TS.environment.is_dev="dev"===TS.boot_data.version_ts;TS.environment.is_macgap=!!window.macgap;TS.environment.is_retina=o();TS.environment.supports_custom_scrollbar=i("scrollbar");TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar;TS.environment.supports_flexbox=i("flex-wrap");TS.environment.supports_line_clamp=i("line-clamp");TS.environment.supports_intersection_observer="function"===typeof IntersectionObserver;l()}function d(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener(function(){var e=TS.environment.is_retina;TS.environment.is_retina=o();if(TS.environment.is_retina===e)return;TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina);TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina);l();r()})}}function u(){var e=document.createElement("div");e.id="__sb";e.style.overflow="scroll";e.style.width="40px";e.style.height="40px";e.style.position="absolute";e.style.left="-40px";e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>";document.body.appendChild(e);var n=30==e.scrollWidth;document.body.removeChild(e);return n}})()},4184:function(e,n){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(function(){"use strict";TS.registerModule("ssb",{teams_did_load_sig:new signals.Signal,onStart:function e(){if(TS.files)TS.files.team_file_deleted_sig.add(o)},openNewFileWindow:function e(n,a,o){if(d)TS.log(d,"TS.ssb.openNewFileWindow url: "+a);if(TS.client)return TS.client.windows.openFileWindow(n.id,o);else if(window.is_in_ssb){TS.ssb.upsertFileInSSBParentWin(n);if(document.ssb_main){if(document.ssb_main.TS)return document.ssb_main.TS.client.windows.openFileWindow(n.id,a);return true}else if(window.winssb&&window.opener&&window.opener.executeJavaScript){if(d)TS.log(d,"calling _executeInAtomSSBParentWin for TS.client.windows.openFileWindow");i("TS.client.windows.openFileWindow("+t(n.id)+", "+t(a)+");");return true}}return false},closeWindow:function e(){if(!window.is_in_ssb)return false;window.close();return true},setUpAtomSSBWin:function e(n){c(n,"window.is_in_ssb = true;");if(TS.shouldLog(438)&&!n._has_console)n._has_console=1},upsertFileInSSBParentWin:function e(a){if(!TS.web)return;if(document.ssb_main){if(document.ssb_main.TS)document.ssb_main.TS.files.upsertAndSignal(a)}else if(window.winssb&&window.opener&&window.opener.executeJavaScript){if(d)TS.log(d,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal");i("TS.files.upsertAndSignal("+n(a)+");")}},toggleMuteInWin:function n(a,t,o){if(d)TS.log(d,"toggleMuteInWin called with token: "+a);if(!TS.client)return;var r=TS.client.windows.getWinByToken(a);if(!r){TS.error("toggleMuteInWin called with bad token: "+a);return}if(window.macgap){var i;var s;try{i=r.window.toggleMute(t)}catch(e){TS.error("error calling macgap win.window.toggleMute");TS.error(e);s=e}if(o)setTimeout(o,0,s,i)}else c(r,"window.toggleMute("+e(t)+");",o)},teamsDidLoad:function e(){TS.ssb.teams_did_load_sig.dispatch()},distributeMsgToWin:function e(a,t){if(d)TS.log(d,"distributeMsgToWin called with token: "+a);if(!TS.client)return;var o=TS.client.windows.getWinByToken(a);if(!o){TS.error("distributeMsgToWin called with bad token: "+a);return}if(window.macgap)try{if(o&&o.window&&o.window.TS&&o.window.TS.ms&&o.window.TS.ms.msg_handlers)o.window.TS.ms.msg_handlers.msgReceivedFromParentWindow(t);else if(d)TS.maybeWarn(d,"distributeMsgToWin win.window not ready! token: "+a)}catch(e){TS.error("error calling macgap win.window.TS.ms.msg_handlers.msgReceivedFromParentWindow");TS.error(e)}else c(o,"TS.ms.msg_handlers.msgReceivedFromParentWindow("+n(t)+");")}});var e=function e(n){return(!!n).toString()};var n=function e(n){return"JSON.parse('"+JSON.stringify(n||null)+"')"};var t=function e(n){n=String(n);n=n.replace(/"/g,'\\"');return'"'+n+'"'};var o=function e(n){if(!n)return;if(!TS.client)return;var a=TS.client.windows.getWinByProp("file_id",n.id);if(!a)return;setTimeout(function(){if(window.macgap)try{a.window.TS.files.team_file_deleted_sig.dispatch(n)}catch(e){}else c(a,"window.TS.files.team_file_deleted_sig.dispatch(TS.files.getFileById("+t(n.id)+"));")},1e3)};var r=[];var i=function e(n,a){return TSSSB.call("executeJavaScriptInParentWindow",{code:n,callback:a})};var s=function e(n,t){if(d)TS.log(d,'CALLING _executeInAtomSSBParentWin\n\n"'+n+'"');var o=function n(){r.shift();if(r.length)e.apply(null,r[0])};var i=2e3;var s=1;var l=2;var c=function e(){var r=setTimeout(function(){s+=1;if(s>l){TS.error('_executeInAtomSSBParentWin\n\n"'+n+'"\n\ndid not get a callback in '+i+"ms, bailing");o()}else{TS.error('_executeInAtomSSBParentWin\n\n"'+n+'"\n\ndid not get a callback in '+i+"ms, trying again");e()}},i);var c=TSSSB.call("executeJavaScriptInParentWindow",{code:n,callback:function e(i,l){clearTimeout(r);if(i)TS.error('_executeInAtomSSBParentWin\n\n"'+n+'"\n\nreturned err: '+i);else{var c="object"===("undefined"===typeof l?"undefined":a(l))?JSON.stringify(l,null,2):l;var _=1==s?438:0;TS.log(_,'_executeInAtomSSBParentWin\n\n"'+n+'"\n\nreturned data: '+c)}if(t)t(i,l);setTimeout(o,0)}});if(d)TS.log(d,'CALLED _executeInAtomSSBParentWin\n\n"'+n+'"\n\n ret: '+c);return c};var _=c();return!!_};var l=[];var c=function e(n,a,t){return TSSSB.call("executeJavaScriptInWindow",{window_token:n.token,code:a,callback:t})};var _=function e(n,t,o){if(d)TS.log(d,"CALLING _executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"');var r=function n(){l.shift();if(l.length)e.apply(null,l[0])};var i=2e3;var s=1;var c=2;var _=function e(){var l=setTimeout(function(){s+=1;if(s>c){TS.error("_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\ndid not get a callback in '+i+"ms, bailing");r()}else{TS.error("_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\ndid not get a callback in '+i+"ms, trying again");e()}},i);var _=TSSSB.call("executeJavaScriptInWindow",{window_token:n.token,code:t,callback:function e(i,c){clearTimeout(l);if(i)TS.error("_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\nreturned err: '+i);else{var _="object"===("undefined"===typeof c?"undefined":a(c))?JSON.stringify(c,null,2):c;var u=1==s?438:0;if(d)TS.log(u,"_executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\nreturned data: '+_)}if(o)o(i,c);setTimeout(r,0)}});if(d)TS.log(d,"CALLED _executeInAtomSSBWin token: "+n.token+'\n\n"'+t+'"\n\n ret: '+_);return _};var u=_();return!!u};var d=438})()},4185:function(e,n){(function(){"use strict";TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function e(){$(window).bind("focus",TS.ui.onWindowFocus);$(window).bind("blur",TS.ui.onWindowBlur);a();$("html").bind("mousedown",function(){TS.ui.onWindowFocus({target:window})});var n=!!(document.hasFocus&&document.hasFocus()&&window.macgap_is_in_active_space);if(n)TS.ui.onWindowFocus({target:window});else TS.ui.onWindowBlur({target:window});if(TS.model.win_ssb_version)$("body").addClass("winssb");o()},setUpWindowUnloadHandlers:function e(){if(window.macgap)window.onbeforeunload=TS.ui.onWindowUnload;else if("undefined"!==typeof window.addEventListener)window.addEventListener("beforeunload",TS.ui.onWindowUnload,false);else if("undefined"!==typeof document.addEventListener)document.addEventListener("beforeunload",TS.ui.onWindowUnload,false);else if("undefined"!==typeof window.attachEvent)window.attachEvent("onbeforeunload",TS.ui.onWindowUnload);else if("function"===typeof window.onbeforeunload)window.onbeforeunload=function(){TS.ui.onWindowUnload();return false};else window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function e(){if(TS.client)TS.client.markLastReadsWithAPI();TS.model.window_unloading=true;TS.ui.window_unloaded_sig.dispatch();TS.redux.dispatch(TS.interop.redux.entities.window.setUnloading(true))},maybeTickleMS:function e(){if(!TS.client)return;TS.client.ui.maybeTickleMS()},handleDraghoverstartFromWinSSB:function e(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function e(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function e(n){TS.ui.file_share.handleDropFromWinSSB(n)},onMacSpaceChanged:function e(n){if(!n)TS.ui.onWindowBlur({target:window});else if(document.hasFocus())TS.ui.onWindowFocus({target:window})},onWindowFocus:function e(n){if(n.target!==window&&n.target!==document)return;if(TS.model.ui.is_window_focused)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=true;if(TS.view)TS.view.updateTitleBarColor();TS.ui.window_focus_changed_sig.dispatch(true);TS.redux.dispatch(TS.interop.redux.entities.window.updateFocus(true))},onWindowBlur:function e(n){if(n.target!==window&&n.target!==document)return;if(!TS.model.ui.is_window_focused)return;TS.model.shift_key_pressed=false;TS.model.insert_key_pressed=false;TS.model.ui.is_window_focused=false;TS.ui.window_focus_changed_sig.dispatch(false);TS.redux.dispatch(TS.interop.redux.entities.window.updateFocus(false))},onWindowVisibilityChange:function e(n){if("hidden"===document.visibilityState)TS.ui.onWindowBlur(n);else if("visible"===document.visibilityState)TS.ui.onWindowFocus(n)},needToShowAtChannelWarning:function e(n,a){var t;var o=TS.format.cleanMsg(a);var r=TS.model.everyone_regex.test(o);var i=TS.model.channel_regex.test(o);var s=TS.model.group_regex.test(o);var l=!!TS.model.prefs.last_seen_at_channel_warning;var c=new Date(TS.model.prefs.last_seen_at_channel_warning);var _=l&&TS.interop.datetime.isSameDay(c,new Date);if(!r&&!i&&!s)return false;t=TS.shared.getModelObById(n);if(!t||t.is_im)return false;if((i||s)&&!TS.permissions.members.canAtChannelOrGroup(t.id))return false;if(t.is_general&&r&&!TS.permissions.members.canAtMentionEveryone(t.id))return false;if("never"===TS.model.team.prefs.warn_before_at_channel)return false;if("once"===TS.model.team.prefs.warn_before_at_channel&&l)return false;if("daily"===TS.model.team.prefs.warn_before_at_channel&&_)return false;return true},needToBlockAtChannelKeyword:function e(n,a,t){if(TS.interop.utility.looksLikeMemberId(t))return false;var o=TS.format.cleanMsg(n);var r=t&&TS.shared.getModelObById(t);var i=r&&!r.is_im&&!r.is_mpim||a&&(a.channels.length||a.groups.length);if(!i)return false;var s=TS.model.everyone_regex.test(o);var l=TS.model.here_regex.test(o);var c=TS.model.channel_regex.test(o);var _=TS.model.group_regex.test(o);var d=false;if(r)d=!!r.is_general;else if(a&&0===a.groups.length&&1===a.channels.length){var u=TS.channels.getChannelById(a.channels[0]);d=!!u.is_general}if(d&&s&&!l&&!c&&!_)if(TS.permissions.members.canAtMentionEveryone(t))return false;if(!TS.permissions.members.canAtChannelOrGroup(t)){if(l)return"@here";if(c)return"@channel";if(_)return"@group";if(s)return"@everyone"}var f=r&&r.is_general;if(!f&&a&&a.channels)a.channels.forEach(function(e){var n=TS.channels.getChannelById(e);if(n&&n.is_general)f=true});if(f&&!TS.permissions.members.canAtMentionEveryone(t))if(s||l||_||c)return"@everyone";return false},startButtonSpinner:function e(n){TS.ui.resetButtonSpinner(n);var a=t(n);if(!a.isLoading())a.start()},stopButtonSpinner:function e(n,a){var o=t(n);if(o.isLoading()){o.stop();if(a){var r=$(n).find(".ladda-label").text();$(n).data("original_text",r);$(n).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.i18n.t("Saved","ui")())}}},resetButtonSpinner:function e(n){var a=t(n);if(a.isLoading())return;var o=$(n).data("original_text");if(o){$(n).find(".ladda-label").text(o);$(n).removeData("original_text");$(n).removeClass("btn_success").addClass("")}},showVersionInfo:function e(){var n="version_info";var a=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.i18n.t("Version Info","ui")(),unique:n,body:TS.i18n.t('<p>This version: {version_num}</p><p class="latest_version checking">Checking for updates&hellip;</p>',"ui")({version_num:a}),show_cancel_button:false,go_button_class:"btn_outline",go_button_text:TS.i18n.t("Close","ui")(),show_secondary_go_button:false,onSecondaryGo:function e(){TS.reload(false,"TS.ui.showVersionsInfo dialog")}});TS.api.callImmediately("test.versionInfo").then(function(e){if(!TS.generic_dialog.is_showing||TS.generic_dialog.current_setting.unique!=n)return;var a=TS.generic_dialog.div.find(".latest_version");a.removeClass("checking");var t=e.data.version_ts.toString()==TS.boot_data.version_ts.toString();if(t)a.html(TS.i18n.t("Your copy of Slack is up-to-date! {tada_emoji}","ui")({tada_emoji:TS.emoji.graphicReplace(":tada:")}));else{TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update");var o=e.data.min_version_ts>TS.boot_data.version_ts;if(o)a.html(TS.i18n.t("An important new version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.emoji.graphicReplace(":sparkles:")}));else a.html(TS.i18n.t("A newer version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.emoji.graphicReplace(":sparkles:")}))}}).catch(_.noop)},setThemeClasses:function e(){$("body").removeClass("dense_theme light_theme");if("dense"===TS.model.prefs.theme)$("body").addClass("dense_theme");else if("light"===TS.model.prefs.theme)$("body").addClass("light_theme");else{TS.error("no theme?");return}if(TS.model.prefs.avatars)$("body").removeClass("no_avatars");else $("body").addClass("no_avatars")}});var e;var n;var a=function a(){if("undefined"!==typeof document.hidden){n="hidden";e="visibilitychange"}else if("undefined"!==typeof document.msHidden){n="msHidden";e="msvisibilitychange"}else if("undefined"!==typeof document.webkitHidden){n="webkitHidden";e="webkitvisibilitychange"}if("undefined"!==typeof document[n])$(window).bind(e,TS.ui.onWindowVisibilityChange)};var t=function e(n){var a=$(n).data("ladda");if(!a){a=Ladda.create(n);$(n).data("ladda",a)}return a};var o=function e(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var n=$(e.target);if(!n.pickmeup)return;var a=!!n.closest("#fs_modal").length||$(this).data("flat");n.pickmeup({flat:a,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:true,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function e(){n.trigger("input")},locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show");if(a){var t=n.data("picker");if(!t){t=$('<div class="position_relative no_margin no_padding"></div>');n.data("picker",t)}n.after(t.append(n.find(".pickmeup").detach()))}}).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',function(e){var n=$(e.target);if(!n.pickmeup)return;if(window.document.activeElement===e.target)n.pickmeup("hide")})}})()},4186:function(e,n){(function(){"use strict";TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function e(){$(window).trigger("draghoverstart",[null,true])},handleDraghoverendFromWinSSB:function e(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function e(n){TS.info("handleDropFromWinSSB called files:"+n);$("body").removeClass("drop-target");if(TS.client.ui.checkForEditing())return;if(!n||!n.length){TS.warn("handleDropFromWinSSB called with no files");return}TS.client.ui.files.validateFiles(n,TS.model.shift_key_pressed)},preselected:[],bindFileShareDropdowns:function o(r,i,s,l){var c=$("#select_share_channels");var d="60%";if(TS.web&&TS.web.space)d="100%";if(1!=c.length){alert("error: "+c.length+" $('#select_share_channels')s");return}TS.ui.file_share.preselected=s||[];n=i;var u=TS.ui.file_share.promiseToGetFileShareSelectOptions;if(l)u=t;e={append:true,single:true,data_promise:u,approx_item_height:30,tab_to_nav:true,template:function e(n){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:n.model_ob,show_share_prefix:r}))},onItemAdded:a,onListHidden:function e(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function e(n,a){if(a.create_channel){n.html(TS.i18n.t('<span class="new">No items matched <strong>{query}</strong></span>',"files")({query:_.escape(a.label)}));$("#select_share_channels .lfs_list_container").addClass("new_channel_container");return}$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");n.html(_.escape(a.label)).removeClass("new_channel_not_found")},setValue:function e(n){var a;var t;var o=this.data.length;var r;for(a=0;a<o;a+=1){r=this.data[a].children.length;for(t=0;t<r;t+=1)if(this.data[a].children[t].model_ob.id===n){this.$container.find('.lfs_item[data-lfs-id="'+[a,t]+'"]').trigger("click");return}}}};c.lazyFilterSelect(e);c.css({width:d});c.one("remove",function(){$(this).lazyFilterSelect("destroy")});$("#file_sharing_div").on("keydown",function(e){if(13==e.keyCode)e.stopPropagation()});c.lazyFilterSelect("getInstance").current_items_in_view_signal.add(function(e){var n=e.filter(function(e){return e.model_ob&&Object.prototype.hasOwnProperty.call(e.model_ob,"presence")}).map(function(e){return e.model_ob.id});TS.presence_manager.queryMemberPresence(n)})},promiseToGetFileShareSelectOptions:function e(n){var a=o();return TS.searcher.search(n,{members:{include_self:true},channels:{include_archived:false,can_post:true},groups:{include_archived:false},mpims:true,sort:{allow_empty_query:true}}).then(function(e){var t=false;e.all_items_fetched=true;e.filter(function(e){return TS.permissions.members.canPostInChannel(e.model_ob)}).forEach(function(e){e.lfs_id=e.model_ob.id;e.preselected=r(e.model_ob.id,a);if(e.preselected)t=true});if(!n&&!t&&a){var o=TS.shared.getModelObById(a);if(_.get(o,"is_im")){var i=TS.members.getMemberById(o.user);e.push({preselected:true,lfs_id:i.id,model_ob:i})}else if(o)if(TS.permissions.members.canPostInChannel(o))e.push({preselected:true,lfs_id:o.id,model_ob:o})}var s=_(e).map("model_ob").filter(TS.utility.members.isMember).map("id").compact().value();TS.presence_manager.queryMemberPresence(s);return e})},bindFileShareShareToggle:function e(){$("#share_cb").bind("click.toggle_select_list",function(){if($(this).prop("checked"))$(".file_share_select").prop("disabled",false);else $(".file_share_select").prop("disabled",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},bindFileShareCommentField:function e(){$("#file_comment_textarea").bind("keyup",function(){TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()})},updateAtChannelWarningNote:function e(n){var a=TS.utility.contenteditable.value($("#file_comment_textarea"));var t;var o=$("#select_share_channels").lazyFilterSelect("value")[0];var r;if(o)t=o.model_ob.id||"";var i=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(t,a)){var s=TS.format.cleanMsg(a);var l="";var c=true;if(TS.model.everyone_regex.test(s))l="everyone";else if(TS.model.channel_regex.test(s))l="channel";else if(TS.model.group_regex.test(s))l="group";var d=TS.shared.getModelObById(t);if(!d||d.is_im)c=false;if(c&&!TS.members.haveAllMembersForModelOb(d)&&!n){var u=TS.membership.getMembershipCounts(d);if(u.promise){r=0;u.promise.then(TS.ui.file_share.updateAtChannelWarningNote);c=false}else{r=_.get(u,"counts.member_count",1);r-=1}}var f=[];if(_.isUndefined(r))if(c&&d&&!d.is_im){f=_(d.members).map(TS.members.getMemberById).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.members.memberSorterByName).value();if(f.length<1)c=false}if(c){var m=TS.templates.at_channel_warning_note({keyword:l,member_count:_.isUndefined(r)?f.length:r});i.html(m);i.removeClass("hidden");return}}i.addClass("hidden")},updateAtChannelBlockedNote:function e(){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var a;var t=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var r=0===o.length||o.is(":checked");if(t&&r)a=t.model_ob.id;var i=$("#select_share_at_channel_blocked_note");var s=$(".modal .btn.dialog_go");var l;if(!TS.interop.utility.looksLikeMemberId(a))l=TS.ui.needToBlockAtChannelKeyword(n,null,a);if(l){i.html(TS.templates.at_channel_blocked_note({keyword:l}));i.removeClass("hidden");s.addClass("disabled")}else{i.addClass("hidden");s.removeClass("disabled")}},shouldBlockUploadDialogSubmission:function e(){var n=TS.utility.contenteditable.value($("#file_comment_textarea"));var a;var t=$("#select_share_channels").lazyFilterSelect("value")[0];var o=$("#share_cb");var r=0===o.length||o.is(":checked");if(t&&r)a=t.model_ob.id;var i;if(!TS.interop.utility.looksLikeMemberId(a))i=TS.ui.needToBlockAtChannelKeyword(n,null,a);if(i){TS.info("Can't submit dialog because comment contains "+i);return true}return false},fileShowPublicUrlDialog:function e(n){if(!n||!n.public_url_shared)return;var a=$('<input type="text" id="public_url" class="full_width small">').attr("value",n.permalink_public)[0].outerHTML;var t;if(TS.boot_data.feature_external_files)t=TS.i18n.t('External link to this file <p style="display: inline-block;font-weight: 400"> (shareable with anyone) </p>',"files")();else t=TS.i18n.t("Public link to this file","files")();TS.generic_dialog.start({title:t,body:a,show_cancel_button:false,show_close_button:true,show_secondary_go_button:true,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.i18n.t("Revoke","files")(),show_go_button:true,go_button_text:TS.i18n.t("Done","files")(),esc_for_ok:true,onSecondaryGo:function e(){TS.ui.file_share.fileRevokePublicLink(n.id)},onGo:function e(){TS.generic_dialog.cancel()},onShow:function e(){TS.generic_dialog.div.on("shown",function e(){TS.generic_dialog.div.off("shown",e);$("#public_url").select().focus().on("keydown",function(e){if(e.which==TS.utility.keymap.esc)TS.generic_dialog.cancel()})})}})},fileRevokePublicLink:function e(n){var a=TS.files.getFileById(n);if(!a)return false;var t;var o;if(TS.boot_data.feature_external_files){t=TS.i18n.t("Revoke external file link","files")();o='<p class="no_bottom_margin">'+TS.i18n.t("This will disable the external link for this file. Any previously shared links will stop working.<br /><br />Are you sure you want to revoke this link?","files")()+"</p>"}else{t=TS.i18n.t("Revoke public file link","files")();o='<p class="no_bottom_margin">'+TS.i18n.t("This will disable the Public Link for this file. This will cause any previously shared links to stop working.<br /><br />Are you sure you want to revoke this public link?","files")()+"</p>"}TS.generic_dialog.start({title:t,body:o,go_button_text:TS.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function e(){TS.files.upsertAndSignal({id:a.id,public_url_shared:false});TS.api.callImmediately("files.revokePublicURL",{file:a.id})}})}});var e={};var n=false;var a=function e(n){$("#select_share_channels .lfs_input_container").removeClass("error");if(n.model_ob.create_channel){$("#select_share_channels_note").removeClass("hidden");$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item");$(".modal .dialog_go").text(TS.i18n.t("Next","files")());TS.metrics.count("share_picker_create_clicked");return}$("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item");$(".modal .dialog_go").text(TS.i18n.t("Share","files")());var a;var t;a=n.model_ob.id;if(!a)return;$("#share_model_ob_id").val(a);$("#select_share_groups_note, #select_share_channels_note, #select_share_ims_note, #select_share_mpims_note, #select_share_channels_join_note").addClass("hidden");t=a.substring(0,1);if("C"===t){$("#select_share_channels_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Share in","files")());var o=TS.shared.getModelObById(a);if(o&&!o.is_member)$("#select_share_channels_join_note").removeClass("hidden")}else if("U"===t||"W"===t||"D"===t){$("#select_share_ims_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Share with","files")())}else if(n&&n.model_ob&&n.model_ob.is_mpim){$("#select_share_mpims_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Share with","files")())}else{$("#select_share_groups_note").removeClass("hidden");$("#share_context_label").text(TS.i18n.t("Share in","files")())}$("#share_cb").prop("checked",true);TS.ui.file_share.updateAtChannelWarningNote();TS.ui.file_share.updateAtChannelBlockedNote()};var t=function e(n){return TS.ui.file_share.promiseToGetFileShareSelectOptions(n).then(function(e){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container");if(0===e.length){var a=TS.utility.channels.getPermissibleChannelName(n);if(a){e.push({lfs_group:true,label:n,create_channel:true,children:[{lfs_id:"c."+a,model_ob:{create_channel:true,name:a}}]});$("#select_share_channels .lfs_list_container").addClass("new_channel_container");TS.metrics.count("share_picker_create_shown")}}return e})};var o=function e(){if(TS.client&&TS.client.activeChannelIsHidden()){if(n)return n.id}else{var a=TS.shared.getActiveModelOb();if(a)return a.id}if(TS.web&&TS.web.space)return TS.web.space.getOriginChannel();return null};var r=function e(n,a){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(n)>-1:n===a}})()}},[1410]);