!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function(t){var e=function(e,i,n){var o={invalid:[],getCaret:function(){try{var t,i=0,n=e.get(0),s=document.selection,a=n.selectionStart;return s&&-1===navigator.appVersion.indexOf("MSIE 10")?(t=s.createRange(),t.moveStart("character",-o.val().length),i=t.text.length):(a||"0"===a)&&(i=a),i}catch(r){}},setCaret:function(t){try{if(e.is(":focus")){var i;i=e.get(0).createTextRange(),i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}catch(n){}},events:function(){e.on("keydown.mask",function(t){e.data("mask-keycode",t.keyCode||t.which)}).on(t.jMaskGlobals.useInput?"input.mask":"keyup.mask",o.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){e.keydown().keyup()},100)}).on("change.mask",function(){e.data("changed",!0)}).on("blur.mask",function(){r===o.val()||e.data("changed")||e.trigger("change"),e.data("changed",!1)}).on("blur.mask",function(){r=o.val()}).on("focus.mask",function(e){!0===n.selectOnFocus&&t(e.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!s.test(o.val())&&o.val("")})},getRegexMask:function(){for(var t,e,n,o,s=[],r=0;r<i.length;r++)(t=a.translation[i.charAt(r)])?(e=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),n=t.optional,(t=t.recursive)?(s.push(i.charAt(r)),o={digit:i.charAt(r),pattern:e}):s.push(n||t?e+"?":e)):s.push(i.charAt(r).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return s=s.join(""),o&&(s=s.replace(new RegExp("("+o.digit+"(.*"+o.digit+")?)"),"($1)?").replace(new RegExp(o.digit,"g"),o.pattern)),new RegExp(s)},destroyEvents:function(){e.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(t){var i=e.is("input")?"val":"text";return 0<arguments.length?(e[i]()!==t&&e[i](t),i=e):i=e[i](),i},getMCharsBeforeCount:function(t,e){for(var n=0,o=0,s=i.length;o<s&&o<t;o++)a.translation[i.charAt(o)]||(t=e?t+1:t,n++);return n},caretPos:function(t,e,n,s){return a.translation[i.charAt(Math.min(t-1,i.length-1))]?Math.min(t+n-e-s,n):o.caretPos(t+1,e,n,s)},behaviour:function(i){i=i||window.event,o.invalid=[];var n=e.data("mask-keycode");if(-1===t.inArray(n,a.byPassKeys)){var s=o.getCaret(),r=o.val().length,l=o.getMasked(),c=l.length,u=o.getMCharsBeforeCount(c-1)-o.getMCharsBeforeCount(r-1),h=s<r;return o.val(l),h&&(8!==n&&46!==n&&(s=o.caretPos(s,r,c,u)),o.setCaret(s)),o.callbacks(i)}},getMasked:function(t){var e,s,r=[],l=o.val(),c=0,u=i.length,h=0,d=l.length,m=1,f="push",p=-1;for(n.reverse?(f="unshift",m=-1,e=0,c=u-1,h=d-1,s=function(){return-1<c&&-1<h}):(e=u-1,s=function(){return c<u&&h<d});s();){var g=i.charAt(c),v=l.charAt(h),y=a.translation[g];y?(v.match(y.pattern)?(r[f](v),y.recursive&&(-1===p?p=c:c===e&&(c=p-m),e===p&&(c-=m)),c+=m):y.optional?(c+=m,h-=m):y.fallback?(r[f](y.fallback),c+=m,h-=m):o.invalid.push({p:h,v:v,e:y.pattern}),h+=m):(t||r[f](g),v===g&&(h+=m),c+=m)}return t=i.charAt(e),u!==d+1||a.translation[t]||r.push(t),r.join("")},callbacks:function(t){var s=o.val(),a=s!==r,l=[s,t,e,n],c=function(t,e,i){"function"==typeof n[t]&&e&&n[t].apply(this,i)};c("onChange",!0===a,l),c("onKeyPress",!0===a,l),c("onComplete",s.length===i.length,l),c("onInvalid",0<o.invalid.length,[s,t,e,o.invalid,n])}};e=t(e);var s,a=this,r=o.val();i="function"==typeof i?i(o.val(),void 0,e,n):i,a.mask=i,a.options=n,a.remove=function(){var t=o.getCaret();return o.destroyEvents(),o.val(a.getCleanVal()),o.setCaret(t-o.getMCharsBeforeCount(t)),e},a.getCleanVal=function(){return o.getMasked(!0)},a.init=function(i){i=i||!1,n=n||{},a.clearIfNotMatch=t.jMaskGlobals.clearIfNotMatch,a.byPassKeys=t.jMaskGlobals.byPassKeys,a.translation=t.extend({},t.jMaskGlobals.translation,n.translation),a=t.extend(!0,{},a,n),s=o.getRegexMask(),!1===i?(n.placeholder&&e.attr("placeholder",n.placeholder),e.data("mask")&&e.attr("autocomplete","off"),o.destroyEvents(),o.events(),i=o.getCaret(),o.val(o.getMasked()),o.setCaret(i+o.getMCharsBeforeCount(i,!0))):(o.events(),o.val(o.getMasked()))},a.init(!e.is("input"))};t.maskWatchers={};var i=function(){var i=t(this),o={},s=i.attr("data-mask");if(i.attr("data-mask-reverse")&&(o.reverse=!0),i.attr("data-mask-clearifnotmatch")&&(o.clearIfNotMatch=!0),"true"===i.attr("data-mask-selectonfocus")&&(o.selectOnFocus=!0),n(i,s,o))return i.data("mask",new e(this,s,o))},n=function(e,i,n){n=n||{};var o=t(e).data("mask"),s=JSON.stringify;e=t(e).val()||t(e).text();try{return"function"==typeof i&&(i=i(e)),"object"!=typeof o||s(o.options)!==s(n)||o.mask!==i}catch(a){}};t.fn.mask=function(i,o){o=o||{};var s=this.selector,a=t.jMaskGlobals,r=a.watchInterval,a=o.watchInputs||a.watchInputs,l=function(){if(n(this,i,o))return t(this).data("mask",new e(this,i,o))};return t(this).each(l),s&&""!==s&&a&&(clearInterval(t.maskWatchers[s]),t.maskWatchers[s]=setInterval(function(){t(document).find(s).each(l)},r)),this},t.fn.unmask=function(){return clearInterval(t.maskWatchers[this.selector]),delete t.maskWatchers[this.selector],this.each(function(){var e=t(this).data("mask");e&&e.remove().removeData("mask")})},t.fn.cleanVal=function(){return this.data("mask").getCleanVal()},t.applyDataMask=function(e){e=e||t.jMaskGlobals.maskElements,(e instanceof t?e:t(e)).filter(t.jMaskGlobals.dataMaskAttr).each(i)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:function(t){var e,i=document.createElement("div");return t="on"+t,e=t in i,e||(i.setAttribute(t,"return;"),e="function"==typeof i[t]),e}("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};t.jMaskGlobals=t.jMaskGlobals||{},o=t.jMaskGlobals=t.extend(!0,{},o,t.jMaskGlobals),o.dataMask&&t.applyDataMask(),setInterval(function(){t.jMaskGlobals.watchDataMask&&t.applyDataMask()},o.watchInterval)}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&void 0);var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n,o;return!i.settings.submitHandler||(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),o=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),void 0!==o&&o)}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n,o,s,a,r,l,c=this[0];if(e)switch(n=t.data(c.form,"validator").settings,o=n.rules,s=t.validator.staticRules(c),e){case"add":t.extend(s,t.validator.normalizeRule(i)),delete s.messages,o[c.name]=s,i.messages&&(n.messages[c.name]=t.extend(n.messages[c.name],i.messages));break;case"remove":return i?(l={},t.each(i.split(/\s/),function(e,i){l[i]=s[i],delete s[i],"required"===i&&t(c).removeAttr("aria-required")}),l):(delete o[c.name],s)}return a=t.validator.normalizeRules(t.extend({},t.validator.classRules(c),t.validator.attributeRules(c),t.validator.dataRules(c),t.validator.staticRules(c)),c),a.required&&(r=a.required,delete a.required,a=t.extend({required:r},a),t(c).attr("aria-required","true")),a.remote&&(r=a.remote,delete a.remote,a=t.extend(a,{remote:r})),a}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,""),o=i.settings;o[n]&&!this.is(o.ignore)&&o[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};t.each(this.settings.groups,function(e,i){"string"==typeof i&&(i=i.split(/\s/)),t.each(i,function(t,i){n[i]=e})}),i=this.settings.rules,t.each(i,function(e,n){i[e]=t.validator.normalizeRule(n)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),n=this.validationTargetFor(i),o=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=t(n),o=this.check(n)!==!1,o?delete this.invalid[n.name]:this.invalid[n.name]=!0),t(e).attr("aria-invalid",!o),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),o},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e,i=0;for(e in t)i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&void 0,!(this.name in i||!e.objectLength(t(this).rules()))&&(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n=t(e),o=e.type;return"radio"===o||"checkbox"===o?t("input[name='"+e.name+"']:checked").val():"number"===o&&"undefined"!=typeof e.validity?!e.validity.badInput&&n.val():(i=n.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i,n,o,s=t(e).rules(),a=t.map(s,function(t,e){return e}).length,r=!1,l=this.elementValue(e);for(n in s){o={method:n,parameters:s[n]};try{if(i=t.validator.methods[n].call(this,l,e,o.parameters),"dependency-mismatch"===i&&1===a){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!i)return this.formatAndAdd(e,o),!1}catch(c){throw this.settings.debug&&window.console&&void 0,c}}if(!r)return this.objectLength(s)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),o=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):o.test(n)&&(n=t.validator.format(n.replace(o,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e,method:i.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n,o,s,a=this.errorsFor(e),r=this.idOrName(e),l=t(e).attr("aria-describedby");a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.html(i)):(a=t("<"+this.settings.errorElement+">").attr("id",r+"-error").addClass(this.settings.errorClass).html(i||""),n=a,this.settings.wrapper&&(n=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e),a.is("label")?a.attr("for",r):0===a.parents("label[for='"+r+"']").length&&(s=a.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+s+"\\b"))||(l+=" "+s):l=s,t(e).attr("aria-describedby",l),o=this.groups[e.name],o&&t.each(this.groups,function(e,i){i===o&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",a.attr("id"))}))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a,e)),this.toShow=this.toShow.add(a)},errorsFor:function(e){var i=this.idOrName(e),n=t(e).attr("aria-describedby"),o="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(o=o+", #"+n.replace(/\s+/g,", #")),this.errors().filter(o)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return!this.dependTypes[typeof t]||this.dependTypes[typeof t](t,e)},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i,n,o={},s=t(e),a=e.getAttribute("type");for(i in t.validator.methods)"required"===i?(n=e.getAttribute(i),""===n&&(n=!0),n=!!n):n=s.attr(i),/min|max/.test(i)&&(null===a||/number|range|text/.test(a))&&(n=Number(n)),n||0===n?o[i]=n:a===i&&"range"!==a&&(o[i]=!0);return o.maxlength&&/-1|2147483647|524288/.test(o.maxlength)&&delete o.maxlength,o},dataRules:function(e){var i,n,o={},s=t(e);for(i in t.validator.methods)n=s.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==n&&(o[i]=n);return o},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,o){if(o===!1)return void delete e[n];if(o.param||o.depends){var s=!0;switch(typeof o.depends){case"string":s=!!t(o.depends,i.form).length;break;case"function":s=o.depends.call(i,i)}s?e[n]=void 0===o.param||o.param:delete e[n]}}),t.each(e,function(n,o){e[n]=t.isFunction(o)?o(i):o}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var o=t(i).val();return o&&o.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i,n,o=0,s=0,a=!1;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(i=t.length-1;i>=0;i--)n=t.charAt(i),s=parseInt(n,10),a&&(s*=2)>9&&(s-=9),o+=s,a=!a;return o%10===0},minlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||o>=n},maxlength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||n>=o},rangelength:function(e,i,n){var o=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||o>=n[0]&&o<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var o=t(n);return this.settings.onfocusout&&o.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===o.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var o,s,a=this.previousValue(i);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,n="string"==typeof n&&{url:n}||n,a.old===e?a.valid:(a.old=e,o=this,this.startRequest(i),s={},s[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:s,context:o.currentForm,success:function(n){var s,r,l,c=n===!0||"true"===n;o.settings.messages[i.name].remote=a.originalMessage,c?(l=o.formSubmitted,o.prepareElement(i),o.formSubmitted=l,o.successList.push(i),delete o.invalid[i.name],o.showErrors()):(s={},r=n||o.defaultMessage(i,"remote"),s[i.name]=a.message=t.isFunction(r)?r(e):r,o.invalid[i.name]=!0,o.showErrors(s)),a.valid=c,o.stopRequest(i,c)}},n)),"pending")}}}),t.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e,i={};t.ajaxPrefilter?t.ajaxPrefilter(function(t,e,n){var o=t.port;"abort"===t.mode&&(i[o]&&i[o].abort(),i[o]=n)}):(e=t.ajax,t.ajax=function(n){var o=("mode"in n?n:t.ajaxSettings).mode,s=("port"in n?n:t.ajaxSettings).port;return"abort"===o?(i[s]&&i[s].abort(),i[s]=e.apply(this,arguments),i[s]):e.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var o=t(i.target);return o.is(e)?n.apply(o,arguments):void 0})}})}),!function(){"use strict";function t(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,n),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var n in i)e.push(i[n]);for(var o=0,s=e.length;s>o;o++)e[o][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=o.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,n[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},o=window.Waypoint,s=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete n[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,o.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||o.isTouch)&&(e.didScroll=!0,o.requestAnimationFrame(t))})},e.prototype.handleResize=function(){o.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var n=e[i],o=n.newScroll>n.oldScroll,s=o?n.forward:n.backward;for(var a in this.waypoints[i]){var r=this.waypoints[i][a],l=n.oldScroll<r.triggerPoint,c=n.newScroll>=r.triggerPoint,u=l&&c,h=!l&&!c;(u||h)&&(r.queueTrigger(s),t[r.group.id]=r.group)}}for(var d in t)t[d].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?o.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?o.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var n=0,o=t.length;o>n;n++)t[n].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=this.adapter.offset(),n={};this.handleScroll(),
t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var o in t){var s=t[o];for(var a in this.waypoints[o]){var r,l,c,u,h,d=this.waypoints[o][a],m=d.options.offset,f=d.triggerPoint,p=0,g=null==f;d.element!==d.element.window&&(p=d.adapter.offset()[s.offsetProp]),"function"==typeof m?m=m.apply(d):"string"==typeof m&&(m=parseFloat(m),d.options.offset.indexOf("%")>-1&&(m=Math.ceil(s.contextDimension*m/100))),r=s.contextScroll-s.contextOffset,d.triggerPoint=p+r-m,l=f<s.oldScroll,c=d.triggerPoint>=s.oldScroll,u=l&&c,h=!l&&!c,!g&&u?(d.queueTrigger(s.backward),n[d.group.id]=d.group):!g&&h?(d.queueTrigger(s.forward),n[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),n[d.group.id]=d.group)}}for(var v in n)n[v].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in n)n[t].refresh()},e.findByElement=function(t){return n[t.waypointContextKey]},window.onload=function(){s&&s(),e.refreshAll()},o.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},o.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},o=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],o="up"===i||"left"===i;n.sort(o?e:t);for(var s=0,a=n.length;a>s;s+=1){var r=n[s];(r.options.continuous||s===n.length-1)&&r.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints),n=i===this.waypoints.length-1;return n?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=o.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=o.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return n[t.axis][t.name]||new i(t)},o.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,n){t[n]=e[n]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],n=arguments[0];return t.isFunction(arguments[0])&&(n=t.extend({},arguments[1]),n.handler=arguments[0]),this.each(function(){var o=t.extend({},n,{element:this});"string"==typeof o.context&&(o.context=t(this).closest(o.context)[0]),i.push(new e(o))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}(),function(t){var e=-1,i=-1,n=function(t){return parseFloat(t)||0},o=function(e){var i=null,o=[];return t(e).each(function(){var e=t(this),s=e.offset().top-n(e.css("margin-top")),a=0<o.length?o[o.length-1]:null;null===a?o.push(e):1>=Math.floor(Math.abs(i-s))?o[o.length-1]=a.add(e):o.push(e),i=s}),o},s=function(e){var i={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof e?t.extend(i,e):("boolean"==typeof e?i.byRow=e:"remove"===e&&(i.remove=!0),i)},a=t.fn.matchHeight=function(e){if(e=s(e),e.remove){var i=this;return this.css(e.property,""),t.each(a._groups,function(t,e){e.elements=e.elements.not(i)}),this}return 1>=this.length&&!e.target?this:(a._groups.push({elements:this,options:e}),a._apply(this,e),this)};a._groups=[],a._throttle=80,a._maintainScroll=!1,a._beforeUpdate=null,a._afterUpdate=null,a._apply=function(e,i){var r=s(i),l=t(e),c=[l],u=t(window).scrollTop(),h=t("html").outerHeight(!0),d=l.parents().filter(":hidden");return d.each(function(){var e=t(this);e.data("style-cache",e.attr("style"))}),d.css("display","block"),r.byRow&&!r.target&&(l.each(function(){var e=t(this),i="inline-block"===e.css("display")?"inline-block":"block";e.data("style-cache",e.attr("style")),e.css({display:i,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px"})}),c=o(l),l.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||"")})),t.each(c,function(e,i){var o=t(i),s=0;if(r.target)s=r.target.outerHeight(!1);else{if(r.byRow&&1>=o.length)return void o.css(r.property,"");o.each(function(){var e=t(this),i={display:"inline-block"===e.css("display")?"inline-block":"block"};i[r.property]="",e.css(i),e.outerHeight(!1)>s&&(s=e.outerHeight(!1)),e.css("display","")})}o.each(function(){var e=t(this),i=0;r.target&&e.is(r.target)||("border-box"!==e.css("box-sizing")&&(i+=n(e.css("border-top-width"))+n(e.css("border-bottom-width")),i+=n(e.css("padding-top"))+n(e.css("padding-bottom"))),e.css(r.property,s-i))})}),d.each(function(){var e=t(this);e.attr("style",e.data("style-cache")||null)}),a._maintainScroll&&t(window).scrollTop(u/h*t("html").outerHeight(!0)),this},a._applyDataApi=function(){var e={};t("[data-match-height], [data-mh]").each(function(){var i=t(this),n=i.attr("data-mh")||i.attr("data-match-height");e[n]=n in e?e[n].add(i):i}),t.each(e,function(){this.matchHeight(!0)})};var r=function(e){a._beforeUpdate&&a._beforeUpdate(e,a._groups),t.each(a._groups,function(){a._apply(this.elements,this.options)}),a._afterUpdate&&a._afterUpdate(e,a._groups)};a._update=function(n,o){if(o&&"resize"===o.type){var s=t(window).width();if(s===e)return;e=s}n?-1===i&&(i=setTimeout(function(){r(o),i=-1},a._throttle)):r(o)},t(a._applyDataApi),t(window).bind("load",function(t){a._update(!1,t)}),t(window).bind("resize orientationchange",function(t){a._update(!0,t)})}(jQuery),!function(t,e){function i(t,e,i){var n=t.children(),o=!1;t.empty();for(var a=0,r=n.length;r>a;a++){var l=n.eq(a);if(t.append(l),i&&t.append(i),s(t,e)){l.remove(),o=!0;break}i&&i.detach()}return o}function n(e,i,a,r,l){var c=!1,u="a, table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",h="script, .dotdotdot-keep";return e.contents().detach().each(function(){var d=this,m=t(d);if("undefined"==typeof d)return!0;if(m.is(h))e.append(m);else{if(c)return!0;e.append(m),!l||m.is(r.after)||m.find(r.after).length||e[e.is(u)?"after":"append"](l),s(a,r)&&(c=3==d.nodeType?o(m,i,a,r,l):n(m,i,a,r,l),c||(m.detach(),c=!0)),c||l&&l.detach()}}),i.addClass("is-truncated"),c}function o(e,i,n,o,r){var u=e[0];if(!u)return!1;var d=c(u),m=-1!==d.indexOf(" ")?" ":"　",f="letter"==o.wrap?"":m,p=d.split(f),g=-1,v=-1,y=0,w=p.length-1;for(o.fallbackToLetter&&0==y&&0==w&&(f="",p=d.split(f),w=p.length-1);w>=y&&(0!=y||0!=w);){var b=Math.floor((y+w)/2);if(b==v)break;v=b,l(u,p.slice(0,v+1).join(f)+o.ellipsis),n.children().each(function(){t(this).toggle().toggle()}),s(n,o)?(w=v,o.fallbackToLetter&&0==y&&0==w&&(f="",p=p[0].split(f),g=-1,v=-1,y=0,w=p.length-1)):(g=v,y=v)}if(-1==g||1==p.length&&0==p[0].length){var _=e.parent();e.detach();var k=r&&r.closest(_).length?r.length:0;_.contents().length>k?u=h(_.contents().eq(-1-k),i):(u=h(_,i,!0),k||_.detach()),u&&(d=a(c(u),o),l(u,d),k&&r&&t(u).parent().append(r))}else d=a(p.slice(0,g+1).join(f),o),l(u,d);return!0}function s(t,e){return t.innerHeight()>e.maxHeight}function a(e,i){for(;t.inArray(e.slice(-1),i.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),i.lastCharacter.noEllipsis)<0&&(e+=i.ellipsis),e}function r(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function c(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function u(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function h(e,i,n){var o,s=e&&e[0];if(s){if(!n){if(3===s.nodeType)return s;if(t.trim(e.text()))return h(e.contents().last(),i)}for(o=u(s);!o;){if(e=e.parent(),e.is(i)||!e.length)return!1;o=u(e[0])}if(o)return h(t(o),i)}return!1}function d(e,i){return!!e&&("string"==typeof e?(e=t(e,i),!!e.length&&e):!!e.jquery&&e)}function m(t){for(var e=t.innerHeight(),i=["paddingTop","paddingBottom"],n=0,o=i.length;o>n;n++){var s=parseInt(t.css(i[n]),10);isNaN(s)&&(s=0),e-=s}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this;o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,r){switch(o.removeClass("is-truncated"),e.preventDefault(),e.stopPropagation(),typeof l.height){case"number":l.maxHeight=l.height;break;case"function":l.maxHeight=l.height.call(o[0]);break;default:l.maxHeight=m(o)}l.maxHeight+=l.tolerance,"undefined"!=typeof r&&(("string"==typeof r||"nodeType"in r&&1===r.nodeType)&&(r=t("<div />").append(r).contents()),r instanceof t&&(a=r)),p=o.wrapInner('<div class="dotdotdot" />').children(),p.contents().detach().end().append(a.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var u=!1,h=!1;return c.afterElement&&(u=c.afterElement.clone(!0),u.show(),c.afterElement.detach()),s(p,l)&&(h="children"==l.wrap?i(p,l,u):n(p,o,p,l,u)),p.replaceWith(p.contents()),p=null,t.isFunction(l.callback)&&l.callback.call(o[0],h,a),c.isTruncated=h,h}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],c.isTruncated),c.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],a),a}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(a).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),i=e.width(),n=e.height();e.bind("resize.dot"+c.dotId,function(){i==e.width()&&n==e.height()&&l.windowResizeFix||(i=e.width(),n=e.height(),h&&clearInterval(h),h=setTimeout(function(){o.trigger("update.dot")},100))})}else u=r(o),h=setInterval(function(){if(o.is(":visible")){var t=r(o);(u.width!=t.width||u.height!=t.height)&&(o.trigger("update.dot"),u=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+c.dotId),h&&clearInterval(h),o};var a=o.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),c={},u={},h=null,p=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),c.afterElement=d(l.after,o),c.isTruncated=!1,c.dotId=f++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(){};var f=1,p=t.fn.html;t.fn.html=function(i){return i!=e&&!t.isFunction(i)&&this.data("dotdotdot")?this.trigger("update",[i]):p.apply(this,arguments)};var g=t.fn.text;t.fn.text=function(i){return i!=e&&!t.isFunction(i)&&this.data("dotdotdot")?(i=t("<div />").text(i).html(),this.trigger("update",[i])):g.apply(this,arguments)}}}(jQuery),function(t){function e(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function i(t,e){return xt.call(t,e)}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function o(t){_t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&void 0}function s(t,e){var i=!0;return f(function(){return i&&(o(t),i=!1),e.apply(this,arguments)},e)}function a(t,e){ye[t]||(o(e),ye[t]=!0)}function r(t,e){return function(i){return v(t.call(this,i),e)}}function l(t,e){return function(i){return this.localeData().ordinal(t.call(this,i),e)}}function c(t,e){var i,n,o=12*(e.year()-t.year())+(e.month()-t.month()),s=t.clone().add(o,"months");return 0>e-s?(i=t.clone().add(o-1,"months"),n=(e-s)/(s-i)):(i=t.clone().add(o+1,"months"),n=(e-s)/(i-s)),-(o+n)}function u(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?(n=t.isPM(i),n&&12>e&&(e+=12),n||12!==e||(e=0),e):e}function h(){}function d(t,e){e!==!1&&F(t),p(this,t),this._d=new Date((+t._d)),be===!1&&(be=!0,_t.updateOffset(this),be=!1)}function m(t){var e=$(t),i=e.year||0,n=e.quarter||0,o=e.month||0,s=e.week||0,a=e.day||0,r=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*r,this._days=+a+7*s,this._months=+o+3*n+12*i,this._data={},this._locale=_t.localeData(),this._bubble()}function f(t,e){for(var n in e)i(e,n)&&(t[n]=e[n]);return i(e,"toString")&&(t.toString=e.toString),i(e,"valueOf")&&(t.valueOf=e.valueOf),t}function p(t,e){var i,n,o;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),Ot.length>0)for(i in Ot)n=Ot[i],o=e[n],"undefined"!=typeof o&&(t[n]=o);return t}function g(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t,e,i){for(var n=""+Math.abs(t),o=t>=0;n.length<e;)n="0"+n;return(o?i?"+":"":"-")+n}function y(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function w(t,e){var i;return e=I(e,t),t.isBefore(e)?i=y(t,e):(i=y(e,t),i.milliseconds=-i.milliseconds,i.months=-i.months),i}function b(t,e){return function(i,n){var o,s;return null===n||isNaN(+n)||(a(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),s=i,i=n,n=s),i="string"==typeof i?+i:i,o=_t.duration(i,n),_(this,o,t),this}}function _(t,e,i,n){var o=e._milliseconds,s=e._days,a=e._months;n=null==n||n,o&&t._d.setTime(+t._d+o*i),s&&pt(t,"Date",ft(t,"Date")+s*i),a&&mt(t,ft(t,"Month")+a*i),n&&_t.updateOffset(t,s||a)}function k(t){return"[object Array]"===Object.prototype.toString.call(t)}function C(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function S(t,e,i){var n,o=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),a=0;for(n=0;o>n;n++)(i&&t[n]!==e[n]||!i&&A(t[n])!==A(e[n]))&&a++;return a+s}function T(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=he[t]||de[e]||e}return t}function $(t){var e,n,o={};for(n in t)i(t,n)&&(e=T(n),e&&(o[e]=t[n]));return o}function x(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}_t[e]=function(o,s){var a,r,l=_t._locale[e],c=[];if("number"==typeof o&&(s=o,o=t),r=function(t){var e=_t().utc().set(n,t);return l.call(_t._locale,e,o||"")},null!=s)return r(s);for(a=0;i>a;a++)c.push(r(a));return c}}function A(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function E(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function D(t,e,i){return ct(_t([t,11,31+e-i]),e,i).week}function M(t){return L(t)?366:365}function L(t){return t%4===0&&t%100!==0||t%400===0}function F(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Et]<0||t._a[Et]>11?Et:t._a[Dt]<1||t._a[Dt]>E(t._a[At],t._a[Et])?Dt:t._a[Mt]<0||t._a[Mt]>24||24===t._a[Mt]&&(0!==t._a[Lt]||0!==t._a[Ft]||0!==t._a[Rt])?Mt:t._a[Lt]<0||t._a[Lt]>59?Lt:t._a[Ft]<0||t._a[Ft]>59?Ft:t._a[Rt]<0||t._a[Rt]>999?Rt:-1,t._pf._overflowDayOfYear&&(At>e||e>Dt)&&(e=Dt),t._pf.overflow=e)}function R(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===t)),e._isValid}function P(t){return t?t.toLowerCase().replace("_","-"):t}function O(t){for(var e,i,n,o,s=0;s<t.length;){for(o=P(t[s]).split("-"),e=o.length,i=P(t[s+1]),i=i?i.split("-"):null;e>0;){if(n=N(o.slice(0,e).join("-")))return n;if(i&&i.length>=e&&S(o,i,!0)>=e-1)break;e--}s++}return null}function N(t){var e=null;if(!Pt[t]&&Nt)try{e=_t.locale(),require("./locale/"+t),_t.locale(e)}catch(i){}return Pt[t]}function I(t,e){var i,n;return e._isUTC?(i=e.clone(),n=(_t.isMoment(t)||C(t)?+t:+_t(t))-+i,i._d.setTime(+i._d+n),_t.updateOffset(i,!1),i):_t(t).local()}function H(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function j(t){var e,i,n=t.match(Wt);for(e=0,i=n.length;i>e;e++)n[e]=ve[n[e]]?ve[n[e]]:H(n[e]);return function(o){var s="";for(e=0;i>e;e++)s+=n[e]instanceof Function?n[e].call(o,t):n[e];return s}}function W(t,e){return t.isValid()?(e=Y(e,t.localeData()),me[e]||(me[e]=j(e)),me[e](t)):t.localeData().invalidDate()}function Y(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Yt.lastIndex=0;n>=0&&Yt.test(t);)t=t.replace(Yt,i),Yt.lastIndex=0,n-=1;return t}function U(t,e){var i,n=e._strict;switch(t){case"Q":return Jt;case"DDDD":return ee;case"YYYY":case"GGGG":case"gggg":return n?ie:zt;case"Y":case"G":case"g":return oe;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?ne:Bt;case"S":if(n)return Jt;case"SS":if(n)return te;case"SSS":if(n)return ee;case"DDD":return Vt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return qt;case"a":case"A":return e._locale._meridiemParse;case"x":return Zt;case"X":return Xt;case"Z":case"ZZ":return Qt;case"T":return Kt;case"SSSS":return Gt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?te:Ut;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ut;case"Do":return n?e._locale._ordinalParse:e._locale._ordinalParseLenient;default:return i=new RegExp(X(Z(t.replace("\\","")),"i"))}}function V(t){t=t||"";var e=t.match(Qt)||[],i=e[e.length-1]||[],n=(i+"").match(ce)||["-",0,0],o=+(60*n[1])+A(n[2]);return"+"===n[0]?o:-o}function z(t,e,i){var n,o=i._a;switch(t){case"Q":null!=e&&(o[Et]=3*(A(e)-1));break;case"M":case"MM":null!=e&&(o[Et]=A(e)-1);break;case"MMM":case"MMMM":n=i._locale.monthsParse(e,t,i._strict),null!=n?o[Et]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(o[Dt]=A(e));break;case"Do":null!=e&&(o[Dt]=A(parseInt(e.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=A(e));break;case"YY":o[At]=_t.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":o[At]=A(e);break;case"a":case"A":i._meridiem=e;break;case"h":case"hh":i._pf.bigHour=!0;case"H":case"HH":o[Mt]=A(e);break;case"m":case"mm":o[Lt]=A(e);break;case"s":case"ss":o[Ft]=A(e);break;case"S":case"SS":case"SSS":case"SSSS":o[Rt]=A(1e3*("0."+e));break;case"x":i._d=new Date(A(e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=V(e);break;case"dd":case"ddd":case"dddd":n=i._locale.weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=A(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=_t.parseTwoDigitYear(e)}}function B(t){var i,n,o,s,a,r,l;i=t._w,null!=i.GG||null!=i.W||null!=i.E?(a=1,r=4,n=e(i.GG,t._a[At],ct(_t(),1,4).year),o=e(i.W,1),s=e(i.E,1)):(a=t._locale._week.dow,r=t._locale._week.doy,n=e(i.gg,t._a[At],ct(_t(),a,r).year),o=e(i.w,1),null!=i.d?(s=i.d,a>s&&++o):s=null!=i.e?i.e+a:a),l=ut(n,o,s,r,a),t._a[At]=l.year,t._dayOfYear=l.dayOfYear}function G(t){var i,n,o,s,a=[];if(!t._d){for(o=Q(t),t._w&&null==t._a[Dt]&&null==t._a[Et]&&B(t),t._dayOfYear&&(s=e(t._a[At],o[At]),t._dayOfYear>M(s)&&(t._pf._overflowDayOfYear=!0),n=st(s,0,t._dayOfYear),t._a[Et]=n.getUTCMonth(),t._a[Dt]=n.getUTCDate()),i=0;3>i&&null==t._a[i];++i)t._a[i]=a[i]=o[i];for(;7>i;i++)t._a[i]=a[i]=null==t._a[i]?2===i?1:0:t._a[i];24===t._a[Mt]&&0===t._a[Lt]&&0===t._a[Ft]&&0===t._a[Rt]&&(t._nextDay=!0,t._a[Mt]=0),t._d=(t._useUTC?st:ot).apply(null,a),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[Mt]=24)}}function q(t){var e;t._d||(e=$(t._i),t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],G(t))}function Q(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function K(e){if(e._f===_t.ISO_8601)return void tt(e);e._a=[],e._pf.empty=!0;var i,n,o,s,a,r=""+e._i,l=r.length,c=0;for(o=Y(e._f,e._locale).match(Wt)||[],i=0;i<o.length;i++)s=o[i],n=(r.match(U(s,e))||[])[0],n&&(a=r.substr(0,r.indexOf(n)),a.length>0&&e._pf.unusedInput.push(a),r=r.slice(r.indexOf(n)+n.length),c+=n.length),ve[s]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(s),z(s,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(s);e._pf.charsLeftOver=l-c,r.length>0&&e._pf.unusedInput.push(r),e._pf.bigHour===!0&&e._a[Mt]<=12&&(e._pf.bigHour=t),e._a[Mt]=u(e._locale,e._a[Mt],e._meridiem),G(e),F(e)}function Z(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,o){return e||i||n||o})}function X(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(t){var e,i,o,s,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(NaN));for(s=0;s<t._f.length;s++)a=0,e=p({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[s],K(e),R(e)&&(a+=e._pf.charsLeftOver,a+=10*e._pf.unusedTokens.length,e._pf.score=a,(null==o||o>a)&&(o=a,i=e));f(t,i||e)}function tt(t){var e,i,n=t._i,o=se.exec(n);if(o){for(t._pf.iso=!0,e=0,i=re.length;i>e;e++)if(re[e][1].exec(n)){t._f=re[e][0]+(o[6]||" ");break}for(e=0,i=le.length;i>e;e++)if(le[e][1].exec(n)){t._f+=le[e][0];break}n.match(Qt)&&(t._f+="Z"),K(t)}else t._isValid=!1}function et(t){tt(t),t._isValid===!1&&(delete t._isValid,_t.createFromInputFallback(t))}function it(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function nt(e){var i,n=e._i;n===t?e._d=new Date:C(n)?e._d=new Date((+n)):null!==(i=It.exec(n))?e._d=new Date((+i[1])):"string"==typeof n?et(e):k(n)?(e._a=it(n.slice(0),function(t){return parseInt(t,10)}),G(e)):"object"==typeof n?q(e):"number"==typeof n?e._d=new Date(n):_t.createFromInputFallback(e)}function ot(t,e,i,n,o,s,a){var r=new Date(t,e,i,n,o,s,a);return 1970>t&&r.setFullYear(t),r}function st(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function at(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function rt(t,e,i,n,o){return o.relativeTime(e||1,!!i,t,n)}function lt(t,e,i){var n=_t.duration(t).abs(),o=$t(n.as("s")),s=$t(n.as("m")),a=$t(n.as("h")),r=$t(n.as("d")),l=$t(n.as("M")),c=$t(n.as("y")),u=o<fe.s&&["s",o]||1===s&&["m"]||s<fe.m&&["mm",s]||1===a&&["h"]||a<fe.h&&["hh",a]||1===r&&["d"]||r<fe.d&&["dd",r]||1===l&&["M"]||l<fe.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=i,rt.apply({},u)}function ct(t,e,i){var n,o=i-e,s=i-t.day();return s>o&&(s-=7),o-7>s&&(s+=7),n=_t(t).add(s,"d"),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ut(t,e,i,n,o){var s,a,r=st(t,0,1).getUTCDay();return r=0===r?7:r,i=null!=i?i:o,s=o-r+(r>n?7:0)-(o>r?7:0),a=7*(e-1)+(i-o)+s+1,{year:a>0?t:t-1,dayOfYear:a>0?a:M(t-1)+a}}function ht(e){var i,n=e._i,o=e._f;return e._locale=e._locale||_t.localeData(e._l),null===n||o===t&&""===n?_t.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),_t.isMoment(n)?new d(n,(!0)):(o?k(o)?J(e):K(e):nt(e),i=new d(e),i._nextDay&&(i.add(1,"d"),i._nextDay=t),i))}function dt(t,e){var i,n;if(1===e.length&&k(e[0])&&(e=e[0]),!e.length)return _t();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function mt(t,e){var i;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),E(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function ft(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function pt(t,e,i){return"Month"===e?mt(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function gt(t,e){return function(i){return null!=i?(pt(this,t,i),_t.updateOffset(this,e),this):ft(this,t)}}function vt(t){return 400*t/146097}function yt(t){return 146097*t/400}function wt(t){_t.duration.fn[t]=function(){return this._data[t]}}function bt(t){"undefined"==typeof ender&&(kt=Tt.moment,Tt.moment=t?s("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",_t):_t)}for(var _t,kt,Ct,St="2.9.0",Tt="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,$t=Math.round,xt=Object.prototype.hasOwnProperty,At=0,Et=1,Dt=2,Mt=3,Lt=4,Ft=5,Rt=6,Pt={},Ot=[],Nt="undefined"!=typeof module&&module&&module.exports,It=/^\/?Date\((\-?\d+)/i,Ht=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,jt=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Wt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Yt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ut=/\d\d?/,Vt=/\d{1,3}/,zt=/\d{1,4}/,Bt=/[+\-]?\d{1,6}/,Gt=/\d+/,qt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Qt=/Z|[\+\-]\d\d:?\d\d/gi,Kt=/T/i,Zt=/[\+\-]?\d+/,Xt=/[\+\-]?\d+(\.\d{1,3})?/,Jt=/\d/,te=/\d\d/,ee=/\d{3}/,ie=/\d{4}/,ne=/[+-]?\d{6}/,oe=/[+-]?\d+/,se=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ae="YYYY-MM-DDTHH:mm:ssZ",re=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],le=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ce=/([\+\-]|\d\d)/gi,ue=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),he={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},de={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},me={},fe={s:45,m:45,h:22,d:26,M:11},pe="DDD w W M D d".split(" "),ge="M D H h m s w W".split(" "),ve={M:function(){return this.month()+1},MMM:function(t){return this.localeData().monthsShort(this,t)},MMMM:function(t){return this.localeData().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.localeData().weekdaysMin(this,t)},ddd:function(t){return this.localeData().weekdaysShort(this,t)},dddd:function(t){return this.localeData().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+v(Math.abs(t),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return v(A(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(A(t/60),2)+":"+v(A(t)%60,2)},ZZ:function(){var t=this.utcOffset(),e="+";return 0>t&&(t=-t,e="-"),e+v(A(t/60),2)+v(A(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ye={},we=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],be=!1;pe.length;)Ct=pe.pop(),ve[Ct+"o"]=l(ve[Ct],Ct);for(;ge.length;)Ct=ge.pop(),ve[Ct+Ct]=r(ve[Ct],2);ve.DDDD=r(ve.DDD,3),f(h.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t,e,i){var n,o,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;12>n;n++){if(o=_t.utc([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=_t([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e,i){var n=this._calendar[t];return"function"==typeof n?n.apply(e,[i]):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var o=this._relativeTime[i];return"function"==typeof o?o(t,e,i,n):o.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(t){return t},postformat:function(t){return t},week:function(t){return ct(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),_t=function(e,i,o,s){var a;return"boolean"==typeof o&&(s=o,o=t),a={},a._isAMomentObject=!0,a._i=e,a._f=i,a._l=o,a._strict=s,a._isUTC=!1,a._pf=n(),ht(a)},_t.suppressDeprecationWarnings=!1,_t.createFromInputFallback=s("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),_t.min=function(){var t=[].slice.call(arguments,0);return dt("isBefore",t)},_t.max=function(){var t=[].slice.call(arguments,0);return dt("isAfter",t)},_t.utc=function(e,i,o,s){var a;return"boolean"==typeof o&&(s=o,o=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=o,a._i=e,a._f=i,a._strict=s,a._pf=n(),ht(a).utc()},_t.unix=function(t){return _t(1e3*t)},_t.duration=function(t,e){var n,o,s,a,r=t,l=null;return _t.isDuration(t)?r={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(r={},e?r[e]=t:r.milliseconds=t):(l=Ht.exec(t))?(n="-"===l[1]?-1:1,r={y:0,d:A(l[Dt])*n,h:A(l[Mt])*n,m:A(l[Lt])*n,s:A(l[Ft])*n,ms:A(l[Rt])*n}):(l=jt.exec(t))?(n="-"===l[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},r={y:s(l[2]),M:s(l[3]),d:s(l[4]),h:s(l[5]),m:s(l[6]),s:s(l[7]),w:s(l[8])}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(a=w(_t(r.from),_t(r.to)),r={},r.ms=a.milliseconds,r.M=a.months),o=new m(r),_t.isDuration(t)&&i(t,"_locale")&&(o._locale=t._locale),o},_t.version=St,_t.defaultFormat=ae,_t.ISO_8601=function(){},_t.momentProperties=Ot,_t.updateOffset=function(){},_t.relativeTimeThreshold=function(e,i){return fe[e]!==t&&(i===t?fe[e]:(fe[e]=i,!0))},_t.lang=s("moment.lang is deprecated. Use moment.locale instead.",function(t,e){return _t.locale(t,e)}),_t.locale=function(t,e){var i;return t&&(i="undefined"!=typeof e?_t.defineLocale(t,e):_t.localeData(t),i&&(_t.duration._locale=_t._locale=i)),_t._locale._abbr},_t.defineLocale=function(t,e){return null!==e?(e.abbr=t,Pt[t]||(Pt[t]=new h),Pt[t].set(e),_t.locale(t),Pt[t]):(delete Pt[t],null)},_t.langData=s("moment.langData is deprecated. Use moment.localeData instead.",function(t){return _t.localeData(t)}),_t.localeData=function(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return _t._locale;if(!k(t)){if(e=N(t))return e;t=[t]}return O(t)},_t.isMoment=function(t){return t instanceof d||null!=t&&i(t,"_isAMomentObject")},_t.isDuration=function(t){return t instanceof m};for(Ct=we.length-1;Ct>=0;--Ct)x(we[Ct]);_t.normalizeUnits=function(t){return T(t)},_t.invalid=function(t){var e=_t.utc(NaN);return null!=t?f(e._pf,t):e._pf.userInvalidated=!0,e},_t.parseZone=function(){return _t.apply(null,arguments).parseZone()},_t.parseTwoDigitYear=function(t){return A(t)+(A(t)>68?1900:2e3)},_t.isDate=C,f(_t.fn=d.prototype,{clone:function(){return _t(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date((+this)):this._d},toISOString:function(){var t=_t(this).utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():W(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return R(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&S(this._a,(this._isUTC?_t.utc(this._a):_t(this._a)).toArray())>0)},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(t){return this.utcOffset(0,t)},local:function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(t){var e=W(this,t||_t.defaultFormat);return this.localeData().postformat(e)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(t,e,i){var n,o,s=I(t,this),a=6e4*(s.utcOffset()-this.utcOffset());return e=T(e),"year"===e||"month"===e||"quarter"===e?(o=c(this,s),"quarter"===e?o/=3:"year"===e&&(o/=12)):(n=this-s,o="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-a)/864e5:"week"===e?(n-a)/6048e5:n),i?o:g(o)},from:function(t,e){return _t.duration({to:this,from:t}).locale(this.locale()).humanize(!e)},fromNow:function(t){return this.from(_t(),t)},calendar:function(t){var e=t||_t(),i=I(e,this).startOf("day"),n=this.diff(i,"days",!0),o=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.localeData().calendar(o,this,_t(e)))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=at(t,this.localeData()),this.add(t-e,"d")):e},month:gt("Month",!0),startOf:function(t){switch(t=T(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=T(e),e===t||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=_t.isMoment(t)?t:_t(t),+this>+t):(i=_t.isMoment(t)?+t:+_t(t),i<+this.clone().startOf(e))},isBefore:function(t,e){var i;return e=T("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=_t.isMoment(t)?t:_t(t),+t>+this):(i=_t.isMoment(t)?+t:+_t(t),+this.clone().endOf(e)<i)},isBetween:function(t,e,i){return this.isAfter(t,i)&&this.isBefore(e,i)},isSame:function(t,e){var i;return e=T(e||"millisecond"),"millisecond"===e?(t=_t.isMoment(t)?t:_t(t),+this===+t):(i=+_t(t),+this.clone().startOf(e)<=i&&i<=+this.clone().endOf(e))},min:s("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=_t.apply(null,arguments),this>t?this:t}),max:s("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=_t.apply(null,arguments),t>this?this:t}),zone:s("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}),utcOffset:function(t,e){var i,n=this._offset||0;return null!=t?("string"==typeof t&&(t=V(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&e&&(i=this._dateUtcOffset()),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),n!==t&&(!e||this._changeInProgress?_(this,_t.duration(t-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,_t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?n:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(V(this._i)),this},hasAlignedHourOffset:function(t){return t=t?_t(t).utcOffset():0,(this.utcOffset()-t)%60===0},daysInMonth:function(){return E(this.year(),this.month())},dayOfYear:function(t){var e=$t((_t(this).startOf("day")-_t(this).startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=ct(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")},isoWeekYear:function(t){var e=ct(this,1,4).year;return null==t?e:this.add(t-e,"y")},week:function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},isoWeek:function(t){var e=ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},weekday:function(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return D(this.year(),1,4)},weeksInYear:function(){var t=this.localeData()._week;return D(this.year(),t.dow,t.doy)},get:function(t){return t=T(t),this[t]()},set:function(t,e){var i;if("object"==typeof t)for(i in t)this.set(i,t[i]);else t=T(t),"function"==typeof this[t]&&this[t](e);return this},locale:function(e){var i;return e===t?this._locale._abbr:(i=_t.localeData(e),null!=i&&(this._locale=i),this)},lang:s("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===t?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),_t.fn.millisecond=_t.fn.milliseconds=gt("Milliseconds",!1),_t.fn.second=_t.fn.seconds=gt("Seconds",!1),_t.fn.minute=_t.fn.minutes=gt("Minutes",!1),_t.fn.hour=_t.fn.hours=gt("Hours",!0),_t.fn.date=gt("Date",!0),_t.fn.dates=s("dates accessor is deprecated. Use date instead.",gt("Date",!0)),_t.fn.year=gt("FullYear",!0),_t.fn.years=s("years accessor is deprecated. Use year instead.",gt("FullYear",!0)),_t.fn.days=_t.fn.day,_t.fn.months=_t.fn.month,_t.fn.weeks=_t.fn.week,_t.fn.isoWeeks=_t.fn.isoWeek,_t.fn.quarters=_t.fn.quarter,_t.fn.toJSON=_t.fn.toISOString,_t.fn.isUTC=_t.fn.isUtc,f(_t.duration.fn=m.prototype,{_bubble:function(){var t,e,i,n=this._milliseconds,o=this._days,s=this._months,a=this._data,r=0;a.milliseconds=n%1e3,t=g(n/1e3),a.seconds=t%60,e=g(t/60),a.minutes=e%60,i=g(e/60),a.hours=i%24,o+=g(i/24),r=g(vt(o)),o-=g(yt(r)),s+=g(o/30),o%=30,r+=g(s/12),s%=12,a.days=o,a.months=s,a.years=r},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(t){var e=lt(this,!t,this.localeData());return t&&(e=this.localeData().pastFuture(+this,e)),this.localeData().postformat(e)},add:function(t,e){var i=_t.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=_t.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=T(t),this[t.toLowerCase()+"s"]()},as:function(t){var e,i;if(t=T(t),"month"===t||"year"===t)return e=this._days+this._milliseconds/864e5,i=this._months+12*vt(e),"month"===t?i:i/12;switch(e=this._days+Math.round(yt(this._months/12)),t){case"week":return e/7+this._milliseconds/6048e5;case"day":return e+this._milliseconds/864e5;case"hour":return 24*e+this._milliseconds/36e5;case"minute":return 24*e*60+this._milliseconds/6e4;case"second":return 24*e*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+t)}},lang:_t.fn.lang,locale:_t.fn.locale,toIsoString:s("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),o=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||o||s?"T":"")+(n?n+"H":"")+(o?o+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),_t.duration.fn.toString=_t.duration.fn.toISOString;for(Ct in ue)i(ue,Ct)&&wt(Ct.toLowerCase());_t.duration.fn.asMilliseconds=function(){return this.as("ms")},_t.duration.fn.asSeconds=function(){return this.as("s")},_t.duration.fn.asMinutes=function(){return this.as("m")},_t.duration.fn.asHours=function(){return this.as("h")},_t.duration.fn.asDays=function(){return this.as("d")},_t.duration.fn.asWeeks=function(){return this.as("weeks")},_t.duration.fn.asMonths=function(){return this.as("M")},_t.duration.fn.asYears=function(){return this.as("y")},_t.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,i=1===A(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Nt?module.exports=_t:"function"==typeof define&&define.amd?(define(function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(Tt.moment=kt),_t}),bt(!0)):bt()}.call(this),function(){var t,e,i,n,o,s,a,r,l,c,u,h,d,m,f,p,g,v,y,w,b,_,k,C,S,T,$,x,A,E,D,M,L,F,R,P,O,N,I,H,j,W,Y,U,V,z,B,G,q,Q,K,Z,X,J,tt,et,it,nt=function(t,e){return function(){return t.apply(e,arguments)}};E=function(){return"visible"===document.visibilityState||null!=$.tests},R=function(){var t;return t=[],"undefined"!=typeof document&&null!==document&&document.addEventListener("visibilitychange",function(){var e,i,n,o;for(o=[],i=0,n=t.length;n>i;i++)e=t[i],o.push(e(E()));return o}),function(e){return t.push(e)}}(),k=function(t){var e,i,n;i={};for(e in t)n=t[e],i[e]=n;return i},b=function(t){var e;return e={},function(){var i,n,o,s,a;for(n="",s=0,a=arguments.length;a>s;s++)i=arguments[s],n+=i.toString()+",";return o=e[n],o||(e[n]=o=t.apply(this,arguments)),o}},F=function(t){return function(e){var i,n,o;return e instanceof Array||e instanceof NodeList||e instanceof HTMLCollection?o=function(){var o,s,a;for(a=[],n=o=0,s=e.length;s>=0?s>o:o>s;n=s>=0?++o:--o)i=Array.prototype.slice.call(arguments,1),i.splice(0,0,e[n]),a.push(t.apply(this,i));return a}.apply(this,arguments):t.apply(this,arguments)}},g=function(t,e){var i,n,o;o=[];for(i in e)n=e[i],o.push(null!=t[i]?t[i]:t[i]=n);return o},v=function(t,e){var i,n,o;if(null!=t.style)return y(t,e);o=[];for(i in e)n=e[i],o.push(t[i]=n.format());return o},y=function(t,e){var i,n,o,s,a;e=P(e),s=[],i=D(t);for(n in e)a=e[n],tt.contains(n)?s.push([n,a]):(null!=a.format&&(a=a.format()),"number"==typeof a&&(a=""+a+it(n,a)),i&&Q.contains(n)?t.setAttribute(n,a):n in t?t[n]=a:t.style[N(n)]=a);return s.length>0?i?(o=new c,o.applyProperties(s),t.setAttribute("transform",o.decompose().format())):(a=s.map(function(t){return et(t[0],t[1])}).join(" "),t.style[N("transform")]=a):void 0},D=function(t){var e,i;return"undefined"!=typeof SVGElement&&null!==SVGElement&&"undefined"!=typeof SVGSVGElement&&null!==SVGSVGElement?t instanceof SVGElement&&!(t instanceof SVGSVGElement):null!=(e=null!=(i=$.tests)&&"function"==typeof i.isSVG?i.isSVG(t):void 0)&&e},j=function(t,e){var i;return i=Math.pow(10,e),Math.round(t*i)/i},u=function(){function t(t){var e,i,n;for(this.obj={},i=0,n=t.length;n>i;i++)e=t[i],this.obj[e]=1}return t.prototype.contains=function(t){return 1===this.obj[t]},t}(),J=function(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})},I=new u("marginTop,marginLeft,marginBottom,marginRight,paddingTop,paddingLeft,paddingBottom,paddingRight,top,left,bottom,right,translateX,translateY,translateZ,perspectiveX,perspectiveY,perspectiveZ,width,height,maxWidth,maxHeight,minWidth,minHeight,borderRadius".split(",")),T=new u("rotate,rotateX,rotateY,rotateZ,skew,skewX,skewY,skewZ".split(",")),tt=new u("translate,translateX,translateY,translateZ,scale,scaleX,scaleY,scaleZ,rotate,rotateX,rotateY,rotateZ,rotateC,rotateCX,rotateCY,skew,skewX,skewY,skewZ,perspective".split(",")),Q=new u("accent-height,ascent,azimuth,baseFrequency,baseline-shift,bias,cx,cy,d,diffuseConstant,divisor,dx,dy,elevation,filterRes,fx,fy,gradientTransform,height,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,letter-spacing,limitingConeAngle,markerHeight,markerWidth,numOctaves,order,overline-position,overline-thickness,pathLength,points,pointsAtX,pointsAtY,pointsAtZ,r,radius,rx,ry,seed,specularConstant,specularExponent,stdDeviation,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,surfaceScale,target,targetX,targetY,transform,underline-position,underline-thickness,viewBox,width,x,x1,x2,y,y1,y2,z".split(",")),it=function(t,e){return"number"!=typeof e?"":I.contains(t)?"px":T.contains(t)?"deg":""},et=function(t,e){var i,n;return i=(""+e).match(/^([0-9.-]*)([^0-9]*)$/),null!=i?(e=i[1],n=i[2]):e=parseFloat(e),e=j(parseFloat(e),10),(null==n||""===n)&&(n=it(t,e)),""+t+"("+e+n+")"},P=function(t){var e,i,n,o,s,a,r,l;n={};for(o in t)if(s=t[o],tt.contains(o))if(i=o.match(/(translate|rotateC|rotate|skew|scale|perspective)(X|Y|Z|)/),i&&i[2].length>0)n[o]=s;else for(l=["X","Y","Z"],a=0,r=l.length;r>a;a++)e=l[a],n[i[1]+e]=s;else n[o]=s;return n},S=function(t){var e;return e="opacity"===t?1:0,""+e+it(t,e)},x=function(t,e){var i,n,o,s,a,r,u,h,d,m,f;if(s={},i=D(t),null!=t.style)for(a=window.getComputedStyle(t,null),u=0,d=e.length;d>u;u++)n=e[u],tt.contains(n)?null==s.transform&&(o=i?new c(null!=(f=t.transform.baseVal.consolidate())?f.matrix:void 0):l.fromTransform(a[N("transform")]),s.transform=o.decompose()):(r=a[n],null!=r&&"d"!==n||!Q.contains(n)||(r=t.getAttribute(n)),(""===r||null==r)&&(r=S(n)),s[n]=C(r));else for(h=0,m=e.length;m>h;h++)n=e[h],s[n]=C(t[n]);return s},C=function(t){var e,i,o,l,c;for(o=[n,a,s,r],l=0,c=o.length;c>l;l++)if(i=o[l],e=i.create(t),null!=e)return e;return null},r=function(){function t(t){this.parts=t,this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this)}return t.prototype.interpolate=function(e,i){var n,o,s,a,r,l;for(a=this.parts,n=e.parts,s=[],o=r=0,l=Math.min(a.length,n.length);l>=0?l>r:r>l;o=l>=0?++r:--r)s.push(null!=a[o].interpolate?a[o].interpolate(n[o],i):a[o]);return new t(s)},t.prototype.format=function(){var t;return t=this.parts.map(function(t){return null!=t.format?t.format():t}),t.join("")},t.create=function(e){var i,n,a,r,l,c,u,h,d,m,f;for(e=""+e,a=[],u=[{re:/(#[a-f\d]{3,6})/gi,klass:o,parse:function(t){return t}},{re:/(rgba?\([0-9.]*, ?[0-9.]*, ?[0-9.]*(?:, ?[0-9.]*)?\))/gi,klass:o,parse:function(t){return t}},{re:/([-+]?[\d.]+)/gi,klass:s,parse:parseFloat}],h=0,m=u.length;m>h;h++)for(c=u[h],l=c.re;n=l.exec(e);)a.push({index:n.index,length:n[1].length,interpolable:c.klass.create(c.parse(n[1]))});for(a=a.sort(function(t,e){return t.index>e.index?1:-1}),r=[],i=0,d=0,f=a.length;f>d;d++)n=a[d],n.index<i||(n.index>i&&r.push(e.substring(i,n.index)),r.push(n.interpolable),i=n.index+n.length);return i<e.length&&r.push(e.substring(i)),new t(r)},t}(),a=function(){function t(t){this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this),this.obj=t}return t.prototype.interpolate=function(e,i){var n,o,s,a,r;a=this.obj,n=e.obj,s={};for(o in a)r=a[o],s[o]=null!=r.interpolate?r.interpolate(n[o],i):r;return new t(s)},t.prototype.format=function(){return this.obj},t.create=function(e){var i,n,o;if(e instanceof Object){n={};for(i in e)o=e[i],n[i]=C(o);return new t(n)}return null},t}(),s=function(){function t(t){this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this),this.value=parseFloat(t)}return t.prototype.interpolate=function(e,i){var n,o;return o=this.value,n=e.value,new t((n-o)*i+o)},t.prototype.format=function(){return j(this.value,5)},t.create=function(e){return"number"==typeof e?new t(e):null},t}(),n=function(){function t(t){this.values=t,this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this)}return t.prototype.interpolate=function(e,i){var n,o,s,a,r,l;for(a=this.values,n=e.values,s=[],o=r=0,l=Math.min(a.length,n.length);l>=0?l>r:r>l;o=l>=0?++r:--r)s.push(null!=a[o].interpolate?a[o].interpolate(n[o],i):a[o]);return new t(s)},t.prototype.format=function(){return this.values.map(function(t){return null!=t.format?t.format():t})},t.createFromArray=function(e){var i;return i=e.map(function(t){return C(t)||t}),i=i.filter(function(t){return null!=t}),new t(i)},t.create=function(e){return e instanceof Array?t.createFromArray(e):null},t}(),t=function(){function t(t,e){this.rgb=null!=t?t:{},this.format=e,this.toRgba=nt(this.toRgba,this),this.toRgb=nt(this.toRgb,this),this.toHex=nt(this.toHex,this)}return t.fromHex=function(e){var i,n;return i=e.match(/^#([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i),null!=i&&(e="#"+i[1]+i[1]+i[2]+i[2]+i[3]+i[3]),n=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i),null!=n?new t({r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16),a:1},"hex"):null},t.fromRgb=function(e){var i,n;return i=e.match(/^rgba?\(([0-9.]*), ?([0-9.]*), ?([0-9.]*)(?:, ?([0-9.]*))?\)$/),null!=i?new t({r:parseFloat(i[1]),g:parseFloat(i[2]),b:parseFloat(i[3]),a:parseFloat(null!=(n=i[4])?n:1)},null!=i[4]?"rgba":"rgb"):null},t.componentToHex=function(t){var e;return e=t.toString(16),1===e.length?"0"+e:e},t.prototype.toHex=function(){return"#"+t.componentToHex(this.rgb.r)+t.componentToHex(this.rgb.g)+t.componentToHex(this.rgb.b)},t.prototype.toRgb=function(){return"rgb("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+")"},t.prototype.toRgba=function(){return"rgba("+this.rgb.r+", "+this.rgb.g+", "+this.rgb.b+", "+this.rgb.a+")"},t}(),o=function(){function e(t){this.color=t,this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this)}return e.prototype.interpolate=function(i,n){var o,s,a,r,l,c,u,h;for(r=this.color,o=i.color,a={},h=["r","g","b"],c=0,u=h.length;u>c;c++)s=h[c],l=Math.round((o.rgb[s]-r.rgb[s])*n+r.rgb[s]),a[s]=Math.min(255,Math.max(0,l));return s="a",l=j((o.rgb[s]-r.rgb[s])*n+r.rgb[s],5),a[s]=Math.min(1,Math.max(0,l)),new e(new t(a,o.format))},e.prototype.format=function(){return"hex"===this.color.format?this.color.toHex():"rgb"===this.color.format?this.color.toRgb():"rgba"===this.color.format?this.color.toRgba():void 0},e.create=function(i){var n;if("string"==typeof i)return n=t.fromHex(i)||t.fromRgb(i),null!=n?new e(n):null},e}(),i=function(){function t(t){this.props=t,this.applyRotateCenter=nt(this.applyRotateCenter,this),this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this)}return t.prototype.interpolate=function(e,i){var n,o,s,a,r,l,c,u,h,d,m,f;for(s={},d=["translate","scale","rotate"],a=0,u=d.length;u>a;a++)for(o=d[a],s[o]=[],n=r=0,m=this.props[o].length;m>=0?m>r:r>m;n=m>=0?++r:--r)s[o][n]=(e.props[o][n]-this.props[o][n])*i+this.props[o][n];for(n=l=1;2>=l;n=++l)s.rotate[n]=e.props.rotate[n];for(f=["skew"],c=0,h=f.length;h>c;c++)o=f[c],s[o]=(e.props[o]-this.props[o])*i+this.props[o];return new t(s)},t.prototype.format=function(){return"translate("+this.props.translate.join(",")+") rotate("+this.props.rotate.join(",")+") skewX("+this.props.skew+") scale("+this.props.scale.join(",")+")"},t.prototype.applyRotateCenter=function(t){var e,i,n,o,s,a;for(i=w.createSVGMatrix(),i=i.translate(t[0],t[1]),i=i.rotate(this.props.rotate[0]),i=i.translate(-t[0],-t[1]),n=new c(i),o=n.decompose().props.translate,a=[],e=s=0;1>=s;e=++s)a.push(this.props.translate[e]-=o[e]);return a},t}(),w="undefined"!=typeof document&&null!==document?document.createElementNS("http://www.w3.org/2000/svg","svg"):void 0,c=function(){function t(t){this.m=t,this.applyProperties=nt(this.applyProperties,this),this.decompose=nt(this.decompose,this),this.m||(this.m=w.createSVGMatrix())}return t.prototype.decompose=function(){var t,e,n,o,s;return o=new h([this.m.a,this.m.b]),s=new h([this.m.c,this.m.d]),t=o.length(),n=o.dot(s),o=o.normalize(),e=s.combine(o,1,-n).length(),new i({translate:[this.m.e,this.m.f],rotate:[180*Math.atan2(this.m.b,this.m.a)/Math.PI,this.rotateCX,this.rotateCY],scale:[t,e],skew:n/e*180/Math.PI})},t.prototype.applyProperties=function(t){var e,i,n,o,s,a,r,l;for(e={},s=0,a=t.length;a>s;s++)n=t[s],e[n[0]]=n[1];for(i in e)o=e[i],"translateX"===i?this.m=this.m.translate(o,0):"translateY"===i?this.m=this.m.translate(0,o):"scaleX"===i?this.m=this.m.scaleNonUniform(o,1):"scaleY"===i?this.m=this.m.scaleNonUniform(1,o):"rotateZ"===i?this.m=this.m.rotate(o):"skewX"===i?this.m=this.m.skewX(o):"skewY"===i&&(this.m=this.m.skewY(o));return this.rotateCX=null!=(r=e.rotateCX)?r:0,this.rotateCY=null!=(l=e.rotateCY)?l:0},t}(),h=function(){function t(t){this.els=t,this.combine=nt(this.combine,this),this.normalize=nt(this.normalize,this),this.length=nt(this.length,this),this.cross=nt(this.cross,this),this.dot=nt(this.dot,this),this.e=nt(this.e,this)}return t.prototype.e=function(t){return 1>t||t>this.els.length?null:this.els[t-1]},t.prototype.dot=function(t){var e,i,n;if(e=t.els||t,n=0,i=this.els.length,i!==e.length)return null;for(i+=1;--i;)n+=this.els[i-1]*e[i-1];return n},t.prototype.cross=function(e){var i,n;return n=e.els||e,3!==this.els.length||3!==n.length?null:(i=this.els,new t([i[1]*n[2]-i[2]*n[1],i[2]*n[0]-i[0]*n[2],i[0]*n[1]-i[1]*n[0]]))},t.prototype.length=function(){var t,e,i,n,o;for(t=0,o=this.els,i=0,n=o.length;n>i;i++)e=o[i],t+=Math.pow(e,2);return Math.sqrt(t)},t.prototype.normalize=function(){var e,i,n,o,s;n=this.length(),o=[],s=this.els;for(i in s)e=s[i],o[i]=e/n;return new t(o)},t.prototype.combine=function(e,i,n){var o,s,a,r;for(s=[],o=a=0,r=this.els.length;r>=0?r>a:a>r;o=r>=0?++a:--a)s[o]=i*this.els[o]+n*e.els[o];return new t(s)},t}(),e=function(){function t(){this.toMatrix=nt(this.toMatrix,this),this.format=nt(this.format,this),this.interpolate=nt(this.interpolate,this)}return t.prototype.interpolate=function(e,i,n){var o,s,a,r,l,c,u,h,d,m,f,p,g,v,y,w,b,_;for(null==n&&(n=null),a=this,s=new t,b=["translate","scale","skew","perspective"],p=0,w=b.length;w>p;p++)for(u=b[p],s[u]=[],r=g=0,_=a[u].length-1;_>=0?_>=g:g>=_;r=_>=0?++g:--g)s[u][r]=null==n||n.indexOf(u)>-1||n.indexOf(""+u+["x","y","z"][r])>-1?(e[u][r]-a[u][r])*i+a[u][r]:a[u][r];if(null==n||-1!==n.indexOf("rotate")){if(h=a.quaternion,d=e.quaternion,o=h[0]*d[0]+h[1]*d[1]+h[2]*d[2]+h[3]*d[3],0>o){for(r=v=0;3>=v;r=++v)h[r]=-h[r];o=-o}for(o+1>.05?1-o>=.05?(f=Math.acos(o),c=1/Math.sin(f),m=Math.sin(f*(1-i))*c,l=Math.sin(f*i)*c):(m=1-i,l=i):(d[0]=-h[1],d[1]=h[0],d[2]=-h[3],d[3]=h[2],m=Math.sin(piDouble*(.5-i)),l=Math.sin(piDouble*i)),s.quaternion=[],r=y=0;3>=y;r=++y)s.quaternion[r]=h[r]*m+d[r]*l}else s.quaternion=a.quaternion;return s},t.prototype.format=function(){return this.toMatrix().toString()},t.prototype.toMatrix=function(){var t,e,i,n,o,s,a,r,c,u,h,d,m,f,p,g;for(t=this,o=l.I(4),e=m=0;3>=m;e=++m)o.els[e][3]=t.perspective[e];for(s=t.quaternion,u=s[0],h=s[1],d=s[2],c=s[3],a=t.skew,n=[[1,0],[2,0],[2,1]],e=f=2;f>=0;e=--f)a[e]&&(r=l.I(4),r.els[n[e][0]][n[e][1]]=a[e],o=o.multiply(r));for(o=o.multiply(new l([[1-2*(h*h+d*d),2*(u*h-d*c),2*(u*d+h*c),0],[2*(u*h+d*c),1-2*(u*u+d*d),2*(h*d-u*c),0],[2*(u*d-h*c),2*(h*d+u*c),1-2*(u*u+h*h),0],[0,0,0,1]])),e=p=0;2>=p;e=++p){for(i=g=0;2>=g;i=++g)o.els[e][i]*=t.scale[e];o.els[3][e]=t.translate[e]}return o},t}(),l=function(){function t(t){this.els=t,this.toString=nt(this.toString,this),this.decompose=nt(this.decompose,this),this.inverse=nt(this.inverse,this),this.augment=nt(this.augment,this),this.toRightTriangular=nt(this.toRightTriangular,this),this.transpose=nt(this.transpose,this),this.multiply=nt(this.multiply,this),this.dup=nt(this.dup,this),this.e=nt(this.e,this)}return t.prototype.e=function(t,e){return 1>t||t>this.els.length||1>e||e>this.els[0].length?null:this.els[t-1][e-1]},t.prototype.dup=function(){return new t(this.els)},t.prototype.multiply=function(e){var i,n,o,s,a,r,l,c,u,h,d,m,f;for(m=!!e.modulus,i=e.els||e,"undefined"==typeof i[0][0]&&(i=new t(i).els),h=this.els.length,l=h,c=i[0].length,o=this.els[0].length,s=[],h+=1;--h;)for(a=l-h,s[a]=[],d=c,d+=1;--d;){for(r=c-d,f=0,u=o,u+=1;--u;)n=o-u,f+=this.els[a][n]*i[n][r];s[a][r]=f}return i=new t(s),m?i.col(1):i},t.prototype.transpose=function(){var e,i,n,o,s,a,r;for(r=this.els.length,e=this.els[0].length,i=[],s=e,s+=1;--s;)for(n=e-s,i[n]=[],a=r,a+=1;--a;)o=r-a,i[n][o]=this.els[o][n];return new t(i)},t.prototype.toRightTriangular=function(){var t,e,i,n,o,s,a,r,l,c,u,h,d,m;for(t=this.dup(),r=this.els.length,o=r,s=this.els[0].length;--r;){if(i=o-r,0===t.els[i][i])for(n=u=d=i+1;o>=d?o>u:u>o;n=o>=d?++u:--u)if(0!==t.els[n][i]){for(e=[],l=s,l+=1;--l;)c=s-l,e.push(t.els[i][c]+t.els[n][c]);t.els[i]=e;break}if(0!==t.els[i][i])for(n=h=m=i+1;o>=m?o>h:h>o;n=o>=m?++h:--h){for(a=t.els[n][i]/t.els[i][i],e=[],l=s,l+=1;--l;)c=s-l,e.push(i>=c?0:t.els[n][c]-t.els[i][c]*a);t.els[n]=e}}return t},t.prototype.augment=function(e){var i,n,o,s,a,r,l,c,u;if(i=e.els||e,"undefined"==typeof i[0][0]&&(i=new t(i).els),n=this.dup(),o=n.els[0].length,c=n.els.length,r=c,l=i[0].length,c!==i.length)return null;for(c+=1;--c;)for(s=r-c,u=l,u+=1;--u;)a=l-u,n.els[s][o+a]=i[s][a];return n},t.prototype.inverse=function(){var e,i,n,o,s,a,r,l,c,u,h,d,m;for(u=this.els.length,r=u,e=this.augment(t.I(u)).toRightTriangular(),l=e.els[0].length,s=[],u+=1;--u;){for(o=u-1,n=[],h=l,s[o]=[],i=e.els[o][o],h+=1;--h;)d=l-h,c=e.els[o][d]/i,n.push(c),d>=r&&s[o].push(c);for(e.els[o]=n,a=m=0;o>=0?o>m:m>o;a=o>=0?++m:--m){for(n=[],h=l,h+=1;--h;)d=l-h,n.push(e.els[a][d]-e.els[o][d]*e.els[a][o]);e.els[a]=n}}return new t(s)},t.I=function(e){var i,n,o,s,a;for(i=[],s=e,e+=1;--e;)for(n=s-e,i[n]=[],a=s,a+=1;--a;)o=s-a,i[n][o]=n===o?1:0;return new t(i)},t.prototype.decompose=function(){var t,i,n,o,s,a,r,l,c,u,d,m,f,p,g,v,y,w,b,_,k,C,S,T,$,x,A,E,D,M,L,F,R,P,O,N,I,H;for(a=this,_=[],y=[],w=[],u=[],l=[],t=[],i=D=0;3>=D;i=++D)for(t[i]=[],o=M=0;3>=M;o=++M)t[i][o]=a.els[i][o];if(0===t[3][3])return!1;for(i=L=0;3>=L;i=++L)for(o=F=0;3>=F;o=++F)t[i][o]/=t[3][3];
for(c=a.dup(),i=R=0;2>=R;i=++R)c.els[i][3]=0;if(c.els[3][3]=1,0!==t[0][3]||0!==t[1][3]||0!==t[2][3]){for(m=new h(t.slice(0,4)[3]),n=c.inverse(),k=n.transpose(),l=k.multiply(m).els,i=P=0;2>=P;i=++P)t[i][3]=0;t[3][3]=1}else l=[0,0,0,1];for(i=O=0;2>=O;i=++O)_[i]=t[3][i],t[3][i]=0;for(p=[],i=N=0;2>=N;i=++N)p[i]=new h(t[i].slice(0,3));if(y[0]=p[0].length(),p[0]=p[0].normalize(),w[0]=p[0].dot(p[1]),p[1]=p[1].combine(p[0],1,-w[0]),y[1]=p[1].length(),p[1]=p[1].normalize(),w[0]/=y[1],w[1]=p[0].dot(p[2]),p[2]=p[2].combine(p[0],1,-w[1]),w[2]=p[1].dot(p[2]),p[2]=p[2].combine(p[1],1,-w[2]),y[2]=p[2].length(),p[2]=p[2].normalize(),w[1]/=y[2],w[2]/=y[2],r=p[1].cross(p[2]),p[0].dot(r)<0)for(i=I=0;2>=I;i=++I)for(y[i]*=-1,o=H=0;2>=H;o=++H)p[i].els[o]*=-1;g=function(t,e){return p[t].els[e]},f=[],f[1]=Math.asin(-g(0,2)),0!==Math.cos(f[1])?(f[0]=Math.atan2(g(1,2),g(2,2)),f[2]=Math.atan2(g(0,1),g(0,0))):(f[0]=Math.atan2(-g(2,0),g(1,1)),f[1]=0),b=g(0,0)+g(1,1)+g(2,2)+1,b>1e-4?(v=.5/Math.sqrt(b),$=.25/v,x=(g(2,1)-g(1,2))*v,A=(g(0,2)-g(2,0))*v,E=(g(1,0)-g(0,1))*v):g(0,0)>g(1,1)&&g(0,0)>g(2,2)?(v=2*Math.sqrt(1+g(0,0)-g(1,1)-g(2,2)),x=.25*v,A=(g(0,1)+g(1,0))/v,E=(g(0,2)+g(2,0))/v,$=(g(2,1)-g(1,2))/v):g(1,1)>g(2,2)?(v=2*Math.sqrt(1+g(1,1)-g(0,0)-g(2,2)),x=(g(0,1)+g(1,0))/v,A=.25*v,E=(g(1,2)+g(2,1))/v,$=(g(0,2)-g(2,0))/v):(v=2*Math.sqrt(1+g(2,2)-g(0,0)-g(1,1)),x=(g(0,2)+g(2,0))/v,A=(g(1,2)+g(2,1))/v,E=.25*v,$=(g(1,0)-g(0,1))/v),u=[x,A,E,$],d=new e,d.translate=_,d.scale=y,d.skew=w,d.quaternion=u,d.perspective=l,d.rotate=f;for(S in d){C=d[S];for(s in C)T=C[s],isNaN(T)&&(C[s]=0)}return d},t.prototype.toString=function(){var t,e,i,n,o;for(i="matrix3d(",t=n=0;3>=n;t=++n)for(e=o=0;3>=o;e=++o)i+=j(this.els[t][e],10),(3!==t||3!==e)&&(i+=",");return i+=")"},t.matrixForTransform=b(function(t){var e,i,n,o,s,a;return e=document.createElement("div"),e.style.position="absolute",e.style.visibility="hidden",e.style[N("transform")]=t,document.body.appendChild(e),n=window.getComputedStyle(e,null),i=null!=(o=null!=(s=n.transform)?s:n[N("transform")])?o:null!=(a=$.tests)?a.matrixForTransform(t):void 0,document.body.removeChild(e),i}),t.fromTransform=function(e){var i,n,o,s,a,r;for(s=null!=e?e.match(/matrix3?d?\(([-0-9,e \.]*)\)/):void 0,s?(i=s[1].split(","),i=i.map(parseFloat),n=6===i.length?[i[0],i[1],0,0,i[2],i[3],0,0,0,0,1,0,i[4],i[5],0,1]:i):n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a=[],o=r=0;3>=r;o=++r)a.push(n.slice(4*o,4*o+4));return new t(a)},t}(),O=b(function(t){var e,i,n,o,s,a,r,l,c,u;if(void 0!==document.body.style[t])return"";for(o=t.split("-"),s="",a=0,l=o.length;l>a;a++)n=o[a],s+=n.substring(0,1).toUpperCase()+n.substring(1);for(u=["Webkit","Moz","ms"],r=0,c=u.length;c>r;r++)if(i=u[r],e=i+s,void 0!==document.body.style[e])return i;return""}),N=b(function(t){var e;return e=O(t),"Moz"===e?""+e+(t.substring(0,1).toUpperCase()+t.substring(1)):""!==e?"-"+e.toLowerCase()+"-"+J(t):J(t)}),H="undefined"!=typeof window&&null!==window?window.requestAnimationFrame:void 0,f=[],p=[],z=!1,B=1,"undefined"!=typeof window&&null!==window&&window.addEventListener("keyup",function(t){return 68===t.keyCode&&t.shiftKey&&t.ctrlKey?$.toggleSlow():void 0}),null==H&&(M=0,H=function(t){var e,i,n;return e=Date.now(),n=Math.max(0,16-(e-M)),i=window.setTimeout(function(){return t(e+n)},n),M=e+n,i}),Y=!1,W=!1,q=function(){return Y?void 0:(Y=!0,H(U))},U=function(t){var e,i,n,o;if(W)return void H(U);for(i=[],n=0,o=f.length;o>n;n++)e=f[n],m(t,e)||i.push(e);return f=f.filter(function(t){return-1===i.indexOf(t)}),0===f.length?Y=!1:H(U)},m=function(t,e){var i,n,o,s,a,r,l,c;if(null==e.tStart&&(e.tStart=t),s=(t-e.tStart)/e.options.duration,a=e.curve(s),n={},s>=1)n=e.curve.returnsToSelf?e.properties.start:e.properties.end;else{c=e.properties.start;for(i in c)o=c[i],n[i]=A(o,e.properties.end[i],a)}return v(e.el,n),"function"==typeof(r=e.options).change&&r.change(e.el,Math.min(1,s)),s>=1&&"function"==typeof(l=e.options).complete&&l.complete(e.el),1>s},A=function(t,e,i){return null!=t&&null!=t.interpolate?t.interpolate(e,i):null},G=function(t,e,i,n){var o,a,u,h,d,m,g,v;if(null!=n&&(p=p.filter(function(t){return t.id!==n})),$.stop(t,{timeout:!1}),!i.animated)return $.css(t,e),void("function"==typeof i.complete&&i.complete(this));e=P(e),m=x(t,Object.keys(e)),o={},g=[];for(h in e)v=e[h],null!=t.style&&tt.contains(h)?g.push([h,v]):(a=C(v),a instanceof s&&null!=t.style&&(a=new r([a,it(h,0)])),o[h]=a);return g.length>0&&(u=D(t),u?(d=new c,d.applyProperties(g)):(v=g.map(function(t){return et(t[0],t[1])}).join(" "),d=l.fromTransform(l.matrixForTransform(v))),o.transform=d.decompose(),u&&m.transform.applyRotateCenter([o.transform.props.rotate[1],o.transform.props.rotate[2]])),f.push({el:t,properties:{start:m,end:o},options:i,curve:i.type.call(i.type,i)}),q()},X=[],Z=0,V=function(t){return E()?t.realTimeoutId=setTimeout(function(){return t.fn(),_(t.id)},t.delay):void 0},d=function(t,e){var i;return Z+=1,i={id:Z,tStart:Date.now(),fn:t,delay:e,originalDelay:e},V(i),X.push(i),Z},_=function(t){return X=X.filter(function(e){return e.id===t&&clearTimeout(e.realTimeoutId),e.id!==t})},L=function(t,e){var i;return null!=t?(i=t-e.tStart,e.originalDelay-i):e.originalDelay},"undefined"!=typeof window&&null!==window&&window.addEventListener("unload",function(){}),K=null,R(function(t){var e,i,n,o,s,a,r,l,c,u;if(W=!t,t){if(Y)for(i=Date.now()-K,s=0,l=f.length;l>s;s++)e=f[s],null!=e.tStart&&(e.tStart+=i);for(a=0,c=X.length;c>a;a++)n=X[a],n.delay=L(K,n),V(n);return K=null}for(K=Date.now(),u=[],o=0,r=X.length;r>o;o++)n=X[o],u.push(clearTimeout(n.realTimeoutId));return u}),$={},$.linear=function(){return function(t){return t}},$.spring=function(t){var e,i,n,o,s,a;return null==t&&(t={}),g(t,$.spring.defaults),o=Math.max(1,t.frequency/20),s=Math.pow(20,t.friction/100),a=t.anticipationSize/1e3,n=Math.max(0,a),e=function(e){var i,n,o,s,r;return i=.8,s=a/(1-a),r=0,o=(s-i*r)/(s-r),n=(i-o)/s,n*e*t.anticipationStrength/100+o},i=function(t){return Math.pow(s/10,-t)*(1-t)},function(t){var n,s,r,l,c,u,h,d;return u=t/(1-a)-a/(1-a),a>t?(d=a/(1-a)-a/(1-a),h=0/(1-a)-a/(1-a),c=Math.acos(1/e(d)),r=(Math.acos(1/e(h))-c)/(o*-a),n=e):(n=i,c=0,r=1),s=n(u),l=o*(t-a)*r+c,1-s*Math.cos(l)}},$.bounce=function(t){var e,i,n,o;return null==t&&(t={}),g(t,$.bounce.defaults),n=Math.max(1,t.frequency/20),o=Math.pow(20,t.friction/100),e=function(t){return Math.pow(o/10,-t)*(1-t)},i=function(t){var i,o,s,a;return a=-1.57,o=1,i=e(t),s=n*t*o+a,i*Math.cos(s)},i.returnsToSelf=!0,i},$.gravity=function(t){var e,i,n,o,s,a,r;return null==t&&(t={}),g(t,$.gravity.defaults),i=Math.min(t.bounciness/1250,.8),o=t.elasticity/1e3,r=100,n=[],e=function(){var n,o;for(n=Math.sqrt(2/r),o={a:-n,b:n,H:1},t.returnsToSelf&&(o.a=0,o.b=2*o.b);o.H>.001;)e=o.b-o.a,o={a:o.b,b:o.b+e*i,H:o.H*i*i};return o.b}(),a=function(i,n,o,s){var a,r;return e=n-i,r=2/e*s-1-2*i/e,a=r*r*o-o+1,t.returnsToSelf&&(a=1-a),a},function(){var s,a,l,c;for(a=Math.sqrt(2/(r*e*e)),l={a:-a,b:a,H:1},t.returnsToSelf&&(l.a=0,l.b=2*l.b),n.push(l),s=e,c=[];l.b<1&&l.H>.001;)s=l.b-l.a,l={a:l.b,b:l.b+s*i,H:l.H*o},c.push(n.push(l));return c}(),s=function(e){var i,o,s;for(o=0,i=n[o];!(e>=i.a&&e<=i.b)&&(o+=1,i=n[o]););return s=i?a(i.a,i.b,i.H,e):t.returnsToSelf?0:1},s.returnsToSelf=t.returnsToSelf,s},$.forceWithGravity=function(t){return null==t&&(t={}),g(t,$.forceWithGravity.defaults),t.returnsToSelf=!0,$.gravity(t)},$.bezier=function(){var t,e,i;return e=function(t,e,i,n,o){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*o},t=function(t,i,n,o,s){return{x:e(t,i.x,n.x,o.x,s.x),y:e(t,i.y,n.y,o.y,s.y)}},i=function(t,e,i){var n,o,s,a,r,l,c,u,h,d;for(n=null,h=0,d=e.length;d>h&&(o=e[h],t>=o(0).x&&t<=o(1).x&&(n=o),null===n);h++);if(!n)return i?0:1;for(u=1e-4,a=0,l=1,r=(l+a)/2,c=n(r).x,s=0;Math.abs(t-c)>u&&100>s;)t>c?a=r:l=r,r=(l+a)/2,c=n(r).x,s+=1;return n(r).y},function(e){var n,o,s;return null==e&&(e={}),s=e.points,n=function(){var e,i,o;n=[],o=function(e,i){var o;return o=function(n){return t(n,e,e.cp[e.cp.length-1],i.cp[0],i)},n.push(o)};for(e in s){if(i=parseInt(e),i>=s.length-1)break;o(s[i],s[i+1])}return n}(),o=function(t){return 0===t?0:1===t?1:i(t,n,this.returnsToSelf)},o.returnsToSelf=0===s[s.length-1].y,o}}(),$.easeInOut=function(t){var e,i;return null==t&&(t={}),e=null!=(i=t.friction)?i:$.easeInOut.defaults.friction,$.bezier({points:[{x:0,y:0,cp:[{x:.92-e/1e3,y:0}]},{x:1,y:1,cp:[{x:.08+e/1e3,y:1}]}]})},$.easeIn=function(t){var e,i;return null==t&&(t={}),e=null!=(i=t.friction)?i:$.easeIn.defaults.friction,$.bezier({points:[{x:0,y:0,cp:[{x:.92-e/1e3,y:0}]},{x:1,y:1,cp:[{x:1,y:1}]}]})},$.easeOut=function(t){var e,i;return null==t&&(t={}),e=null!=(i=t.friction)?i:$.easeOut.defaults.friction,$.bezier({points:[{x:0,y:0,cp:[{x:0,y:0}]},{x:1,y:1,cp:[{x:.08+e/1e3,y:1}]}]})},$.spring.defaults={frequency:300,friction:200,anticipationSize:0,anticipationStrength:0},$.bounce.defaults={frequency:300,friction:200},$.forceWithGravity.defaults=$.gravity.defaults={bounciness:400,elasticity:200},$.easeInOut.defaults=$.easeIn.defaults=$.easeOut.defaults={friction:500},$.css=F(function(t,e){return y(t,e,!0)}),$.animate=F(function(t,e,i){var n;return null==i&&(i={}),i=k(i),g(i,{type:$.easeInOut,duration:1e3,delay:0,animated:!0}),i.duration=Math.max(0,i.duration*B),i.delay=Math.max(0,i.delay),0===i.delay?G(t,e,i):(n=$.setTimeout(function(){return G(t,e,i,n)},i.delay),p.push({id:n,el:t}))}),$.stop=F(function(t,e){return null==e&&(e={}),null==e.timeout&&(e.timeout=!0),e.timeout&&(p=p.filter(function(i){return i.el!==t||null!=e.filter&&!e.filter(i)||($.clearTimeout(i.id),!1)})),f=f.filter(function(e){return e.el!==t})}),$.setTimeout=function(t,e){return d(t,e*B)},$.clearTimeout=function(t){return _(t)},$.toggleSlow=function(){return z=!z,B=z?3:1,"undefined"!=typeof console&&null!==console&&"function"==typeof console.log,void 0},"object"==typeof module&&"object"==typeof module.exports?module.exports=$:"function"==typeof define?define("dynamics",function(){return $}):window.dynamics=$}.call(this),jQuery&&jQuery.noConflict(),function(t){var e=window.imkt||(window.imkt={});e.core={init:function(e){var i=this;this.featureDetect(),t("script[type='text/x-component']",e).each(function(e,n){var o=t.parseJSON(t.trim(n.innerHTML)),s=n.parentNode;i.componentInit.call(i,s,o)}),t("script[type='text/x-component-translate']",e).each(function(e,n){var o=t.trim(n.innerHTML).replace("/* <sl:translate_json> */","").replace("/* </sl:translate_json> */",""),s=t.parseJSON(o),a=n.parentNode;i.componentInit.call(i,a,s)}),t(document).trigger("appInitialized"),this.appInitialized=!0},onInitialized:function(e){this.appInitialized?e():t(document).on("appInitialized",e)},featureDetect:function(){var e=[];this.supports.svg()||e.push("no-svg"),this.supports.backgroundSize()||e.push("no-backgroundsize"),this.supports.flexBox()||e.push("no-flexbox"),t("body").addClass(e.join(" "))},extend:function(t,e,i){var n,o=function(){};o.prototype=t.prototype,e.prototype=new o;for(n in i)e.prototype[n]=i[n];e.prototype.constructor=t},resolve:function(t,e){var i=window;if(!t)return null;if("function"==typeof t)return t;var n,o,s,a=i,r=t.split(".");for(o=0,s=r.length;o<s;o++){if(n=r[o],i=i[n],!i){if(!e)return null;i=a[n]={}}a=i}return i},componentInit:function(e,i){var n=this.resolve(i.type);if(n)return new n(e,t.extend({},i.params,t(e).data()))},supports:{flexBox:function(){return"flexWrap"in document.documentElement.style||"webkitFlexWrap"in document.documentElement.style},history:function(){return window.history&&window.history.pushState},svg:function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")},backgroundSize:function(){return"backgroundSize"in document.documentElement.style},touch:function(){return"ontouchstart"in window},placeholder:function(){var t=document.createElement("input");return"placeholder"in t},localStorage:function(){try{return window.localStorage.setItem("hasStorage","1"),window.localStorage&&window.localStorage.setItem&&window.localStorage.removeItem}catch(t){return!1}},transitions:function(){var t=document.body||document.documentElement,e=t.style,i="transition";if("string"==typeof e[i])return!0;var n=["Moz","webkit","Webkit","Khtml","O","ms"];i=i.charAt(0).toUpperCase()+i.substr(1);for(var o=0;o<n.length;o++)if("string"==typeof e[n[o]+i])return!0;return!1}},is:{mobile:function(){return e.core.supports.touch()&&screen.width&&screen.width<768}}},t(document).ready(function(){t("body").hasClass("edit")||e.core.init(document.body)})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.core=e.core||{},e.core.Page=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.init()},e.core.Page.prototype={init:function(){new e.common.Form(t("header .search-form",this.$domRoot).parent(),{});this.bindTriggers(),this.initStickyElements(),this.startAutoDownload(),this.initSvgElements()},bindEvents:function(){},bindTriggers:function(){var e=this;document.onreadystatechange=function(){"complete"===document.readyState&&t(document).trigger("font-face-applied")},t(document).on("font-face-applied",function(){e.initEqualHeights()})},initStickyElements:function(){t(".imkt-sticky",this.$domRoot).each(function(t,i){e.core.componentInit(i,{type:e.common.StickyElement})})},initSvgElements:function(){e.core.componentInit(t("body"),{type:e.utils.svg})},startAutoDownload:function(){t("#auto-download[href]",this.domRoot).eq(0).each(function(e,i){var n,o=t(i),s=o.attr("href");s&&(n=parseFloat(o.attr("data-delay")),n=isNaN(n)?2e3:1e3*n,setTimeout(function(){window.location.href=s},n))})},initEqualHeights:function(){return"function"==typeof t("body").matchHeight&&!t("body").hasClass("edit")&&void t(".imkt-equalheights-parent").each(function(){var e=this,i=0;t(e).hasClass("imkt-equalheights--by-row")&&(i=1),t(e).find(".imkt-equalheights-child").matchHeight({byRow:i})})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.pages=e.pages||{},e.pages.WACPage=function(t,i){e.core.Page.apply(this,arguments)},e.core.extend(e.core.Page,e.pages.WACPage,{bindEvents:function(){t(".language-selector > a",this.$domRoot).on("click",function(t){t.preventDefault()})}})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.pages=e.pages||{},e.pages.HipChatPage=function(t,i){e.core.Page.apply(this,arguments)},e.core.extend(e.core.Page,e.pages.HipChatPage,{init:function(){this.$header=t("header",this.$domRoot),this.initSlidingNav(),this.bindEvents(),e.core.Page.prototype.init.apply(this,arguments)},bindEvents:function(){e.core.Page.prototype.bindEvents.apply(this,arguments)},collapsed:!0,initSlidingNav:function(){this.$menuToggle=t(".menu-toggle",this.$header),this.$menuSubNavToggle=t(".subnavigation--parent",this.$header),this.$nav=t("nav.nav--main",this.$header),this.$navInner=t(".nav-inner",this.$nav),this.$slidingSubNav=t("nav.nav--sliding-subnav",this.$header),this.$menuToggle.on("click",t.proxy(this.onclick_menuToggle,this)),this.$menuSubNavToggle.on("click",t.proxy(this.onclick_menuSubNavToggle,this)),t(window).onThrottled("resize.slidingNav orientantionchange.slidingNav",t.proxy(function(i){!this.collapsed&&t(window).width()>e.constants.mobileBreakpoint&&this.toggleMenu()},this))},onclick_menuToggle:function(t){t.preventDefault(),this.toggleMenu()},onclick_menuSubNavToggle:function(t){t.preventDefault(),this.toggleSubNavMenu()},toggleMenu:function(){var t="aui-iconfont-appswitcher",e="aui-iconfont-close-dialog";this.$header.toggleClass("nav-open"),this.$menuToggle.addClass(this.collapsed?e:t).removeClass(this.collapsed?t:e),this.$nav.css({minHeight:this.collapsed?this.$navInner.outerHeight():""}),this.collapsed=!this.collapsed},toggleSubNavMenu:function(){var t="aui-iconfont-collapsed",e="aui-iconfont-expanded";this.$menuSubNavToggle.toggleClass("nav-open"),this.$menuSubNavToggle.find("span.aui-icon").addClass(this.collapsed?e:t).removeClass(this.collapsed?t:e),this.$header.toggleClass("sliding-subnav--open"),this.collapsed=!this.collapsed}})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.pages=e.pages||{},e.pages.BitbucketPage=function(t,i){e.core.Page.apply(this,arguments)},e.core.extend(e.core.Page,e.pages.BitbucketPage,{init:function(){this.$header=t(".header__branded-domains",this.$domRoot),this.$menuToggle=t(".menu-toggle",this.$header),this.$mobileLinks=t(".header__branded-domains__nav-links--mobile",this.$header),this.stuckClass="stuck",this.mobileNavHeight=0,this.buildWrapper(),this.sizeWrapper(),this.initSticky(),this.initSlidingNav(),this.bindEvents(),e.core.Page.prototype.init.apply(this,arguments)},bindEvents:function(){var i=this;e.core.Page.prototype.bindEvents.apply(this,arguments),t("main").one("click",function(){i.collapsed||i.toggleMenu()}),t(document).keyup(function(t){27===t.which&&(i.collapsed||i.toggleMenu())})},collapsed:!0,buildWrapper:function(){this.$wrapper||(this.$wrapper=this.$header.wrap("<div>").parent())},sizeWrapper:function(){this.$wrapper&&this.$wrapper.css({height:this.$header.outerHeight()})},initSticky:function(){var e=this;t.fn.waypoint&&(this.waypoint=this.$wrapper.waypoint({offset:function(){return-e.$header.outerHeight()},handler:function(t){e.scrollPast.call(e,this,t)}}))},scrollPast:function(t,e){var i=this,n={},o="down"===e;o?n.top=-i.$header.outerHeight():n.top="",n.width="function"==typeof this.params.width?this.params.width():this.params.width,this.$header.css(n).toggleClass(this.stuckClass,o).trigger("scrollPast",[o,e,t])},initSlidingNav:function(){this.$menuToggle.on("click",t.proxy(this.onclick_menuToggle,this)),this.mobileNavHeight=this.$mobileLinks.outerHeight(),this.$mobileLinks.css({maxHeight:0,position:"static"})},onclick_menuToggle:function(t){t.preventDefault(),this.toggleMenu()},toggleMenu:function(){var t=this,e="aui-iconfont-appswitcher",i="aui-iconfont-close-dialog";this.$header.toggleClass("nav-open"),this.$menuToggle.addClass(this.collapsed?i:e).removeClass(this.collapsed?e:i),this.$mobileLinks.css({maxHeight:this.collapsed?t.mobileNavHeight:0}),this.collapsed=!this.collapsed}})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.pages=e.pages||{},e.pages.SourceTreePage=function(t,i){e.core.Page.apply(this,arguments)},e.core.extend(e.core.Page,e.pages.SourceTreePage,{})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.Form=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.postSubmitClass=".imkt-form--post-submit",this.init()},e.common.Form.prototype={init:function(){this.$form=t("form",this.$domRoot),this.$form.length&&(this.$fields=t("input:input, textarea:input",this.$form),this.$postSubmit=t(this.postSubmitClass,this.$domRoot),this.populateFields(),this.initValidation(),this.bindEvents())},bindEvents:function(){this.$fields.on("keypress",t.proxy(function(t){13===t.which&&this.$form.submit()},this)),this.$form.on("submit",t.proxy(this.onsubmit_form,this)),this.initPlaceholders(),this.initTooltips()},populateFields:function(){this.prepopulateTimezone()},prepopulateTimezone:function(){var i,n=t("[name=timezone]",this.$form);n.length&&(i=function(){window.jstz&&window.jstz.hasOwnProperty("determine")&&n.val(window.jstz.determine().name())},"undefined"==typeof window.jstz?t.getScript(e.constants.libPath+"jstzdetect/jstz.min.js"+e.constants.cdnVersionQuery,i):i())},validationOptions:{},initValidation:function(){t.validator.addMethod("fullName",function(t,e){return t.match(/^\s*\S+\s+\S+.*$/)},"Please enter a first and last name."),this.validator=this.$form.validate(t.extend(!0,{errorElement:"div",errorPlacement:function(e,i){var n=t(i),o=n.siblings(".field-suffix"),s=n.siblings(".description");o.length&&(n=o),s.length&&(n=s),n.after(e)}},this.validationOptions))},onsubmit_form:function(t,e){e||t.preventDefault(),this.$form.valid()&&(this.params.useAjax?this.ajaxSubmit():e||this.$form.trigger("beforeSubmit").trigger("submit",[!0]))},ajaxSubmit:function(){this.$form.trigger("beforeSubmit"),t.ajax({url:this.getAjaxUrl(),data:this.getAjaxData(),contentType:this.getAjaxContentType(),type:this.$form.attr("method")||"GET",beforeSend:t.proxy(this.ajaxBeforeSend,this),success:t.proxy(this.ajaxSuccess,this),error:t.proxy(this.ajaxError,this),complete:t.proxy(this.ajaxComplete,this)})},initPlaceholders:function(){if(!e.core.supports.placeholder()){var i=t("[placeholder]",this.$form),n=function(e){e.val(function(e,i){return t(this).attr("placeholder")}).addClass("placeholder")},o=function(t){t.val("").removeClass("placeholder")};n(i),i.on("focusin",function(e){var i=t(e.currentTarget);i.val()===i.attr("placeholder")&&i.hasClass("placeholder")&&o(i)}).on("focusout",function(e){var i=t(e.currentTarget);i.val()||n(i)})}},getAjaxContentType:function(){return"application/json"},getAjaxUrl:function(){return this.$form.attr("action")},getAjaxData:function(){return this.$form.serialize()},ajaxBeforeSend:function(t,e){this.$form.addClass("loading")},ajaxSuccess:function(t,e,i){},ajaxError:function(t,e,i){},ajaxComplete:function(t,e){this.$form.removeClass("loading");var i=this.$postSubmit.html().trim();i&&(this.$form.hide(),this.$postSubmit.removeClass("display-none"))},initTooltips:function(){this.$form.find(".imkt__form--tooltip").each(function(){var e=t(this),i=e.offset().left;i<=220&&e.next(".imkt__form--tooltip-description").addClass("force-left")}),this.$form.find(".imkt__form--tooltip").on("click",function(e){t(this).toggleClass("active")}).on("mouseover",function(e){t(this).addClass("active")}).on("mouseout",function(e){t(this).removeClass("active")})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.ExactTargetForm=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.$form=t(".exact-target-form__form-element",this.$domRoot),this.$formEmailField=t(".exact-target-form__email-field-wrapper input",this.$form),this.$hpField=t(".exact-target-form__hp-field-wrapper input",this.$form),this.$successMessage=t(".success-message",this.$domRoot),this.mailingListId=this.params.mailingListId||this.$form.data("mailing-list-id"),this.externalLink=this.params.externalLink||this.$form.data("external-link")||0,this.init()},e.common.ExactTargetForm.prototype={init:function(){this.bindFormValidation(),this.$successMessage.css("min-height",this.$form.outerHeight())},bindFormValidation:function(){var t=this;this.$form.validate({rules:{email:{required:!0,email:!0}},messages:{email:"Please enter a valid email address"},submitHandler:function(){t.$hpField.val()||t.submitForm()},invalidHandler:function(){}})},submitForm:function(){var e=this,i=this.$formEmailField.val(),n="https://www.atlassian.com/apis/exact-target/"+i+"/subscribe?mailingListId="+this.mailingListId;t.ajax({url:n,method:"POST",complete:function(){e.externalLink.length?e.redirectToNewPage():e.showSuccessMessage()}})},showSuccessMessage:function(){this.$form.hide(),this.$successMessage.removeClass("display-none"),this.$form.remove(),"undefined"!=typeof dataLayer&&dataLayer.push({event:"emailSubmissionSuccess"})},redirectToNewPage:function(){window.location.href=this.externalLink}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.HipChatForm=function(t,i){e.common.Form.apply(this,arguments)},e.core.extend(e.common.Form,e.common.HipChatForm,{populateFields:function(){this.populateXSRFTokenField(),e.common.Form.prototype.populateFields.apply(this,arguments)},populateXSRFTokenField:function(){var e=t("[name=xsrf_token]",this.$form);e.length||(e=t("<input>").attr({type:"hidden",name:"xsrf_token"}).appendTo(this.$form)),t.ajax({url:"/xsrf_token",method:"POST",success:function(t,i,n){t.token&&e.val(t.token)}})}})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.NewsletterForm=function(t,i){e.common.Form.apply(this,arguments)},e.core.extend(e.common.Form,e.common.NewsletterForm,{getAjaxUrl:function(){var i=this.$form.attr("action").replace("{{emailAddress}}",t("[name=emailAddress]",this.$form).val());return e.utils.url.addUrlParams({mailingListId:t("[name=mailingListId]",this.$form).val()||234098},i)},ajaxBeforeSend:function(t,i){this.$domRoot.find(".message").remove(),e.common.Form.prototype.ajaxBeforeSend.call(this,arguments)},ajaxError:function(t,e,i){this.$form.before("<div class='message error'>There was a problem subscribing to the newsletter &ndash; please try again later</div>")},ajaxSuccess:function(t,e,i){window.location="https://www.atlassian.com/newsletter/subscribe-confirmation/"}})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.HipChatSignupForm=function(t,i){e.common.HipChatForm.apply(this,arguments)},e.core.extend(e.common.HipChatForm,e.common.HipChatSignupForm,{subdomainAvailable:!0,emailAvailable:!0,validationOptions:{rules:{subdomain:"subdomainAvailable",email:"emailAvailable",name:"fullName"}},bindEvents:function(){this.$emailField=this.$fields.filter("[name=email]"),this.$subdomainField=this.$fields.filter("[name=subdomain]"),this.emailChangeEvent="input.emailSubdomainMatch",this.$emailField.on(this.emailChangeEvent,t.proxy(this.emailSubdomainMatch,this)).onThrottled("input",t.proxy(this.onchange_emailField,this),1e3),this.$subdomainField.onThrottled("input",t.proxy(this.onchange_subdomainField,this),1e3),this.$form.on("beforeSubmit",t.proxy(this.onbeforeSubmit_form,this)),e.common.HipChatForm.prototype.bindEvents.apply(this,arguments)},initValidation:function(){t.validator.addMethod("subdomainAvailable",t.proxy(function(t,e){return this.subdomainAvailable},this),"This Team Name is already in use. If your team is already using HipChat, please ask the group admin for an invite."),t.validator.addMethod("emailAvailable",t.proxy(function(t,e){return this.emailAvailable},this),"An account has already been created using that email address."),e.common.HipChatForm.prototype.initValidation.call(this,arguments)},onbeforeSubmit_form:function(){var e=t("[name=name]",this.$form),i=t("[name=first-name]",this.$form).val(),n=t("[name=last-name]",this.$form).val(),o=[];i&&o.push(i),n&&o.push(n),e.length||(e=t("<input>").attr({type:"hidden",name:"name"}).appendTo(this.$form)),o.length&&e.val(o.join(" "))},emailSubdomainMatch:function(e){var i=t(e.currentTarget),n=i.val(),o=n.indexOf("@"),s=n.indexOf(".",o),a=n.substring(o+1,s>-1?s:n.length);this.$subdomainField.val();i.data("emailHost",a),o>-1&&this.$subdomainField.val()!==a&&this.$subdomainField.val(a).trigger("input")},onchange_emailField:function(e){var i=t(e.currentTarget);t.ajax({url:"/api/validate_email",data:{email:i.val()},success:t.proxy(function(e,i,n){this.emailAvailable=e&&!e.error,e&&e.error&&(t.validator.messages.emailAvailable=e.error)},this),error:t.proxy(function(t,e,i){this.emailAvailable=!0},this),complete:t.proxy(function(t,e){i.valid()},this)})},onchange_subdomainField:function(e){var i=t(e.currentTarget);this.$emailField.data("emailHost")!==i.val()&&this.$emailField.off(this.emailChangeEvent),t.ajax({url:"/api/validate_subdomain",data:{subdomain:i.val()},success:t.proxy(function(e,i,n){this.subdomainAvailable=e&&!e.error,e&&e.error&&(t.validator.messages.subdomainAvailable=e.error)},this),error:t.proxy(function(t,e,i){this.subdomainAvailable=!0},this),complete:t.proxy(function(t,e){i.valid()},this)})}})}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.LanguageSelector=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.init()},e.common.LanguageSelector.prototype={init:function(){this.$domRoot.find("select").find("option:not(':disabled')").each(function(i,n){var o=t(n),s=o.attr("value");if(e.utils.url.getHostname(s)===e.utils.url.getHostname())return o.attr("selected","selected").prop("selected","selected").siblings().removeAttr("selected").removeProp("selected"),!1}).end().on("change",function(e){window.location=t(e.currentTarget).val()})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.StickyElement=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{anchor:"top",width:"100%",offset:0,isStickyAside:!1},i),this.disableSticky=!1,this.params.isStickyAside&&(this.params.offset=this.getAsideOffset()),this.init()},e.common.StickyElement.prototype={stuckClass:"stuck",init:function(){var e=this;this.buildWrapper(),this.sizeWrapper(),this.params.isStickyAside&&this.checkWindowHeight(),t.fn.waypoint&&(this.waypoint=this.$wrapper.waypoint({offset:function(){var i=e.params.offset;return"bottom"===e.params.anchor?i=t(window).height()-e.$domRoot.outerHeight()-e.params.offset:0===e.$wrapper.offset().top&&(i=-1),i},handler:function(t){e.scrollPast.call(e,this,t)}}),this.$domRoot.data("instance",this)),t(window).onThrottled("resize",function(){e.sizeWrapper.bind(this),e.params.isStickyAside&&e.checkWindowHeight()}),this.$domRoot.on("click",".imkt-accordion--heading",function(){e.params.isStickyAside&&e.checkWindowHeight(200)})},scrollPast:function(t,e){var i={},n=!this.disableSticky&&("top"===this.params.anchor&&"down"===e||"bottom"===this.params.anchor&&"up"===e);n?"top"===this.params.anchor?i.top=this.params.offset:"bottom"===this.params.anchor&&(i.bottom=this.params.offset):(i.top="",i.bottom=""),i.width="function"==typeof this.params.width?this.params.width():this.params.width,this.$domRoot.css(i).toggleClass(this.stuckClass,n).trigger("scrollPast",[n,e,t])},buildWrapper:function(){var t="imkt-sticky-wrapper";this.$domRoot.hasClass("show-on-stuck")&&(t+=" inline"),this.$domRoot.hasClass("left")&&(t+=" left"),this.$domRoot.hasClass("right")&&(t+=" right"),this.params.isStickyAside&&(t+=" imkt-sticky-wrapper--aside"),this.$wrapper||(this.$wrapper=this.$domRoot.wrap("<div class='"+t+"'>").parent())},sizeWrapper:function(){this.$wrapper&&this.$wrapper.css({height:this.$domRoot.outerHeight()})},getAsideOffset:function(){var e=0,i=t(".imkt-sticky");return i.length&&(e+=i.height()),e},checkWindowHeight:function(e){this.disableSticky=!1;var i=t(window).height(),n=t("footer").outerHeight(),o=i-n-this.params.offset,s=this.$domRoot.outerHeight(),a=this;e=e||0,setTimeout(function(){s=a.$domRoot.outerHeight(),s>=o&&(a.disableSticky=!0,a.$domRoot.removeClass(a.stuckClass))},e)}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.TweetQuote=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.tweetButton={tag:"a",className:"tweet-link",href:"https://twitter.com/intent/tweet",text:"Tweet this"},this.defaultViaTag="Atlassian",this.init()},e.common.TweetQuote.prototype={init:function(){var e=this;t("h3.tweet-quote").each(function(i){var n=t(this);n.hasClass("tweet-quote-processed")||e.addTweetButton(n)})},addTweetButton:function(t){t.append(this.buildTweetButton(t)),t.addClass("tweet-quote-processed")},buildTweetButton:function(e){var i=document.createElement(this.tweetButton.tag);return i.className=this.tweetButton.className,i.href=this.getTweetUrl(e),i.text=this.tweetButton.text,t(i).on("click",function(t){t.preventDefault(),window.open(this.href,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600")}),i},getTweetUrl:function(t){var e=this.tweetButton.href,i=t.attr("class"),n=this.getHashTags(i),o=this.getViaTags(i);return e=e+"?text="+encodeURIComponent('"'+t.text()+'"')+"&hashtags="+n+"&url="+(this.shortUrl?encodeURIComponent(this.shortUrl):encodeURIComponent(window.location.href))+"&via="+o},getHashTags:function(t){var e=t.match(/#\S+/g),i=e?e.join().replace(/#/g,""):[];return i},getViaTags:function(t){var e=t.match(/@\S+/),i=e?e[0].replace(/@/g,""):this.defaultViaTag;return i}};new e.common.TweetQuote}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.WACHeader=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.$topNav=t("#topnav"),this.$listContainer=t("ul",this.$topNav),this.$topnavLis=t("> li",this.$listContainer),this.$topnavLinks=this.$topnavLis.children("a"),this.$topNavToggle=t(".topnav-toggle",this.$topnavLis),this.$menuToggle=t(".menu-toggle",this.$domRoot),this.$docElement=t("html"),
this.$body=t("body"),this.$atlassianLogo=t(".logo.atlassian-logo-and-text",this.$domRoot),this.$dropdown=t("section.header-dropdown",this.$domRoot),this.$desktopSearchIcon=t(".search-icon--desktop"),this.$searchForm=t(".search-form",this.$domRoot),this.$searchInput=t("#search-input",this.searchForm),this.$searchSubmit=t(".search-submit-desktop"),this.$navClickable=!0,this.$overlay,this.$overlayClose=t(".overlay--nav-close"),this.$mobileBreakpoint=800,this.init()},e.common.WACHeader.prototype={constants:{TOPNAV_SELECTED_CLASS:"selected",TOPNAV_HREF_TOGGLE_CLASS:"topnav-toggle",TOPNAV_HREF_LINK_CLASS:"topnav-link",SUBNAV_ACTIVE_CLASS:"active",SUBNAV_IN_CLASS:"in",SUBNAV_OUT_CLASS:"out",SUBNAV_BEFORE_CLASS:"backward",SUBNAV_AFTER_CLASS:"forward",HEADER_OPEN_CLASS:"nav-open",DETAIL_VIEW_HEADER_CLASS:"detail-view-header",DETAIL_VIEW_HEADER_BACK_CLASS:"master-view-back-link",ACTIVE_CLASS:"active",OPEN_CLASS:"open",HIDDEN_CLASS:"hidden",MODAL_OPEN_CLASS:"modal-nav-open",SEARCH_OPEN_CLASS:"search-open",GLOBAL_NAV_ACTIVATED_CLASS:"global-nav-activated",DESKTOP_HEADER_HEIGHT:95,MOBILE_HEADER_HEIGHT:62,DESKTOP_WIDTH:960,ANIMATION_SPEED:200},isMobileLayout:function(){return t(window).width()<=this.$mobileBreakpoint},isDesktopLayout:function(){return t(window).width()<=this.constants.DESKTOP_WIDTH},isMenuOpen:function(){return this.$docElement.hasClass(this.constants.GLOBAL_NAV_ACTIVATED_CLASS)},setChannelState:function(){this.isCurrentlyMobile=this.isMobileLayout(),this.isDesktopMobile=this.isDesktopLayout(),this.originalHeaderHeight=this.isCurrentlyMobile?this.constants.MOBILE_HEADER_HEIGHT:this.constants.DESKTOP_HEADER_HEIGHT,this.setDropdownWidth(),this.setHeaderHeight(0)},init:function(){this.setChannelState(),this.isMobileLayout()&&this.wrapMobileNav(),this.createOverlay(),this.bindEvents()},bindEvents:function(){var e=this;this.$topnavLinks.on("click",this.onclick_topnavLink.bind(this)),t(window).onThrottled("resize.topNav",function(t){this.isCurrentlyMobile!==this.isMobileLayout()&&(this.setChannelState(),this.action_deactivateTopnavLink(),this.action_closeMobileNav(),this.clearHeaderSetHeight()),this.$activeSubnav&&this.setHeaderHeight(this.$activeSubnav.outerHeight()),this.isMobileLayout()?(this.defineSubNavHeight(this.$topnavLis),this.setDropdownWidth(),this.setHeaderHeight(0),this.wrapMobileNav()):(this.$topnavLis.find("section").css({height:"auto"}),this.unWrapMobileNav())}.bind(this)),t(document).keyup(function(t){27==t.keyCode&&e.$navClickable&&(e.action_deactivateTopnavLink(),e.action_closeMobileNav(),e.closeSearch())}),this.$overlayClose.on("click",function(){e.action_deactivateTopnavLink()}),this.$searchForm.on("click",function(t){e.isDesktopLayout()&&(t.stopPropagation(),e.isMenuOpen()?(e.action_deactivateTopnavLink(),setTimeout(function(){e.openSearch()},e.constants.ANIMATION_SPEED+50)):e.openSearch())}),this.$desktopSearchIcon.on("click",function(t){t.stopPropagation(),e.openSearch()}),this.$desktopSearchIcon.parents("li").on("keypress",function(t){13==t.which&&(t.stopPropagation(),e.openSearch())}),this.$desktopSearchIcon.parents("li").attr("tabindex",0),this.$overlayClose.on("click",function(){e.closeSearch()}),this.$overlayClose.on("keypress",function(t){13==t.which&&e.closeSearch()}),this.$domRoot.on("click","."+this.constants.DETAIL_VIEW_HEADER_CLASS,function(t){t.stopPropagation()}),this.$topnavLis.on("click",function(t){t.stopPropagation()}),this.$topNavToggle.on("click",function(t){t.preventDefault(),t.stopPropagation()}),this.$searchForm.on("click",function(t){t.preventDefault(),t.stopPropagation()}),this.$searchSubmit.on("click",function(t){e.$searchForm.submit()}),this.$domRoot.on("click","."+this.constants.DETAIL_VIEW_HEADER_BACK_CLASS,function(t){t.stopPropagation(),e.resetMobileNav()}),t(document).on("navChange",function(t,e){window.Waypoint&&window.Waypoint.refreshAll()}.bind(this)),t(document).on("click",function(){this.action_deactivateTopnavLink(),this.action_closeMobileNav(),this.closeSearch()}.bind(this)),this.$menuToggle.on("click",function(t){t.preventDefault(),t.stopPropagation(),this.closeSearch(),this.resetTopNav(),this.action_toggleMobileNav()}.bind(this))},resetTopNav:function(){this.$topnavLis.find("section").removeClass("out forward backward")},onclick_topnavLink:function(e){this.isMobileLayout()||e.currentTarget.className!==this.constants.TOPNAV_HREF_TOGGLE_CLASS?this.isMobileLayout()&&e.currentTarget.className===this.constants.TOPNAV_HREF_TOGGLE_CLASS&&(this.toggleTopNav(),this.toggleSubNavSection(t(e.currentTarget).parent("li"),t(e.currentTarget))):(e.preventDefault(),e.stopPropagation(),this.action_toggleTopnavLink(e.currentTarget))},openSearch:function(){this.action_closeMobileNav(),this.action_deactivateTopnavLink(),this.clearHeaderSetHeight(),this.$docElement.addClass(this.constants.SEARCH_OPEN_CLASS),this.$searchForm.addClass(this.constants.ACTIVE_CLASS),this.$searchInput.focus(),this.addOverlay()},closeSearch:function(){this.$searchForm.removeClass(this.constants.ACTIVE_CLASS),this.$docElement.removeClass(this.constants.SEARCH_OPEN_CLASS),this.$searchInput.blur(),this.removeOverlay()},createOverlay:function(){0===t(".overlay--nav").length&&(t("body").append('<div class="overlay overlay--nav in hidden"></div>'),this.$overlay=t(".overlay--nav")),0===t(".overlay--nav-close",this.$domRoot).length&&(this.$domRoot.prepend('<div class="overlay--nav-close">Close</div>'),this.$overlayClose=t(".overlay--nav-close"))},addOverlay:function(){this.$overlay.removeClass(this.constants.HIDDEN_CLASS),this.$body.addClass(this.constants.MODAL_OPEN_CLASS)},removeOverlay:function(){this.$overlay.addClass(this.constants.HIDDEN_CLASS),this.$body.removeClass(this.constants.MODAL_OPEN_CLASS)},clearHeaderSetHeight:function(){var t=this.isMobileLayout()?this.constants.MOBILE_HEADER_HEIGHT:this.constants.DESKTOP_HEADER_HEIGHT;this.$domRoot.removeAttr("style"),this.$domRoot.css({height:t})},wrapMobileNav:function(){this.$listContainer.parent().is(".nav-wrapper")||(this.$listContainer.wrap('<div class="nav-wrapper"></div>'),this.$mobileNavWrap=t(".nav-wrapper")),this.$listContainer.height()+this.constants.MOBILE_HEADER_HEIGHT>t(window).height()?this.$mobileNavWrap.css({height:t(window).height()-this.constants.MOBILE_HEADER_HEIGHT}):this.$mobileNavWrap.css({height:t(window).height()})},unWrapMobileNav:function(){this.$listContainer.parent().is(".nav-wrapper")&&this.$listContainer.unwrap()},hideLogo:function(){this.$atlassianLogo.addClass(this.constants.HIDDEN_CLASS)},showLogo:function(){this.$atlassianLogo.removeClass(this.constants.HIDDEN_CLASS)},addMenuItemToTopNav:function(e){var i=this;t("> .grid",this.$domRoot).prepend('<div class="left '+this.constants.DETAIL_VIEW_HEADER_CLASS+'"><span class="'+this.constants.DETAIL_VIEW_HEADER_BACK_CLASS+'"></span>'+e+"</div>"),setTimeout(function(){t("."+i.constants.DETAIL_VIEW_HEADER_CLASS).removeClass("left")},25)},removeMenuItemToTopNav:function(){var e=t("."+this.constants.DETAIL_VIEW_HEADER_CLASS,this.$domRoot);e.find("."+this.constants.DETAIL_VIEW_HEADER_BACK_CLASS).remove(),e.addClass("left"),setTimeout(function(){e.remove()},300),this.showLogo()},toggleSubNavSection:function(t,e){this.$mobileNavWrap.animate({scrollTop:0},0),this.defineSubNavHeight(t),t.hasClass(this.constants.TOPNAV_SELECTED_CLASS)?(t.removeClass(this.constants.TOPNAV_SELECTED_CLASS),this.removeMenuItemToTopNav()):(t.addClass(this.constants.TOPNAV_SELECTED_CLASS),this.addMenuItemToTopNav(e.text()))},defineSubNavHeight:function(e){var i=e.find("section");this.isMobileLayout()?i.css({height:t(window).height()}):i.css({height:"auto"})},setDropdownWidth:function(){this.isMobileLayout()?this.$dropdown.width(t(window).width()):this.$dropdown.css({width:"auto"})},toggleTopNav:function(){this.$topNav.hasClass(this.constants.OPEN_CLASS)?(this.$topNav.removeClass(this.constants.OPEN_CLASS),this.showLogo()):(this.$topNav.addClass(this.constants.OPEN_CLASS),this.hideLogo())},setHeaderOverflow:function(e){var i=this;this.isMobileLayout()||setTimeout(function(){e>t(window).height()?i.$domRoot.css({height:"100%","overflow-y":"auto"}):i.$domRoot.css({height:e})},this.constants.ANIMATION_SPEED)},resetMobileNav:function(){this.removeMenuItemToTopNav(),this.$topnavLis.removeClass(this.constants.TOPNAV_SELECTED_CLASS),this.$topNav.removeClass(this.constants.OPEN_CLASS)},getSubnavIndex:function(t){return this.$topnavLis.index(t.closest("li"))},openSubnav:function(t){var e,i,n=null;t&&t.length&&(e=[this.constants.SUBNAV_ACTIVE_CLASS,this.constants.SUBNAV_IN_CLASS],i=[this.constants.SUBNAV_OUT_CLASS,this.constants.SUBNAV_AFTER_CLASS,this.constants.SUBNAV_BEFORE_CLASS],this.$activeSubnav&&this.$activeSubnav.length&&(n=this.getSubnavIndex(t)>this.getSubnavIndex(this.$activeSubnav),this.closeSubnav(this.$activeSubnav,n?this.constants.SUBNAV_BEFORE_CLASS:this.constants.SUBNAV_AFTER_CLASS),e.push(n?this.constants.SUBNAV_AFTER_CLASS:this.constants.SUBNAV_BEFORE_CLASS)),t.removeClass(i.join(" ")).addClass(e.join(" ")),this.setHeaderHeight(t.outerHeight()),this.$activeSubnav=t),this.addOverlay()},closeSubnav:function(t,e){var i,n;t&&t.length&&(i=[this.constants.SUBNAV_OUT_CLASS,e],n=[this.constants.SUBNAV_ACTIVE_CLASS,this.constants.SUBNAV_IN_CLASS,this.constants.SUBNAV_BEFORE_CLASS,this.constants.SUBNAV_AFTER_CLASS],t.removeClass(n.join(" ")).addClass(i.join(" ")),e||(this.setHeaderHeight(0),this.$activeSubnav=null),this.removeOverlay())},setHeaderHeight:function(i){var n=this.originalHeaderHeight+i;this.$domRoot.attr("style",""),this.$domRoot.css({height:n}),this.setHeaderOverflow(n),e.core.supports.transitions()?this.$domRoot.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){t(document).trigger("navChange",0===i)}):t(document).trigger("navChange")},protectClicks:function(){var t=this;this.$navClickable=!1,setTimeout(function(){t.$navClickable=!0},this.constants.ANIMATION_SPEED+50)},action_toggleTopnavLink:function(t){this.selectedLink!==t?this.action_activateTopnavLink(t):this.action_deactivateTopnavLink()},action_activateTopnavLink:function(e){var i,n;this.$navClickable&&(this.protectClicks(),this.closeSearch(),this.$docElement.hasClass(this.constants.GLOBAL_NAV_ACTIVATED_CLASS)||(this.$domRoot.addClass(this.constants.OPEN_CLASS),this.$docElement.addClass(this.constants.GLOBAL_NAV_ACTIVATED_CLASS)),e&&(i=t(e),n=i.closest("li"),this.$topnavLis.removeClass(this.constants.TOPNAV_SELECTED_CLASS),n.addClass(this.constants.TOPNAV_SELECTED_CLASS),this.openSubnav(n.children("section")),this.selectedLink=e))},action_deactivateTopnavLink:function(){var e,i=this;this.$navClickable&&(this.protectClicks(),this.selectedLink&&(e=t(this.selectedLink),this.$topnavLis.removeClass(this.constants.TOPNAV_SELECTED_CLASS),this.closeSubnav(e.closest("li").children("section")),this.selectedLink=null),setTimeout(function(){i.$domRoot.removeClass(i.constants.OPEN_CLASS),i.$docElement.removeClass(i.constants.GLOBAL_NAV_ACTIVATED_CLASS)},this.constants.ANIMATION_SPEED+50))},action_toggleMobileNav:function(){this.mobileNavOpen?this.action_closeMobileNav():this.action_openMobileNav()},action_openMobileNav:function(){this.mobileNavOpen=!0,this.$docElement.addClass(this.constants.HEADER_OPEN_CLASS)},action_closeMobileNav:function(){this.mobileNavOpen=!1,this.$docElement.removeClass(this.constants.HEADER_OPEN_CLASS),this.resetMobileNav()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.common=e.common||{},e.common.DownloadHelper={data:{},getFileExtension:function(t){var e;try{e=t.split(".").pop()}catch(i){e=""}switch(e){case"gz":return"TAR.GZ";default:return e.toUpperCase()}},getFileName:function(t){var e;try{e=t.substr(t.lastIndexOf("/")+1)}catch(i){e="Unknown"}return e},getOS:function(){return navigator.appVersion.indexOf("Mac")!=-1?"Mac":navigator.appVersion.indexOf("X11")!=-1||navigator.appVersion.indexOf("Linux")!=-1?"Unix":"Windows"},select2:function(i){i.length&&t.getScript(e.constants.libPath+"select2/select2.min.js"+e.constants.cdnVersionQuery).done(function(){i.select2({minimumResultsForSearch:-1})})},underscore:function(i){var n=t.Deferred();"undefined"==typeof _?n=t.getScript(e.constants.libPath+"underscore/underscore-min.js"+e.constants.cdnVersionQuery):n.resolve(),t.when(n).then(i)},retrieveData:function(t,e,i,n){var o=this,s=i.params.downloadInfo.Default||[],a=i.params.downloadInfo.Mac||[],r=i.params.downloadInfo.Unix||[],l=i.params.downloadInfo.Windows||[];i.data={Default:[],Mac:[],Unix:[],Windows:[]},_.each(t,function(t){t.platform.indexOf("Mac")>-1&&o.cloneData("Mac",a,t,i,n),t.platform.indexOf("Unix")>-1&&o.cloneData("Unix",r,t,i,n),t.platform.indexOf("Windows")>-1&&o.cloneData("Windows",l,t,i,n),o.cloneData("Default",s,t,i,n)}),e(i)},cloneData:function(t,e,i,n,o){var s=this;e.length>0&&_.each(e,function(e){if(i.description.indexOf(e.descriptionKey)>-1){var a=_.clone(i),r=s.getFileExtension(a.zipUrl),l=s.getFileName(a.zipUrl);if("none"!==e.fileExtension&&r!==e.fileExtension)return!0;switch(o){case"update":a.show=e.includeUpdate;break;case"enterprise":a.show=e.includeEnterprise;break;default:a.show=e.includeDownload}a.displayName=e.descriptionValue,a.selected=e.selected,a.os=e.os,a.fileExtension=r,a.fileName=l,n.data[t].push(a)}})},trackEvent:function(t,e){"undefined"!=typeof window.analytics&&window.analytics.track(t,e)},buildTrackingData:function(t){return data={productName:t.data("product-name"),productPlatform:t.data("product-platform"),productVersion:t.data("product-version"),productReleaseDate:t.data("product-release-date"),fileName:t.data("file-name"),fileDescription:t.data("file-description"),fileUrl:t.data("file-url"),optimizelyBuckets:e.utils.storage.getCookie("optimizelyBuckets"),optimizelyEndUserId:e.utils.storage.getCookie("optimizelyEndUserId"),optimizelySegments:e.utils.storage.getCookie("optimizelySegments"),atlPath:e.utils.storage.getCookie("__atl_path")},data},changeDownload:function(e,i){var n=this;e.change(function(){var e=t(this),o=e.find(":selected");n.data=n.buildTrackingData(o),n.changeDownloadLink(n.data,i)})},changeDownloadLink:function(t,e){e.attr("href",t.fileUrl)},download:function(e,i){var n,o=this,s=e.parents("#download-area"),a=s.next("#post-download-area"),r=a.find(".button");i.on("click",function(){n=this.href,t(this).hasClass("download-link--archive")&&(o.data=o.buildTrackingData(t(this))),o.trackEvent("Started Download",o.data),a.length>0&&(t.each(r,function(){"{{installer}}"===t(this).attr("href")&&t(this).attr("href",n)}),s.addClass("inactive"),a.addClass("active"))})}}}(jQuery),function(t){var e,i=window.imkt||(window.imkt={});i.common=i.common||{},i.common.Download=function(n,o){return this.$domRoot=t(n),this.params=t.extend({},{},o),window.downloads=function(t){e=t},this.data,this.dropdown,this.downloadLink,i.common.DownloadHelper.underscore(this.init.bind(this)),this},i.common.Download.prototype={init:function(){this.params.downloadInfo=_.groupBy(this.params.downloadInfo,"os"),this.getJSON()},getJSON:function(){var n=this;t.ajax({url:n.params.productJSON,dataType:"jsonp",crossDomain:!0,timeout:5e3,cache:!0}).always(function(o){200===o.status&&(i.common.DownloadHelper.retrieveData(e,n.initialEvents,n,n.params.pageType),t(".aui-icon.loading").hide())})},getTemplate:function(e){switch(e){case"download":var n=_.template(t("#download-template").html());t("#download-view").html(n({downloads:this.data,os:i.common.DownloadHelper.getOS(),productName:this.params.product}));break;default:return!1}this.dropdown=this.$domRoot.find("#select-product-version"),this.downloadLink=this.$domRoot.find("#downloads-button")},initialEvents:function(t){t.getTemplate("download"),i.common.DownloadHelper.select2(t.dropdown),i.common.DownloadHelper.changeDownload(t.dropdown,t.downloadLink),i.common.DownloadHelper.download(t.$domRoot,t.downloadLink),t.dropdown.trigger("change")}}}(jQuery),function(t){var e,i=window.imkt||(window.imkt={});i.common=i.common||{},i.common.DownloadArchives=function(n,o){return this.$domRoot=t(n),this.params=t.extend({},{},o),window.downloads=function(t){e=t},this.data,this.downloadLink,i.common.DownloadHelper.underscore(this.init.bind(this)),this},i.common.DownloadArchives.prototype={init:function(){this.getJSON()},getJSON:function(){var i=this;t.ajax({url:i.params.productJSON,dataType:"jsonp",crossDomain:!0,timeout:5e3,cache:!0}).always(function(n){200===n.status&&(i.retrieveData(e),t(".aui-icon.loading").hide())})},getTemplate:function(e){switch(e){case"download":var i=_.template(t("#download-archive-template").html());t("#download-archive-view").html(i({downloads:this.data,productName:this.params.product}));break;default:return!1}this.downloadLink=this.$domRoot.find(".download-link")},retrieveData:function(t){var e=this;this.data=t,_.each(this.data,function(t){t.productName=e.params.product,t.extension=i.common.DownloadHelper.getFileExtension(t.zipUrl),t.fileName=i.common.DownloadHelper.getFileName(t.zipUrl)}),this.getTemplate("download"),i.common.DownloadHelper.download(this.$domRoot,this.downloadLink)}}}(jQuery),function(t){var e,i=window.imkt||(window.imkt={});i.common=i.common||{},i.common.Update=function(n,o){return this.$domRoot=t(n),this.params=t.extend({},{},o),window.downloads=function(t){e=t},this.data,this.dropdown,this.downloadLink,this.modal=this.$domRoot.prev("#modal-view"),this.url=this.params.productCurrentJSON,this.firstRequestLoaded=!1,this.sortedList=[],this.indexedList,this.updatedList,this.modalContainer,i.common.DownloadHelper.underscore(this.init.bind(this)),this},i.common.Update.prototype={init:function(){this.params.downloadInfo=_.groupBy(this.params.downloadInfo,"os"),this.getJSON()},getJSON:function(){var i=this;t.ajax({url:i.url,dataType:"jsonp",crossDomain:!0,timeout:5e3,cache:!0}).always(function(n){200===n.status&&(i.retrieveDataSet(e),i.firstRequestLoaded===!0&&t(".aui-icon.loading").hide())})},bindEvents:function(){var e=this;this.modal.on("click",".major-version-item",function(e){t(".major-version-item").not(this).removeClass("active"),t(this).toggleClass("active")}).on("click",".minor-version-item",function(i){var n=t(this),o=n.attr("data-major-version"),s=n.attr("data-minor-version");return e.updatedList=_.toArray(e.indexedList[o][s])[0][0],e.getTemplate("modal"),t(window).trigger("resize"),!1}).on("click",".version-placeholder",function(e){var i=t(this).prev(".major-version-list");i.toggleClass("active"),t(this).toggleClass("active")}).on("click",".product-versions",function(i){var n=t(this),o=n.attr("data-major-version"),s=n.attr("data-minor-version"),a=n.attr("data-version");return e.updatedList=e.indexedList[o][s][a][0],e.getTemplate("modal"),!1}).on("click","#chooseVersion",function(t){i.common.DownloadHelper.retrieveData(e.updatedList.downloads,e.initialEvents,e),e.getTemplate("all-versions")}),t("body").on("click","#all-versions-view",function(t){e.modalContainer||(e.modalContainer=new i.ui.Modal({modalType:"update wpl",contentClickToHide:!1}),e.modalContainer.$modal.find(".modal-content").html(e.modal),e.modalContainer.show(),e.modal.show()),e.modalContainer.show(),e.modalContainer.place()})},unbindEvents:function(){this.modal.unbind("click")},getTemplate:function(e){switch(e){case"download":var n=_.template(t("#download-template").html());t("#download-view").html(n({downloads:this.data,os:i.common.DownloadHelper.getOS(),productName:this.params.product}));break;case"modal":var n=_.template(t("#modal-template").html());t("#modal-view").html(n({downloads:this.indexedList,activeVersion:this.updatedList}));break;case"all-versions":var n=_.template(t("#all-versions-template").html());t("#all-versions-view").html(n({product:this.updatedList}));break;default:return!1}this.dropdown=this.$domRoot.find("#select-product-version"),this.downloadLink=this.$domRoot.find("#downloads-button")},retrieveDataSet:function(t){this.firstRequestLoaded===!1?(this.data=t,this.url=this.params.productArchivedJSON,this.firstRequestLoaded=!0,this.getJSON()):(this.data=this.data.concat(t),this.addMetaData(this.data))},addMetaData:function(t){var e;_.each(t,function(t){try{e=t.version.split("."),t.majorVersion=e[0],t.minorVersion=e[0]+"."+e[1],t.extension=i.common.DownloadHelper.getFileExtension(t.zipUrl)}catch(n){t.majorVersion=t.version,t.minorVersion=t.version,t.extension=i.common.DownloadHelper.getFileExtension(t.zipUrl)}}),this.arrangeData(t)},arrangeData:function(t){var e=this;t=_.toArray(_.groupBy(t,"version")),_.each(t,function(t){var i=_.first(t),n={product:e.params.productName,version:i.version,majorVersion:i.majorVersion,minorVersion:i.minorVersion,released:i.released,releaseNotes:i.releaseNotes,downloads:t};e.sortedList.push(n)}),this.indexList(),this.updatedList=_.first(this.sortedList),i.common.DownloadHelper.retrieveData(this.updatedList.downloads,this.initialEvents,this,"update")},indexList:function(){var t=_.groupBy(this.sortedList,"majorVersion");_.each(t,function(e,i){e=_.groupBy(e,"minorVersion"),_.each(e,function(t,i){t=_.groupBy(t,"version"),e[i]=t}),t[i]=e}),this.indexedList=t},initialEvents:function(t){t.getTemplate("download"),t.getTemplate("modal"),t.getTemplate("all-versions"),i.common.DownloadHelper.select2(t.dropdown),i.common.DownloadHelper.changeDownload(t.dropdown,t.downloadLink),i.common.DownloadHelper.download(t.$domRoot,t.downloadLink),t.dropdown.trigger("change"),t.unbindEvents(),t.bindEvents()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.customers=e.customers||{},e.customers.CustomerFiltering=function(i,n){var o=t.Deferred();return this.$domRoot=t(i),this.params=t.extend({},{perPageCount:12},n),"undefined"==typeof _?o=t.getScript(e.constants.libPath+"underscore/underscore-min.js"+e.constants.cdnVersionQuery):o.resolve(),t.when(o).then(this.init.bind(this)),this},e.customers.CustomerFiltering.prototype={init:function(){this.getInitialState(),this.preprocessData(),this.render(),this.bindEvents()},getInitialState:function(){var t=e.utils.url.getUrlParams()||{},i=this,n={};this.filterCategories={industries:{label:"Industries",groups:[]},productsUsed:{label:"Products",groups:[]},employees:{label:"Company size",groups:[]}},n=_.pick(t,function(t,e){return i.filterCategories.hasOwnProperty(e)}),this.state={filters:_.mapObject(n,function(t,e){return t.split(",")}),page:parseInt(t.page)||1,sortParam:t.sortParam||"date_created desc"}},getCustomersPaginated:function(t){var e=[],i=Math.ceil(t.length/this.params.perPageCount),n=0;for(n;n<i;n++)e.push(t.slice(n*this.params.perPageCount,(n+1)*this.params.perPageCount));return e},getCustomersSortedBy:function(t,e){var i=e.split(" "),n=i.length>1?i[1]:"asc";return t=_.sortBy(t,i[0]),"desc"===n&&t.reverse(),t},getCustomersFiltered:function(t){return _.filter(t,function(t){var e=!0;return _.each(_.keys(this.state.filters),function(i){e&&!_.isEmpty(this.state.filters[i])&&(e=_.intersection(this.state.filters[i],"string"==typeof t[i]?[t[i]]:t[i]).length,!e&&_.contains(this.state.filters[i],"has-addons")&&(e=t.addonsUsed&&t.addonsUsed.length))},this),e},this)},updateURL:function(){var t,i;window.history&&window.history.replaceState&&(t=_.clone(this.state.filters),_.each(_.keys(t),function(e){t[e].length||(t[e]=null)}),i=_.extend(t,_.pick(this.state,"page","sortParam")),window.history.replaceState(i,document.title,e.utils.url.addUrlParams(i)))},normalizePageNumber:function(){"undefined"!=typeof this.pageLength&&(this.state.page=Math.min(Math.max(1,this.state.page),this.pageLength))},render:function(){var t=this.getCustomersFiltered(this.params.allCustomers),e=this.getCustomersSortedBy(t,this.state.sortParam),i=this.getCustomersPaginated(e);this.pageLength=i.length,this.normalizePageNumber(),this.$domRoot.html(this.getTemplate("container")({state:this.state,filtersContent:this.getTemplate("filters")({filterCategories:this.filterCategories,state:this.state}),customersContent:this.getTemplate("customersPaged")({pages:i,currentPage:this.state.page,customerTile:this.getTemplate("customerTile")})})),this.updateURL()},bindEvents:function(){var i=this;this.$domRoot.on("click","[data-filter-type][data-filter-value]",function(e){var n=t(e.currentTarget),o=n.attr("data-filter-type"),s=n.attr("data-filter-value"),a={};e.preventDefault(),s="*"===s?i.state.filters[o]:s.split(","),a[o]=s,i.action_toggleFilter(a)}).on("click","[data-sort-by]",function(e){e.preventDefault(),i.action_applySort(t(e.currentTarget).attr("data-sort-by"))}).on("click","[data-pagination-control]",function(e){var n=t(e.currentTarget);if(e.preventDefault(),!n.hasClass("disabled"))switch(n.attr("data-pagination-control")){case"previous":i.action_pageTransition(!1);break;case"next":i.action_pageTransition(!0)}}).on("click",".customer-filter-category h4",function(n){var o,s,a=t(n.currentTarget),r="active";e.core.is.mobile()&&(o=a.closest(".customer-filter-category"),s=o.attr("data-filter-category"),i.filterCategories[s].active=!i.filterCategories[s].active,i.filterCategories[s].active?o.addClass("animating").find("ul").slideDown(200,function(){t(this).addClass(r)}):o.removeClass("animating").find("ul").slideUp(200,function(){t(this).removeClass(r)}))})},registerStateChange:function(){this.pendingStateChange||(this.pendingStateChange=!0,setTimeout(this.stateChange.bind(this),0))},stateChange:function(){this.render(),this.pendingStateChange=!1},filterChange:function(){this.state.page=1},action_applySort:function(t){this.state.sortParam=t,this.registerStateChange()},action_applyFilter:function(t){_.each(_.keys(t),function(e){this.state.filters[e]=_.union(this.state.filters[e],t[e])},this),this.filterChange(),this.registerStateChange()},action_removeFilter:function(t){_.each(_.keys(t),function(e){this.state.filters[e]=_.difference(this.state.filters[e],t[e])},this),this.filterChange(),this.registerStateChange()},action_toggleFilter:function(t){_.each(_.keys(t),function(e){_.each(t[e],function(t){var i={};i[e]=[t],_.contains(this.state.filters[e],t)?this.action_removeFilter(i):this.action_applyFilter(i)},this)},this)},action_pageTransition:function(e){var i=t(".customer-page",this.$domRoot),n=i.eq(this.state.page-1);e?n.next():n.prev();this.state.page=e?this.state.page+1:this.state.page-1,this.normalizePageNumber(),this.registerStateChange()},preprocessData:function(){_.each(this.params.allCustomers,function(t,e){t.employees="1000plus"==t.employees?"1000+":t.employees,this.filterCategories.industries.groups=this.filterCategories.industries.groups.concat(_.map(t.industries,function(t){return{label:t,value:t}},this)),this.filterCategories.productsUsed.groups=this.filterCategories.productsUsed.groups.concat(_.map(t.productsUsed,function(t){return{label:t,value:t}},this)),this.filterCategories.employees.groups.push({label:t.employees,value:t.employees}),this.filterCategories.employees.groups=_.sortBy(this.filterCategories.employees.groups,function(t){return parseInt(t.value.split(" ")[0])});try{t.date_created=new Date(t["mgnl:created"]),t.date_modified=new Date(t["mgnl:lastModified"])}catch(i){}},this),_.each(_.keys(this.filterCategories),function(t){this.filterCategories[t].groups=_.uniq(_.compact(this.filterCategories[t].groups),function(t){return t.value})},this),this.filterCategories.industries.groups=_.sortBy(this.filterCategories.industries.groups,"label"),this.filterCategories.productsUsed.groups=_.sortBy(this.filterCategories.productsUsed.groups,"label")},getTemplate:function(t){return"function"!=typeof this.templates[t]&&(this.templates[t]=_.template(this.templates[t])),this.templates[t]},templates:{filters:'                <% _.each(_.keys(filterCategories), function(key){ %>                    <div class="customer-filter-category<% if(filterCategories[key].active){ %> active animating<% } %>" data-filter-category="<%= key %>">                        <h4><%= filterCategories[key].label %></h4>                        <ul>                            <li><a href="#" data-filter-type="<%= key %>" data-filter-value="*"<% if(_.isEmpty(state.filters[key])){ %> class="active"<% } %>>                              <% if(_.isEmpty(state.filters[key])){ %><span class="aui-icon aui-icon-small aui-iconfont-success"></span><% } %>All                            </a></li>                            <% _.each(filterCategories[key].groups, function(category){ %>                            <li><a href="#" data-filter-type="<%= key %>" data-filter-value="<%= category.value %>"<% if(_.contains(state.filters[key], category.value)){ %> class="active"<% } %>>                              <% if(_.contains(state.filters[key], category.value)){ %><span class="aui-icon aui-icon-small aui-iconfont-success"></span><% } %><%=category.label %>                            </a></li>                            <% }) %>              <% if(key === "productsUsed"){ %>              <li><a href="#" data-filter-type="<%= key %>" data-filter-value="has-addons"<% if(_.contains(state.filters[key], "has-addons")){ %> class="active"><span class="aui-icon aui-icon-small aui-iconfont-success"></span<% } %>>Atlassian Marketplace</a></li>              <% } %>                        </ul>                    </div>                <% }); %>            ',container:'                <div class="grid grid-12 vertical-gutters-standard tablet-grid-12 mobile-grid-3">                    <!-- left column with filters -->                    <div class="column colspan-3">                        <!-- filters go here -->                        <%= filtersContent %>                    </div>                    <!-- right column w/ customer tiles -->                    <div class="column colspan-9">                        <section class="flush">                            <div class="grid grid-3 vertical-gutters-small vertical-padding-small customers-content">                                <div class="column colspan-all customer-sort-buttons-container">                                    <a href="#" data-sort-by="date_created desc" class="sort-button<% if(state.sortParam === "date_created desc"){ %> active<% } %>">Most recent</a>                                    <a href="#" data-sort-by="_nodeName" class="sort-button<% if(state.sortParam === "_nodeName"){ %> active<% } %>">Alphabetical</a>                                </div>                                <%= customersContent %>                            </div>                        </section>                    </div>                </div>            ',customersPaged:'                <% if(pages.length){ %>\t\t\t\t\t<div class="column colspan-all gallery customers-gallery">\t                    <% _.each(pages, function(page, index){ %>\t                        <section class="flush customer-page<% if(index+1 === currentPage){ %> active<% } %>">\t                            <div class="grid grid-3 mobile-grid-2">\t                                <% _.each(page, function(customer){ %>\t                                    <div class="column colspan-1">\t                                        <%= customerTile(customer) %>\t                                    </div>\t                                <% }); %>\t                            </div>\t                        </section>\t                    <% }); %>\t                </div>\t                <div class="column colspan-all customers-pagination text-center">\t                    <a href="#" data-pagination-control="previous" class="pagination-button<% if(currentPage <= 1){ %> disabled<% } %>">< &nbsp; Previous</a>\t\t\t\t\t\t<span class="customers-pagination-label">Page <%=currentPage %> of <%= pages.length %></span>\t\t\t\t\t\t<a href="#" data-pagination-control="next" class="pagination-button<% if(currentPage >= pages.length){ %> disabled<% } %>">Next &nbsp; ></a>\t                </div>\t\t\t\t<% } else { %>\t\t\t\t\t<div class="column colspan-all customers-empty text-center">\t\t\t\t\t\t<h2>There are no customers matching your selections</h2>\t\t\t\t\t\t<p>Please change your selections to the left</p>\t\t\t\t\t</div>\t\t\t\t<% } %>            ',customerTile:'                <a href="<%= detailPageUrl %>" class="customer-tile column-link" title="View the <%= title %> customer story">                    <div class="customer-tile-img" style="background-image: url(<%= logoImage %>)"></div>                </a>            '
}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.customers=e.customers||{},e.customers.CustomerLogos=function(i,n){this.$domRoot=t(i),this.params=t.extend({},{},n),t.fn.gray?this.init():t.getScript(e.constants.libPath+"gray/js/jquery.gray.min.js"+e.constants.cdnVersionQuery,this.init.bind(this))},e.customers.CustomerLogos.prototype={init:function(){this.$customerLogoLinks=t(".customer-logo-link",this.$domRoot),this.bindEvents()},bindEvents:function(){this.$customerLogoLinks.find(".grayscale").gray()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.contentHub=e.contentHub||{},e.contentHub.Overview=function(i,n){var o=t.Deferred();return this.domRoot=t(i),this.params=t.extend({},{},n),this.filters={topics:[],types:[]},this.articleLimit=9,this.articleShowCount=0,"undefined"==typeof _?o=t.getScript(e.constants.libPath+"underscore/underscore-min.js"):o.resolve(),t.when(o).then(this.init.bind(this)),this},e.contentHub.Overview.prototype={init:function(){this.sortArticleData(),this.initialState(),this.updateFilters(),this.allFilter(),this.showMore()},sortArticleData:function(){t.each(this.params.articles,function(t,e){e.lastModified=moment(new Date(e.lastModified)).format("YYYY-MM-DD hh:mm:ss")});var e=_.sortBy(this.params.articles,"lastModified");this.params.articles=e.reverse()},getTemplate:function(e){switch(e){case"articles":var i=_.template(t("#articles-template").html());t("#articles-view").html(i({articles:this.params.articles,noResults:this.params.noResults}));break;case"filters":var i=_.template(t("#filters-template").html());t("#filters-view").html(i({types:this.params.types,topics:this.params.topics,filters:this.filters}))}},initialState:function(){var t=e.utils.url.getUrlParams();null!==t&&(this.filters.topics=void 0===t.topics?[]:t.topics.split(","),this.filters.types=void 0===t.types?[]:t.types.split(",")),this.getTemplate("filters"),this.filterArticles()},displayArticles:function(){this.limit(),this.getTemplate("articles"),this.articleHover(),this.ellipsis()},clearFilters:function(e){this.filters[e]=[],this.updateURL(),this.filterArticles();var i=t(".filter-item.filter-topic"),n=t(".filter-item.filter-type");"topics"===e&&this.unCheckFilter(i),"types"===e&&this.unCheckFilter(n)},checkFilter:function(t){t.addClass("selected"),t.find("input").prop("checked",!0)},unCheckFilter:function(t){t.removeClass("selected"),t.find("input").prop("checked",!1)},allState:function(){var e=t(".no-filter.filter-topic"),i=t(".no-filter.filter-type");this.filters.topics.length?this.unCheckFilter(e):this.checkFilter(e),this.filters.types.length?this.unCheckFilter(i):this.checkFilter(i)},allFilter:function(){var e=this,i=t("li.no-filter").find("input");i.on("change",function(i){var n=t(i.currentTarget),o=n.closest("li"),s=o.hasClass("filter-topic")?"topics":"types";e.clearFilters(s)})},filterArticles:function(){var e=this;if(this.filters.topics.length||this.filters.types.length)this.filters.topics.length&&!this.filters.types.length?t.each(this.params.articles,function(t,i){e.filters.topics.indexOf(i.topic)!==-1?i.show=!0:i.show=!1}):!this.filters.topics.length&&this.filters.types.length?t.each(this.params.articles,function(t,i){e.filters.types.indexOf(i.type)!==-1?i.show=!0:i.show=!1}):t.each(this.params.articles,function(t,i){i.show=!1,e.filters.types.indexOf(i.type)!==-1&&e.filters.topics.indexOf(i.topic)!==-1&&(i.show=!0)});else{var i=0;t.each(this.params.articles,function(t,e){i+=parseInt(e.doubleColumn),e.show=!0})}this.allState(),this.displayArticles()},addRemoveFilters:function(e,i){if(t.inArray(i,this.filters[e])>-1){var n=this.filters[e].indexOf(i);this.filters[e].splice(n,1)}else this.filters[e].push(i)},updateURL:function(){var t=e.utils.url.getBareUrl(),i={};this.filters.topics.length&&(i.topics=this.filters.topics.join()),this.filters.types.length&&(i.types=this.filters.types.join()),t=e.utils.url.addUrlParams(i,t),window.history&&window.history.replaceState&&window.history.replaceState(i,document.title,t)},updateFilters:function(){var e=this,i=this.domRoot.find(".filter-item");this.domRoot.find(".no-filter");i.on("change",function(i){var n=t(i.currentTarget),o=n.closest("li"),s=o.find("input[type=checkbox]").attr("id"),a=o.hasClass("filter-topic")?"topics":"types";o.hasClass("selected")?o.removeClass("selected"):o.addClass("selected"),e.addRemoveFilters(a,s),e.articleLimit=9,e.filterArticles(),e.updateURL()})},limit:function(){var e=this,i=0;t.each(this.params.articles,function(t,n){n.show===!0&&(n.doubleColumn=n.originalColumnWidth,i%3==2&&0!=i&&(n.doubleColumn=1),i+=parseInt(n.doubleColumn),n.show=i<=e.articleLimit)}),this.articleShowCount=i,this.articleShowCount<=this.articleLimit?this.domRoot.find("#show-more").addClass("inactive"):this.domRoot.find("#show-more").removeClass("inactive")},increaseLimit:function(){this.articleLimit=this.articleLimit+9},showMore:function(){var t=this;this.domRoot.find("#show-more").click(function(){t.increaseLimit(),t.filterArticles()})},articleHover:function(){this.domRoot.find(".article-column").hover(function(){t(this).find(".article-column__description").addClass("active")},function(){t(this).find(".article-column__description").removeClass("active")})},ellipsis:function(){this.domRoot.find(".article-column__description div p, .article-title").dotdotdot()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.contentHub=e.contentHub||{},e.contentHub.Featured=function(i,n){var o=t.Deferred();return this.domRoot=t(i),this.params=t.extend({},{},n),"undefined"==typeof _?o=t.getScript(e.constants.libPath+"underscore/underscore-min.js"):o.resolve(),t.when(o).then(this.init.bind(this)),this},e.contentHub.Featured.prototype={init:function(){"true"===this.params.recommended&&this.getTemplate("recommended"),this.articleHover(),this.ellipsis()},articleHover:function(){this.domRoot.find(".article-column").hover(function(){t(this).find(".article-column__description").addClass("active")},function(){t(this).find(".article-column__description").removeClass("active")})},ellipsis:function(){this.domRoot.find(".article-column__description div p, .article-title").dotdotdot()},getTemplate:function(e){switch(e){case"recommended":var i=""!=t.trim(t("#recommended-heading").html())?t("#recommended-heading").html():"<h5>You might also enjoy</h5>",n=_.template(t("#recommended-template").html()),o=_.shuffle(this.params.articles).slice(0,3);t("#recommended-view").html(n({articles:o,heading:i}))}}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.teamPatterns=e.teamPatterns||{},e.teamPatterns.PlaySummary=function(e,i){this.domRoot=t(e),this.params=t.extend({},{},i),this.longDescription=t("#long-description",this.domRoot),this.descriptionToggle=t("#long-description-toggle",this.domRoot),this.readMore=t(".read-more",this.descriptionToggle),this.showLess=t(".show-less",this.descriptionToggle),this.imageSection=t(".play-summary__image",this.domRoot),this.condensedImage=t(".condensed-image",this.imageSection),this.expandedImage=t(".expanded-image",this.imageSection),this.init()},e.teamPatterns.PlaySummary.prototype={init:function(){this.bindEvents()},bindEvents:function(){var t=this,e=150;this.readMore.on("click",function(){t.domRoot.removeClass("play-summary--closed").addClass("play-summary--open"),t.longDescription.slideDown(e,function(){"true"===t.params.hasExpandedImage&&(t.condensedImage.removeClass("active"),t.expandedImage.addClass("active"))}),t.readMore.hide(),t.showLess.show()}),this.showLess.on("click",function(){t.domRoot.removeClass("play-summary--open").addClass("play-summary--closed"),t.longDescription.slideUp(e),t.showLess.hide(),t.readMore.show(),"true"===t.params.hasExpandedImage&&(t.condensedImage.addClass("active"),t.expandedImage.removeClass("active"))})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.teamPatterns=e.teamPatterns||{},e.teamPatterns.AttributesModal=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.$modalContent=this.$domRoot.find(".modal-content"),this.$modalTrigger=this.$domRoot.parent(".modal-link-wrapper").find("."+this.params.trigger),this.$modalTrigger.addClass("attribute-modal-link"),this.init()},e.teamPatterns.AttributesModal.prototype={init:function(){this.$modalTrigger.on("click",t.proxy(this.onclick,this)),this.modal||(this.modal=new e.ui.Modal({modalType:"dialog attribute",contentClickToHide:!1}),this.modal.$overlay.addClass("attribute-overlay"),this.modal.$modalContent.html(this.$modalContent.html()),this.$modalContent.remove())},onclick:function(t){t.preventDefault(),this.modal.show(),this.modal.place()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.teamPatterns=e.teamPatterns||{},e.teamPatterns.AttributesSection=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.$modalContent=this.$domRoot.find(".modal-content"),this.$modalTrigger=this.$domRoot.parent(".modal-link-wrapper").find("."+this.params.trigger),this.init()},e.teamPatterns.AttributesSection.prototype={init:function(){this.$modalTrigger.on("click",t.proxy(this.onclick,this)),this.modal||(this.modal=new e.ui.Modal({modalType:"dialog attribute full-screen",contentClickToHide:!1}),this.modal.$overlay.addClass("attribute-overlay"),this.modal.$modalContent.html(this.$modalContent.html()),this.$modalContent.remove())},onclick:function(t){t.preventDefault(),this.modal.show(),this.modal.place()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.teamPatterns=e.teamPatterns||{},e.teamPatterns.Plays=function(i,n){var o=t.Deferred();return this.domRoot=t(i),this.params=t.extend({},{},n),this.filters={teams:[],painPoints:[]},"undefined"==typeof _?o=t.getScript(e.constants.libPath+"underscore/underscore-min.js"+e.constants.cdnVersionQuery):o.resolve(),t.when(o).then(this.init.bind(this)),this},e.teamPatterns.Plays.prototype={init:function(){this.initialState()},initialState:function(){var t=e.utils.url.getUrlParams();null!==t&&(this.filters.teams=void 0===t.teams?[]:t.teams.split(","),this.filters.painPoints=void 0===t.painPoints?[]:t.painPoints.split(",")),this.getTemplate("filters"),this.filterPlays(),this.bindEvents()},displayplays:function(){this.getTemplate("plays"),this.ellipsis()},getTemplate:function(e){switch(e){case"plays":var i=_.template(t("#plays-template").html());t("#plays-view").html(i({plays:this.params.plays,noResults:this.params.noResults}));break;case"filters":var i=_.template(t("#filters-template").html());t("#filters-view").html(i({teams:this.params.teams,painPoints:this.params.painPoints,filters:this.filters,text:this.params}))}},filterPlays:function(){var e=this;this.filters.teams.length||this.filters.painPoints.length?this.filters.teams.length&&!this.filters.painPoints.length?t.each(this.params.plays,function(t,i){var n=_.uniq(i.teams.split(","));i.show=e.containsArray(e.filters.teams,n)}):!this.filters.teams.length&&this.filters.painPoints.length?t.each(this.params.plays,function(t,i){var n=_.uniq(i.painPoints.split(","));i.show=e.containsArray(e.filters.painPoints,n)}):t.each(this.params.plays,function(t,i){i.show=!1;var n=_.uniq(i.teams.split(",")),o=_.uniq(i.painPoints.split(","));e.containsArray(e.filters.teams,n)&&e.containsArray(e.filters.painPoints,o)&&(i.show=!0)}):t.each(this.params.plays,function(t,e){e.show=!0}),this.allState(),this.displayplays()},addRemoveFilters:function(e,i){if(t.inArray(i,this.filters[e])>-1){var n=this.filters[e].indexOf(i);this.filters[e].splice(n,1)}else this.filters[e].push(i)},updateURL:function(){var t=e.utils.url.getBareUrl(),i={};this.filters.teams.length&&(i.teams=this.filters.teams.join()),this.filters.painPoints.length&&(i.painPoints=this.filters.painPoints.join()),t=e.utils.url.addUrlParams(i,t),window.history&&window.history.replaceState&&window.history.replaceState(i,document.title,t)},clearFilters:function(t){this.filters[t]=[],this.updateURL(),this.filterPlays();var e=this.domRoot.find(".filter-item.filter-team"),i=this.domRoot.find(".filter-item.filter-painPoint");"teams"===t&&this.unCheckFilter(e),"painPoints"===t&&this.unCheckFilter(i)},checkFilter:function(t){t.addClass("selected"),t.find("input").prop("checked",!0)},unCheckFilter:function(t){t.removeClass("selected"),t.find("input").prop("checked",!1)},allState:function(){var t=this.domRoot.find(".no-filter.filter-team"),e=this.domRoot.find(".no-filter.filter-painPoint");this.filters.teams.length?this.unCheckFilter(t):this.checkFilter(t),this.filters.painPoints.length?this.unCheckFilter(e):this.checkFilter(e)},bindEvents:function(){var e=this,i=this.domRoot.find(".filter-item"),n=this.domRoot.find("li.no-filter").find("input");n.on("change",function(i){var n=t(i.currentTarget),o=n.closest("li"),s=o.hasClass("filter-team")?"teams":"painPoints";e.clearFilters(s)}),i.on("change",function(i){var n=t(i.currentTarget),o=n.closest("li"),s=o.find("input[type=checkbox]").attr("id"),a=o.hasClass("filter-team")?"teams":"painPoints";o.hasClass("selected")?o.removeClass("selected"):o.addClass("selected"),e.addRemoveFilters(a,s),e.filterPlays(),e.updateURL()})},ellipsis:function(){this.domRoot.find(".play h4").dotdotdot()},containsArray:function(t,e){for(var i=0;i<t.length;i++)if(e.indexOf(t[i])===-1)return!1;return!0}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.WebinarSignupForm=function(e,i){this.$domRoot=e||t("body"),this.params=t.extend({},{},i),this.init()},e.ui.WebinarSignupForm.prototype={init:function(){var e=this;setTimeout(function(){t(".region").change(function(e){t("#webinarkey").attr("value",t(this).attr("data-key")),t("#eventid").attr("value",t(this).attr("value"))}),t("#webinarkey").attr("value",t(".region").first().attr("data-key")),t("#eventid").attr("value",t(".region").first().attr("value"))},10),e.initSubmitWebinarForm()},initSubmitWebinarForm:function(e){var i={formId:t("#webinarRegistrationForm"),submitButton:t("#webinarRegistrationForm a.submit"),emailListCheckboxID:t("#emailList"),emailField:t("input#email")},n=t.extend(i,e);n.submitButton.click(function(e){if(e.preventDefault(),n.emailListCheckboxID.prop("checked")){var i=(n.emailField.attr("value"),"POST");n.formId.valid()&&t.ajax({type:i,url:exactTargetUrl,complete:function(){n.formId.submit()},error:function(){n.formId.submit()}})}else n.formId.submit()}),n.formId.validate({rules:{email:{required:!0,email:!0},firstname:{required:!0},lastname:{required:!0},title:{required:!1}}})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.Accordion=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.$accordionHeading=this.$domRoot.find(".imkt-accordion--heading"),this.$accordionContent=this.$domRoot.find(".imkt-accordion--content"),this.init()},e.ui.Accordion.prototype={init:function(){this.bindEvents()},bindEvents:function(t){var e=this;this.$accordionHeading.on("click",function(t){e.$domRoot.toggleClass("closed")})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.Carousel=function(e,i){this.$domRoot=t(e),this.params=t.extend({},{},i),this.$paneCount=this.$domRoot.find(".grid").length,this.$paneNumber=this.$domRoot.find(".section-carousel__pane.active").attr("data-pane-number"),this.$carouselPanes=this.$domRoot.find(".section-carousel__pane"),this.$state=[],this.$endOfLoop,this.init()},e.ui.Carousel.prototype={init:function(){t(this.$domRoot).find(".section-carousel__heading--nav").append('<div class="carousel-counter-wrap"><span class="pane-counter"><span class="pane-count">'+this.$paneNumber+"</span> of "+this.$paneCount+'</span><span class="carousel-navigation-control previous"><</span><span class="carousel-navigation-control next">></span></div>'),this.$nav=this.$domRoot.find(".carousel-navigation-control");this.initialState()},initialState:function(){for(var t=this,e=t.$carouselPanes.length,i=0;i<e;i++){var n=0===i?"active":"right",o=0!==i,s=i!==e-1,a={pane:t.$carouselPanes[i],position:n,wherefrom:n,paneNumber:i+1,hasPrevious:o,hasNext:s};this.$state.push(a)}t.navClicked()},navClicked:function(){var e=this;e.$nav.on("click",function(i){var n=t(this).hasClass("next")?"next":"previous";"next"===n?(e.$domRoot.addClass("next").removeClass("previous"),e.changePane("hasNext","left",1)):(e.$domRoot.addClass("previous").removeClass("next"),e.changePane("hasPrevious","right",-1)),e.updateCounter()})},changePane:function(e,i,n){if("true"===this.params.loop)"left"===i?this.changePaneLoop("hasNext","left","right",1,"end"):this.changePaneLoop("hasPrevious","right","left",-1,"start");else{for(var o=0,s=this.$state.length;o<s;){if("active"===this.$state[o].position&&this.$state[o][e]===!0){this.$state[o].position=i,this.$state[o+n].position="active";break}o+=1}t.each(this.$state,function(e,i){t(i.pane).removeClass("active left right").addClass(i.position)})}},changePaneLoop:function(e,i,n,o,s){var a,r,l=this,c=0,u=this.$state.length;for("end"===s?(a=0,r=u-1):(a=u-1,r=0);c<u;){if("active"===this.$state[c].position&&this.$state[c][e]===!0){this.$state[c].position=i,this.$state[c+o].position="active",this.$endOfLoop===!0?(this.$state[r].position=n,this.$endOfLoop=!1):(this.$endOfLoop===!1&&(this.$state[a].position=n),this.$endOfLoop=!1);break}if("active"===this.$state[c].position&&this.$state[c][e]===!1){for(var h=0;h<u;h++)this.$state[h].position=n;this.$state[a].position="active",l.$endOfLoop=!0;break}c+=1}this.$endOfLoop===!0&&(this.$state[r].position=i),t.each(l.$state,function(e,i){t(i.pane).removeClass("active left right").addClass(i.position)})},updateCounter:function(){this.$paneNumber=this.$domRoot.find(".section-carousel__pane.active").attr("data-pane-number"),this.$domRoot.find(".pane-count").html(this.$paneNumber)}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.CountdownTimer=function(i,n){this.domRoot=t(i),this.params=t.extend({},{},n);var o=t.Deferred();return this.$domRoot=t(i),this.params=t.extend({},{},n),"undefined"==typeof jQuery().countdown?o=t.getScript(e.constants.libPath+"jquery.countdown/dist/jquery.countdown.min.js"+e.constants.cdnVersionQuery):o.resolve(),t.when(o).then(this.init.bind(this)),this},e.ui.CountdownTimer.prototype={constants:{},init:function(){this.render()},render:function(){var e=this.params.finalDate,i=t("#"+this.params.id);i.countdown(e,function(t){i.html(t.strftime('<div class="imkt-countdown-timer__wrapper"><span class="imkt-countdown-timer__digit">%D</span><span class="imkt-countdown-timer__label">Days</span></div><div class="imkt-countdown-timer__wrapper"><span class="imkt-countdown-timer__digit">%H</span><span class="imkt-countdown-timer__label">Hours</span></div><div class="imkt-countdown-timer__wrapper"><span class="imkt-countdown-timer__digit">%M</span><span class="imkt-countdown-timer__label">Minutes</span></div><div class="imkt-countdown-timer__wrapper"><span class="imkt-countdown-timer__digit">%S</span><span class="imkt-countdown-timer__label">Seconds</span></div>'))})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.Modal=function(i){return this.params=t.extend({},{modalType:"dialog",centerVertically:!0,modalContainer:document.body,fixed:!0,id:e.utils.general.randomString(8),contentClickToHide:!0},i),this.init(),this},e.ui.Modal.prototype={init:function(){this.$overlay=this.build(),this.$overlayContainer=this.params.fixed?t(window):this.$overlay.parent(),this.$modal=t(".modal",this.$overlay).addClass(this.params.modalType),this.$modalHeader=t(".modal-header",this.$modal),this.$modalContent=t(".modal-content",this.$modal),this.$closeLink=t(".close",this.$modal)},aboveClass:"above",centerModal:function(){var e=this;this.$modal.css({margin:"0 auto",top:function(i,n){return Math.max((e.$overlayContainer.outerHeight()-t(this).outerHeight())/2,0)}})},bindModalEvents:function(){t(window).onThrottled("resize."+this.params.id,t.proxy(function(t){this.place()},this)),t(window).onThrottled("scroll."+this.params.id,t.proxy(function(t){this.place()},this)),t(document).on("keyup."+this.params.id,t.proxy(function(t){27===t.which&&this.hide()},this)),this.$overlay.on("click."+this.params.id,t.proxy(function(e){if(this.isVisible){var i=t(e.target).closest(".modal-content").length;(this.params.contentClickToHide||!this.params.contentClickToHide&&!i)&&this.hide()}},this)),this.$modal.on("click","[data-dismiss='modal']",t.proxy(function(t){t.preventDefault(),this.hide()},this)),t(document).on("modal.shown",function(){setTimeout(function(){this.$closeLink.focus()}.bind(this),100)}.bind(this)),t("iframe, img",this.$modal).on("load",function(e){t(e.currentTarget).is("iframe")?setTimeout(this.place.bind(this),100):this.place()}.bind(this))},unbindModalEvents:function(){t(window).off("resize."+this.params.id),t(document).off("keyup."+this.params.id)},build:function(){return t("<div class='overlay'><div class='modal' tabindex='-1' role='dialog' aria-labelledby='modal-header'><a href='#' class='close aui-icon aui-icon-large aui-iconfont-remove-label' data-dismiss='modal' title='Close overlay (escape key)'></a><div class='modal-header' id='modal-header'></div><div class='modal-content'></div></div></div>").attr("id",this.params.id)},show:function(){if(!this.isVisible){t(this.params.modalContainer).addClass("modal-open"),this.insert(),this.$overlay.addClass("in").trigger("modal.show").delay(200).trigger("modal.shown"),this.isVisible=!0,this.place();var i=this.$modal.find(".exact-target-form__wrapper");if(i.length){new e.common.ExactTargetForm(i)}}},hide:function(){this.isVisible&&(this.$overlay.removeClass("in").trigger("modal.hide").delay(200).trigger("modal.hidden"),this.isVisible=!1,t(this.params.modalContainer).removeClass("modal-open"))},place:function(){var e,i;this.params.fixed&&this.$overlay.css({width:t(window).width(),height:window.innerHeight?window.innerHeight:t(window).height()}),this.params.centerVertically&&this.centerModal(),e=this.$closeLink.offset().left+this.$closeLink.outerWidth()>this.$overlay.offset().left+this.$overlay.outerWidth(),i=this.$overlay.outerWidth()-(this.$modal.offset().left+this.$modal.outerWidth())>this.$closeLink.outerWidth(),!this.$closeLink.hasClass(this.aboveClass)&&e?this.$closeLink.addClass(this.aboveClass):i&&this.$closeLink.removeClass(this.aboveClass),this.$overlay.trigger("modal.place")},insert:function(){this.inserted||(this.$overlay.appendTo(this.params.modalContainer).trigger("modal.insert"),this.bindModalEvents(),this.inserted=!0)},remove:function(){this.$overlay.trigger("modal.remove").remove(),this.unbindModalEvents(),this.inserted=!1}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.ModalLink=function(e,i){this.domRoot=t(e),this.params=t.extend({},{},i),this.$modalLink=this.domRoot.find(".modal-link"),this.$modalHeader=this.domRoot.find(".modal-header"),this.$modalContent=this.domRoot.find(".modal-content"),this.init()},e.ui.ModalLink.prototype={init:function(){this.domRoot.on("click",t.proxy(this.onclick,this)),this.modal||(this.modal=new e.ui.Modal({modalType:"dialog",contentClickToHide:!1}),this.$modalHeader.length&&this.modal.$modalHeader.html(this.$modalHeader.html()),this.modal.$modalContent.html(this.$modalContent.html()),this.$modalContent.remove())},onclick:function(t){t.preventDefault(),this.modal.show(),this.modal.place()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.ModalImage=function(e,i){this.domRoot=t(e),this.params=t.extend({},{},i),this.$modalImage=this.params.useDomRoot?this.domRoot:this.domRoot.find(".imkt-image-modal"),this.$modalImageSrc=this.params.useImgSrc?this.params.imgSrc:this.$modalImage.attr("src"),this.$modalContent='<img src="'+this.$modalImageSrc+'" />',this.init()},e.ui.ModalImage.prototype={init:function(){this.$modalImage.on("click",t.proxy(this.onclick,this)),this.modal||(this.modal=new e.ui.Modal({modalType:"image",contentClickToHide:!1}),this.modal.$modalContent.html(this.$modalContent),this.modal.$overlay.addClass("image-overlay"))},onclick:function(t){t.preventDefault(),this.modal.show(),this.modal.place()}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.Navbar=function(e,i){this.domRoot=t(e),this.params=t.extend({},{},i),this.$navbar=this.domRoot,this.$navbarMainSection=t(".imkt-navbar__main-section",this.$navbar),this.$titleWrapper=t(".imkt-navbar__title-wrapper",this.$navbarMainSection),this.$charlieLogo=t(".imkt-navbar__charlie-logo-link",this.$titleWrapper),this.$linkList=t(".imkt-navbar__link-list",this.$navbarMainSection),this.$titleLink=t(".imkt-navbar__title-link",this.$titleWrapper),this.$navbarToggle=t("#jsToggleNavbarMenu",this.$titleWrapper),this.$navbarButton=t(".button",this.$navbarMainSection),this.$dropdownLinksWrapper=t(".imkt-navbar__collapsed-dropdown-links",this.$domRoot),this.$dropdownToggle=t(".imkt-navbar__collapsed-link-list-link--dropdown-trigger",this.$domRoot),this.$collapsedSection=t(".imkt-navbar__collapsed-section",this.$navbar),this.navContentsWidth=0,this.$navbar.hasClass("imkt-navbar__default")&&this.$linkList.length&&this.init()},e.ui.Navbar.prototype={constants:{CHARLIE_LOGO_WIDTH:36,NAVBAR_COLLAPSED_CLASS:"imkt-navbar__collapsed",NAVBAR_COLLAPSED_OPEN_CLASS:"imkt-navbar__collapsed--open"},init:function(){var e=this;t(document).on("font-face-applied",function(){"true"==e.params.hasCharlie&&e.$charlieLogo.length&&e.setLogoTitleWidth(),e.getNavContentsWidth(),e.setNavbarDisplayMode()}),this.bindEvents()},bindEvents:function(){var e=this;t(window).onThrottled("resize",function(){e.setNavbarDisplayMode()}),this.$navbarToggle.on("click",function(){e.toggleCollapsedNavbar()}),this.$dropdownToggle.on("click",function(){var i=t(this);return e.$dropdownLinksWrapper.toggle(),i.toggleClass("open"),!1}),t("html, body").on("click",function(){e.navbarOpen()&&e.toggleCollapsedNavbar()}),this.$navbar.on("click",function(t){t.stopPropagation()})},isMobile:function(){return t(window).width()<=e.constants.mobileBreakpoint},navbarOpen:function(){return this.$navbar.hasClass(this.constants.NAVBAR_COLLAPSED_OPEN_CLASS)},toggleCollapsedNavbar:function(){this.$navbar.toggleClass(this.constants.NAVBAR_COLLAPSED_OPEN_CLASS),this.$collapsedSection.slideToggle()},getNavContentsWidth:function(){var e=this;this.navContentsWidth=50,this.navContentsWidth+=this.$titleWrapper.width(),t.each(this.$linkList.children("li"),function(){var i=t(this);e.navContentsWidth+=i.outerWidth(!0)}),this.$navbarButton.length&&(this.navContentsWidth+=this.$navbarButton.width()),this.$navbarToggle.length&&(this.navContentsWidth+=this.$navbarToggle.outerWidth(!0))},setLogoTitleWidth:function(){var t=this.$titleLink.clone().find("span").css({fontSize:"24px",opacity:0,position:"absolute",visibility:"hidden"}),e=this.$titleLink.clone().find("span").css({fontSize:"18px",opacity:0,position:"absolute",visibility:"hidden"});this.$titleWrapper.after(t,e);var i=t.outerWidth(!0);t.remove();var n=e.outerWidth(!0)+this.constants.CHARLIE_LOGO_WIDTH;e.remove(),i>=n?this.$titleWrapper.width(i):this.$titleWrapper.width(n)},setNavbarDisplayMode:function(){if(this.isMobile())this.$navbar.addClass(this.constants.NAVBAR_COLLAPSED_CLASS);else{var t=this.$navbarMainSection.find(".column").width();t<this.navContentsWidth?this.$navbar.addClass(this.constants.NAVBAR_COLLAPSED_CLASS):(this.$navbar.removeClass(this.constants.NAVBAR_COLLAPSED_CLASS),this.$navbar.hasClass(this.constants.NAVBAR_COLLAPSED_OPEN_CLASS)&&this.toggleCollapsedNavbar())}}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.SectionSubPageContent=function(i,n){if(this.domRoot=t(i),this.params=t.extend({},{},n),!this.params.disableAjax&&e.utils.history.supportsHistory()){this.ajaxQueue=[],this.contentSwapIds=["imkt-swap-container"];var o=this;this.params.additionalIds.length&&(this.params.additionalIds=this.params.additionalIds.split(", "),t.each(this.params.additionalIds,function(t,e){o.contentSwapIds.push(e)})),this.contentLoadedClass="imkt-swap-content-loaded",this.$navigation=this.domRoot.find(".imkt-swap-navigation"),this.contentRels={},this.init()}},e.ui.SectionSubPageContent.prototype={init:function(){var e=this;this.$navigation.find("a.imkt-swap-navigation-link").each(function(i){var n=t(this),o=n.attr("rel"),s=n.attr("href"),a=n.text(),r=n.data("title");e.contentRels[o]={title:a,metaTitle:r,href:s,contentDivs:e.loadContentDivs(s,e.contentSwapIds,function(){n.addClass(e.contentLoadedClass)})}}),e.bindEvents()},loadContentDivs:function(e,i,n){var o=this,s={};return o.ajaxQueue.push(t.ajax({url:e,cache:!0}).done(function(e){var o="";t.each(i,function(i,n){o=t("#"+n,e).html(),s[n]={html:o}}),n()})),s},bindEvents:function(){var i=this;this.$navigation.find("a.imkt-swap-navigation-link").on("click",function(n){var o=t(this),s=o.attr("rel"),a=o.attr("data-title");o.hasClass(i.contentLoadedClass)?(n.preventDefault(),document.title=a,e.utils.history.pushState("",a,o.attr("href")),i.$navigation.find("a.imkt-swap-navigation-link").removeClass("active"),o.addClass("active"),t.each(i.contentSwapIds,function(e,n){var o=i.contentRels[s],a=o.contentDivs[n].html;t("#"+n).html(a)})):t.each(i.ajaxQueue,function(t,e){e.abort()})})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.SectionSummitSessions=function(e,i){this.domRoot=t(e),this.params=t.extend({},{},i),this.$trackDetail=this.domRoot.find(".track-detail"),this.init()},e.ui.SectionSummitSessions.prototype={init:function(){t("body").hasClass("edit")||this.bindEvents()},bindEvents:function(){var i=this;this.domRoot.on("click",".imkt-summit-track__column--session-list .session-title",function(n){n.preventDefault();var o=t(this);i.domRoot.find(".imkt-summit-track__column--session-list .session-title").removeClass("active"),o.addClass("active"),i.$trackDetail.hide(),i.domRoot.find(".session-detail").removeClass("active");var s=o.data("session");if(i.domRoot.find("#"+s).addClass("active"),i.isMobileLayout()){var a=0;t(".imkt-navbar").each(function(e){a+=t(this).height()});var r=t(".summit-toggle");r.length&&(a+=r.height());var l=i.domRoot.find("#"+s).offset().top-a;t("html, body").animate({scrollTop:l},"slow")}e.utils.url.updateQueryStringParam("sessionid",s)}),this.domRoot.on("click",".imkt-summit-track__column--session-info .session-detail--back-to-track",function(e){t(this).closest(".session-detail.active").removeClass("active"),t(this).closest(".imkt-summit-track__column--session-info").find(".track-detail").show(),i.domRoot.find(".imkt-summit-track__column--session-list .active").removeClass("active")})},isMobileLayout:function(){return t(window).width()<=e.constants.mobileBreakpoint}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.Tabs=function(e,i){this.domRoot=t(e),this.params=t.extend({},{useScrolling:!1,noDefault:!1,useMobileSelect:!1},i),this.init()},e.ui.Tabs.prototype={activeClass:"active",mobileSelectClassName:"imkt-ui-tabs--mobile__select",init:function(){this.menuLis=t(".tab-menu > li",this.domRoot),this.menuLinks=t("a",this.menuLis),this.tabSections=t(".tab-content"),this.menuLinks.filter("[data-additional-content]").each(function(e,i){var n=t(i);n.data("additionalContent",t(n.attr("data-additional-content")))}),this.bindEvents(),this.setInitialState(),this.params.useMobileSelect&&this.initMobileSelect()},activateByTabName:function(t){var e=this.menuLinks.filter("[data-name='"+t+"']");e.length?this.activateTab(e):this.activateTab(this.menuLinks.eq(0),!0)},activateByTabIndex:function(t){this.activateTab(this.menuLinks.eq(t))},setInitialState:function(){var t=e.utils.url.getUrlParams();this.menuLinks.trigger("close.tab"),this.params.noDefault||(t&&t.tab?this.activateByTabName(t.tab):this.activateByTabIndex(0))},bindEvents:function(){this.menuLinks.on("click",t.proxy(this.onclick_menuLink,this)).on("open.tab",t.proxy(this.onopen_tab,this)).on("close.tab",t.proxy(this.onclose_tab,this))},onclick_menuLink:function(e){e.preventDefault(),this.activateTab(t(e.currentTarget))},onopen_tab:function(e){var i=t(e.currentTarget).data("additionalContent");i&&i.length&&i.show()},onclose_tab:function(e){
var i=t(e.currentTarget).data("additionalContent");i&&i.length&&i.hide()},updateHistory:function(i){var n;if(e.core.supports.history()&&(n=i.attr("data-name"),"undefined"!=typeof n&&n!==!1)){var o=window.location.href,s=e.utils.url.getUrlParams(o);window.location.hash;s?s.tab=n:s={tab:n},window.history.replaceState(n,document.title,"?"+t.param(s)+window.location.hash)}},checkScrollPosition:function(){var e=this.domRoot.offset().top-30;t(window).scrollTop()<e&&t("body, html").scrollTop(e)},activateTab:function(t,e){var i="number"==typeof this.currentIndex?this.menuLinks.eq(this.currentIndex):null;t.length&&!t.is(i)&&(this.menuLis.removeClass(this.activeClass),t.closest("li").addClass(this.activeClass),this.tabSections.hide().filter(t.attr("href")).show(),this.currentIndex=this.menuLinks.index(t),this.params.useScrolling&&this.checkScrollPosition(),i&&i.trigger("close.tab"),t.trigger("open.tab"),e||this.updateHistory(t))},initMobileSelect:function(){var e=this,i=document.createElement("select");i.className=this.mobileSelectClassName,t.each(this.menuLinks,function(e,n){var o=document.createElement("option"),s=t(n).data("name"),a=t(n).data("additional-content"),r=t(n).text();t(o).data("name",s),t(o).data("additional-content",a),t(o).val(s),t(o).text(r),t(n).parent().hasClass("active")&&t(o).attr("selected","selected"),t(i).append(o)}),this.domRoot.prepend(i),t(i).on("change",function(i){var n=t(this).find(":selected").index();e.activateTab(e.menuLinks.eq(n))})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.DynamicHeroSection=function(e,i){this.$domRoot=e||t("body"),this.params=t.extend({},{},i),this.$contentSwap=t(".dynamic-hero-section--content-swap",this.$domRoot),this.$block1=t(".dynamic-hero-section--block--1",this.$domRoot),this.$block1Title=t(".dynamic-hero-section--block--inner-content--title",this.$domRoot),this.$block1Paragraph=t(".dynamic-hero-section--block--inner-content--paragraph",this.$domRoot),this.$block1BottomInfoMain=t(".dynamic-hero-section--block--inner-content--bottom-info--main",this.$domRoot),this.$block1BottomInfoSecondary=t(".dynamic-hero-section--block--inner-content--bottom-info--secondary",this.$domRoot),this.$block2=t(".dynamic-hero-section--block--2",this.$domRoot),this.$secondarySwapingArea=t(".dynamic-hero-section--block--inner-content--bottom-info--secondary",this.$domRoot),this.init()},e.ui.DynamicHeroSection.prototype={init:function(){var t=this;t.bindEvents()},preloadImages:function(){this.$contentSwap.each(function(){var e=t(this).data("image");t("<img/>")[0].src=e})},bindEvents:function(e){var i=this;t(window).load(function(){i.preloadImages()}),this.$secondarySwapingArea.on("mouseover",function(t,e){i.$block1.css("background-image","url("+i.$block2.data("image")+")"),i.$block1Title.html(i.$block2.data("title")),i.$block1Paragraph.hide(),i.$block1BottomInfoMain.text(i.$block2.data("bottom-info-main")),i.$block1BottomInfoSecondary.text(i.$block2.data("bottom-info-secondary"))}),this.$contentSwap.on("mouseover",function(e,n){i.$block1.css("background-image","url("+t(this).data("image")+")"),i.$block1Title.html(t(this).data("title")),i.$block1Paragraph.hide(),i.$block1BottomInfoMain.text(t(this).data("bottom-info-main")),i.$block1BottomInfoSecondary.text(t(this).data("bottom-info-secondary"))})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.VideoLink=function(e,i){this.domRoot=t(e),this.params=t.extend({},{autoplay:1,modestbranding:1,rel:0,aspectRatio:16/9,addPlayButton:!1,buttonSize:"medium"},i),this.init()},e.ui.VideoLink.prototype={init:function(){e.core.is.mobile()||this.domRoot.on("click",t.proxy(this.onclick,this))},onclick:function(t){this.params.behavior&&this.behaviors.hasOwnProperty(this.params.behavior)&&(t.preventDefault(),this.behaviors[this.params.behavior].call(this))},getVideoEmbed:function(){if(this.params.source&&this.sources.hasOwnProperty(this.params.source))return this.sources[this.params.source].call(this)},getVideoDimensions:function(t){var e={height:null,width:null};return t.outerWidth()/t.outerHeight()>this.params.aspectRatio?(e.top=0,e.height=Math.round(t.outerHeight()),e.width=Math.round(e.height*this.params.aspectRatio)):(e.width=Math.round(t.outerWidth()),e.height=Math.round(e.width/this.params.aspectRatio),e.top=Math.round((t.outerHeight()-e.height)/2)),e},pauseVideo:function(){"youtube"===this.params.source?(this.issueYoutubeCommand("pauseVideo"),this.$videoPlayer.removeAttr("id")):"vimeo"===this.params.source&&this.issueVimeoCommand("pause")},playVideo:function(){"youtube"===this.params.source?(this.issueYoutubeCommand("playVideo"),this.$videoPlayer.attr("id","youtube-video-active")):"vimeo"===this.params.source&&this.issueVimeoCommand("play")},issueYoutubeCommand:function(t){var e;this.$videoPlayer&&this.$videoPlayer.length&&(e=this.$videoPlayer[0].contentWindow,e.postMessage('{"event":"command","func":"'+t+'","args":""}',"*"))},issueVimeoCommand:function(t){var e;this.$videoPlayer&&this.$videoPlayer.length&&(e=this.$videoPlayer[0].contentWindow,e.postMessage('{"method":"'+t+'","value":""}',"*"))},placeVideo:function(t,e,i,n){this.$videoPlayer.css({width:t,height:e}).addClass(n),this.modal.$modal.css({top:i})},placeSectionVideo:function(){if(this.modal.$overlay){var t=this.getVideoDimensions(this.modal.$overlay);this.placeVideo(t.width,t.height,Math.max(0,t.top))}},placeModalVideo:function(){if(this.modal.$modal){var t=this.modal.$modal.width();this.placeVideo(t,t/this.params.aspectRatio),this.modal.centerModal()}},bindModalEvents:function(){this.modal.$overlay.on("modal.shown",t.proxy(this.playVideo,this)).on("modal.hide",t.proxy(this.pauseVideo,this))},behaviors:{overlaySection:function(){this.modal||(this.modal=new e.ui.Modal({modalType:"video",fixed:!1,centerVertically:!1,modalContainer:this.domRoot.closest("section, .container-fluid"),id:this.params.videoId}),this.bindModalEvents(),this.$videoPlayer=this.getVideoEmbed(),this.modal.$modalContent.html(this.$videoPlayer),this.modal.$overlay.on("modal.place",t.proxy(this.placeSectionVideo,this)).on("modal.show",t.proxy(function(t){this.modal.params.modalContainer.addClass("modal-video")},this)).on("modal.hide",t.proxy(function(t){this.modal.params.modalContainer.removeClass("modal-video")},this))),this.modal.show(),this.modal.place()},modal:function(){this.modal||(this.modal=new e.ui.Modal({modalType:"video"}),this.bindModalEvents(),this.$videoPlayer=this.getVideoEmbed(),this.modal.$modalContent.html(this.$videoPlayer),this.modal.$overlay.on("modal.place",t.proxy(this.placeModalVideo,this))),this.modal.show(),this.modal.place()}},sources:{youtube:function(){var i="https://www.youtube.com/embed/"+this.params.videoId,n={autoplay:this.params.autoplay,modestbranding:this.params.modestbranding,enablejsapi:1,rel:0},o=t("<iframe frameborder='0' allowfullscreen></iframe>");return i=e.utils.url.addUrlParams(n,i),o.attr("src",i).addClass("youtube video video-tracking"),o},vimeo:function(){var i="//player.vimeo.com/video/"+this.params.videoId,n={autoplay:this.params.autoplay,title:0,portrait:0,byline:0},o=t("<iframe frameborder='0' allowfullscreen></iframe>");return i=e.utils.url.addUrlParams(n,i),o.attr("src",i).addClass("vimeo video"),o}}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.ui=e.ui||{},e.ui.VideoPlayer=function(e,i){this.domRoot=t(e),this.params=t.extend({},{disablekb:1,modestbranding:1,rel:0},i),this.$videoPlayerColumn=t(".imkt-video-player__video",this.domRoot),this.$videoCustomImage=t(".imkt-video-player__video-image",this.$videoPlayerColumn),this.$fakePlayButton=t("a",this.$videoCustomImage),this.$videoChapterLinksColumn=t(".imkt-video-player__links",this.domRoot),this.$videoChapterLinkWrapper=t("ol",this.$videoChapterLinksColumn),this.$videoChapterLink=t("a",this.$videoChapterLinksColumn),this.YouTubePlayerObject={},this.init()},e.ui.VideoPlayer.prototype={constants:{YOUTUBE_API_URL:"https://www.youtube.com/iframe_api",DISPLAY_TIME_DATA_ATTR:"data-display-time",CONVERTED_TIME_DATA_ATTR:"data-seconds",BOOKMARK_SELECTED_CLASS:"selected",TABLET_BREAKPOINT:800},init:function(){this.fetchAPI(),this.convertInputTimeToSeconds()},fetchAPI:function(){var e=this,i=t.Deferred();"undefined"==typeof YT?i=t.getScript(this.constants.YOUTUBE_API_URL):i.resolve(),t.when(i).then(function(){e.verifyAPI()})},verifyAPI:function(){var t=this;window.onYouTubePlayerAPIReady=function(){t.loadPlayer()}},loadPlayer:function(){var t=this;this.YouTubePlayerObject=new YT.Player(t.params.containerID,{videoId:t.params.videoID,playerVars:{autoplay:t.params.autoplay,disablekb:t.params.disablekb,modestbranding:t.params.modestbranding,rel:t.params.rel},onPlayerReady:t.initPlayer(),events:{onError:t.catchVideoError(),onStateChange:t.onPlayerStateChange}})},isStackedPlayer:function(){return!(t(window).width()>this.constants.TABLET_BREAKPOINT)},initPlayer:function(){this.bindVideoPlayerEvents(),this.isStackedPlayer()||this.setChapterListHeight()},bindVideoPlayerEvents:function(){var e=this;this.hasCustomImage()&&this.$fakePlayButton.on("click",function(){return e.$videoCustomImage.fadeOut(300),e.playVideo(),!1}),this.$videoChapterLink.on("click",function(){var i=t(this),n=parseInt(i.attr(e.constants.CONVERTED_TIME_DATA_ATTR),10);return e.hasCustomImage()&&e.hideVideoCover(),i.hasClass(e.constants.BOOKMARK_SELECTED_CLASS)?(i.removeClass(e.constants.BOOKMARK_SELECTED_CLASS),e.pauseVideo()):(e.$videoChapterLink.removeClass(e.constants.BOOKMARK_SELECTED_CLASS),i.addClass(e.constants.BOOKMARK_SELECTED_CLASS),e.jumpToBookmark(n),e.isStackedPlayer()&&t("html,body").animate({scrollTop:e.$videoPlayerColumn.offset().top-75},350)),!1})},onPlayerStateChange:function(e){function i(){t(".imkt-video-player__links").find("a").removeClass("selected")}switch(e.data){case YT.PlayerState.PLAYING:break;case YT.PlayerState.PAUSED:i();break;case YT.PlayerState.ENDED:i();break;default:return}},hasCustomImage:function(){return!(!this.$fakePlayButton.length||!this.$videoCustomImage.length)},hideVideoCover:function(){this.$videoCustomImage.fadeOut(300)},convertInputTimeToSeconds:function(){var e=this;this.$videoChapterLink.each(function(){var i=t(this),n=i.attr(e.constants.DISPLAY_TIME_DATA_ATTR),o=n.split(":").reverse(),s=0;parseInt(o[0])>0&&(s+=parseInt(o[0])),parseInt(o[1])>0&&(s+=60*parseInt(o[1])),parseInt(o[2])>0&&(s+=3600*parseInt(o[2])),i.attr(e.constants.CONVERTED_TIME_DATA_ATTR,s)})},setChapterListHeight:function(){var t=this.$videoPlayerColumn.outerHeight();this.$videoChapterLinkWrapper.outerHeight()>t&&this.$videoChapterLinkWrapper.height(t)},jumpToBookmark:function(t){this.YouTubePlayerObject.stopVideo(),this.YouTubePlayerObject.seekTo(t,!1),this.YouTubePlayerObject.playVideo()},playVideo:function(){this.YouTubePlayerObject.playVideo()},pauseVideo:function(){this.YouTubePlayerObject.pauseVideo()},catchVideoError:function(){}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.utils=e.utils||{},e.utils.url={getBareUrl:function(t){var e;return t=t||window.location.href,e=t.indexOf("?"),t.substring(0,e>-1?e:t.length)},getUnhashedUrl:function(t){var e;return t=t||window.location.href,e=t.indexOf("#"),t.substring(0,e>-1?e:t.length)},getProtocol:function(t){var e,i="";return t=this.getBareUrl(t||window.location.href),e=t.indexOf("://"),e>-1&&(i=t.substring(0,e)),i},getHostname:function(t){var e,i;return t=this.getBareUrl(t||window.location.href),e=this.getProtocol(t),i=e?e.length+3:0,t.substring(i,t.indexOf("/",i))},getQueryString:function(t){var e,i=window.location.search.substring(1,window.location.search.length);return t&&(t=this.getUnhashedUrl(t),e=t.indexOf("?"),i=e>-1?t.substring(e+1):""),i},updateQueryStringParam:function(t,i){var n=[location.protocol,"//",location.host,location.pathname].join(""),o=document.location.search,s=t+"="+i,a="?"+s;if(o){var r=new RegExp("([?&])"+t+"[^&]*");a=null!==o.match(r)?o.replace(r,"$1"+s):o+"&"+s}e.utils.history.pushState({},"",n+a)},getPathname:function(t){var e,i;return t=t||window.location.href,e=this.getHostname(t),i=t.indexOf("?"),t.substring(t.indexOf(e)+e.length,i>-1?i:t.length)},serialize:function(t){var e,i=[];for(var n in t)null!==t[n]&&(e=[n],e.push("="),e.push(encodeURIComponent(t[n])),i.push(e.join("")));return i.join("&")},getUrlParams:function(t){var e,i,n,o,s=null,a=0;if(e=this.getQueryString(t))for(i=e.split("&"),a;a<i.length;a++)s||(s={}),o=i[a],n=i[a].split("="),s[n[0]]=n.length>1?decodeURIComponent(n[1]):null;return s},addUrlParams:function(e,i){var n,o=[];return i=i||window.location.href,o.push(this.getBareUrl(i)),e=t.extend({},this.getUrlParams(i),e),n=this.serialize(e),n&&(o.push("?"),o.push(n)),o.join("")},removeUrlParams:function(t,e){var i,n=[];e=e||window.location.href,n.push(this.getBareUrl(e));for(var o=this.getUrlParams(e),s=t.length-1;s>=0;s--)"undefined"!=typeof o[t[s]]&&delete o[t[s]];return i=this.serialize(o),i&&(n.push("?"),n.push(i)),n.join("")},getSimpleUrl:function(t,e){t=t||window.location.href;var i=/^((https?|):\/\/)?(www\.)?/,n=/\/$/,o=this.getBareUrl(t),s=o.split("#"),a="";o=s[0],s.length>1&&(a="#"+s[1]);var r=o.replace(i,"").replace(n,"");if(e){var l=this.getQueryString(t);l&&(r+="?"+l),r+=a}return r}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.utils=e.utils||{},e.utils.browser={getBrowserOs:function(){var t=navigator.userAgent,e=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var i in e){var n=e[i];if(n.r.test(t))return n.s}return"unknown"},isWindows:function(){var t=this.getBrowserOs();return t.indexOf("Windows")>-1},isMobile:function(){return e.core.supports.touch()&&screen.width&&screen.width<=e.constants.mobileBreakpoint}}}(jQuery),function(t){t.fn.onThrottled=function(t,e,i){var n;return this.on(t,function(t){clearTimeout(n),n=setTimeout(function(){e(t)},i||100)}),this}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.utils=e.utils||{},e.utils.general={randomString:function(t){for(var e="";e.length<t&&t>0;){var i=Math.random();e+=i<.1?Math.floor(100*i):String.fromCharCode(Math.floor(26*i)+(i>.5?97:65))}return e},numberWithCommas:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.utils=e.utils||{},e.utils.history={supportsHistory:function(){return window.history&&window.history.pushState},pushState:function(t,e,i){this.supportsHistory()&&(window.history.pushState(t,e,i),"undefined"!=typeof analytics&&analytics.page())},pushStateNoTracking:function(t,e,i){this.supportsHistory()&&window.history.pushState(t,e,i)}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.utils=e.utils||{},e.utils.svg=function(e,i){this.targetClass="js-inlineSVG",this.doneClass="js-inlineSVG--done",this.svgLoaders=[],this.processedCounter=t(this.doneClass).length,this.init()},e.utils.svg.prototype={init:function(){t("body").hasClass("edit")||this.convertSvgs(this.targetClass,this.doneClass)},convertSvgs:function(e,i,n){var o=this;t("img."+e).each(function(){var n=t(this),s={id:n.attr("id"),"class":n.attr("class"),src:n.attr("src")},a=t.get(s.src,function(a){var r=t(a).find("svg");t(r).find("style").text(t(r).find("style").text().replace(/\.st/g,".imkt-svg-index-"+o.processedCounter+" .st")),r.attr("id",s.id),r.attr("class",s["class"].replace(e,i)+" imkt-svg-index-"+o.processedCounter),n.replaceWith(r),o.processedCounter++},"xml");o.svgLoaders.push(a)}),t.when.apply(t,o.svgLoaders).done(function(){t(document).trigger("imkt-svg-conversion-done")})}}}(jQuery),function(t){var e=window.imkt||(window.imkt={});e.utils=e.utils||{},e.utils.storage={hasStorage:localStorage&&"function"==typeof localStorage.getItem,getLocalStorage:function(t){if(!this.hasStorage)return this.getCookie(t);var e=localStorage.getItem(t);return e},setLocalStorage:function(t,e){this.hasStorage||this.setCookie(t,e),localStorage.setItem(t,e)},getCookie:function(t){var e=encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&"),i=new RegExp("(?:(?:^|.*;)\\s*"+e+"\\s*\\=\\s*([^;]*).*$)|^.*$");return decodeURIComponent(document.cookie.replace(i,"$1"))||null},setCookie:function(t,e){document.cookie=t+"="+e}}}(jQuery),function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return o(i?i:t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(){function t(){n(this,t);var e=t.getOptimizelyVariations(),i=[];return{withMetadata:function(t){if("string"!=typeof t)throw new Error("Unable to add metadata which is not a string");return i.push(t),this},withMetadataArray:function(t){var e=!0,n=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(e=(s=a.next()).done);e=!0){var r=s.value;if("string"!=typeof r)throw new Error("Unable to add metadata which is not a string")}}catch(l){n=!0,o=l}finally{try{!e&&a["return"]&&a["return"]()}finally{if(n)throw o}}return i=i.concat(t),this},build:function(){var t={safeData:{optimizelyVariations:e,metadata:i},unsafeData:{}};return JSON.stringify(t)}}}return o(t,null,[{key:"getActiveExperiments",value:function(){return window.optimizely&&window.optimizely.activeExperiments?window.optimizely.activeExperiments:[]}},{key:"getVarationMapForExperiment",value:function(t){return window.optimizely.data.state.variationMap[t]}},{key:"getVariationIdForExperiment",value:function(t,e){return window.optimizely.data.experiments[t].variation_ids[e]}},{key:"getOptimizelyVariations",value:function(){var e=t.getActiveExperiments();return e.map(function(e){var i=t.getVarationMapForExperiment(e);return t.getVariationIdForExperiment(e,i)})}}]),t}();e.exports=s},{}],2:[function(t,e,i){"use strict";var n=t("@atlassiansox/signup-context-builder");!function(t){var e=window.imkt||(window.imkt={}),i=new n;e.common=e.common||{},e.utils=e.utils||{},e.common.ProductOndemandForm=function(t,i){e.common.Form.apply(this,arguments)},e.core.extend(e.common.Form,e.common.ProductOndemandForm,{bindEvents:function(){var e=this;this.token="",this.ACCOUNT_NAME_MAX=50,this.ACCOUNT_NAME_MIN=6,this.TRACKER_OPTIMIZELY="optimizely",this.TRACKER_SEGMENT="segment",this.TRACKER_GA="ga",this.timeoutWarning=!0,this.timeoutError=!0,this.isLoggedIn=!1,this.trackClientSideErrors=!0,this.optimizely=window.optimizely||[],this.successPagePath="/ondemand/signup/confirmation?",this.apis={baseDomain:this.params.baseDomain||"",hamlet:{base:this.params.baseHamletPath||"",validateDomain:"/order/ondemand/validate",validateEmail:"/aid/exists",validateForm:"/order/ondemand/evaluation/validate",submitForm:"/order/ondemand/evaluation",experimentsBundle:"/order/experiments/bundle",experimentsOnDemand:"/order/experiments/ondemand",currentUser:"/contact/currentUser",userDetails:"/auth/user/details"},cofs:{base:this.params.baseCofsPath||"",validateDomain:"/nameAvailability",validateEmail:"",validateForm:"/validateEvaluation",createCloud:"/cloud"}},this.iframeId="wacXsrf",this.checkForUserToken(),this.products=this.params.products,this.productKeys=this.products.split(","),this.checkUrlProductKeys(),this.$emailField=this.$fields.filter("[name=email]"),this.$accountNameField=this.$fields.filter("[name=accountName]"),this.$firstNameField=this.$fields.filter("[name=firstName]"),this.$lastNameField=this.$fields.filter("[name=lastName]"),this.$passwordField=this.$fields.filter("[name=aodPass]"),this.$showPasswordField=this.$fields.filter("#show-password-checkbox"),this.$submitButton=this.$domRoot.find(".imkt__form--product-on-demand__button--submit"),this.$timeoutWarnings=this.$submitButton.parent().find(".timeout-warnings"),this.$emailField.onThrottled("input",t.proxy(this.onchange_emailField,this),800),this.$accountNameField.onThrottled("input",t.proxy(this.onchange_accountNameField,this),800),this.$passwordField.onThrottled("input",t.proxy(this.onchange_passwordField,this),80),this.onchange_passwordField(this.$passwordField.filter(":target")),this.$showPasswordField.on("click",function(t){e.showPassword()}),t("a[track-link-ga]").on("click",function(i){var n=t(this),o=n.attr("track-link-ga");e.trackAnalyticsEvent("cart-cloud","Clicked",o,null,null,!1,[e.TRACKER_GA])}),t(".help").on("mouseover",function(e){t(this).find(".tooltip").show()}).on("mouseout",function(e){t(this).find(".tooltip").hide()}),this.$form.on("submit",function(t){e.onSubmit_form(t)}),e.trackAnalyticsEvent("cart-cloud","Viewed Checkout Step","view-signup-page",null,"cart-cloud.viewed-checkout-step.view-signup-page",!0,[e.TRACKER_OPTIMIZELY,e.TRACKER_SEGMENT,e.TRACKER_GA]),e.trackAnalyticsProduct(0,"Added Product","cart-cloud.added-product.")},setToken:function(t){this.token=t},getToken:function(){return this.token},checkForUserToken:function(){var e=this,i=this.params.authTokenApi;t.ajax({url:i,type:"GET",success:t.proxy(function(i,n,o){var s=t.parseHTML(i),a=t(s).filter("#xsrfToken").text();e.setToken(a),e.isLoggedIn=!0,e.updateFormLoggedIn()},this),error:t.proxy(function(t,e,i){},this)})},checkUrlProductKeys:function(){var t=e.utils.url.getUrlParams()||{},i=t.product||!1;i&&(this.products=i,this.productKeys=this.products.split(","))},updateFormLoggedIn:function(){var e=this,i=e.getToken();if(i){var n=this.apis.baseDomain+this.apis.hamlet.base+this.apis.hamlet.userDetails;t.ajax({url:n,type:"GET",headers:{"ATL-XSRF-Token":i,"content-type":"application/json"},success:t.proxy(function(t,i,n){t&&"undefined"!=typeof t.username&&(e.$emailField.val(t.username),e.$emailField.attr("disabled","disabled").addClass("disabled"),e.$emailField.nextAll(".error-message, .aui-icon, .hamlet-error-message").hide(),e.$emailField.parent().find(".inform-message.logged-in").show(),e.$accountNameField.val()||e.$accountNameField.parent().find(".inform-message.logged-in").show(),e.$firstNameField.val(t.firstName),e.$lastNameField.val(t.lastName))},this),error:t.proxy(function(t,e,i){},this)})}},onSubmit_form:function(t){if(t.preventDefault(),!this.validateOnDemand())return!1},onchange_accountNameField:function(e){var i=this,n=t(e.currentTarget),o=n.val(),s=this.apis.baseDomain+this.apis.hamlet.base+this.apis.hamlet.validateDomain+"/"+o;return n.nextAll(".error-message, .aui-icon, .inform-message").hide(),!!o&&(o.length<i.ACCOUNT_NAME_MIN?(n.nextAll(".error-message.domain-length-min").show(),!1):o.length>i.ACCOUNT_NAME_MAX?(n.nextAll(".error-message.domain-length-max").show(),!1):(n.nextAll(".aui-iconfont-build").css("display","inline-block"),void t.ajax({url:s,type:"POST",success:t.proxy(function(t,e,o){var s=t&&t.success;n.nextAll(".aui-iconfont-build").hide(),s?n.nextAll(".validation-success").css("display","inline-block"):(n.nextAll(".error-message.domain-unavailable").show(),i.isLoggedIn&&n.nextAll(".inform-message.domain-unavailable.logged-in").show())},this),error:t.proxy(function(t,e,i){n.nextAll(".aui-iconfont-build").hide()},this)})))},onchange_passwordField:function(e){var i=t(e.currentTarget),n=i.val(),o=["Weak","Fair","Good","Strong","Very Strong"],s=0,a=0,r=this.$domRoot.find(".passwordstrength"),l=r.find(".passwordstrength-message span");if(!n||n.length<8)i.parent().find(".error-message").show(),r.attr("data-strength","none"),l.text(o[0]);else{i.parent().find(".error-message").hide();for(var c={},u=0;u<n.length;u++)c[n[u]]=(c[n[u]]||0)+1,s+=5/parseInt(c[n[u]]);var h={digits:/\d/.test(n),lower:/[a-z]/.test(n),upper:/[A-Z]/.test(n),nonWords:/\W/.test(n)},d=0;for(var m in h)d+=h[m]===!0?1:0;s+=10*(d-1),a=s>80?4:s>60?3:s>50?2:s>40?1:0,r.attr("data-strength",a),l.text(o[a])}},onchange_emailField:function(e){var i=t(e.currentTarget),n=i.val();if(!n||!this.getToken()){var o=this.apis.baseDomain+this.apis.hamlet.base+this.apis.hamlet.validateEmail+"/"+n,s=this.validateEmail(n);if(i.nextAll(".error-message, .hamlet-error-message, .aui-icon").hide(),!n)return!1;if(!s)return i.nextAll(".error-message").show(),!1;i.nextAll(".aui-iconfont-build").css("display","inline-block"),t.ajax({url:o,type:"POST",success:t.proxy(function(t,e,n){i.nextAll(".aui-iconfont-build").hide();var o=t&&!t.success;!o&&t.message?i.nextAll(".hamlet-error-message").show():i.nextAll(".email-validation-success").css("display","inline-block")},this),error:t.proxy(function(t,e,n){i.nextAll(".aui-iconfont-build").hide()},this)})}},checkField:function(t,e){t.val().length?e&&t.nextAll(".error-message").hide():t.nextAll(".error-message").show()},checkAccountField:function(t){t.val().length||t.nextAll(".domain-length-min").show()},validateOnDemand:function(){var e=this;this.checkField(this.$firstNameField,!0),this.checkField(this.$lastNameField,!0),this.checkAccountField(this.$accountNameField),this.checkField(this.$emailField),this.onchange_passwordField(this.$passwordField.filter(":target")),this.$form.find(".validation-error-message").hide();var i=t(".error-message, .hamlet-error-message").filter(":visible"),n=this.apis.baseDomain+this.apis.cofs.base+this.apis.cofs.validateForm;if(i.length)return this.$form.find(".validation-error-message").show(),this.trackClientSideErrors&&t(i).each(function(i){var n=t(this).text().toLowerCase().replace(/ /g,"-").replace(/,/g,"");e.trackAnalyticsEvent("cart-cloud","Submitted with validation Error","cloud",n,"cart-cloud.submitted-with-validation-error."+n,!1,[e.TRACKER_OPTIMIZELY,e.TRACKER_SEGMENT,e.TRACKER_GA])}),!1;e.trackAnalyticsEvent("cart-cloud","Submitted","cloud",null,"cart-cloud.submitted.{key}",!1,[e.TRACKER_OPTIMIZELY,e.TRACKER_SEGMENT,e.TRACKER_GA]),e.trackPhantom(),t(".submit--initial-text").hide(),t(".submit--processing-text").show(),this.$submitButton.attr("disabled","disabled");var o={contactDetails:{email:this.$emailField.val(),firstName:this.$firstNameField.val(),lastName:this.$lastNameField.val()},organisationDetails:null,onDemandAccountDetails:{accountName:this.$accountNameField.val(),adminUsername:"admin",adminPassword:this.$passwordField.val(),productKeys:this.productKeys,timeZone:null},termsOfServiceAccepted:!0,creditCardDetails:null},s={"content-type":"application/json"},a=e.getToken();a&&(s["ATL-XSRF-Token"]=a),t.ajax({url:n,type:"POST",dataType:"json",headers:s,data:JSON.stringify(o),success:t.proxy(function(t,i,n){204===n.status?e.submitOnDemand(o):e.trackAnalyticsEvent("cart-cloud","Submitted with validation Error","cloud",null,"cart-cloud.submitted-with-validation-error.{key}",!1,[e.TRACKER_OPTIMIZELY,e.TRACKER_SEGMENT,e.TRACKER_GA])},this),error:t.proxy(function(i,n,o){if(e.$submitButton.find(".submit--initial-text").show(),e.$submitButton.find(".submit--processing-text").hide(),e.$submitButton.removeAttr("disabled"),e.$form.find(".validation-error-message").show(),"undefined"!=typeof i.responseJSON&&"undefined"!=typeof i.responseJSON.fieldErrors){var s=i.responseJSON.fieldErrors;t.each(s,function(t,i){e.$form.find(".admin-error-message").append("<br/>"+i).show(),e.trackAnalyticsEvent("cart-cloud","Submitted with validation Error","cloud",null,"cart-cloud.submitted-with-validation-error."+t,!1,[e.TRACKER_OPTIMIZELY,e.TRACKER_SEGMENT,e.TRACKER_GA])})}},this)})},submitOnDemand:function(t){this.postCofsCloud(t)},postCofsCloud:function(e){var n=this.apis.baseDomain+this.apis.cofs.base+this.apis.cofs.createCloud,o=this,s=[];t.each(this.productKeys,function(t,e){var i={product:e};s.push(i)});var a="undefined"!=typeof i&&"function"==typeof i.build?i.build():"",r={adminUsername:"admin",adminPassword:e.onDemandAccountDetails.adminPassword,cloudName:e.onDemandAccountDetails.accountName,email:e.contactDetails.email,firstName:e.contactDetails.firstName,lastName:e.contactDetails.lastName,products:s,signupContext:a},l={"content-type":"application/json"},c=o.getToken();c&&(l["ATL-XSRF-Token"]=c),t.ajax({url:n,type:"POST",dataType:"json",headers:l,data:JSON.stringify(r),success:t.proxy(function(t,i,n){t&&t.progressUri?o.updateStatusResults(t.progressUri,e):(o.$timeoutWarnings.find(".error-message.timeout-warning").show(),o.trackAnalyticsEvent("cart-cloud","Submitted with Error","cloud",null,"cart-cloud.submitted-with-error.{key}",!1,[o.TRACKER_OPTIMIZELY,o.TRACKER_SEGMENT,o.TRACKER_GA]))},this),error:t.proxy(function(t,e,i){o.$timeoutWarnings.find(".error-message.timeout-warning").show(),o.trackAnalyticsEvent("cart-cloud","Submitted with Error","cloud",null,"cart-cloud.submitted-with-error.{key}",!1,[o.TRACKER_OPTIMIZELY,o.TRACKER_SEGMENT,o.TRACKER_GA])},this)})},updateStatusResults:function(e,i){var n=this,o=(new Date).getTime(),s=((new Date).getTime(),setTimeout(function(){n.timeoutWarning&&(n.$timeoutWarnings.find(".error-message.timeout-warning").show(),n.trackAnalyticsEvent("cart-cloud","Waited","Sign-up page submitted >15s",null,null,!1,[n.TRACKER_SEGMENT]))},15e3)),a=setTimeout(function(){n.timeoutError&&n.trackAnalyticsEvent("cart-cloud","Waited","Sign-up page submitted >30s",null,null,!1,[n.TRACKER_SEGMENT])},3e4);t.ajax({url:e,type:"GET",success:t.proxy(function(t,e,r){if(t&&t.cloudId&&t.requestId){var l=(new Date).getTime(),c=parseInt((l-o)/1e3,10);n.timeoutWarning=!1,n.timeoutError=!1,clearTimeout(s),clearTimeout(a),n.trackAnalyticsEvent("cart-cloud","Completed Checkout Step","complete-signup-page",c,"cart-cloud.completed-checkout-step.complete-signup-page",!0,[n.TRACKER_OPTIMIZELY,n.TRACKER_SEGMENT,n.TRACKER_GA]),n.trackAnalyticsProduct(0,"Confirmed Evaluation","cart-cloud.confirmed-evaluation.",n.redirectSuccessPage(i,t.cloudId,t.requestId))}},this),error:t.proxy(function(t,e,i){n.$timeoutWarnings.find(".error-message.timeout-warning").show(),n.trackAnalyticsEvent("cart-cloud","Submitted with Error","cloud",null,"cart-cloud.submitted-with-error.{key}",!1,[n.TRACKER_OPTIMIZELY,n.TRACKER_SEGMENT,n.TRACKER_GA])},this)})},trackPhantom:function(t){var e=this;e.optimizely.push(["trackEvent","signupPressedSubmit"]);var i={path:"/phantom",referrer:window.location.href,search:window.location.search,title:document.title,url:this.apis.baseDomain+"/phantom?state=formsubmit&product="+this.products};"undefined"!=typeof analytics?analytics.page("cofs_wac_phantom",i,t):t&&t()},trackAnalyticsProduct:function(t,e,i,n){var o=this,s=o.productKeys;t<s.length&&(o.trackAnalyticsEvent("cart-cloud",e,s[t]+".cloud",null,i+s[t],!1,[o.TRACKER_OPTIMIZELY,o.TRACKER_SEGMENT,o.TRACKER_GA]),o.trackAnalyticsProduct(t+1,e,i)),n&&n()},trackAnalyticsEvent:function(t,e,i,n,o,s,a){var r=this;if(a.indexOf(r.TRACKER_OPTIMIZELY)>-1&&o&&(o=o.replace("{key}",r.productKeys[0]),r.optimizely.push(["trackEvent",o])),a.indexOf(r.TRACKER_SEGMENT)>-1&&"undefined"!=typeof analytics){var l={category:t,label:i,value:n};analytics.track(e,l)}a.indexOf(r.TRACKER_GA)>-1&&t&&e&&"undefined"!=typeof ga&&ga("send","event",t,e,i,n,{
nonInteraction:s})},redirectSuccessPage:function(e,i,n){var o=this;if(!e||!i||!n||"undefined"==typeof e.onDemandAccountDetails)return o.$timeoutWarnings.find(".error-message.timeout-warning").show(),!1;var s={ondemandurl:e.onDemandAccountDetails.accountName,products:this.products,cloudId:i,requestId:n},a=t.param(s);window.location=this.apis.baseDomain+this.successPagePath+a},showPassword:function(){this.$showPasswordField.is(":checked")?this.$passwordField.attr("type","text"):this.$passwordField.attr("type","password")},validateEmail:function(t){var e=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return e.test(t)}})}(jQuery)},{"@atlassiansox/signup-context-builder":1}]},{},[2]);