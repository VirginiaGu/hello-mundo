!function(e){function t(e,t){if(!document.body.contains(e))return console.log("No container"),null;var a=d3.select(e).datum(t),r=null;return a.each(function(e){var t=d3.select(this);r=e.geo&&e.geo.isGeoChart?new tt.mapcharts.get:new tt.charts.get,r.initialize(t,e),r.showLoading(t)}),r}function a(e,a){if(e.constructor===Array&&a.constructor===Array){var n=[];for(var l in e)if(e.hasOwnProperty(l)){var i=e[l],o=a[l],s=t(i,o);n.push(s)}var d=[],u=n.slice(),c=u.reverse();return r(c,d,n),n}}function r(e,t,a){var r=e.length,l=e[r-1];r||(a.chartRendered=!0),r>0&&1!=l.drawStarted&&document.body.contains(l.container.node())&&(l.draw(),l.drawStarted=!0,n(e,t,a))}function n(e,t,a,l){var i=e.length,o=e[i-1];if(o.chartRendered||o.breakOnErr)t.push(e.pop()),r(e,t,a);else{null!=l&&clearTimeout(l);var l=setTimeout(function(){n(e,t,a,l)},10)}}function l(e,t,a){return Pt.globalProp={},a.fontL1Size=null!=e.canvas&&null!=e.canvas.fontSize&&"function"!=typeof e.canvas.fontSize?i(t,null,e.canvas.fontSize,Pt.fontL1Size,a.fontL1Size):i(t,null,null,Pt.fontL1Size,a.fontL1Size),a.fontL2Size=null!=e.chart&&null!=e.chart.fontSize&&"function"!=typeof e.chart.fontSize?i(t,null,e.chart.fontSize,Pt.fontL2Size,a.fontL2Size):null!=e.canvas&&null!=e.canvas.fontSize&&"function"!=typeof e.canvas.fontSize?i(t,null,e.canvas.fontSize,Pt.fontL2Size,a.fontL2Size):i(t,null,null,Pt.fontL2Size,a.fontL2Size),Pt.globalProp.fontL1Color=null,Pt.globalProp.fontL2Color=null,Pt.globalProp.fontL1Family=null,Pt.globalProp.fontL2Family=null,Pt.globalProp.fontL1Style=null,Pt.globalProp.fontL2Style=null,Pt.globalProp.fontL1Weight=null,Pt.globalProp.fontL2Weight=null,Pt.globalProp.textShadow=null,Pt.globalProp.animation={},Pt.globalProp.animation.enabled=null!=e.chart&&null!=e.chart.plot&&null!=e.chart.plot.animation&&null!=e.chart.plot.animation.enabled?e.chart.plot.animation.enabled:!0,Pt.globalProp.animation.duration=null!=e.chart&&null!=e.chart.plot&&null!=e.chart.plot.animation&&null!=e.chart.plot.animation.duration?e.chart.plot.animation.duration:null,Pt.globalProp.animation.easingType=null!=e.chart&&null!=e.chart.plot&&null!=e.chart.plot.easingType&&null!=e.chart.plot.animation.easingType?e.chart.plot.animation.easingType:null,Pt.globalProp.datalabels={},a.datalabels=null==a.datalabels?{}:a.datalabels,Pt.globalProp.datalabels.enabled=null,a.datalabels.fontSize=null!=e.chart&&null!=e.chart.plot&&null!=e.chart.plot.datalabels&&null!=e.chart.plot.datalabels.fontSize&&"function"!=typeof e.chart.plot.datalabels.fontSize?i(t,null,parseInt(e.chart.plot.datalabels.fontSize),Pt.fontL3Size,a.datalabels.fontSize):null!=e.chart&&null!=e.chart.fontSize&&"function"!=typeof e.chart.fontSize?i(t,null,e.chart.fontSize,Pt.fontL3Size,a.datalabels.fontSize):null!=e.canvas&&null!=e.canvas.fontSize&&"function"!=typeof e.canvas.fontSize?i(t,null,e.canvas.fontSize,Pt.fontL3Size,a.datalabels.fontSize):i(t,null,null,Pt.fontL3Size,a.datalabels.fontSize),Pt.globalProp.datalabels.fontColor=null,Pt.globalProp.datalabels.fontFamily=null,Pt.globalProp.datalabels.fontStyle=null,Pt.globalProp.datalabels.fontWeight=null,Pt.globalProp.events={},Pt.globalProp.events.mouseMove=null,Pt.globalProp.events.mouseOut=null,Pt.globalProp.events.click=null,Pt.globalProp.events.doubleClick=null,a}function i(e,t,a,r,n){var l=Math.min(e.width,e.height),i=R(tt,"fontProperties.ratio")&&tt.fontProperties.ratio;"function"==typeof i&&(i=i(e)),t=null==t?i&&!isNaN(i)?i:.038:t;var o=Math.round(l*t);Pt.minL1Size=tt.fontProperties.minsize,Pt.maxL1Size=tt.fontProperties.maxsize;var s=Pt.minL1Size,d=Pt.maxL1Size;o=s>o?s:o>d?d:o,null!=a&&(t=parseInt(a)*t/o,o=Math.round(l*t),o=s>o?s:o>d?d:o);var n=null==r?null==n?{}:n:r;return n.size=o,n.l1=function(){return n.size},n.l2=function(){return n.size-2},n.l3=function(){return n.size-3},n.l4=function(){return n.size-4},n.l5=function(){return n.size-5},n}function o(e,t,a){var r=!e.hasNullFormatter[t+(D(a)?a:"")];return function(e){return null==e&&r}}function s(e){return null!=e&&null!=e[0]&&null!=e[0][0]&&e[0][0]instanceof Array}function u(e){var t="undefined"==typeof e||null==e?0:e instanceof Array?e[0]:e;return t}function c(e,t,a,r){if(null!=e||null!=a){var n=r&&r.seriesdata.chartdata;e=null==e&&null!=a?(n[a]||n[0]).type||r.seriesdata.type:e;var l,i=!isNaN(parseInt(e));if("numeric"==t)l=i?parseInt(e):tt.charttype[e.toString().toLowerCase()];else if("string"==t)l=i?tt.charttypenames.get(parseInt(e)):e.toString().toLowerCase();else{var o=i?tt.charttypenames.get(parseInt(e)):e.toString().toLowerCase(),s=l=i?parseInt(e):tt.charttype[e.toString().toLowerCase()];l={name:o,value:s}}return l}}function h(e,t){var a=e.seriesdata&&e.seriesdata.chartdata||[],r=a.map(function(a){return c(a.type||e.seriesdata.type,t||"numeric")});return r}function p(e,t,a,r){return"time"==t?e.sort(function(e,t){return e=Te(a(e),null,r).getTime(),t=Te(a(t),null,r).getTime(),e-t}):"numeric"==t&&e.sort(function(e,t){return e=a(e),t=a(t),e-t}),e}function f(e,t,a,r){var n=e.filter(function(e){var n=r(e);return n>=t&&a>=n?e:void 0});return n}function g(e,t){if(null==e||null==Tt[e])return e||"";var a=Tt[e],r=JSON.parse("["+a+"]");return t=I(t,1),r.map(function(e){return e*t})}function m(e,t){return e||(t&&/dot/g.test(t)?"round":null)}function y(e,t,a,r){var n=JSON.parse("["+a+"]").reduce(function(e,t){return t+e},0);e.attr("stroke-dasharray",a).attr("stroke-dashoffset",n).transition().duration(t).ease("linear").attr("stroke-dashoffset",0).each("end",function(){r&&r.chartRendered&&y(e,t,a,r)})}function v(e){var t=e.chart.effects.choice,a=Et[t];if(a){var r=e.chart.effects.options[t];"dropShadow"===t&&(r.blur=Math.max(0,r.blur));var n=Et.get(t,r);return n}}function x(e){return function(t){switch(e){case"asterisk":return"M0 0 C"+.284*-t+" "+.994*-t+" "+.284*t+" "+.994*-t+" 0 0 C"+.73*t+" "+.76*-t+" "+1.2*t+" "+.277*-t+" 0 0 C"+1.008*t+" "+.142*t+" "+.703*t+" "+.703*t+" 0 0 C"+.27*t+" "+.923*t+" "+.284*-t+" "+.923*t+" 0 0 C"+.712*-t+" "+.66*t+" "+.923*-t+" "+.234*t+" 0 0 C"+.98*-t+" "+.284*-t+" "+.745*-t+" "+.73*-t+" 0 0";case"bean":return"M0 "+.5*t+" A"+.25*t+" "+.5*t+" 0 0 1 0 "+.5*-t+" A"+.15*t+" "+.25*t+" 0 0 1 1 0 A"+.15*t+" "+.25*t+" 0 0 1 0 "+.5*t;case"butterfly":return"M0 "+.25*-t+" C0 "+.25*-t+" "+t+" "+-t+" "+.3*t+" "+.25*t+" "+.6*t+" "+.8*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" C0 "+.25*-t+" "+-t+" "+-t+" "+.3*-t+" "+.25*t+" "+.6*-t+" "+.8*t+" 0 "+.4*t+" 0 "+.4*t+" M0 "+.25*-t+" L"+.1*t+" "+.7*-t+" M0 "+.25*-t+" L"+.1*-t+" "+.7*-t;case"clover":return"M0 0 C"+.2*-t+" "+-t+" "+t+" "+.15*-t+" 0 0 "+t+" "+.25*t+" "+.2*-t+" "+t+" "+.05*-t+" "+.05*t+" "+.7*-t+" "+.6*t+" "+.7*-t+" "+.6*-t+" 0 "+.05*-t+" Z";case"cloverFour":return"M"+.1*-t+" "+.1*-t+" C"+.5*-t+" "+.8*-t+" "+.5*t+" "+.8*-t+" "+.1*t+" "+.1*-t+" "+.8*t+" "+.5*-t+" "+.8*t+" "+.5*t+" "+.1*t+" "+.1*t+" "+.5*t+" "+.8*t+" "+.5*-t+" "+.8*t+" "+.1*-t+" "+.1*t+" "+.8*-t+" "+.5*t+" "+.8*-t+" "+.5*-t+" "+.1*-t+" "+.1*-t+" "+.5*-t+" "+.8*-t+" "+.5*t+" "+.8*-t+" "+.1*t+" "+.1*-t;case"cross":return"M"+-t/2+" "+.2*-t+" L"+.2*-t+" "+.2*-t+" L"+.2*-t+" "+-t/2+" L"+.2*t+" "+-t/2+" L"+.2*t+" "+.2*-t+" L"+t/2+" "+.2*-t+" L"+t/2+" "+.2*t+" L"+.2*t+" "+.2*t+" L"+.2*t+" "+t/2+" L"+.2*-t+" "+t/2+" L"+.2*-t+" "+.2*t+" L"+-t/2+" "+.2*t+" Z";case"diamond":return"M"+.4*-t+" 0 L0 "+-t/2+" L"+.4*t+" 0 L0 "+t/2+" Z";case"ellipse":return"M"+.5*-t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*t+" 0 A"+.5*t+" "+.35*t+" 0 0 1 "+.5*-t+" 0";case"gear":return"M"+.134*-t+" "+.541*-t+" L"+.127*-t+" "+.696*-t+" "+.131*t+" "+.696*-t+" "+.138*t+" "+.547*-t+" "+.282*t+" "+.47*-t+" "+.393*t+" "+.571*-t+" "+.598*t+" "+.39*-t+" "+.494*t+" "+.282*-t+" "+.531*t+" "+.134*-t+" "+.699*t+" "+.134*-t+" "+.699*t+" "+.138*t+" "+.539*t+" "+.138*t+" "+.474*t+" "+.279*t+" "+.575*t+" "+.386*t+" "+.369*t+" "+.578*t+" "+.286*t+" "+.474*t+" "+.131*t+" "+.531*t+" "+.131*t+" "+.696*t+" "+.127*-t+" "+.696*t+" "+.127*-t+" "+.531*t+" "+.276*-t+" "+.467*t+" "+.39*-t+" "+.575*t+" "+.574*-t+" "+.379*t+" "+.47*-t+" "+.279*t+" "+.524*-t+" "+.138*t+" "+.7*-t+" "+.138*t+" "+.7*-t+" "+.138*-t+" "+.528*-t+" "+.138*-t+" "+.47*-t+" "+.282*-t+" "+.568*-t+" "+.383*-t+" "+.396*-t+" "+.568*-t+" "+.275*-t+" "+.463*-t+" "+.134*-t+" "+.541*-t+" Z";case"heart":return"M0 "+.2*-t+" C"+.7*t+" "+.7*-t+" "+.7*t+" "+.2*t+" 0 "+.45*t+" "+.7*-t+" "+.2*t+" "+.7*-t+" "+.7*-t+" 0 "+.2*-t+"Z";case"star":return"M0 "+.5*-t+" L"+.122*t+" "+.12*-t+" L"+.5*t+" "+.12*-t+" L"+.197*t+" "+.12*t+" L"+.306*t+" "+.5*t+" L0 "+.274*t+" L"+.306*-t+" "+.5*t+" L"+.197*-t+" "+.12*t+" L"+.5*-t+" "+.12*-t+" L"+.122*-t+" "+.12*-t+" Z";case"malteseCross":return"M"+.38*-t+" "+.5*-t+" A"+.38*t+" "+.1*t+" 0 0 1 "+.38*t+" "+.5*-t+" L"+.2*t+" "+.2*-t+" L"+.5*t+" "+.38*-t+" A"+.1*t+" "+.38*t+" 0 0 1 "+.5*t+" "+.38*t+" L"+.2*t+" "+.2*t+" L"+.38*t+" "+.5*t+" A"+.38*t+" "+.1*t+" 0 0 1 "+.38*-t+" "+.5*t+" L"+.2*-t+" "+.2*t+" L"+.5*-t+" "+.38*t+" A"+.1*t+" "+.38*t+" 0 0 1 "+.5*-t+" "+.38*-t+" L"+.2*-t+" "+.2*-t+" Z";case"square":return"M"+.5*-t+" "+.5*-t+" L"+.5*t+" "+.5*-t+" "+.5*t+" "+.5*t+" "+.5*-t+" "+.5*t+" Z";case"triangle-up":return"M"+.5*-t+" "+.285*t+" L0 "+.43*-t+" "+.5*t+" "+.285*t+" Z";case"triangle-down":return"M0 "+.43*t+" "+.5*-t+" "+.285*-t+" "+.5*t+" "+.285*-t+" Z";case"triangle-right":return"M"+.5*-t+" "+.43*-t+" "+.285*t+" 0 "+.5*-t+" "+.43*t+" Z";case"triangle-left":return"M"+.5*t+" "+.43*t+" "+.285*-t+" 0 "+.5*t+" "+.43*-t+" Z";case"arrow":return"M"+.5*-t+" "+.2*t+" L0 "+.5*-t+" "+.5*t+" "+.2*t+" "+.25*t+" "+.2*t+" "+.25*t+" "+.5*t+" "+.25*-t+" "+.5*t+" "+.25*-t+" "+.2*t+" Z";case"rocket":return"M"+.5*-t+" "+.5*t+" L0 "+.5*-t+" "+.5*t+" "+.5*t+" 0 "+.25*t+" "+.5*-t+" "+.5*t+" Z";case"line":return"M"+.5*-t+" 0 L"+.5*t+" 0";default:return"M"+-t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+t/2+" 0 A"+t/2+" "+t/2+" 0 0 1 "+-t/2+" 0"}}}function b(e,t,a,r){var n,l=r.color,i=10,o=r.strokeWidth,s=r.imageSize,d=r.transform,u=x(a.symbol||r.symbol),c=null!=a.imageUrl&&""!==a.imageUrl,h=I(a.size,I(o,1)),p=h*r.symbolSize.outer,f=h*r.symbolSize.inner,g=null!=d?"translate("+d[0]+","+d[1]+")":null,m=(null!=t?h:p)*(null!=s?s:i);if(null!=t){var y=Pt.patternSVG.select("defs");n=W(y,"marker",[1],"#","id",t),n.attr({id:t,orient:0,viewBox:-h*i/2+" "+-h*i/2+" "+h*i+" "+h*i,markerUnits:"userSpaceOnUse",markerWidth:h*i,markerHeight:h*i})}else n=e;var v=W(n,"path",[1],".","class","outer");v.attr({d:u(c?m:p*i),transform:g}).style({fill:function(){if(c){var e={name:a.imageUrl,width:m,height:m,x:-m/2,y:-m/2};return"url("+z()+"#"+Et.get("imageFill",e)+")"}return a.outerFillColor||l},"fill-opacity":a.outerFillOpacity,stroke:a.outerStrokeColor||l,"stroke-opacity":a.outerStrokeOpacity,"stroke-width":a.outerStrokeWidth});var b=W(n,"path",c?[]:[1],".","class","inner");return b.attr({d:u(f*i),transform:g}).style({fill:a.innerFillColor||l,"fill-opacity":a.innerFillOpacity,stroke:a.innerStrokeColor||l,"stroke-opacity":a.innerStrokeOpacity,"stroke-width":a.innerStrokeWidth}),n}function k(e){var t={left:0,top:0,right:0,bottom:0};if(!e.isAxisCategory)return t;var a=e.systemConf.chart.axes.xaxis,r=e.systemConf.chart.axes.yaxis,n=null!=a.minRange&&""!==a.minRange,l=null!=a.maxRange&&""!==a.maxRange,i=r.some(function(e){return null!=e.minRange&&""!==e.minRange}),o=r.some(function(e){return null!=e.maxRange&&""!==e.maxRange});if(n&&l&&i&&o)return t;var s=e.axes.rotated,d=(e.dataset.seriesTypes,e.systemConf.chart.plot.plotoptions),u=e.canvasarea,h=d3.max(e.seriesdata.map(function(t){var a=t.plotoptions,r=0,n=c(t.type||e.userdata.seriesdata.type,"string"),l=tt.utils.getValueOfPlotOptions(a?a.marker:null,d[n].marker);if(/(area|arearange|line)/.test(n)&&l("enabled")&&$(e,"marker")&&Q(e,"marker",Math.min(u.width,u.height))){var i=l("size");r=I(i,I(a?a.strokeWidth:d[n].strokeWidth,1))}else"scatter"===n&&(r=I(l("size"),2));return 10*r}))/2;return{left:(s?i:n)?t.left:h,top:(s?l:o)?t.top:h,right:(s?o:l)?t.right:h,bottom:(s?n:i)?t.bottom:h}}function w(e,t,a){var r=D(a)?a-1:t.repeat||1/0;if(!e.node()||!r)return void e.style({transform:null,opacity:null});var n="fade"===t.type,l=t.duration,i=t.easingType||(n?"linear-in-out":"linear"),o=l,s=n?500:0,d=n?0:l,u=o+s,c=n?{transform:"scale(1)",opacity:0}:{transform:"scale(0)"},h=n?{transform:"scale(0)",opacity:1}:{transform:"scale(1)"};e.transition(),e.style(h).transition().delay(s).duration(o).ease(i).style(c).transition().delay(u).duration(d).ease(i).style(h).each("end",function(){w(e,t,r)})}function C(e,t){e.attr("x",t.left).attr("y",t.top).attr("width",t.width).attr("height",t.height).style("fill-opacity",0).style("stroke","transparent")}function O(e,t){if(null!=e&&e.constructor==Object){var a,r="";for(var n in e)e.hasOwnProperty(n)&&(a=e[n],r+=null==a||""==a?"$$":a);return r=t+r,r=r.replace(/\./g,"_"),r=r.replace(/[`~!@#$%^&*( )|+\-=?;:'",.<>\{\}\[\]\\\/\s]/gi,"")}return null!=t?t:void 0}function A(e,t,a){var r=d3.hsl(e),n=d3.scale.linear().domain([-1,0,1]).range([d3.hsl(r.h,r.s,.1),r,d3.hsl(r.h,r.s,.9)]).interpolate(d3.interpolateRgb),l=d3.scale.linear().domain(t).range(a);return function(e){return n(l(e))}}function S(e){return e&&document.body.contains(e)&&"none"!=e.style.display?e.getBBox():{x:0,y:0,height:0,width:0}}function P(e){if(!tt.dataEncoded||null==e)return e;var t=document.createElement("div");t.innerHTML=encodeURI(e);var a=t.textContent;return decodeURI(a)}function M(e){if(tt.dataEncoded||null==e)return e;var t=document.createElement("div");t.textContent=P(e);var a=t.innerHTML;return a}function T(e){var t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,a=/[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi,r=new RegExp(t),n=new RegExp(a);return e.match(r)||e.match(n)}function E(e){return e.slice(0)}function z(){return d3.selectAll("base").node()?location.href.split(location.search||location.hash||/[?#]/)[0]:""}function R(e,t,a){var r=t.replace(/\[(\w+)\]/g,".$1");r=r.replace(/^\./,"");var n=r.split("."),l=n.reduce(function(e,t){return"undefined"==typeof e||null===e?e:e[t]},e);return a?l:!!l}function L(e,t){return"function"==typeof e?e.apply(null,t):"string"==typeof e&&"function"==typeof window[e]?window[e].apply(null,t):e}function N(e,t){for(var a,r=0,n=e.length;n>r&&(null==a||""===a);r++)a=e[r][t];return a}function I(e,t){var a=null==e||""===e?t:e,r=JSON.parse(a);return a="number"==typeof r?parseFloat(r):"boolean"==typeof r?JSON.parse(r):r}function B(e,t,a,r,n,l){var i,o=Math.min(n,l),s=r*o/100,d=a*o/100;return i=e[t],i=null==i||""===i?null:d>i?d:i>s?s:parseFloat(i)}function D(e){return void 0!==e&&null!==e}function H(e){return e+"".toLocaleLowerCase()==="true"}function Y(e){return"[object Array]"===Object.prototype.toString.call(e)}function F(e){return e+="",e.replace(/ /g,"px ")+"px"}function _(){var e=[].slice.call(arguments),t=e[0]===!0&&e.shift(),a=e.shift();return arguments.length&&"function"==typeof a?void(t?a.apply(e[0],e.splice(1)):a.apply(void 0,e)):!1}function V(e,t){if(!e||!t)return null;var a,r={};for(var n in e)if(e.hasOwnProperty(n)&&t.hasOwnProperty(n)){var l=e[n],i=t[n];if(!l||l.constructor!=Object&&l.constructor!=Array)l==i&&(r[n]=l,a=!0);else{var o=V(l,i);null!=o&&(r[n]=o,a=!0)}}return a?r:null}function W(e,t,a,r,n,l,i){r=r||"",l=l||"";var o=e.selectAll(t+r+l).data(a),s=o.enter().append(t);return n&&s.attr(n,l),i&&s.style(i),o.exit().remove(),o}function J(e,t,a,r,n,l,i,o,s){if(null==t)return t;var d,u;s=s||e,o?(d=o.width,u=o.height):(d=r.right-r.left,u=r.bottom-r.top);var c=0;if("left"==n||"right"==n?(a.top+a.height-i.bottom>r.bottom&&(c+=(a.top+a.height-i.bottom-r.bottom)/a.height),a.top+i.top<r.top&&(c+=(r.top-(a.top+i.top))/a.height),u=a.height-Math.max(0,a.top+a.height-i.bottom-r.bottom)-Math.max(0,r.top-(a.top+i.top))):("bottom"==n||"top"==n)&&(a.left+a.width-i.right>r.right&&(c+=(a.left+a.width-i.right-r.right)/a.width),a.left+i.left<r.left&&(c+=(r.left-(a.left+i.left))/a.width),d=a.width-Math.max(0,a.left+a.width-i.right-r.right)-Math.max(0,r.left-(a.left+i.left))),c>0){var h=Math.ceil((1-c)*t.length);e.textContent=t.substring(0,h-1)+l;var p=s.getBoundingClientRect();(p.width!=a.width||p.height!=a.height)&&Z(e,s,t,d,u,p,l)}}function X(e,t,a,r,n,l,i){function o(e,t,a){var r,n=Object.create(e),l=n.tlx+n.trx,i=n.trY+n.bry,o=n.brx+n.blx,s=n.tly+n.bly;return s>a&&(r=s/(s-a),n.tly=n.tly-n.tly/r,n.bly=n.bly-n.bly/r),l>t&&(r=l/(l-t),n.tlx=n.tlx-n.tlx/r,n.trx=n.trx-n.trx/r),i>a&&(r=i/(i-a),n.trY=n.trY-n.trY/r,n.bry=n.bry-n.bry/r),o>t&&(r=o/(o-t),n.brx=n.brx-n.brx/r,n.blx=n.blx-n.blx/r),n}var s,d,u,c;return s=l&&i?e-a:e,d=l&&i?e:e+a,u=l&&!i?t-r:t,c=l&&!i?t:t+r,n=o(n,a,r),"M"+s+","+(c-n.bly)+"L"+s+","+(u+n.tly)+"A"+(n.tlx+","+n.tly+" 0 0 1 "+(s+n.tlx)+","+u)+"L"+(d-n.trx)+","+u+"A"+(n.trx+","+n.trY+" 0 0 1 "+d+","+(u+n.trY))+"L"+d+","+(c-n.bry)+"A"+(n.brx+","+n.bry+" 0 0 1 "+(d-n.brx)+","+c)+"L"+(s+n.blx)+","+c+"A"+(n.blx+","+n.bly+" 0 0 1 "+s+","+(c-n.bly))}function U(e,t,a){var r=tt.utils.getVal(N(t,"fontSize")),n=N(t,"fontFamily"),l=N(t,"fontWeight"),i=N(t,"fontStyle"),o=N(t,"textShadow"),s=N(t,"fontColor"),d=N(t,"textDecoration"),u={"font-size":r+"px","font-family":n,"font-weight":l,"font-style":i,"text-shadow":o,"text-decoration":d};return D(e)?(u[a?"color":"fill"]=s,void e.style(u)):(u.color=s,u)}function G(e){e.append("title").text(function(){return this.parentNode.textContent})}function Z(e,t,a,r,n,l,i){function o(r){e.textContent=a.substring(0,d-u)+i,r||(s=t.getBoundingClientRect())}var s,d=e.textContent.length-1,u=i.length;if(l.width>r||l.height>n)for(var c=0;d>=c;){if(o(),s.width<=r&&s.height<=n)return;d--}else for(var c=a.length;c>d;){if(o(),s.width>=r||s.height>=n)return d--,void o(!0);d++}}function q(e,t,a,r){function n(){return/(bar|bullet|gantt)/.test(r)?300:/(line|area|arearange)/.test(r)?600:/(scatter|bubble$|funnel|pyramid)/.test(r)?1e3:500}var l=t&&t.animation?Rt(e.animation,t.animation,!0):e.animation,i=a.systemConf.chart.plot.animation,o={};return o.type=l.type,o.enabled=$(a,"animation")?JSON.parse(N([l,i],"enabled")):!1,o.easingType=l.easingType||i.easingType||(/(scatter|bubble$|packedbubble)/.test(r)?"cubic-in-out":null)||"linear",o.duration=o.enabled?I(l.duration,+(i.duration||n())):0,o}function K(e,t,a,r,n,l,i,o,s,d,u){function c(){if(g++,h)for(var n=0;m>n;n++)e[n]=a[g>n?n:Math.max(0,g-1)],t[n]=a[g>n?n:g];else e[g-1]=a[g-1],t[g]=a[g];if(m>g){var i=1==g&&h?(r.indexOf(p.getX(a[0]))-(g-1))*v:0,o=(h?r.indexOf(p.getX(a[g]))-r.indexOf(p.getX(a[g-1])):1)*v,y=h?null!=p.getY(a[g],f)&&null!=p.getY(a[Math.max(0,g-1)],f):null!=p.getY(a[g],f);y?d.attr(s(e)).transition().delay(i).duration(o).ease(l).attr(s(t)).each("end","scatter"===u?function(e,t){t==m-1&&c()}:c):c()}}var h="pointTween"==n,p=o.dataset,f=o.yaxiscolumnorder,g=h?0:-1,m=a.length,y=i-(17*r.length-1),v=Math.round(y/(h?r.length-1:m));c()}function Q(e,t,a){var r=+e.systemConf.canvas.intelligence.dimension[t];return a>=r}function $(e,t){var a=+e.systemConf.canvas.intelligence.dataCount[t];return a>=e.dataObject.totalnoofdatas}function ee(e,t){return t-=Math.PI/2,[Math.cos(t)*e,Math.sin(t)*e]}function te(e){var e=e%(2*Math.PI);return 0>e?e+2*Math.PI:e}function ae(e,t,a,r,n){var l=0-(e.x-.5*n),i=e.width+n-l,o=0-(e.y-.5*n),s=e.height+n-o,d=r-l,u=r-i,c=r-o,h=r-s;return[t/2-d/2+u/2,a/2-c/2+h/2]}function re(e,t,a){return"string"==typeof e&&e.indexOf("%")>-1?t*+e.replace(/%/g,"")*.01:I(e,a)}function ne(e){return d3.scale.linear().range([0,1]).domain([e<Math.PI?Math.PI/2:3*Math.PI/2,Math.PI])(e)}function le(e,t,a){return e>t&&(t=e+((e=t)-t)),0>e&&0>t&&(e+=2*Math.PI,t+=2*Math.PI),0>e&&t>=0&&(0>a?t=2*Math.PI:e=0),a=0>a?a+2*Math.PI:a,a>=e&&t>=a}function ie(e,t){for(var a=t.systemConf.metadata,r=a.axes.y[e],n=1,l=r.length-1,i=a.columns[r[n-1]],o=i[i.datatype];l>=n;n++){var s=a.columns[r[n]],d=s[s.datatype];o=V(o,d)}return o}function oe(e,t,a,r,n,l){var i={},o="0.71em",s="0.35em",d="",l=null==l?r.tickPadding():l;switch(e){case"top":i.rotate=[t,0,-(Math.max(n,0)+l)],t>=0&&45>t||t>315&&360>=t?i.dy=d:t>=45&&90>=t||t>=90&&135>=t||t>=225&&315>=t?i.dy=s:t>135&&225>t&&(i.dy=o),i.textAnchor="0"==t||180==parseInt(t)||360==parseInt(t)?"middle":parseInt(t)<180?"end":"start";break;case"bottom":i.rotate=[t,0,Math.max(n,0)+l],t>=0&&45>t||t>315&&360>=t?i.dy=o:t>=45&&90>=t||t>=90&&135>=t||t>=225&&315>=t?i.dy=s:t>135&&225>t&&(i.dy=d),i.textAnchor="0"==t||180==parseInt(t)||360==parseInt(t)?"middle":parseInt(t)<180?"start":"end";break;case"left":i.rotate=[t,-(Math.max(n,0)+l),0],t>=0&&45>t?i.dy=s:t>=45&&90>=t||t>=90&&135>=t?i.dy=o:(t>135&&225>t||t>=225&&315>=t||t>315&&360>=t)&&(i.dy=d),i.textAnchor="90"==t||270==parseInt(t)?"middle":t>90&&270>t?"start":"end";break;case"right":i.rotate=[t,Math.max(n,0)+l,0],t>=0&&45>t||t>135&&225>t?i.dy=s:t>=225&&315>=t||t>315&&360>=t?i.dy=o:(t>=90&&135>=t||t>=45&&90>=t)&&(i.dy=d),i.textAnchor="90"==t||270==parseInt(t)?"middle":t>90&&270>t?"end":"start"}return i}function se(e,t){e.attr({dy:t.dy,transform:"rotate("+t.rotate[0]+" "+t.rotate[1]+" "+t.rotate[2]+")"}).style({"text-anchor":t.textAnchor})}function de(e,t,a,r,n,l,i,o,s,d){var u=a.plotarea,c=a.chartarea,h=a.canvasarea,d="ticklabel"==s?d:{},p=a.actChartObj||a,f=.5,g=re(It(d.height,d.maxHeight)||tt.axis.ticks.maxTickSizeRatio_Vert,c.height),m=re(It(d.width,d.maxWidth)||tt.axis.ticks.maxTickSizeRatio_Hori,c.width),y=null==n||"ellipsis"==n?"..":"",v={};v.left=f*u.left,v.right=f*(h.width-(u.left+u.width)),v.top=f*u.top,v.bottom=f*u.bottom;null!=l.rangeBand?"bottom"==t||"top"==t?l.rangeExtent():l.rangeExtent().reverse():l.range();if(null==e&&"ticklabel"==s){var x=null==o.tickValues()?l.ticks?l.ticks.apply(l,[10]):l.domain():o.tickValues(),b=i.selectAll(".tick").data(x,l);e=b.selectAll("text.ticklabel")}e.filter(function(){var e,a=this.getBoundingClientRect(),n=-1,l=this.childNodes[0],o=l.textContent,d=a,c={width:m,height:g};if("ticklabel"==s){if(m<a.width){n=(a.width-m)/a.width;var h=Math.ceil((1-n)*l.textContent.length);l.textContent=l.textContent.substring(0,h-2)+y,a=this.getBoundingClientRect()}if(g<a.height){n=(a.height-g)/a.height;var h=Math.ceil((1-n)*l.textContent.length);l.textContent=l.textContent.substring(0,h-2)+y,a=this.getBoundingClientRect()}}var f=i.selectAll(".domain").node().getBoundingClientRect(),x={left:a.left-f.left,right:a.left+a.width-f.left,top:a.top-f.top,bottom:a.top+a.height-f.top,width:a.width,height:a.height},b={};if(b.left=0,b.right="bottom"==t||"top"==t?Fe(p,"width",u):0,b.top=0,b.bottom="bottom"==t||"top"==t?0:Fe(p,"height",u),"left"!=t&&"right"!=t||0==r||180==r||360==r?"bottom"!=t&&"top"!=t||90==r||270==r||(x.left+v.left<b.left||x.right-v.right>b.right)&&(e=!0,J(l,l.textContent,x,b,t,y,v,c,this)):(x.top+v.top<b.top||x.bottom-v.bottom>b.bottom)&&(e=!0,J(l,l.textContent,x,b,t,y,v,c,this)),"ticklabel"==s&&!e){var a=this.getBoundingClientRect();(a.width!=d.width||a.height!=d.height)&&Z(l,this,o,c.width,c.height,a,y)}})}function ue(e,t,a){a&&(tt.labelRenderer&&tt.labelRenderer.drawLabelsFromQueue(t.labelQueue,t.labelArray,e),t.labelArray=[],t.labelQueue=[],t.notesArray=tt.annotation?tt.annotation.draw(e,t.notesArray):[])}function ce(e,t){var a=e.params,r=a.stacked,n=a.chartObj,l=a.yscale,i=n.renderer[t].barDatasetIndex?n.renderer[t].barDatasetIndex():0,o=a.commonPlotOptions,s=c(n.seriesdata[t].type||n.userdata.seriesdata.type,"string"),d="bullet"==s,u="gantt"==s,h=n.dataObject.groupedByStack,p=n.barscale2.rangeBand()||0,f=u?o.levelMarker&&o.levelMarker.bandWidth:p,g=d?JSON.parse(o.bandWidth||null)||p/3:p,m=JSON.parse(o.maxBandWidth||null)||p;g=d?Math.min(g,m):g,f=u?Math.min(g,f||g):f;var y=d?Math.max(0,(f-g)/2):r?Math.max(0,((n.barscale2.rangeBand()||0)-m)/2):0,v=u?Math.min(g,(g-f)/2):d?0:y,x=function(){return l.rangeBand?l.rangeBand()/2:0},b={stacked:r,categories:a.xscale.domain(),axisrotated:a.axisrotated,bandwidth1:n.barscale1,bandwidth2:n.barscale2,barDatasetIndex:i,padding:y,yscale:l,hasNegValue:a.hasNegValue,yaxiscolumnorder:a.yaxiscolumnorder,addRangeBand:x,barWidth:g,levelMarkerWidth:f,levelMarkerPadding:v,stackGroupIndex:n.userdata.seriesdata.stackGroup?he(t,h.keys(),function(e){var t=h.get(e);return t.map(function(e){return e.si})}):0};return n.renderer[t].commonOption=b,b}function he(e,t,a){return d3.max(t,function(t,r){var n=a?a(t,r):t;return-1!=n.indexOf(e)?r:-1})}function pe(){for(var e in tt.legutil.patternPallete)tt.legutil.patternPallete[e]=tt.legutil.patternPallete[e].map(function(e){return tt.imageFilePath+e})}function fe(e,t,a,r){function n(e,t,a,r){return Math.sqrt(Math.pow(a-e,2)+Math.pow(r-t,2))}if(t=null!=t?"."+t:"",Mt.isMouseDevice){var l={};for(var i in a)l[i+t]=a[i];e.on(l)}if(Mt.isTouchDevice){var o,s=10,d=150,u=500,c=50,h={},p=0,f=0,g=u-d,m=a.mousedown,y=a.mousemove,v=a.mouseup,x=a.mouseout,b=a.click,k=a.dblclick,w=a.mouseover,C="touchstart"+t,O="touchmove"+t,A="touchend"+t;e.on(C,function(){h.time=new Date,h.location=ve(this,d3.event),m&&(m.apply(this,arguments),d3.event.preventDefault())}).on(O,function(){if(r&&null!=document.elementFromPoint){var e=(new Date).getTime(),t=0==p||e-p>c,a=event.touches[0],n=document.elementFromPoint(a.pageX-window.pageXOffset,a.pageY-window.pageYOffset);if(!t||"svg"===n.localName||null!=n.id.match(/tooltip/gi))return;if(n!=this){if(o!=n){var l=o||this,i=d3.select(l),s=i.on(A),d=i.datum(),u=i.attr("id")||i.attr("class"),h=null!=u?u.match(/(\d)+$/gi):null;h=null!=h&&null!=h[0]?parseInt(h[0]):null,null!=s&&null!=h&&s.call(l,d,h)}var i=d3.select(n),f=i.on(O),d=i.datum(),u=i.attr("id")||i.attr("class"),h=null!=u?u.match(/(\d)+$/gi):null;return h=null!=h&&null!=h[0]?parseInt(h[0]):null,void(null!=f&&null!=h&&(f.call(n,d,h),o=n,p=e))}}y?(y.apply(this,arguments),d3.event.preventDefault()):w&&(w.apply(this,arguments),d3.event.preventDefault())}).on(A,function(){var e=new Date,t=ve(this,d3.event),a=e-h.time,r=null!=h.location?n(h.location[0],h.location[1],t[0],t[1]):null,l=e-f;g>0&&g>=l&&l>0&&s>=r?(k&&(k.apply(this,arguments),d3.event.preventDefault()),f=0):d>=a&&s>=r?b&&(b.apply(this,arguments),d3.event.preventDefault()):v?v.apply(this,arguments):x&&x.apply(this,arguments),f=e})}a=null}function ge(e,t,a){if(t=null!=t&&""!=t?"."+t:"",Mt.isMouseDevice){if(""!==t)e.on(t,null);else for(var r in a)e.on(r,null);a=null}}function me(e,t,a,r,n){var l=null==t?null:t[r];null!=l?"string"==typeof l?window[l](d3.event,e):l(d3.event,e):null!=n&&("string"==typeof n?window[n](d3.event,e):n(d3.event,e))}function ye(e,t,a,r){var n=t.events,l=a.systemConf.chart.plot.events,i=null!=e?tt.utils.getValueOfPlotOptions(e.events,n)(r):null!=n?n[r]:null!=l?l[r]:null;return i}function ve(e){var t=d3.mouse(e);return t}function xe(e){return e===tt.charttype.area||e===tt.charttype.stkdarea||e===tt.charttype.arearange}function be(e){return e===tt.charttype.bar||e===tt.charttype.stkdbar||e===tt.charttype.bullet||e===tt.charttype.gantt}function ke(e){return e===tt.charttype.scatter||e===tt.charttype.bubble}function we(e){return e===tt.charttype.geoscatter||e===tt.charttype.geobubble}function Ce(e){return e===tt.charttype.bubble||e===tt.charttype.bubblepie||e===tt.charttype.geobubble}function Oe(e){return ke(e)||e===tt.charttype.bubblepie}function Ae(e,t,a,r,n,l,i){function o(t){"time"==a&&(t=Te(t,d,e));var r="function"==typeof d?d(t,a,e):d.customFormat?L(d.customFormat,[t,a,e]):Pe(d,t,e,a);return s(r)}function s(e){return 0!=l?P(e):M(e)}if(!a)return s(t);if(null==t)return e&&null!=e.nullformatting?s(L(e.nullformatting,[t,a,e])):t;var d=e?e[n+"format"]||e.format:null;return d||(d="time"==a&&e&&e.subfunction?Me(e.subfunction,e.useUTC):Se(a)),t.constructor==Array?t.map(function(e){return o(e)}).join(D(d.arraySeperator)?d.arraySeperator:i):o(t)}function Se(e){var t={};switch(e){case"time":t.specifier="YYYY";break;case"ordinal":break;default:t.thousandSeperator=","}return t}function Pe(e,t,a,r){var n;switch(r){case"time":var l=a&&null!=a.useUTC&&JSON.parse(a.useUTC)?d3.time.format.utc:d3.time.format,i=ze(e.specifier);n="auto"==e.specifier?t:null!=i?l(i)(t):t;break;case"ordinal":var o=e.letterCase;t+="",n=o?"uppercase"===o?t.toUpperCase():"lowercase"===o?t.toLowerCase():t[0].toUpperCase()+t.substring(1):t;break;default:var s=e.currency,d=Re(e);t="decimal"==e.type?parseFloat(t):t,n=d(t),n=Le(e,n),I(e.trailingZeros,!0)||(n=n.replace(/\.(\d)+0+/gi,function(){var e=parseFloat(arguments[0]);return e?"."+e.toString().split(".")[1]:""})),null!=s&&(n=/(\+|\-)/.test(n[0])?n[0]+s+n.slice(1):s+n)}return n=(null!=e.prefix?e.prefix:"")+n+(null!=e.suffix?e.suffix:"")}function Me(e,t){var t=null!=t&&JSON.parse(t),a=t?d3.time.format.utc:d3.time.format;switch(e){case"YEAR":return a("%Y");case"MONTH":return a("%B");case"ABSDAY":return a("%a");case"DAY":return a("%e");case"WEEKDAY":return a("%A");case"WEEK":return a("Week %W");case"ABSHOUR":return a("%I");case"SECOND":return a("%S");case"ABSMINUTE":case"MINUTE":return a("%M");case"MILLISEC":return a("%L");case"HOUR":return a("%H hrs");case"DATETIME":return a("%d %b %Y %H:%M:%S");case"DATE":return a("%x");case"TIME":return a("%X");case"TIMESTAMP":return a("%x %X hrs");case"ABSMONTH":return a("%b %Y");case"ABSWEEK":return a("W%U %Y");case"ABSQUARTER":return function(e){var r=t?e.getUTCMonth():e.getMonth(),n=t?e.getUTCFullYear():e.getFullYear(),l=Math.floor(r/3)+1;return a("Q"+l+" "+n)};case"QUARTER":return function(e){var r=t?e.getUTCMonth():e.getMonth(),n=Math.floor(r/3)+1;return a("Q"+n)};case 100:return a("%d %b %Y %H:%M:%S %L");default:throw"UNKNOWN TYPE 111: "+e}}function Te(e,t,a){var r=a?a.inputformat:null,n=new Date(e.toString()),l="function"==typeof r?r:"function"==typeof window[r]?window[r]:null;if(!(e instanceof Date||null==r||!l&&"timestamp"==r.toLowerCase())){e=l||typeof e==String?e:e.toString();var i=null!=a&&null!=a.useUTC&&JSON.parse(a.useUTC)?d3.time.format.utc:d3.time.format,o=l?l(e,a):i(ze(r)).parse(e);n=null==o?n:new Date(o)}return isNaN(n)&&(n=new Date(e)),isNaN(n)&&(n=new Date(JSON.parse(e))),n}function Ee(e,t,a,r,n){var l={format:{decimalPlaces:1,prefix:null,suffix:"%"}},i=Ae(l,t,a,r,n);return null!=i&&"string"==typeof i?i.replace(/\.0+%/,"%"):i}function ze(e){if(e)for(var t in Ht){var a=e.indexOf(t);a>=0&&"%"!=e[a-1]&&(e=e.replace(t,Ht[t]))}return e}function Re(e){var t=e.signEnabled?"+":"",a=null!=e.zeroPadding&&e.zeroPadding.enabled?"0"+e.zeroPadding.digits:"",r=null!=e.thousandSeperator?",":"",n=null!=e.decimalPlaces?"."+e.decimalPlaces:"",l=null!=e.type?null!=e.decimalPlaces&&"decimal"===e.type?"r":Yt[e.type]||"":null!=e.decimalPlaces?"f":0==e.decimalPlaces?"d":"",i=t+a+r+n+l;return d3.format(i)}function Le(e,t){var a=e.thousandSeperator,r=e.decimalSeperator,n=t.split(/\./);return(null!=a&&","!=a?n[0].replace(/,/g,a):n[0])+(n[1]?(null!=r?r:".")+n[1]:"")}function Ne(e){return/(left|right)/.test(e)?"bottom":"left"}function je(e,t,a,r){var n=a.datatype,l=a[n];return e.replace(At,function(e,a){var i="";return Y(t[a])?(i=Ae(l,t[a][0],n,r,"tooltip",!1),i+=" - "+Ae(l,t[a][1],n,r,"tooltip",!1)):i=Ae(l,t[a],n,r,"tooltip",!1),i})}function Ie(e,t){var a=e.slice(),r=a.splice(0,a.length);return null!=t&&r.push(t),r}function Be(e,t,a,r,n){"plot"==n?e.plotValues.push({data:t,text:a}):e[n+"Values"].push({id:t,text:a,x:r[0],y:r[1]})}function De(e,t,a,r,n,l){return e=JSON.parse(e||0),t=JSON.parse(t||0),a=JSON.parse(a||0),r=JSON.parse(r||0),e+a>n&&(e-=e+a-n),t+r>l&&(t-=t+r-l),[e,t]}function He(e,t,a){var r=e[a+"Values"];return r.indexOf(r.filter(function(e){return"plot"===a?JSON.stringify(e.data)==JSON.stringify(t):e.id==t})[0])}function Ye(e){if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){var t,a=e.dataObject.getAxisRotated(),r=e.plotarea,n=Fe(e,"width")-r.width,l=Fe(e,"height")-r.height,i=e.container.selectAll(".x-axis-0"),o=e.container.selectAll(".d3container").selectAll("#zohocharts_scroll"),s=+o.attr("scrollbarSize");a?(e.scrolledY=0,t={x:-r.left,y:0,width:r.width+r.left,height:r.height}):(e.scrolledX=0,t={x:0,y:0,width:r.width,height:r.height});var d=O(t,"rect_axis"),u=W(e.svg,"defs",[1]),c=W(u,"clipPath",[1],"#","id",d),h=W(c,"rect",[1]);h.attr(t),i.attr("clip-path","url(#"+d+")"),o.style({left:r.left+"px",top:r.top+"px",height:r.height+(a?0:s)+"px",width:r.width+(a?s:0)+"px",position:"absolute",margin:0,padding:0,"background-color":"rgba(0,0,0,0)",
"box-sizing":"content-box"}).on("scroll",function(){var t=d3.event.srcElement||d3.event.target,n=a?t.scrollTop:t.scrollLeft;e.scrolledY=a?n:0,e.scrolledX=a?0:n;var l=e.container.selectAll(".seriesholder"),i=e.container.selectAll(".x-axis-0"),o=l.attr("clip-path").replace(/url\(|\)|\"/gi,""),s=d3.transform(l.attr("transform")).translate,d=a?s[0]:r.left-n,u=a?r.top-n:s[1];l.attr("transform","translate("+d+","+u+")"),e.container.selectAll(".labelholder").attr("transform","translate("+d+","+u+")"),e.container.selectAll("#zcbarhighlight").attr("transform","translate("+(a?0:-n)+","+(a?-n:0)+")"),e.container.selectAll(o).selectAll("rect").attr(a?{y:n}:{x:n});var c=a?{y:r.top-n,height:r.height+n}:{x:r.left-n,width:r.width+n};e.eventHandler.trackerElement.attr(c).attr("clip-path","url("+o+")");var h=d3.transform(i.attr("transform")).translate,d=a?h[0]:r.left-n,u=a?r.top-n:h[1];c=a?{x:-r.left,y:n,width:r.width+r.left,height:r.height}:{x:n,y:0,width:r.width,height:e.axes.xaxis.ticks.preCalcAxisLen},axisClipPathId=O(c,"rect_axis");var p=W(e.svg,"defs",[1]),f=W(p,"clipPath",[1],"#","id",axisClipPathId),g=W(f,"rect",[1]);g.attr(c),i.attr({transform:"translate("+d+","+u+")","clip-path":"url(#"+axisClipPathId+")"})}),o.style(a?{"overflow-y":"auto","overflow-x":"hidden"}:{"overflow-x":"auto","overflow-y":"hidden"}),o.selectAll(".child").style({height:r.height+(a?l:0)+"px",width:r.width+(a?0:n)+"px","pointer-events":"none",margin:0,padding:0,"background-color":"transparent"});var p=o.node();p.scrollLeft=0,p.scrollTop=0;var f=e.eventHandler,g={click:f.click,dblclick:function(){f.doubleclick(e.eventHandler.mousePos,e.eventHandler.trackerElement.node())},contextmenu:f.contextMenu},m={mousemove:f.mouseMove,mouseout:f.mouseOut};fe(o,"chart",g),fe(o,"chartmove",m)}}function Fe(e,t,a){return a=a||e.plotarea,null==e.systemConf.chart[t]?a[t]:Math.max(a[t],+e.systemConf.chart[t])}function _e(e,t,a,r){var n=a.systemConf;return U(e,[{fontColor:Ve(n,r,t.fontColor,a)},t,n.chart.plot.datalabels,n.chart,n.canvas,Pt])}function Ve(e,t,a,r){var n=!e.legend.patternPallete&&!a&&r.userdata.chart&&r.userdata.chart.plot&&r.userdata.chart.plot.datalabels&&void 0!==r.userdata.chart.plot.datalabels.fontColor&&!r.userdata.chart.plot.datalabels.fontColor?t:a;return n||N([e.chart.plot.datalabels,e.chart,e.canvas,Pt],"fontColor")}function We(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.y1>t.y2||t.y1>e.y2)}function Je(e,t){return!(e.x1<t.x1||e.y1<t.y1||e.x2>t.x2||e.y2>t.y2)}function Xe(e,t,a){if(a.dataObject.hasLevelMarker||!t)return 0;var r=[],n=a.systemConf,l=a.dataObject.getAxisRotated(),i=.75*(l?a.plotarea.width:a.plotarea.height),o=n.chart.plot.datalabels,s=n.chart,d=n.canvas,u=a.staticPaneSVG.selectAll("g.labelholder").selectAll("text.dummyText").data([1]);if(u.enter().append("text").attr("class","dummyText").text("qtyplkjhgfd").style("fill","none"),t.forEach(function(t){var h="x"==e?t:a.seriesdata[t.si];if(!h.disabled){var p=h.plotoptions,f=c(h.type||a.userdata.seriesdata.type,"numeric"),g=n.chart.plot.plotoptions[tt.charttypenames.get(f)],m=p&&p.datalabels?Rt(g.datalabels,p.datalabels,!0):g.datalabels,y=Ge(m,a),v=Math.min(+(m.padding||0),i);if(y){var x=+tt.utils.getVal(N([m,o,s,d],"fontSize"));u.style("font-size",x+"px"),x=S(u.node()).height,x+=("y"==e?Math.max(0,v):0)+(JSON.parse(o.handleOverlapping||!1)&&!l&&"y"==e?x:0),r.push(x)}}}),"y"==e&&a.dataObject.noofBarEnabledSeries&&a.dataObject.isstacked()&&!a.dataObject.isStackedPercentChart){var h=n.chart.plot.plotoptions.bar.datalabels.stackLabels,p=h?JSON.parse(h.show||!1):!1;if(p){var f=Math.min(+(h.padding||0),i),g=+tt.utils.getVal(N([h,o,s,d],"fontSize"));u.style("font-size",g+"px"),g=S(u.node()).height+Math.max(0,f),r.push(g)}}u.remove();var m=r.length>0?Math.max.apply(null,r):0;return m}function Ue(e,t,a,r,n,l,i){var o=e.dataset,s=t.yaxiscolumnorder,d=t.stacked,u=a.showAs,h=e.systemConf.metadata.columns,p="datalabels"==r&&null!=o.labelidx,f=c(e.seriesdata[l].type||e.userdata.seriesdata.type,"numeric")===tt.charttype.bubblepie,g=I(t.commonPlotOptions.dataindex,3),m=p&&null!=h[o.labelidx];u=p&&null==h[o.labelidx]?o.labelidx:u;var y=m?"label":"x"==u?"x":"z"==u&&null!=o.zidx?"z":"y",v=e.seriesdata[l].yaxiscolumnorder||[0,0],x=h[o.getColumnIdx(y,v)].datatype,b=o.getColumn(y,v)[x],k=m||"percent"!=u?Ae:Ee;return function(t){if(m){var a=o.getDataLabelValue(t);return k(b,a,x,e,"datalabels")}var c="function"==typeof n?n(t):n,a="percent"==u?("stackLabels"==r?t:d?t.y:f?t[g]:o.getY(t,s,i))/c*100:"x"==u?o.getX(t):"z"==u&&null!=o.zidx?o.getZ(t):"y"===u?"stackLabels"==r?t:o.getY(t,s,i):o.getCustomizedVal(e,u,l,null,null,t,r);return/(x|y|z|percent)/.test(u)?k(b,a,x,e,r):a}}function Ge(e,t){return $(t,"datalabels")?null!=t.dataset.labelidx||JSON.parse(N([e,t.systemConf.chart.plot.datalabels],"show")||!1):!1}function Ze(e,t){return t.dataObject.noofBarEnabledSeries&&t.dataObject.isstacked()&&!t.dataObject.isStackedPercentChart&&e&&JSON.parse(e.show||!1)}function qe(e,t,a,r,n){var l=+a[0],i=+a[1],o=t.plotarea;n=n||{left:-l,top:-i,right:o.width-l,bottom:o.height-i},margin={left:-r,right:-r,top:0,bottom:0},pattern="..",orient="bottom",e.each(function(){var e=S(this),t={left:e.x,top:e.y,width:e.width,height:e.height};J(this,this.textContent,t,n,orient,pattern,margin)})}function Ke(e){var t=-e.scrolledX||0,a=-e.scrolledY||0;return{left:t,top:a,right:Fe(e,"width"),bottom:Fe(e,"height")}}function Qe(e,t,a,r){for(var n=[],l=[],i=[],o=a-r,s=function(e,t){return e.dist-t.dist},d=function(e,t){return e[0].y1-t[0].y1},u=o,c=0;a>c;c++)e[c]||n.push(c);e.forEach(function(e){e.sort(s)}),e.forEach(function(e){e.forEach(function(e,t){0!=t&&(i[t]=i[t]||[],i[t].push(e))})}),i.forEach(function(e){e.sort(s)}),i.forEach(function(e){e.forEach(function(e){l.push([e])})}),l.forEach(function(e){o>0?o--:e[0].hide=!0}),l=l.slice(0,u),l.sort(d),l.forEach(function(a){var r=a[0],l=r.y2-r.y1,i=Math.max(Math.floor((r.y1-t)/l),0);if(e[i]){for(var o,s=n[0],d=0,u=0;u<n.length;u++){var c=Math.abs(t+n[u]*l-r.y1);null==o&&(o=c),o>c&&(o=c,s=n[u],d=u)}if(i>s){n.splice(d,1);var h=s;e.forEach(function(t,a){var n=t[0];a>s&&n.y1<r.y1&&(e[h]=t,h=a)}),e[h]=[r]}else{n.splice(d,1);for(var h=[r],p=i;s>=p;p++)if(e[p]){if(e[p][0].y1>r.y1){var f=e[p];e[p]=h,h=f}}else e[p]=h}}else e[i]=a}),e.forEach(function(r,n){var l=r[0],i=l.y2-l.y1,o=t+n*i-l.y1;l.translate=Math.abs(o)<i&&a>n+1&&!e[n+1]&&0>o?0:o}),e.forEach(function(r,n){var l=r[0],i=l.y2-l.y1,o=t+n*i-l.y1;l.translate=Math.abs(o)<i&&a>n+1&&(!e[n+1]||!e[n+1][0].translate)&&0>o?0:o})}function $e(e,t,a,r){return e.forEach(function(e){var n=e.y2-e.y1,l=Math.max(0,Math.floor((e.y1-r)/(e.y2-e.y1)));e.dist=e.y1<r?r-e.y1:e.y1-(r+l*n),a[l]||(a[l]=[],t++),a[l].push(e)}),t}function et(e,t,a,r,n,l,i,o,s){var d=5;if(!e.hide){null==t&&(t=Math.floor((r-a)/(e.y2-e.y1)));var u=s?null==n?r-e.y2:l[n].y1-e.y2:null==n?e.y1-a:e.y1-l[n].y2;o+=null!=n&&We(e,l[n])&&-d>u?Math.abs(u):0,n=i,l.push(e),i++}return{prev:n,count:i,totalslot:t,need:o}}var tt={};tt.version="1.0.5-issuefix",tt.versionName="Euclid",tt.d3Version="3.4.8",tt.model=function(){},tt.axis=function(){},tt.legend=function(){},tt.renderer=function(){},tt.dataset=function(){},tt.scale=function(){},tt.events=function(){},tt.plot=function(){},tt.plot.canvas=function(){},tt.charttype={};var at=tt.charttype.line=11,rt=tt.charttype.pie=8,nt=tt.charttype.bar=9,lt=tt.charttype.stkdbar=10,it=tt.charttype.scatter=12,ot=tt.charttype.area=14,st=tt.charttype.stkdarea=15,dt=tt.charttype.bubble=20,ut=tt.charttype.packedbubble=19,ct=tt.charttype.funnel=7,ht=tt.charttype.web=16,pt=tt.charttype.sunburst=17,ft=tt.charttype.pyramid=13,gt=tt.charttype.dial=18,mt=tt.charttype.bullet=6,yt=tt.charttype.arearange=21,vt=tt.charttype.geoscatter=23,xt=tt.charttype.geobubble=22,bt=tt.charttype.bubblepie=5,kt=tt.charttype.gantt=24;tt.charttypenames=d3.map(),tt.charttypenames.set(tt.charttype.line,"line"),tt.charttypenames.set(tt.charttype.pie,"pie"),tt.charttypenames.set(tt.charttype.bar,"bar"),tt.charttypenames.set(tt.charttype.stkdbar,"bar"),tt.charttypenames.set(tt.charttype.scatter,"scatter"),tt.charttypenames.set(tt.charttype.area,"area"),tt.charttypenames.set(tt.charttype.funnel,"funnel"),tt.charttypenames.set(tt.charttype.web,"web"),tt.charttypenames.set(tt.charttype.stkdarea,"area"),tt.charttypenames.set(tt.charttype.sunburst,"sunburst"),tt.charttypenames.set(tt.charttype.pyramid,"pyramid"),tt.charttypenames.set(tt.charttype.bubble,"bubble"),tt.charttypenames.set(tt.charttype.dial,"dial"),tt.charttypenames.set(tt.charttype.packedbubble,"packedbubble"),tt.charttypenames.set(tt.charttype.bullet,"bullet"),tt.charttypenames.set(tt.charttype.arearange,"arearange"),tt.charttypenames.set(tt.charttype.gantt,"gantt"),tt.charttypenames.set(tt.charttype.geoscatter,"geoscatter"),tt.charttypenames.set(tt.charttype.geobubble,"geobubble"),tt.charttypenames.set(tt.charttype.bubblepie,"bubblepie"),tt.chartcategory={},tt.chartcategory.axis=[at,ot,it,st,nt,lt,dt,mt,yt,bt,kt],tt.chartcategory.nonaxis=[rt,ct,ft,gt],tt.chartcategory.nonaxismultiseries=[ht,pt,ut],tt.chartcategory.geo=[vt,xt],tt.chartcategory.hierarchy=[ut,pt],tt.chartcategory.continous=[at,ot,it,st,dt,yt,bt],tt.chartcategory.discrete=[rt,nt,lt,pt,ct,ft,gt,mt,kt],tt.rename=function(t){return null!=t&&""!=t&&"string"==typeof t?(e[t]=tt,e.$ZC=null,delete e.$ZC,!0):!1},tt.setLegendColorPallete=function(e,t){tt.legutil.colorpallete.set(e,t)},tt.getLegendColorPallete=function(e){return tt.legutil.colorpallete.get(e)},tt.setLegendPatternPallete=function(e,t){tt.legutil.patternPallete.set(e,t)},tt.getLegendPatternPallete=function(e){return tt.legutil.patternPallete.get(e)},tt.setTheme=function(e,t){tt[e]=t},tt.getTheme=function(e){return tt[e]};var wt={},Ct={},Ot={},At=/\{\{val\((\d)\)\}\}|\{\{col\((\d)\)\}\}|\{\{per\((\d)\)\}\}|\{\{clr\}\}/gi;tt.imageFilePath=window.location.protocol+"//"+window.location.hostname+"/src/images/",tt.fontProperties={minsize:15,maxsize:40,ratio:.038},tt.requireXDataSorting=!1,tt.dataEncoded=!1;var St=window.btoa||function(e){e=String(e);var t,a,r,n,l,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,u=[];if(/[^\x00-\xFF]/.test(e))throw Error("InvalidCharacterError");for(;d<e.length;)t=e.charCodeAt(d++),a=e.charCodeAt(d++),r=e.charCodeAt(d++),n=t>>2,l=(3&t)<<4|a>>4,i=(15&a)<<2|r>>6,o=63&r,d===e.length+2?(i=64,o=64):d===e.length+1&&(o=64),u.push(s.charAt(n),s.charAt(l),s.charAt(i),s.charAt(o));return u.join("")};tt.charts=function(e,r,n){var l=e.constructor===Array&&r.constructor===Array;if(l){var i=a(e,r,n);return i}var o=t(e,r);return o&&o.draw(),o},tt.charts.get=function(){"use strict";function e(e){e.select("div.d3container").remove();var t=e.style("width"),a=e.style("height");t=t&&null!=t&&""!==t&&void 0!=t&&"auto"!=t?parseFloat(t):960,a=a&&null!=a&&""!==a&&void 0!=a&&"auto"!=a?parseFloat(a):400;var r=W(e,"div",[1],".","class","d3container"),n={width:t+"px",height:a+"px",position:"relative",left:"0px",top:"0px","box-sizing":"border-box"};n[Mt.prefix.css+"box-sizing"]="border-box",r.style(n),W(r,"div",[1],".","class","canvas-property"),W(r,"div",[1],".","class","plotarea-property");var l=W(r,"div",[1],".","class","canvas-component");l.style("-webkit-tap-highlight-color","transparent"),W(r,"div",[1],".","class","plotareaBorder-property"),M.tooltip={element:W(r,"div",[1],"#","id","zctooltip")},M.tooltip.element.style({position:"fixed",display:"none","white-space":"nowrap",padding:"5px","background-color":"white",border:"1px solid","-webkit-tap-highlight-color":"transparent"}),M.svg=W(l,"svg",[1],".","class","svgarea"),M.svg.style({width:t+"px",height:a+"px",position:"relative","-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none"});var i=d3.select(M.svg.node().parentNode).datum(M).style({width:M.container.style("width"),height:M.container.style("height")});M.staticPaneSVG=i.append("svg").attr("class","static").style({width:M.container.style("width"),height:M.container.style("height"),position:"absolute",top:0,left:0,"pointer-events":"none"}),M.legendarea.element=l.append("div").attr("class","legendarea"),M.notes=l.append("div").attr("class","zcnotes")}function t(){function e(e){return e?[1]:[]}var t=M.svg,a=JSON.parse(g.canvas.title.show)&&Q(M,"title",w);W(t,"g",e(a),".","class","charttitle");var r=JSON.parse(g.canvas.subtitle.show)&&Q(M,"subtitle",w);W(t,"g",e(r),".","class","chartsubtitle");var n=null!=g.credits&&JSON.parse(g.credits.enabled||!1)&&Q(M,"credits",w);if(W(t,"g",e(n),".","class","chartcredits"),p=W(t,"g",[g],".","class","xychart"),M.nochartdata){var l=p;W(l,"g",[1],".","class","nodatahandler")}else{var i=W(p,"g",[M.seriesdata],".","class","chartgroup"),o=JSON.parse(g.chart.axes.xaxis.show);W(i,"g",e(o),".","class","x-axis"),W(i,"g",[M.seriesdata],".","class","y-axis");var s=W(i,"g",[M.seriesdata],".","class","seriesholder"),d=v(g);s.attr("filter",d?"url("+M.defsLocation+"#"+d+")":null),W(M.staticPaneSVG,"g",[M.seriesdata],".","class","labelholder"),W(M.staticPaneSVG,"g",[M.seriesdata],".","class","threshold")}}function a(){var e=new tt.model.get(g,M.dataset,M.seriesdata,M);return M.seriesdata=e.isHierarchy?Lt(M.seriesdata):M.seriesdata,e}function r(e,t){this.systemConf=g=Rt(e,this.userdata,!0,!0),this.nochartdata=!g.seriesdata||!g.seriesdata.chartdata||g.seriesdata.chartdata.length<=0,this.seriesdata=this.nochartdata?null:g.seriesdata.chartdata,t||me(M,g.canvas.events,"chart","init"),this.dataset=this.nochartdata?null:new tt.dataset.get(g),this.dataObject=this.nochartdata?null:a(),this.nochartdata?null:this.dataset.setDataObj(this.dataObject),this.nochartdata=this.nochartdata||this.dataObject.totalnoofdatas<1,this.axes.rotated=this.dataObject?this.dataObject.getAxisRotated():null,this.axes.xaxis.orient=this.axes.rotated?"left":"bottom",this.axes.yaxes.orient=this.axes.rotated?"bottom":"left",this.ismultiy=d()>1,this.setChartDimension()}function n(e,t){var a=M.svg,r=(M.dataObject,M.userdata.canvas?M.userdata.canvas.fontColor:null),n=null!=e.x&&""!=e.x&&null!=e.y&&""!=e.y,l={top:I(e.marginTop,0),right:I(e.marginRight,0),bottom:I(e.marginBottom,0),left:I(e.marginLeft,0)},o=a.selectAll("g.chart"+t),s=n?{x:JSON.parse(e.x)+l.left,y:JSON.parse(e.y)+l.top,dy:"1",textAnchor:"left"==e.hAlign?"start":"right"==e.hAlign?"end":"middle"}:i(e.hAlign,e.vAlign,M.chartarea,l),d=e.imageUrl,u=""==d||null==d||"null"==d,c=u?""==e.text?"none":"text":"image";if("none"!=c){var h=W(o,c,[e],".","class",t);if(null!=e.href){var p={click:function(){var t=T(e.href);if(t){var a=e.target;"newtab"==a||"newwindow"==a?window.open(e.href,"popUpWindow","newwindow"==a?"status=yes":""):location.href=e.href}else console.log("invalid URL for credits")}};fe(h,null,p)}if(u){var r=M.userdata.canvas?M.userdata.canvas.fontColor:null;h.attr({x:s.x,y:s.y,dy:s.dy+"em","text-anchor":s.textAnchor}).style({cursor:null!=e.href?"pointer":"auto",display:"block"}).text(P(e.text)),JSON.parse(e.tooltip||!1)?G(h):null,U(h,[{fontColor:"subtitle"==t&&null==e.fontColor&&null==r?"#CCCCCC":e.fontColor||r},e,g.canvas,Pt])}else h.attr({x:s.x-e.imageWidth,y:s.y-e.imageHeight,width:e.imageWidth,height:e.imageHeight,"xlink:href":e.imageUrl}).style({cursor:null!=e.href?"pointer":"auto",display:"block"});var f=h.node().getBBox(),m={left:n?JSON.parse(e.x)+l.left:f.x,top:n?JSON.parse(e.y)+l.top:f.y,width:f.width,height:f.height},y={left:l.left,top:l.top,right:M.canvasarea.width-l.right,bottom:M.canvasarea.height};if(J(h.node(),P(e.text),m,y,"bottom","..",{left:5,right:5,top:5,bottom:5}),!n){var v=f.height+l.bottom+l.top;"top"==e.vAlign&&(M.chartarea.top+=v,M.chartarea.height-=v),"bottom"==e.vAlign&&(M.chartarea.height-=v)}}o.selectAll("none"===c?"text,image":"image"===c?"text":"image").style("display","none")}function i(e,t,a,r){var n={};return"center"==e?(n.x=a.width/2+r.left,n.textAnchor="middle"):"left"==e?(n.x=a.left+r.left,n.textAnchor="start"):"right"==e&&(n.x=a.width+a.left-r.right,n.textAnchor="end"),"top"==t?(n.y=a.top+r.top,n.dy=1):"bottom"==t&&(n.y=a.height+a.top-r.bottom,n.dy=-.21),n}function o(e,t,a,r){var n=a.border,l=a.background,i=a.shadow;e.style({"background-color":l.color,opacity:l.alpha});var o=null;if(null!=l&&null!=l.gradients&&null!=l.gradients.show&&JSON.parse(l.gradients.show)){var s,d="";if(null==l.gradients.useCSS?(null!=l.gradients.stopColor&&l.gradients.stopColor.map(function(e,t){var a=null!=l.gradients.stopOffset&&null!=l.gradients.stopOffset[t]?" "+l.gradients.stopOffset[t]:"";d+=0==t?e+" "+a:","+e+a}),"radial"==l.gradients.type?s="radial-gradient("+d+")":"linear"==l.gradients.type&&(s="linear-gradient("+d+")")):s=l.gradients.useCSS,Mt.WEBKIT)o="-webkit-"+s;else if(Mt.FIREFOX)o="-moz-"+s;else if(Mt.IE){o="-ms-"+s;var u=null!=l.gradients.stopColor?"linear"==l.gradients.type?"progid:DXImageTransform.Microsoft.gradient(startColorstr="+(l.gradients.stopColor[0]||"black")+", endColorstr="+(l.gradients.stopColor[1]||"white")+")":"progid:DXImageTransform.Microsoft.Alpha(opacity=100, finishopacity=0, style=2)":null;e.style("filter",u)}}if(null!=l&&null!=l.imageUrl&&(o="url("+l.imageUrl+")"),(1!=Mt.IE||0!=Mt.VERSION.indexOf("9."))&&e.style({"background-image":o,"background-repeat":l.imageRepeat,opacity:l.alpha}),null!=n&&null!=n.show&&JSON.parse(n.show)){var c="plotarea"==r?t:e,h="canvas"==r?B(g.canvas.border,"size",0,10,M.canvasarea.width,M.canvasarea.height):B(g.chart.plot.border,"size",0,10,M.plotarea.width,M.plotarea.height);h=null==h||""===h?2:h,c.style({border:h+"px "+n.style+" "+n.color,"border-radius":parseInt(n.radius)+"px"}),c.node().border={size:h,clr:n.color}}else{var c="plotarea"==r?t:e;"plotarea"!=r&&c.style({border:""})}if(null!=i&&JSON.parse(i.show)){var p=i.x+"px "+i.y+"px "+i.blur+"px "+i.color;p=JSON.parse(i.inset)?p+" inset":p,e.style({"box-shadow":p})}else e.style("box-shadow","")}function s(e){var t=tt.charttypenames.values(),a=h(M.userdata,"string"),r=null;return M.userdata.canvas&&(r=M.userdata.canvas.theme),x=new tt.defaultTheme(e),t.map(function(t){-1!=a.indexOf(t)&&tt.getDefaultOptions(t,x.chart.plot.plotoptions,e)}),null!=r&&null!=tt[r]?(b=new tt[r](e),b=Rt(x,b,!0,!0)):b=x,b}function d(){if(M.nochartdata)return-1;var e=g.metadata,t=e.axes.y;return M.axesCount=t.length,M.axesCount}function u(e){var t=e.htmlEl,a=e.imageUrl,r=e.type,n=e.text,l=e.colors;if(t)return t;if(a)return"<img src="+a+" height="+e.imageHeight+" width="+e.imageWidth+">";var i="",o=null;if(r){var s=M.container.selectAll("div.loading");l=l&&l.length?l:null,o=Wt(s,{type:r,colors:l});var d=new XMLSerializer;i=d.serializeToString(o)}return n&&(i+="<p style=position:relative;display:inline-block>"+n+"</p>"),i}function c(e){g.chart.zoom||tt.getDefaultOptions("zoom",g.chart,M.globalProp),g.chart.zoom.type=e}var p,f,g,m,y,x,b,w,A,S={},M={userdata:null,dataObject:null,dataset:null,container:{},svg:null,canvasarea:{},chartarea:{},legendarea:{},plotarea:{},legend:{component:tt.legend.get()},seriesColor:[],axes:{},renderer:[],subrenderer:[],ismultiy:null,plotarea_approx:null,nochartdata:!1,chartRendered:!1,plot:{}};return M.initialize=function(a,n){try{this.userdata=n,this.chartRendered=!1,this.container=a,w=parseFloat(M.container.style("height")),A=parseFloat(M.container.style("width")),e(a),this.setCanvasDimension(),this.axes.xaxis={},this.axes.yaxes={groups:[]},M.globalProp=l(n,{width:this.canvasarea.width,height:this.canvasarea.height},S),f=s(M.globalProp),n.metadata?null:tt.getDefaultOptions("metadata",n),r.call(this,f),this.defsLocation=z(),this.createSVGforPatterns();var i=M.svg;this.legendHighlight=new tt.legendHighlight(M,this.svg),i.append("defs"),t()}catch(o){M.breakOnErr=!0}},M.resetdata=function(e){w=parseFloat(M.container.style("height")),A=parseFloat(M.container.style("width")),this.setCanvasDimension(),r.call(this,e,!0),M.globalProp=l(e,{width:this.canvasarea.width,height:this.canvasarea.height},S)},M.setCanvasDimension=function(e,t){var a,r,n=M.svg;e||t||(a=n.style("width"),r=n.style("height"),a=a&&"auto"!=a?parseFloat(a):960,r=r&&"auto"!=r?parseFloat(r):400),m=e||a||960,y=t||r||400,this.canvasarea={left:0,top:0,right:0,bottom:0,width:m,height:y}},M.setChartDimension=function(){var e=g.canvas.border,t=JSON.parse(e.show)?B(e,"size",0,10,M.canvasarea.width,M.canvasarea.height):0;this.chartarea={left:this.canvasarea.left+t,top:this.canvasarea.top+t,right:this.canvasarea.right-t,bottom:this.canvasarea.bottom-t,width:this.canvasarea.width-2*t,height:this.canvasarea.height-2*t},this.plotarea=Object.create(this.chartarea)},M.createSVGforPatterns=function(){var e=Pt.patternSVG=W(d3.select(document.body),"svg",[1],".","class","svgPattern");e.attr({version:"1.1",xmlns:"http://www.w3.org/2000/svg"}).style({position:"absolute",left:"-2000px",top:"-2000px"}),W(e,"defs",[1])},M.draw=function(){M.render(!1)},M.redraw=function(){M.svg.style({width:M.container.style("width"),height:M.container.style("height")}),M.staticPaneSVG.style({width:M.container.style("width"),height:M.container.style("height")}),M.resetdata(g),t(),M.render(!0)},M.render=function(e){try{if(M.updatecanvasarea(),M.applyChartProperties(),this.nochartdata)M.hideLoading(M.container),M.handleNoData(g.noDataHandler),M.chartRendered=!0;else{if(M.getChartSeriesColor(),M.isAxisCategory=M.dataObject.isAxisCategory,M.isNonAxisMultiSeriesCategory=M.dataObject.isNonAxisMultiSeriesCategory,M.xymultiRenderer=M.isAxisCategory,tt.legend.render(M,e),tt.annotation&&tt.annotation.addBlockAnnotations(M),R(this.systemConf.chart,"scroll")&&this.systemConf.chart.scroll.enabled&&(tt.getDefaultOptions("scroll",this.systemConf.chart,this.globalProp),M.brush=new Ft(M,"x"),M.svg.call(M.brush)),Ye.initialize(M),me(M,g.chart.axes.events,null,"init"),M.isAxisCategory)tt.axis.render(M,A,w,e);else if(M.dataObject.isPolarAxisCategory||M.dataObject.hasLevelMarker){var t=M.dataObject.hasLevelMarker?"y":"x";tt.axis.polar.render(M,t)}if(M.zscale=M.dataObject.isBubbleEnabled?tt.scale.getScale(M,M.dataObject,M.plotarea,M.axes.xaxis.orient,null,M.dataset,"z"):null,me(M,g.chart.axes.events,null,e?"onreload":"onload"),M.handleEvent(e),M.updatePlotareaProp(),M.drawPlotareaClippath(),this.plot.renderer)this.plot.renderer.draw(e);else{var a=this.plot.renderer=tt.plot.render(M,e);a.draw(!1)}M.isAxisCategory&&M.drawThreshold(e)}}catch(r){M.breakOnErr=!0}},M.drawThreshold=function(e){tt.axis.threshold&&tt.axis.threshold(this,e)},M.applyChartProperties=function(){var e=g.canvas.title,t=g.canvas.subtitle,a=g.credits,r=JSON.parse(e.show||!1)&&Q(M,"title",w),l=JSON.parse(t.show||!1)&&Q(M,"subtitle",w),i=null!=a&&null!=a.enabled&&JSON.parse(a.enabled||!1)&&Q(M,"credits",w);if(i){{tt.getDefaultOptions("credits",M.systemConf,M.globalProp)}n(M.systemConf.credits,"credits")}r&&("bottom"==e.vAlign&&"bottom"==t.vAlign&&t.show?n(g.canvas.subtitle,"subtitle"):n(g.canvas.title,"title")),l&&("bottom"==t.vAlign&&"bottom"==e.vAlign&&e.show?n(g.canvas.title,"title"):n(g.canvas.subtitle,"subtitle")),this.plotarea=Object.create(this.chartarea),M.container.selectAll("div.plotareaBorder-property").style("border","");var o=g.chart,s=parseFloat(o.marginLeft),d=parseFloat(o.marginRight),u=parseFloat(o.marginTop),c=parseFloat(o.marginBottom),h=s+d>this.plotarea.width?0:s,p=s+d>this.plotarea.width?0:d,f=u+c>this.plotarea.height?0:u,m=u+c>this.plotarea.height?0:c;this.plotarea.left+=h,this.plotarea.right+=p,this.plotarea.bottom+=m,this.plotarea.top+=f,this.plotarea.width=this.plotarea.width-h-p,this.plotarea.height=this.plotarea.height-m-f},M.handleEvent=function(e,t){if(e)M.eventHandler.updateParams(M);else{var a=null!=t?t:M.staticPaneSVG,r=a.append("g").attr("class","eventgroup").style({"pointer-events":"visible"}),n=r.append("g").attr("id","zcareahighlight");n.append("path").attr("id","areapath");{var l=r.append("g").attr("id","zcbarhighlight");r.append("g").attr("id","zcscatterhighlight")}if(l.append("path").attr("id","barpath"),M.eventHandler=tt.events.mouseevents(M,M.tooltip.element,g,M.plotarea,M.dataset,M.axes.xaxis.scale,M.barscale1,M.barscale2,M.axes.yaxes.groups,r,M.seriesColor,M.labelHighlighter),g.tooltip.crosshair){var i=W(r,"g",[1],".","class","crosshair");i.style("visibility","hidden"),W(i,"line",[1],".","class","x-crosshair"),W(i,"line",[1],".","class","y-crosshair")}M.eventHandler.initializeListener()}(M.xymultiRenderer||M.dataObject.isPolarAxisCategory)&&C(M.eventHandler.trackerElement,M.plotarea),Ye(M)},M.addorremoveseries=function(e){if(this.dataObject.initialize("addorremoveseries"),me(M,g.chart.axes.events,null,"init"),M.isAxisCategory){var t=M.brush&&M.brush.extent;M.updateZscale(),M.updateScale(e,"y"),M.updateScale(e,"x",t),M.drawThreshold(!0),M.drawPlotareaClippath(),M.updatePlotareaProp()}else M.dataObject.isPolarAxisCategory&&tt.axis.polar.render(M,"x");me(M,g.chart.axes.events,null,"onreload"),M.plot.renderer.draw(!0),(M.isAxisCategory||M.dataObject.isPolarAxisCategory)&&(C(M.eventHandler.trackerElement,M.plotarea),M.eventHandler.updateParams(M))},M.showLoading=function(e){var t=g.loader;if(JSON.parse(t.enabled||!1)&&"none"!=t.type){var a=W(e.selectAll("div.d3container"),"div",[1],".","class","loading");a.style("position","absolute").html(u(t)),U(a,[t,g.chart,g.canvas,Pt],!0);var r=a.node();a.style({left:M.chartarea.width/2-r.offsetWidth/2+"px",top:M.chartarea.height/2-r.offsetHeight/2+"px"})}},M.hideLoading=function(e){e.selectAll("div.loading").remove()},M.pushDataPoint=function(e,t,a){var r=M.dataObject.isCombinationalChart,n=r?Ct.arrangeSeriesRenderingOrder(M.seriesdata):M.seriesdata;if(!Array.isArray(e)){var l=[],i=[];l.push(e),i.push(t),e=l,t=i}e.forEach(function(e,l){var i=n[e],o=r?i.seriesidx:e,s=M.seriesdata[o],d=M.renderer[o];s.data[0].push(t[l]);var u,c;a?(u=s.data[0][0],s.data[0].shift(),null!=d.shiftInfo()?(c=d.shiftInfo(),c.count++):(c={},c.count=0),c.point=u,d.shiftInfo(c)):d.shiftInfo(null),M.ismultiy&&M.updateScale(s,"y")}),M.dataObject.initialize(),M.updateScale(null,"x"),M.ismultiy||M.updateScale(M.seriesdata[0],"y"),M.plot.renderer.draw(!0),M.drawThreshold(!0)},M.popDataPoint=function(e){var t=M.seriesdata[e];t.data.forEach(function(e){e.pop()}),M.dataObject.initialize(),M.updateScale(t,"x"),M.updateScale(t,"y"),M.plot.renderer.draw(!0),M.drawThreshold(!0)},M.zoomON=function(e){c(e);var t=M.zoom;t||M.eventHandler.initializeZoomListener()},M.zoomOFF=function(){var e=M.zoom;e&&e.reset(),c("none")},M.zoomX=function(e,t){c("x"),M.zoom||M.eventHandler.initializeZoomListener();var a=M.zoom;a.zoomed(null,e,t)},M.zoomY=function(e,t){c("y"),M.zoom||M.eventHandler.initializeZoomListener();var a=M.zoom;a.zoomed(null,e,null,t)},M.zoomXY=function(e,t,a){c("xy"),M.zoom||M.eventHandler.initializeZoomListener();var r=M.zoom;r.zoomed(null,e,t,a)},M.updatecanvasarea=function(){M.container.selectAll("div.d3container").style({position:"relative",width:M.container.style("width"),height:M.container.style("height")});var e=M.container.selectAll("div.canvas-component");e.style({position:"relative",width:M.canvasarea.width+"px",height:M.canvasarea.height+"px"});var t=M.container.selectAll("div.canvas-property");t.style({position:"absolute",width:M.canvasarea.width+"px",height:M.canvasarea.height+"px"}),o(t,null,g.canvas,"canvas")},M.drawPlotareaClippath=function(){var e=R(g,"chart.zoom.x")||D(M.scrolledX),t=R(g,"chart.zoom.y")||D(M.scrolledY),a=k(M),r=e?0:-a.left,n=t?0:-a.top,l=M.plotarea.width+(e?0:a.left+a.right),i=M.plotarea.height+(t?0:a.top+a.bottom),o=O({x:r,y:n,width:l,height:i},"rect"),s=W(M.svg.selectAll("defs"),"clipPath",[1],"#","id",o),d=W(s,"rect",[1]);d.attr({x:r,y:n,width:l,height:i}),p.selectAll("g.seriesholder").attr("clip-path","url("+M.defsLocation+"#"+o+")"),M.staticPaneSVG.selectAll("g.labelholder,g#zcscatterhighlight,g#zcareahighlight,path#zcbarhighlight").attr("clip-path","url("+M.defsLocation+"#"+o+")")},M.updatePlotareaProp=function(){var e=M.container,t=e.selectAll("div.plotarea-property"),a=e.selectAll("div.plotareaBorder-property"),r={position:"absolute",left:M.plotarea.left+"px",top:M.plotarea.top+"px",width:M.plotarea.width+"px",height:M.plotarea.height+"px","pointer-events":"none","box-sizing":"border-box"};r[Mt.prefix.css+"box-sizing"]="border-box",e.selectAll("div.plotarea-property,div.plotareaBorder-property").style(r),o(t,a,g.chart.plot,"plotarea")},M.handleNoData=function(e,t){var a=null!=t?t:p.selectAll("g.nodatahandler");if(null!=e.htmlEl){var r=W(M.container.selectAll("div.canvas-component"),"div",[1],".","class","nodatahandler");r.style("position","absolute").html(e.htmlEl);var n=r.node();r.style({left:I(e.x,M.chartarea.width/2-n.offsetWidth/2)+"px",top:I(e.y,M.chartarea.height/2-n.offsetHeight/2)+"px"})}else if(null!=e.imageUrl){var l=W(a,"image",[1]);l.attr({x:e.x||M.chartarea.width/2-50,y:e.y||M.chartarea.height/2-50,width:100,height:100,"xlink:href":e.imageUrl})}else if(null!=e.text){var i=W(a,"text",[e],".","class","nodata");i.attr({x:e.x||M.chartarea.width/2,y:e.y||M.chartarea.height/2,"text-anchor":"middle"}).text(P(e.text||"No Data")),U(i,[e,g.canvas,Pt])}},M.getChartSeriesColor=function(){var e=[],t=g.legend;if(t.colors)if(t.colors instanceof Array)e=t.colors;else{var a=[];for(var r in t.colors)t.colors.hasOwnProperty(r)&&a.push(t.colors[r]);e=a}else if(t.patternPallete){var n=tt.legutil.patternPallete.get(t.patternPallete);e=n.map(function(e){var t=Et.get("imageFill",{name:e,width:50,height:50});return"url("+M.defsLocation+"#"+t+")"})}else t.colorPallete&&(e="monochrome"==t.colorPallete.type?tt.legutil.getMonochromeColorPallette(t.colorPallete.options.monochrome):tt.legutil.colorpallete.get(t.colorPallete.options.multicolor)||tt.legutil.colorpallete.get("flat-ui-colors"));null!=e&&(M.seriesColor=e.slice(0,e.length),M.seriesdata.map(function(e,t){null!=e.color&&""!=e.color&&(M.seriesColor[t]=e.color)}))},M};var Pt={};Pt.fontFamily="'Roboto','Open Sans',sans-serif",Pt.fontColor="#616161",Pt.fontStyle=null,Pt.fontWeight=null,Pt.fontL1Size=null,Pt.fontL2Size=null,Pt.fontL3Size=null,Pt.DOMBorder="none";var Mt=new function(){this.NETSCAPE=0,this.FIREFOX=0,this.OPERA=0,this.IE=0,this.SAFARI=0,this.MOZILA=0,this.CHROME=0,this.NONIE=1,this.WEBKIT=0;var e=navigator.userAgent.toLowerCase();this.IPHONE=-1!=e.indexOf("iphone"),this.IPAD=-1!=e.indexOf("ipad"),this.ANDROID=-1!=e.indexOf("android"),this.IS_IOS=this.IPHONE||this.IPAD,this.isTouchDevice="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,this.isMouseDevice="onmousemove"in window;var t="";this.detect=function(){var e=navigator.userAgent,a=e.length,r=navigator.vendor,n=window.opera,l="";n?(this.OPERA=1,t="o"):e.indexOf("Chrome")>-1?(this.CHROME=1,l="Chrome/",t="webkit"):e.indexOf("Firefox")>-1?(this.FIREFOX=1,l="Firefox/",t="moz"):e.indexOf("MSIE ")>-1||e.indexOf("Trident/")>-1?(this.IE=1,l="MSIE ",t="ms"):r.indexOf("Apple")>-1?(this.SAFARI=1,l="Version/",t="webkit"):l="Unknown Browser",this.VERSION=e.substring(e.indexOf(l),a).match(/[0-9\.]+/)[0]},this.detect(),this.NONIE=!this.IE,this.WEBKIT=this.SAFARI||this.CHROME,this.prefix={lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}};tt.dataset.get=function(e){function t(e,t,a,r,n){r=+r;var s=i.y,d=-1,u=c(e.seriesdata[t].type||e.userdata.seriesdata.type,"numeric")===tt.charttype.bubblepie;if(null!=s&&(s[0]instanceof Array?s.forEach(function(e,t){d=-1==d&&e.indexOf(r)>-1?t:d}):d=s.indexOf(r)>-1?0:-1,-1!=d||u)){var h;if(u){var p=I(e.rendererConf[t].params.commonPlotOptions.dataindex,3),g=f.getX(n),m=e.subrenderer[a||0][g],y=m.data;h=y.reduce(function(e,t){return e+=t&&t.data&&!t.data.disabled?t.data[p]:0},0)}else if(e.isAxisCategory||e.dataObject.isPolarAxisCategory){var v=e.axes.yaxes.groups[d].scale.domain();h=v[1]}else if(e.isNonAxisMultiSeriesCategory)h=n.parent.value;else{var x=l[r].dataindex;h=o[0].data[0].reduce(function(e,t){return e+=1!=t.disabled&&null!=t&&t instanceof Array?t[x]:0},0)}return h||null}return null}function a(e){var t,a=[];for(var r in i)if(i.hasOwnProperty(r)){var n="y"==r?d3.merge(i[r]):i[r];if(-1!=n.indexOf(e))return"y"==r&&i[r].map(function(t,r){var n=t.indexOf(e);-1!=n&&(a.push(r),a.push(n))}),t=r,{type:t,order:a}}}function r(){var e={},t=Object.keys(i).sort(function(e,t){return t.length>e.length?-1:t.length<e.length?1:0;

});return t.forEach(function(t){e[t]=i[t]}),e}var n=e.metadata,l=n.columns,i=n.axes,o=e.seriesdata.chartdata,s=o.map(function(e){return"undefined"==typeof e.yaxiscolumnorder||null==e.yaxiscolumnorder?"0":e.yaxiscolumnorder.toString()});i=r();var h,p=l.map(function(e,t){return a(t)}),f={xidx:l[i.x].dataindex,yidx:function(e){var t=e instanceof Array?i.y[e[0]][e[1]||0]:i.y[e][0];return l[t].dataindex},zidx:(l[i.z]||{}).dataindex,labelidx:null!=i.label?null!=l[i.label]?l[i.label].dataindex:i.label:null,tooltipidx:function(e){return null!=i.tooltip?l[e].dataindex:null},geocolumnidx:null!=i.geoidxpos?l[i.geoidxpos].dataindex:null};return f.setDataObj=function(e){h=e},f.getX=function(e){return this.getActualX(e)},f.getY=function(e,t,a){try{var r=this.yidx(t),n=null==a?e[r]:e[r][a];return n}catch(l){}},f.getZ=function(e){return e[this.zidx]},f.getDataLabelValue=function(e){return e[this.labelidx]},f.getTooltipValue=function(e){var t=this.tooltipidx(e);return d[t]},f.getGroupByValues=function(e,t){return null==t||0==t.length?null:t.reduce(function(t,a){return D(e[a])?t+e[a]:t},"")},f.getActualX=function(e){return e[this.xidx]},f.getDataType=function(e,t,a){a=a||f.seriesTypes;var r=null;if(null!=n.axes[e]){var i=this.getColumnIdx(e,t),o=l[i];r=o.datatype;var s=(h?h.isPolarAxisCategory||h.noofBarEnabledSeries:-1!=a.indexOf(tt.charttype.bar)||-1!=a.indexOf(tt.charttype.stkdbar)||-1!=a.indexOf(tt.charttype.bullet)||-1!=a.indexOf(tt.charttype.gantt)||-1!=a.indexOf(tt.charttype.web))&&"x"==e;r=s||o.useDiscrete?"ordinal":r}return r},f.getColumnIdx=function(e,t){var a,r=n.axes[e];return a="y"==e?t instanceof Array&&2==t.length?r[t[0]][t[1]]:r[t][0]:"tooltip"==e?r[t]:null==r?null:r[0]},f.getColumn=function(e,t){var a=this.getColumnIdx(e,t);return l[a]},f.getColumnName=function(e,t){return(0!=t?P:M)(l[e].columnname)},f.getSeriesIdx=function(e){var t=-1,a=p[e],r=null!=a?a.type:null;if("y"==r&&(i.y.length>1||i.y[0].length>1)){var n=a.order;t=s.indexOf(n.toString())}return t},f.getCustomizedVal=function(e,t,a,r,n,i,o,s){var d=!/(tooltip)/.test(o);return t.toString().replace(At,function(){var t=arguments[0],u=arguments[1],c=arguments[2],h=arguments[3],p=u||c||h;if(-1!=t.indexOf("{{clr}}"))return s;if(null==l[p])return t;var g="stackLabels"===o?i:f.getDataPoint(e,p,a,r,n,i);if(null==g)return"";switch(t.substring(2,5).toLowerCase()){case"col":return f.getColumnName(c,d);case"val":return f.getDataPointValue(e,g,u,a,!1,o,r);case"per":return f.getDataPointValue(e,g,h,a,!0,o,r)}})},f.getDataPoint=function(e,t,a,r,n,l){var i=null,s=null==t?a:this.getSeriesIdx(t),d=-1!=s&&s==a?s:-1==s?a:null;if(null!=d){var u=e.renderer[e.isAxisCategory||e.dataObject.isPolarAxisCategory?d:0],c=null!=u&&null!=u.seriesdataAfterUpdate?u.seriesdataAfterUpdate[r]:o[d].data[r];i=l||c[n]}return i},f.getDataPointValue=function(e,a,r,n,s,d,c){var h=l[r]||{},p=!/(tooltip)/.test(d),f=h.datatype,g=h.dataindex,m=h[f];if(null!=a){if(null==i.clr&&"legend"!==d||r!=i.clr){if(1==s){var y="numeric"==f?t(e,n,c,r,a):null;if(null!=y){var v=("stackLabels"==d?a:e.dataObject.isStackedPercentChart?a.y:a[g])/y*100;return Ee(m,v,f,e,d)}return""}var x=this.getColumnIdx("y",u(e.seriesdata[n].yaxiscolumnorder)),b=r==x?" - ":void 0;return Ae(m,"stackLabels"==d?a:a[g],f,e,d,p,b)}return Ae(m,o[n].seriesname,f,e,d,p)}return null},f.getMetaInfoObj=function(e,t,a){function r(e,t){var a=Lt(l[e]||{});return a.value=t,a.columnindex=e,a}var n=e.systemConf.metadata.axes,l=e.systemConf.metadata.columns,i=e.systemConf.seriesdata.chartdata,a=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?a:0,o=[],s=i[a].yaxiscolumnorder||[0,0],d=s instanceof Array?n.y[s[0]][s[1]||0]:n.y[s][0];if(t.forEach(function(e,t){var a=l.indexOf(l.filter(function(e,a){return e.dataindex==t&&(f.yidx(s)!=t||f.yidx(s)==t&&d==a)})[0]);o.push(r(a,e))}),null!=n.clr){var u=n.clr instanceof Array?n.clr[0]:n.clr;o.push(r(u,i[a].seriesname))}return o},f},tt.model.get=function(e,t,a,r){function n(e){var t=d3.merge(j.seriesExtermes[e]),a=0!=t.length?d3.extent(t):t.enabled?[0,0]:null;return a}function l(){var n=a,l=i(),o=0;O=l.map(function(l){var i=[],s=[];return l.forEach(function(l,d){var h,p=c(j.data.seriesdata.type||n[l[0].si].type,"numeric"),f=u(n[l[0].si].yaxiscolumnorder),g=j.isstacked(p),m=g&&Ze(e.chart.plot.plotoptions[tt.charttypenames.get(p)].datalabels.stackLabels,r)&&C.keys().some(function(e){var t=C.get(e),a=t.stackLabelIndex==l[0].si;return a&&(h=e),a})&&l[0].item==a[l[0].si].data.length-1;l.forEach(function(e,a){e.y=t.getY(e,f),e.y>=o?0==d?(i[a]=e.y,s[a]=e.y,e.y0=g?o:e.y0):(e.y0=g?i[a]:e.y0,i[a]=g?i[a]+e.y:d3.max([e.y,i[a]])):0==d?(e.y0=g?o:e.y0,s[a]=e.y,i[a]=o):(e.y0=g?s[a]<o?s[a]:o:e.y0,s[a]=s[a]<o?s[a]+e.y:e.y),m&&(C.get(h).stackExtent=b(i,s))})}),d3.extent(d3.merge([i,s]))}),O=A.length>1?O:[d3.extent(d3.merge(O))];t.seriesTypes;if(j.isStackedPercentChart){{O[0][1]}l.map(function(e,t){var a=(u(n[t].yaxiscolumnorder),e[e.length-1]);return e.map(function(e){return e.map(function(e,t){var r=a[t],n=r.y0+r.y;return 1!=isNaN(n)&&null!=n&&0!=n&&(e.y0/=n/100,e.y/=n/100),e})})}),O[0][0]=0,O[0][1]=100}return O}function i(){var r=j.isCombinationalChart||e.seriesdata.stackGroup?S.values():A,n=j.getCategories("x"),l=t.categoriesStore.subseries,i=o(t,"x");return P=r.map(function(e){return d3.merge(e.map(function(e){for(var r=e.d.map(function(e){return e.groupByVal}),o=0;o<l.length;o++){var s=l[o],d=r.indexOf(s);if(0>d&&null!=s){var c=[];e.d.splice(o,0,c)}}return e.d.map(function(r,l){for(var o=r.map(function(e){return t.getX(e)}),s=0;s<n.length;s++){var d=n[s],c=o.indexOf(d);if(c>=0&&c!=s&&(r.splice(s,0,r[c]),r.splice(c+1,1),o=r.map(function(e){return t.getX(e)})),"undefined"!=typeof o[s]&&i(o[s])&&r.splice(s,1),0>c){var h=[],p=u(a[e.si].yaxiscolumnorder);h.splice(j.dataset.xidx,0,d),h.splice(j.dataset.yidx(p),0,0),h.isDummy=!0,r.splice(s,0,h),o=r.map(function(e){return t.getX(e)})}}return r.map(function(t){return t.si=e.si,t.item=l,t})})}))}).map(function(e,t){var a=S.keys()[t],r="string"==typeof a&&-1!=a.indexOf("_")||a==tt.charttype.stkdbar||a==tt.charttype.stkdarea||(a==tt.charttype.bar||a==tt.charttype.area?JSON.parse(j.data.chart.plot.plotoptions[c(a,"string")].stacked.enabled):!1);if(r){var n=d3.layout.stack().x(function(e){return j.dataset.getX(e)}).y(function(e){return j.dataset.getY(e,0)});return n(e)}return e})}function d(){var r=[],n=I(e.chart.plot.plotoptions.bubblepie.dataindex,3),l=j.findXCategories(!0);return a.forEach(function(i){var o=i.disabled||c(i.type||e.seriesdata.type,"numeric")!==tt.charttype.bubblepie,s=i.data;s.forEach(function(e,i){r[i]=r[i]||[],l.forEach(function(l,s){var d=e.filter(function(e){return t.getX(e)==l})[0];if(!d){var u;a.some(function(e){var a=e.data;return a[i].some(function(e){var a=t.getX(e)===l;return a&&(u=e.slice(0),u[n]=null),a})}),d=u}d.disabled=o,r[i][s]=r[i][s]||[],r[i][s].push(d)})})}),r}function f(e,t){var a;t=null==t?0:t;for(var r=e.length,n=0;r>n&&null==a;)a=null!=e[n]?e[n]:null,n++;return null==a?t:a}function g(e,t){function a(e){null==r&&i>e&&(i=e),null==n&&e>o&&(o=e)}var r=t.minRange,n=t.maxRange,l=t.threshold;if(null==l)return e;if(!e||null!=r&&null!=n)return e;var i=e[0],o=e[1];for(var s in l)if(l.hasOwnProperty(s)){var d=l[s],u=d?I(d.show,!1):null;if(u){var c=d.values;null!=c&&c instanceof Array&&c.forEach(function(e){e instanceof Array?e.forEach(function(e){a(e)}):a(e)})}}return[i,o]}function m(e,t,a){var n=t+(D(a)?a:""),l=r.plotarea.height;if(null!=N.forBubbles[n]&&N.plotHeight==l)return N.forBubbles[n];N.plotHeight=l;var i="x"==t,o=r.axes[i?"xaxis":"yaxes"].orient,s=0,d=r.plotarea["left"==o?"height":"width"],u=[s,d],c=i?j.data.chart.axes.xaxis:j.data.chart.axes.yaxis[a],h=c.minRange,p=c.maxRange,f=d3.scale.linear().domain(e).range(u),g=y(u,f,t,a);return s=null==h?f.invert(g[0]):s,d=null==p?f.invert(g[1]):d,N.forBubbles[n]=[e[0]-s,d-e[1]],N.forBubbles[n]}function y(e,n,l,i){var s=e[0],d=e[1],c="x"==l,h=(c?a:A[i])||[];return h.forEach(function(e){var l=c?e.data:e.d,h=(c?e:a[e.si]).disabled,p=u((c?e:a[e.si]).yaxiscolumnorder);if(!h){var f=o(t,"x"),g=o(t,"y",p);l.forEach(function(e){e.forEach(function(e){var a=c?t.getX(e):t.getY(e,i),l=t.getZ(e)||r.zscale.domain()[0];if(e&&!e.isDummy&&!f(t.getX(e))&&!g(t.getY(e,p))){var o=r.zscale(l),u=n(a)+(null!=n.rangeBand?n.rangeBand()/2:0),h=u+o/2,m=u-o/2;h>d&&(d=h),s>m&&(s=m)}})})}}),[s,d]}function v(e,t,a,r){var n=e.rangeExtent(),l=e.domain(),i=n[1]-n[0],o=r[0],s=r[1],d=Math.max(s-n[1],-o);if(!d)return 0;var u=i/(l.length-t+2*a),c=u*a,h=c+d,p=(i-2*h)/(l.length-t),f=h/p;return f-a}function x(t){var r=c(a[0].type||e.seriesdata.type,"string"),n=e.chart.plot.plotoptions[r],l=n.levelMarker,i=n.targetMarker||{},o=JSON.parse(l.enabled||!1),s=JSON.parse(i.enabled||!1);return w=null!=w?w:o||s?d3.extent(d3.merge(a.map(function(e){var t=null!=e.plotoptions&&null!=e.plotoptions.levelMarker?e.plotoptions.levelMarker.dataindex:l.dataindex,a=null!=e.plotoptions&&null!=e.plotoptions.targetMarker?e.plotoptions.targetMarker.dataindex:i.dataindex;return null!=t?d3.merge(e.data.map(function(e){return d3.merge(e.map(function(e){var r=o&&null!=e[t]?e[t]:[],n=s&&null!=e[a]?[e[a]]:[];return d3.merge([r,n])}))})):l.values||[]}))):[],d3.extent(d3.merge([t,w,[0]]))}function b(e,r){var n=j.getCategories("x"),l=o(t,"x"),i=[];return a[0].data[0].forEach(function(a,o){var s=t.getX(a);n.indexOf(s)>-1&&!l(s)&&(e[o]>0&&i.push([s,e[o]]),r[o]<0&&i.push([s,r[o]]))}),i}var k,w,C,O=[],A=[],S=d3.map(),P=[],M=null,T=null,E=[],z=[],L=[],N={plotHeight:null,byDatalabels:{},forBubbles:{}},j={data:e,dataset:t,categories:e.seriesdata.categories};return j.getCategories=function(e,a){if(R(r.systemConf,"chart.zoom."+e+".categories"))return r.systemConf.chart.zoom[e].categories;var n="x"==e?r.systemConf.chart.axes.xaxis.categories:r.systemConf.chart.axes.yaxis[a].categories;return n=n&&n.length?n:t.categoriesStore["y"==e?e+a:e],"y"!==e||t.categoriesStore["y"+a].enabled||(n=["NoData","NoData"]),n},j.getMinMaxX=function(e){if(R(r.systemConf,"chart.zoom.x"))return[r.systemConf.chart.zoom.x.minRange,r.systemConf.chart.zoom.x.maxRange];e=null==e?.05:e;var t=j.data.chart.axes.xaxis,n=null==t.minRange||""===t.minRange?null:t.minRange,l=null==t.maxRange||""===t.maxRange?null:t.maxRange;if(null==k){var i=a,o=this.dataset,s=i.map(function(e){return e.data.map(function(e){return d3.extent(e,function(e){return o.getX(e)})})}),d=d3.min(d3.merge(s),function(e){return e[0]}),u=d3.max(d3.merge(s),function(e){return e[1]});k=[d,u],k=g(k,R(r.userdata,"chart.axes.xaxis")?r.userdata.chart.axes.xaxis:{})}var c=k;if(j.isBubbleEnabled&&(null==n||null==l)&&"time"!=this.dataset.getDataType("x")){var h=m(c,"x");c=[c[0]-h[0],c[1]+h[1]]}var p=0;"time"!=this.dataset.getDataType("x")&&0!=e&&(p=j.getCorrectionOverDataLabels(c,"x"));var d=c[0],u=c[1],f=u-d;f=0==f?1:f;var y=f*e+p;return d=(null!=n?parseFloat(n):d-y)||0,u=(null!=l?parseFloat(l):u+y)||0,[d,u]},j.getMinMaxY=function(e,t){if(null==e&&(e=0),R(r.systemConf,"chart.zoom.y"))return[r.systemConf.chart.zoom.y.minRange,r.systemConf.chart.zoom.y.maxRange];var a=j.isstacked(),i=r.dataset.getDataType("y",e);t=null==t?.05:t;var o=j.data.chart.axes.yaxis,s=null==o[e].minRange||""===o[e].minRange?null:o[e].minRange,d=null==o[e].maxRange||""===o[e].maxRange?null:o[e].maxRange;z[e]=null!=o[e]&&null!=o[e].baseline&&JSON.parse(o[e].baseline.show)?JSON.parse(o[e].baseline.value):null,null==L[e]&&(L[e]=a?l(z[e]):n(e),L[e]=g(L[e],R(r.userdata,"chart.axes.yaxis")?r.userdata.chart.axes.yaxis[e]||{}:{}));var u=L[e];if(null==u||a&&null==u[e])return["NoData","NoData"];var c=a?u[e]:u;E[e]=null==z[e]||a?parseFloat(s)<0||c[0]<0?0:null:z[e];var h=(j.noofBarEnabledSeries||j.noofAreaEnabledSeries)&&!j.hasLevelMarker&&(null!=E[e]?E[e]>0:"numeric"==i);if("numeric"!=i||!j.noofBarEnabledSeries&&!j.noofAreaEnabledSeries||c[1]-c[0]||(c=d3.extent(d3.merge([c,[0]]))),!j.isBubbleEnabled||null!=s&&null!=d||"time"==i)j.hasLevelMarker&&(c=x(c));else{c[0]=h?0:c[0];var p=m(c,"y",e);c=[c[0]-p[0],c[1]+p[1]]}var f=c[1]-c[0];f=0==f?1:f;var y=j.isStackedPercentChart||j.hasLevelMarker?0:f*t,v=null!=s?parseFloat(s):h?0:c[0]-y,b=null!=d?parseFloat(d):c[1]+y,k=0;return"time"!=this.dataset.getDataType("y",e)&&0!=t&&(k=j.getCorrectionOverDataLabels([v,b],"y",e)),v=(null!=s||h?v:v-k)||0,b=(null!=d?b:b+k)||0,[v,b]},j.getMinMaxZ=function(){var e=t.categoriesStore.z;return d3.extent(d3.merge(e))},j.isbarenabled=function(t){var a=c(t.type||e.seriesdata.type,"numeric");return(parseInt(a)===tt.charttype.bar||parseInt(a)===tt.charttype.stkdbar||parseInt(a)===tt.charttype.gantt)&&!t.disabled},j.isstacked=function(t){var a=j.data.chart.plot.plotoptions;if(null!=t){var r=c(t,"numeric");return t=c(t,"string"),a=a[t],r==tt.charttype.stkdarea||r==tt.charttype.stkdbar?!0:"bar"==t||"area"==t||"web"==t||"line"==t?null!=a&&null!=a.stacked&&null!=a.stacked.enabled&&JSON.parse(a.stacked.enabled):r==tt.charttype.bullet||"bullet"===t?!0:!1}if(null==M){var n=e.seriesdata.chartdata;T=T||h(e);var l=-1!=T.indexOf(tt.charttype.bar),i=-1!=T.indexOf(tt.charttype.area),o=-1!=T.indexOf(tt.charttype.stkdbar),s=-1!=T.indexOf(tt.charttype.stkdarea),d=-1!=T.indexOf(tt.charttype.bullet),u=c(n[0].type||e.seriesdata.type,"numeric");M=s||o||d?!0:R(j.data.chart,"plot")&&(l&&R(a,"bar.stacked.enabled")&&JSON.parse(a.bar.stacked.enabled)||i&&R(a,"area.stacked.enabled")&&JSON.parse(a.area.stacked.enabled)||u===tt.charttype.web&&R(a,"web.stacked.enabled")&&JSON.parse(a.web.stacked.enabled)||u===tt.charttype.line&&R(a,"line.stacked.enabled")&&JSON.parse(a.line.stacked.enabled))?!0:!1}return M},j.getAxisRotated=function(){var e=!1,t=j.data.chart.axes;return null!=t&&null!=t.rotated&&(e=JSON.parse(t.rotated)),e},j.containsNegativeData=function(e){return E[e]},j.getXYvalue=function(a,r,n,l,i,o,s,d,u){if(j.isPolarAxisCategory){var c=e.chart.axes.yaxis[i].reversed&&!r?l.domain().length-1:0,h=n(t.getX(o)),p=r?l(o.y+o.y0):l(t.getY(o,i))+(null!=l.rangeBand?l.rangeBand()/2:0);p=Math.max(p,l.range()[c]);var f=ee(p,h);return"x"===s?f[0]:f[1]}switch(s){case"x":return a?r?l(o.y+o.y0):l(t.getY(o,i,u))+(null!=l.rangeBand?l.rangeBand()/2:0):n(t.getX(o))+(null!=n.rangeBand?n.rangeBand()/2:0);case"y":return a?n(t.getX(o))+(null!=n.rangeBand?n.rangeBand()/2:0):r?l(o.y+o.y0):l(t.getY(o,i,u))+(null!=l.rangeBand?l.rangeBand()/2:0);case"z":return d(t.getZ(o)||d.domain()[0])}},j.getTransRectValue=function(e,a,r,n,l,i,o){var s=l&&t.getY(a,l.yaxiscolumnorder)instanceof Array,d=l&&l.yscale.range()[0],u=l&&l.yscale.range()[1];switch(e){case"x":if(l.axisrotated){o=s?0:null;var c=t.getY(a,l.yaxiscolumnorder,o);return l.yscale(l.stacked?Math.min(a.y0,a.y+a.y0):null!=o?c:null!=l.hasNegValue?c<l.hasNegValue?c:l.hasNegValue:l.yscale.domain()[0])}var h=t.getX(a);return(l.stacked?l.bandwidth1(h)+l.bandwidth2(l.stackGroupIndex):l.bandwidth1(h)+l.bandwidth2(l.barDatasetIndex+r))+l.padding;case"y":if(l.axisrotated){var h=t.getX(a);return(l.stacked?l.bandwidth1(h)+l.bandwidth2(l.stackGroupIndex):l.bandwidth1(h)+l.bandwidth2(l.barDatasetIndex+r))+l.padding}o=null!=o?o:s?1:null;var c=t.getY(a,l.yaxiscolumnorder,o);return l.stacked?l.yscale(Math.max(a.y0,a.y+a.y0))+l.addRangeBand(l.yscale):l.yscale(null==l.yscale.rangeBand?Math.max(l.hasNegValue||0,c):c)+l.addRangeBand(l.yscale);case"width":if(l.axisrotated){var p=null==l.hasNegValue?s?l.yscale(t.getY(a,l.yaxiscolumnorder,0)):d:l.yscale(l.hasNegValue);o=s?1:null;var c=l.yscale(t.getY(a,l.yaxiscolumnorder,o));return l.stacked?Math.abs(l.yscale(a.y+a.y0)-l.yscale(a.y0))+l.addRangeBand(l.yscale):(Math.abs(u-p-(u-c))||0)+l.addRangeBand(l.yscale)}return l.barWidth;case"height":if(l.axisrotated)return l.barWidth;var p=null!=l.hasNegValue?l.yscale(l.hasNegValue):s&&!l.stacked?l.yscale(t.getY(a,l.yaxiscolumnorder,0)):d;o=s?1:null;var c=l.yscale(t.getY(a,l.yaxiscolumnorder,o));return l.stacked?Math.abs(p-l.yscale(a.y+a.y0)-(p-l.yscale(a.y0)))+l.addRangeBand(l.yscale):Math.abs(p-c)+l.addRangeBand(l.yscale);case"radius":var g={},m=null!=i?i.toString().split("/"):null,y=null!=m&&null!=m[0]?m[0].split(" "):[],v=null!=m&&null!=m[1]?m[1].split(" "):y;return g.tlx=parseInt(f([y[0]])),g.tly=parseInt(f([v[0],y[0]])),g.trx=parseInt(f([y[1],y[0]])),g.trY=parseInt(f([v[1],v[0],y[1],y[0]])),g.brx=parseInt(f([y[2],y[0]])),g.bry=parseInt(f([v[2],v[0],y[2],y[0]])),g.blx=parseInt(f([y[3],y[1],y[0]])),g.bly=parseInt(f([v[3],v[1],y[3],y[0]])),g}},j.updateSeriesdatabyCategories=function(e,a){var r=o(t,"x");return e=e.filter(function(e){var n=t.getActualX(e);return!r(n)&&a.indexOf(n)>-1})},j.overBubbles=m,j.extendOuterpadding=function(e,t,n,l,i,o,s){t[0]>t[1]&&(t=[t[1],t[0]]);var d=d3.scale.ordinal().domain(e).rangeBands(t,l,i),u=t;if(j.isBubbleEnabled){var c=y(t,d,o,s),h=.5*Math.max(t[0]-c[0],c[1]-t[1]);u=[c[0]-h,c[1]+h]}else if(tt.labelRenderer){var p="x"==o?a:A[s],f=Xe(o,p,r),g=d.range()[0]-d.rangeExtent()[0],f=Math.max(0,f-g);u=[t[0]-f,t[1]+f]}var m=v(d,l,i,u);return m},j.getCorrectionOverDataLabels=function(e,t,n){var l="x"==t,i=t+(D(n)?n:""),o=l?j.data.chart.axes.xaxis:j.data.chart.axes.yaxis[n],s=o.minRange,d=o.maxRange,u=r.plotarea.height;if(!(j.isStackedPercentChart||j.isBubbleEnabled&&!j.pieWithAxis||!j.isAxisCategory&&!j.isNonAxisMultiSeriesCategory||null!=s&&null!=d||!tt.labelRenderer||null!=N.byDatalabels[i]&&u==N.plotHeight)){N.plotHeight=u;var c=r.axes[l?"xaxis":"yaxes"].orient,h=r.plotarea["left"==c?"height":"width"],p=e[1]-e[0],f=l?a:A[n],g=null!=f?Xe(t,f,r):0;N.byDatalabels[i]=p/(h-g)*g}return N.byDatalabels[i]||0},j.findXCategories=function(e){var r=t.categoriesStore.x;return a.forEach(function(a){var n=a.disabled&&!e,l=a.data;n||null==l||l.constructor!=Array||l.map(function(e){return null!=e&&e.constructor==Array?e.map(function(e){var a=t.getX(e);null!=a&&-1==r.indexOf(a)?r.push(a):null}):void 0})}),r},j.initialize=function(n){function l(e){var t=e.columns,a=e.axes.groupby||[];return a.map(function(e){return t[e].dataindex})}function i(e,t){var a=[],r=[];return e.data.forEach(function(e){var n=t.reduce(function(t,a){return t+e[a]},"");r.push(n),-1==a.indexOf(n)&&a.push(n)}),{distintGroupbyCat:a,allGroupbyCat:r}}function f(e,t){var a=e.metadata.axes.x,r=d3.merge(e.metadata.axes.y),n=e.metadata.columns[a].datatype,l=r.map(function(t){return e.metadata.columns[t].datatype}),i=[],o=[];if("time"==n&&!t){var s=e.metadata.columns[a].time;o.push(null==s||null==s.inputformat||"function"!=typeof s.inputformat&&"function"!=typeof window[s.inputformat]&&"timestamp"==s.inputformat.toLowerCase()?null:s),i.push(e.metadata.columns[a].dataindex)}return r.map(function(t,a){if("time"==l[a]){var r=e.metadata.columns[t].time;o.push(null==r||null==r.inputformat||"function"!=typeof r.inputformat&&"function"!=typeof window[r.inputformat]&&"timestamp"==r.inputformat.toLowerCase()?null:r),i.push(e.metadata.columns[t].dataindex)}}),{indices:i,formatConf:o}}function g(e,t){var a=t.indices,r=t.formatConf;return a.map(function(t,a){null!=e[t]&&(e[t]=e[t]instanceof Array?e[t].map(function(e){return Te(e,null,r[a],!0).getTime()}):Te(e[t],null,r[a],!0).getTime())}),e}k=null,L=[],N.plotHeight=null,w=null,N.forBubbles={};var m=e.seriesdata.type,y=e.metadata.axes.y.length,v=e.metadata,x=v.axes,b=(v.columns,j.isstacked());A=[],C=d3.map(),S=d3.map(),t.seriesTypes=[],j.isBubbleEnabled=!1,j.noofBarEnabledSeries=0,j.noofAreaEnabledSeries=0,j.totalnoofdatas=0,j.isCombinationalChart=d3.set(),j.isAxisCategory=!1,j.isNonAxisMultiSeriesCategory=!1,j.isContinousChart=!0,j.isPolarAxisCategory=!1,j.hasLevelMarker=!1,j.isStackedPercentChart=!1,t.categoriesStore={},t.categoriesStore.x=[],t.categoriesStore.z=[],t.categoriesStore.subseries=[],t.hasNullFormatter={},j.seriesExtermes=[];for(var O=e.chart.axes.yaxis,P=0;y>P;P++)t.categoriesStore["y"+P]=[],j.seriesExtermes[P]=[],D(O[P])?null:O[P]={};if(null!=a&&a.constructor==Array){var M=null!=x.x?t.getColumn("x"):null,E=null!=M?M.datatype:null,z=null!=x.z,I=t.categoriesStore.x,B=t.categoriesStore.z,H=l(v);if(T=T||h(e),j.isDiscrete=tt.chartcategory.discrete.some(function(e){return-1!=T.indexOf(e)}),j.isHierarchy=tt.chartcategory.hierarchy.some(function(e){return-1!=T.indexOf(e)}),"addorremoveseries"!=n&&!j.isHierarchy){var Y,F,_;Y=f(e),F=Y.indices,_=Y.formatConf,null!=F&&F.length>0&&_.some(function(e){return null!=e&&null!=e.inputformat})&&a.forEach(function(e){var t=e.data,a=s(t);null!=t&&t.constructor==Array&&t.forEach(function(e){a&&null!=e&&e.constructor==Array&&e.forEach(function(e){e=g(e,Y)}),a||(e=g(e,Y))})})}var V=e.metadata.axes.x,W=e.metadata.columns[V].datatype;!JSON.parse(tt.requireXDataSorting)||j.isHierarchy||"numeric"!=W&&("time"!=W||j.isDiscrete)||a.forEach(function(t){var a=t.data,r=e.metadata.columns[V].dataindex,n=s(a);n&&null!=a&&a.constructor==Array&&a.forEach(function(t){t=p(t,W,function(e){return e[r]},e.metadata.columns[V][W])}),n||(a=p(a,W,function(e){return e[r]},e.metadata.columns[V][W]))});var J=!1,X=0;a.forEach(function(a,r){var l=a.disabled,d=a.data,h=s(d),p=c(a.type||m,"numeric"),f=(c(a.type||m,"string"),u(a.yaxiscolumnorder)),g=t.categoriesStore["y"+f],y=t.getDataType("y",f);if(t.seriesTypes.push(p),j.isCombinationalChart.add(p),j.isBubbleEnabled=j.isBubbleEnabled||!l&&Ce(p),j.pieWithAxis=j.pieWithAxis||parseInt(p)===tt.charttype.bubblepie,j.noofBarEnabledSeries+=be(p)&&!l?1:0,j.noofAreaEnabledSeries+=p!=tt.charttype.area&&p!=tt.charttype.stkdarea||l?0:1,j.isContinousChart=j.isContinousChart&&(11==p||12==p||14==p||15==p||20==p||21==p),j.hasLevelMarker=j.hasLevelMarker||p==tt.charttype.bullet||p==tt.charttype.dial,j.isAxisCategory=j.isAxisCategory||tt.chartcategory.axis.indexOf(p)>=0,j.isNonAxisMultiSeriesCategory=j.isNonAxisMultiSeriesCategory||tt.chartcategory.nonaxismultiseries.indexOf(p)>=0,j.isPolarAxisCategory=j.isPolarAxisCategory||p==tt.charttype.web,!l&&null!=d&&d.constructor==Array){if(t.categoriesStore["y"+f].enabled=!0,"addorremoveseries"!=n&&!h)if(H.length>0&&(p==tt.charttype.bar||p==tt.charttype.stkdbar)){var v=i(a,H),x=v.distintGroupbyCat,k=v.allGroupbyCat,w=[];a.data.forEach(function(e,t){var a=x.indexOf(k[t]);w[a]?w[a].push(e):(w[a]=[],w[a].push(e))}),d=a.data=w}else if(null!=d&&(!d.length||null!=d[0]&&d[0].length)){var w=d;a.data=[],a.data.push(w),d=a.data}var O={si:r,d:d};A[f]=A[f]?A[f].concat([O]):[O];var P;if(b&&be(p)){e.seriesdata.stackGroup&&(P=he(r,e.seriesdata.stackGroup));var L=null!=P?P:0;if(C.has(L)){var N=C.get(L);C.set(L,N.concat([O]))}else C.set(L,[O]);C.get(L).stackLabelIndex=r}var Y=null!=P?p+"_"+P:p;if(S.has(Y)){var N=S.get(Y);S.set(Y,N.concat([O]))}else S.set(Y,[O]);var F=t.getDataType("x",null,T),_=t.getColumn("y",f);t.hasNullFormatter.x=D(t.hasNullFormatter.x)?t.hasNullFormatter.x:!("ordinal"===F?!R(M[E],"nullformatting"):!0),t.hasNullFormatter["y"+f]=D(t.hasNullFormatter["y"+f])?t.hasNullFormatter["y"+f]:!("ordinal"===y?!R(_[_.datatype],"nullformatting"):!0);{var V=o(t,"x"),W=o(t,"y",f);j.getCategories("x"),j.getCategories("y",f)}if(b?d.map(function(e){return l||null==e||e.constructor!=Array?void 0:e.map(function(a){var r=t.getX(a),n=H.length>0?t.getGroupByValues(a,H):null;r>X&&!J?X=r:J||-1!=I.indexOf(r)||(J=!0),V(r)||-1!=I.indexOf(r)?null:I.push(r),null!=n&&(e.groupByVal=n,a.groupByVal=n,-1==t.categoriesStore.subseries.indexOf(n)?t.categoriesStore.subseries.push(n):null)})}):("ordinal"==F||"ordinal"==y)&&d.map(function(e){return l||null==e||e.constructor!=Array?void 0:e.map(function(e){var a=t.getActualX(e),r=t.getY(e,f);"ordinal"!=F||V(a)||(-1==I.indexOf(a)?I.push(a):null),"ordinal"==y&&(p==tt.charttype.arearange||p==tt.charttype.gantt?(null!=r&&-1==g.indexOf(r[0])?g.push(r[0]):null,null!=r&&-1==g.indexOf(r[1])?g.push(r[1]):null):W(r)||-1!=g.indexOf(r)?null:g.push(r))})}),(("numeric"==y||"time"==y)&&!b||z)&&!l&&null!=d&&d.constructor==Array){var U=d3.merge(d);if(z){var G=d3.extent(U,function(e){return t.getZ(e)});B.push(G)}if("numeric"==y||"time"==y){var Z;if(p==tt.charttype.arearange||p==tt.charttype.gantt){var q=d3.merge(U.map(function(e){return t.getY(e,f)}));Z=d3.extent(q)}else Z=d3.extent(U,function(e){return t.getY(e,f)});j.seriesExtermes[f].push(Z)}}d.map(function(e){if(!l&&null!=e&&e.constructor==Array){var t=j.isAxisCategory||j.isPolarAxisCategory||j.isNonAxisMultiSeriesCategory?e.length:e.reduce(function(e,t){return e+(t.disabled?0:1)},0);j.totalnoofdatas+=1!=t||null!=e[0]&&e[0].length?t:0}})}});var U=null;if(R(r.userdata,"chart.axes.xaxis.categories")&&(U=r.userdata.chart.axes.xaxis.categories),j.isAxisCategory&&"ordinal"!=W&&J&&(null===U||U&&0===U.length)&&t.categoriesStore.x.sort(d3.ascending),j.xymultiRenderer=j.isAxisCategory,j.isCombinationalChart=j.isCombinationalChart.values().length>1,j.groupedByStack=C,b){var G=t.seriesTypes,Z=j.data.chart.plot.plotoptions;j.isStackedPercentChart=j.noofBarEnabledSeries&&!j.hasLevelMarker&&"percent"==Z.bar.stacked.showAs||j.noofAreaEnabledSeries&&"percent"==Z.area.stacked.showAs||G.indexOf(tt.charttype.web)>-1&&"percent"==Z.web.stacked.showAs||G.indexOf(tt.charttype.line)>-1&&"percent"==Z.line.stacked.showAs}j.pieWithAxis&&"addorremoveseries"!=n&&(j.bubblepieData=d())}},j.initialize(),j},tt.defaultTheme=function(e){var t={canvas:{fontFamily:Pt.globalProp.fontL1Family,fontColor:Pt.globalProp.fontL1Color,fontSize:e.fontL1Size.l3,fontWeight:Pt.globalProp.fontL1Weight,fontStyle:Pt.globalProp.fontL1Style,title:{show:!0,text:"Title comes here",hAlign:"left",vAlign:"top",marginTop:10,marginRight:0,marginBottom:0,marginLeft:10,fontSize:e.fontL1Size.l1},subtitle:{show:!0,text:"Description comes here",hAlign:"left",vAlign:"top",marginTop:0,marginRight:0,marginBottom:0,marginLeft:10,fontSize:e.fontL1Size.l2},background:{alpha:1,color:"#FFFFFF"},border:{show:!0,size:1,style:"solid",radius:1,color:"#cccccc"},shadow:{show:!0,x:1,y:1,color:"rgba(0,0,0,0.1)",blur:2,inset:!1},intelligence:{dimension:{title:100,subtitle:120,xaxis:70,xaxislabel:80,yaxis:70,yaxislabel:80,legend:140,credits:150,marker:50},dataCount:{marker:300,animation:300,datalabels:900}}},legend:{enabled:!0,colorPallete:{type:"multicolor",options:{multicolor:"countries",monochrome:{baseColor:"red",count:5,colorGamma:[.3,.9]}}},hAlign:"right",vAlign:"center",fontSize:e.fontL1Size.l5,textPadding:5,itemMargin:5,marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,colorBox:{shape:"square",strokeWidth:2},title:{show:!1,text:"Legend",fontSize:e.fontL1Size.l4},background:{color:"transparent",alpha:0},border:{show:!0,size:1,style:"solid",radius:0,color:"transparent"},itemDisabledStyle:{color:"#d1d1d1",strikeout:!1},shadow:{show:!1,color:"rgba(0,0,0,0.3)",x:2,y:2,blur:3,inset:!1},filter:{enabled:!0},highlightEffect:{selectedSeries:null,unselectedSeries:"none"}},chart:{marginTop:10,marginRight:10,marginBottom:10,marginLeft:10,fontSize:e.fontL2Size.l3,effects:{choice:"auto",options:{dropShadow:{dx:"5",dy:"5",blur:"3",color:"rgba(0,0,0,0.6)"},freeHand:{scale:7}}},plot:{renderer:{mode:"svg",image:{source:"auto",addDimensionInSource:!1,exportUrl:""}},background:{alpha:1,color:"transparent",gradients:{show:!1,type:"radial"}},border:{show:!1,size:1,style:"solid",radius:0,color:"#ececec"},animation:{enabled:Pt.globalProp.animation.enabled,easingType:Pt.globalProp.animation.easingType,duration:Pt.globalProp.animation.duration},datalabels:{show:Pt.globalProp.datalabels.enabled,handleOverlapping:!0,fontSize:e.datalabels.fontSize.l5},events:{cursor:null,click:Pt.globalProp.events.click,mousemove:Pt.globalProp.events.mouseMove,mouseout:Pt.globalProp.events.mouseOut,doubleclick:Pt.globalProp.events.doubleClick,contextmenu:null,init:null,onload:null},plotoptions:{}},axes:{xaxis:{show:!0,label:{show:!0,text:"Xaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{color:"transparent",strokeWidth:null},ticklabel:{rotation:0,textOverflow:"ellipsis",fontSize:e.fontL2Size.l5,minmaxlabels:{show:!0}},tickmark:{strokeWidth:null,color:"#ececec",size:3},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:10,color:"black"},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}},yaxis:[{show:!0,label:{show:!0,text:"Yaxis",fontSize:e.fontL2Size.l4,marginTop:5,marginRight:5,marginBottom:5,marginLeft:5},grid:{color:"#ececec"},ticklabel:{textOverflow:"ellipsis",fontSize:e.fontL2Size.l5,rotation:0},tickmark:{color:"#ececec",size:3},subtickmark:{color:"#ececec",size:5,count:0},axisline:{show:!0,color:"#ececec",strokeWidth:null,style:"solid"},baseline:{show:!1,value:0,color:"grey",strokeWidth:null},threshold:{line:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5},marker:{enabled:!0}},coloroverlay:{show:!1,values:[],overlayRange:"below"},range:{show:!1,values:[],label:{text:["Description comes here"],fontSize:e.fontL2Size.l5}}}}]}},tooltip:{enabled:!0,fontSize:e.fontL1Size.l5,opacity:.8,zindex:2e3,view:"normal",crosshair:{type:"none",color:"grey"}},noDataHandler:{text:"No Data",fontSize:e.fontL1Size.l1},loader:{type:"none",fontSize:e.fontL1Size.l3}};return t},tt.getDefaultOptions=function(e,t,a){var r;switch(e){case"zoom":r={type:"none",resetButton:{fillColor:"grey",label:{text:"Reset Zoom",marginTop:5,marginRight:5,marginBottom:5,marginLeft:5,fontSize:a.fontL2Size.l5},border:{show:!0,size:1,radius:6,color:"#cccccc"},shadow:{show:!1,dx:1,dy:1,color:"#cccccc",blur:1}},selectionArea:{fillColor:"grey",fillOpacity:.4}};break;case"scroll":r={enabled:!0,categoryThickness:null,visibleCategories:null,height:10,slider:{fillOpacity:.3,strokeColor:"black"}};break;case"legend":r={};break;case"credits":r={enabled:!1,imageWidth:150,imageHeight:50,hAlign:"right",vAlign:"bottom",text:"Zoho Reports",target:"newtab",marginTop:0,marginRight:10,marginBottom:10,marginLeft:0,fontSize:a.fontL1Size.l4};break;case"notes":r={enabled:!1,chartValues:[],plotValues:[],blockValues:[],type:"stickyNote",options:{stickyNote:{headWidth:15,headHeight:15,bodyWidth:100,bodyHeight:100,fontSize:a.fontL1Size.l5,color:["#F0F8FF","#FFE4C4","#DCDCDC","#ADFF2F","#90EE90","#87CEFA","#FFC0CB","#B0E0E6","#D2B48C","#D8BFD8","#EE82EE","#F5DEB3"],mode:"close",border:"1px solid grey"},customNote:{fontSize:a.fontL1Size.l5}}};break;case"bar":r={outerPadding:.04,fillOpacity:.9,maxBandWidth:200,multiColoring:!1,border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},levelMarker:{enabled:!1,color:"#d8d8d8",fillOpacity:.9},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},animation:{type:"verticalAll"},gradients:{options:{linear:{y2:50}}}};break;case"line":r={mode:"linear",strokeWidth:2,outerPadding:.02,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeWidth:2,outerFillColor:"transparent",outerStrokeColor:"transparent"},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}},gradients:{options:{linear:{x2:10,spreadMethod:"reflect"}}}};break;case"area":r={strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}}};break;case"arearange":r={strokeOpacity:.5,outerPadding:.02,fillOpacity:.4,mode:"linear",stacked:{enabled:!1,showAs:"values"},marker:{enabled:!1,outerFillColor:"transparent",outerStrokeOpacity:.5,size:1},hoveroptions:{innerStrokeWidth:2,outerFillOpacity:.5,outerStrokeOpacity:.1},datalabels:{showAs:"y"},gradients:{options:{linear:{x2:50}}},animation:{type:"vertPathTweenAll",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}}};break;case"geoscatter":case"scatter":r={outerPadding:.02,multiColoring:!1,marker:{size:1,innerFillColor:"white",
innerStrokeColor:"white",innerStrokeWidth:0,innerStrokeOpacity:1,outerFillColor:"white",outerStrokeOpacity:1,outerStrokeWidth:2},hoveroptions:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},datalabels:{showAs:"y"},animation:{type:"allseries"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[2,0]},radial:{radius:90,colorGamma:[2,0]}}}};break;case"bubblepie":case"pie":r={startAngle:0,endAngle:2*Math.PI,innerRadius:0,outerPadding:20,datalabels:{type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"fanAll"},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90}}},models:{count:50}},"bubblepie"==e?(r.strokeColor="transparent",r.outerPadding=.02,r.datalabels.showAs="percent",r.hoveroptions={innerFillColor:"transparent",innerStrokeColor:"transparent",outerFillColor:"transparent",outerStrokeWidth:3}):(r.strokeColor="white",r.sliceOutHeight=5,r.maxRadius=250,r.datalabels.showAs="x");break;case"funnel":r={weighted:"height",split:!1,canOverlap:!0,threeDimension:!0,outerPadding:"2%",stemHeight:"20%",stemWidth:"20%",coneWidth:"100%",emptyFunnel:{show:!1,color:"#FAFAFA"},datalabels:{showAs:"x",type:"strokeddoubleside",padding:30,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.6,0]}}},animation:{type:"vertical"}};break;case"web":r={fillOpacity:.5,strokeWidth:2,mode:"linear-closed",outerPadding:10,stacked:{enabled:!1,showAs:"values"},marker:{enabled:!0,innerStrokeOpacity:1,outerFillColor:"white"},hoveroptions:{innerStrokeWidth:2,innerStrokeOpacity:1,outerFillColor:"white"},datalabels:{showAs:"y"},animation:{type:"strokeTween",marquee:{enabled:!1,duration:300},blink:{enabled:!1,type:"twinkle",duration:400}},gradients:{options:{linear:{x2:15,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:90,x:0,y:0}}}};break;case"pyramid":r={threeDimension:!0,strokeColor:"black",strokeWidth:null,strokeOpacity:.5,fillOpacity:.8,gradients:{options:{linear:{x2:50,spreadMethod:"reflect",colorGamma:[.8,0]}}},datalabels:{showAs:"y",type:"singleside",padding:10,relativeX:!0,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent"}},animation:{type:"vertical"}};break;case"sunburst":r={strokeColor:"white",innerRadius:30,outerPadding:20,animation:{type:"fan"},datalabels:{showAs:"y",type:"circular",padding:10,line:{strokeColor:"grey",strokeWidth:.3},innerLabel:{show:!1,showAs:"percent",parentLabel:{show:!1}}}};break;case"dial":r={startAngle:-Math.PI/2,endAngle:Math.PI/2,innerRadius:"65%",maxRadius:500,outerPadding:20,padding:0,strokeColor:"rgba(0,0,0,0.1)",animation:{type:"fanAll"},needle:{show:!0,type:"round",strokeColor:"black",fillColor:"grey",width:15,padding:15},minmaxlabels:{show:!0,fontSize:a.datalabels.fontSize.l5},datalabels:{show:!0,showAs:"y",padding:2},levelMarker:{enabled:!0,strokeColor:"rgba(0,0,0,0.1)",innerPadding:0,outerPadding:0,colorGamma:[.3,.9]},gradients:{options:{linear:{x2:2,y2:2,spreadMethod:"repeat",gradientUnits:"userSpaceOnUse"},radial:{radius:16.5,spreadMethod:"reflect"}}},events:{enabled:!1}};break;case"geobubble":case"bubble":r={outerPadding:.02,multiColoring:!1,marker:{innerFillOpacity:0,innerStrokeWidth:0,innerStrokeOpacity:0,outerFillOpacity:.4,outerStrokeOpacity:1},hoveroptions:{innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeOpacity:1,innerStrokeWidth:0,outerFillOpacity:.3,outerStrokeOpacity:.5},datalabels:{showAs:"y"},animation:{type:"sizing"},gradients:{options:{linear:{y2:100,gradientUnits:"userSpaceOnUse",colorGamma:[1.5,0]},radial:{radius:90,colorGamma:[1.5,0]}}}};break;case"packedbubble":r={fillOpacity:.2,outerPadding:5,animation:{type:"sizing"},datalabels:{showAs:"y"}};break;case"bullet":r={outerPadding:0,levelMarker:{enabled:!0,dataindex:2,color:[],colorGamma:[.3,.9],fillOpacity:.9,maxBandWidth:200},targetMarker:{enabled:!0,dataindex:3,symbol:"line",innerFillColor:"transparent",innerStrokeColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerFillColor:"rgba(0, 0, 0, 0.6)",outerStrokeOpacity:1,outerStrokeWidth:5,outerStrokeColor:"rgba(0, 0, 0, 0.6)"},animation:{type:"verticalAll"},datalabels:{showAs:"y",stackLabels:{show:!1,showAs:"y"}},gradients:{options:{linear:{y2:50}}}};break;case"gantt":r={outerPadding:.04,padding:0,interPadding:.05,maxBandWidth:200,levelMarker:{enabled:!1,dataindex:2,fillOpacity:.3,bandWidth:4},hoveroptions:{enabled:!1,start:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2},end:{innerStrokeOpacity:1,outerFillColor:"white",outerStrokeWidth:2}},marker:{enabled:!1,start:{size:1,innerStrokeWidth:0,outerStrokeWidth:2},end:{size:1,innerStrokeWidth:0,outerStrokeWidth:2}},border:{show:!1,size:null,style:"solid",radius:0,color:null},stacked:{enabled:!1,showAs:"values"},animation:{type:"verticalAll"},datalabels:{showAs:"y"},gradients:{options:{linear:{y2:50}}},dependency:{enabled:!1,targetIndex:0,link:{type:"ES",strokeWidth:2,strokeColor:"#111111",errorStyle:"red",padding:20},marker:{enabled:!0,padding:10,size:1.5,innerFillColor:"transparent",innerStrokeWidth:0,innerStrokeOpacity:0,outerStrokeOpacity:0,outerStrokeColor:"red",outerFillColor:"blue"}}};break;case"metadata":r={axes:{x:[0],y:[[1]],tooltip:[0,1]},columns:[{dataindex:0,columnname:"",datatype:"numeric"},{dataindex:1,columnname:"",datatype:"numeric"}]}}var n=null==t[e]?t[e]={}:t[e];return Rt(r,n,!0,!0),t[e]=r,r};var Tt={shortdash:"1.5,1.5",shortdot:"0.25,1.5",dashed:"2.5,2.5",longdash:"5,5",dotted:"0.25,2.5",shortdashdotdot:"1.5,2,0.25,2,0.25,2",dashdot:"2.5,2.5,0.25,2.5",longdashdot:"5,5,0.25,5",longdashdotdot:"5,2.5,0.25,2.5,0.25,2.5"},Et=function(){},zt=function(){};Et.get=function(e,t,a){var r="linear"==e||"radial"==e?zt:Et;if((null!=e||""!=e)&&r[e]){var n="zp"+O(t,e);if(null!=n)return null!=tt[n]?/(threshold)/gi.test(n)?"url("+t.defsLocation+"#"+t.defsLocation+n+")":n:(n=r[e](t,n,a),tt[n]=!0,/(threshold)/gi.test(n)?"url("+t.defsLocation+"#"+t.defsLocation+n+")":n)}},Et.imageFill=function(e,t){var a=e.width,r=e.height,n=Pt.patternSVG;return n.select("defs").append("pattern").attr({patternUnits:"userSpaceOnUse",id:t,width:a,height:r,x:e.x||0,y:e.y||0}).append("image").attr({"xlink:href":e.name,x:0,y:0,width:a,height:r}),t},Et.chalk=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("filter").attr({id:t,x:-.3,y:-.5,height:2,width:1.6,"color-interpolation-filters":"sRGB"});return r.append("feTurbulence").attr({baseFrequency:.32065,seed:115,result:"result1",numOctaves:1,type:"turbulence"}),r.append("feOffset").attr({result:"result2",dx:-2,dy:-2}),r.append("feDisplacementMap").attr({scale:5,yChannelSelector:"G",in2:"result1",xChannelSelector:"R","in":"SourceGraphic"}),t},Et.dropShadow=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("filter").attr("id",t);if(r.append("feGaussianBlur").attr({"in":e.source||"SourceAlpha",stdDeviation:e.blur}),"SourceGraphic"!==e.source){r.append("feOffset").attr({dx:e.dx,dy:e.dy,result:"offsetblur"});var n=r.append("feFlood");n.attr("flood-color",e.color),r.append("feComposite").attr({in2:"offsetblur",operator:"in"});var l=r.append("feMerge");l.append("feMergeNode"),l.append("feMergeNode").attr("in","SourceGraphic")}return t},Et.colorMatrix=function(e,t){{var a=Pt.patternSVG,r=a.select("defs").append("filter").attr("id",t);r.append("feColorMatrix").attr({"in":"SourceGraphic",type:e.type,values:e.values})}return t},Et.freeHand=function(e,t){{var a=Pt.patternSVG,r=(null==e.scale?7:e.scale,a.select("defs").append("filter").attr("id",t));r.append("feTurbulence").attr({type:"fractalNoise",baseFrequency:.015,numOctaves:2,result:"turbulence_3","data-filterId":3}),r.append("feDisplacementMap").attr({xChannelSelector:"R",yChannelSelector:"G","in":"SourceGraphic",in2:"turbulence_3",scale:e.scale})}return t},Et.thresholdLinear=function(e,t,a){{var r=Pt.patternSVG,n=r.select("defs").append("linearGradient").attr({id:t,gradientUnits:"userSpaceOnUse",x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2}),l=n.selectAll("stop").data(a);l.enter().append("stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}),l.attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color})}return l.exit().remove(),t},Et.diagonalPattern=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("pattern").attr({id:t,patternUnits:"userSpaceOnUse",width:10,height:10});return r.append("rect").attr({x:0,y:0,width:10,height:10}).style("fill",e.bgClr),r.append("path").attr({d:"M 0 10 L 0 10 10 0 M 0 1 L 0 1 0 0 M 1 0 L 1 0 0 0 M 9 10 L 9 10 10 10 M 10 9 L 10 9 10 10",stroke:e.strkColor||"white","stroke-width":e.strokeWidth,"stroke-opacity":e.strokeOpacity}),t},Et.circlePattern=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("pattern").attr({id:t,patternUnits:"userSpaceOnUse",width:10,height:10});return r.append("rect").attr({x:0,y:0,width:10,height:10}).style("fill",e.bgClr),r.append("circle").attr({cx:5,cy:5,r:5}).style({stroke:e.strkColor||"white",fill:e.bgClr,"stroke-opacity":e.strokeOpacity,"stroke-width":1}),t},Et.noisePattern=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("filter").attr({id:"noise",x:0,y:0});r.append("feTurbulence").attr({type:"fractalNoise",baseFrequency:"0.7",numOctaves:"10",stitchTiles:"stitch"});var n=a.select("defs").append("pattern").attr("id",t).attr("patternUnits","userSpaceOnUse").attr("width",10).attr("height",10);return n.append("rect").attr({x:0,y:0,width:10,height:10}).style("fill","#000"),n.append("rect").attr({x:0,y:0,width:10,height:10,filter:"url("+z()+"#noise)"}),t},Et.horizontalStripes=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("pattern").attr({id:t,patternUnits:"userSpaceOnUse",width:10,height:10});return r.append("rect").attr({x:0,y:0,width:10,height:10}).style("fill",e.bgClr),r.append("rect").attr({x:0,y:0,width:10,height:4}).style("fill",e.bgClr),r.append("rect").attr({x:0,y:2,width:10,height:4}).style("fill",e.strkColor||"white").style("fill-opacity",.4),t},Et.crossStripes=function(e,t){var a=Pt.patternSVG,r=a.select("defs").append("pattern").attr({id:t,patternUnits:"userSpaceOnUse",width:10,height:10});return r.append("rect").attr({x:0,y:0,width:10,height:10}).style("fill",e.bgClr),r.append("path").attr({d:"M0 0L10 10ZM10 0L0 10Z","stroke-width":1,stroke:e.strkColor||"white","stroke-opacity":.5}),t},zt.get=function(e,t,a,r,n,l){var i=e.type;if(i&&"none"!==i){var o=n?n.plot.renderer.mode:"svg",s=e.options[i]||e.options,d=Lt(s);switch(d.color=null!=t?t:d.color,d.dimension=null!=a?a:d.dimension,d.defsLocation=n?n.defsLocation:"",o){case"canvas":return d.pointOpacity=l||1,canvasGradient.create(n.context,i,d,r);default:return Et.get(i,d,r)}}},zt.radial=function(e,t){var a=Pt.patternSVG,r=e.color,n=e.dimension,l=e.spreadMethod,i=n[0]/100*(+e.x||0),o=n[0]/100*(+e.y||0),s="repeat"!==l&&"reflect"!==l||!Mt.IS_IOS&&!Mt.SAFARI?n[0]/100*+e.radius:n[0],d=a.select("defs").append("radialGradient").attr({id:t,gradientUnits:"userSpaceOnUse",spreadMethod:l,cx:i+"px",cy:o+"px",r:s+"px"});return zt.addStop(d,e,r,"radial"),t},zt.linear=function(e,t,a){var r=Pt.patternSVG,n=e.color,l=e.dimension,i=e.spreadMethod,o=+e.x1||0,s=+e.x2||0,d=+e.y1||0,u=+e.y2||0,c="repeat"!==i&&"reflect"!==i||!Mt.IS_IOS&&!Mt.SAFARI?100:Math.max(Math.abs(s-o),Math.abs(u-d)),h="pie"==a||"web"==a?-l[0]:0,p=d3.scale.linear().domain([0,100]).range([h,l[0]]),f=d3.scale.linear().domain([0,100]).range([h,l[1]]);o=100*o/c,s=100*s/c,d=100*d/c,u=100*u/c;var g=r.select("defs").append("linearGradient").attr({id:t,gradientUnits:e.gradientUnits,spreadMethod:i});return g.attr("userSpaceOnUse"==e.gradientUnits?{x1:p(o)+"px",x2:p(s)+"px",y1:f(d)+"px",y2:f(u)+"px"}:{x1:o+"%",x2:s+"%",y1:d+"%",y2:u+"%"}),zt.addStop(g,e,n,"linear"),t},zt.addStop=function(e,t,a,r){"use strict";for(var n=this.getStops(e,t,a,r),l=0;l<n.offset.length;l++)e.append("stop").attr("offset",n.offset[l]).style({"stop-color":n.color[l],"stop-opacity":n.opacity[l]})},zt.getStops=function(e,t,a,r){"use strict";var n=t.stopOffset,l=t.stopOpacity,i=t.stopColor,o=t.colorGamma||[1,0],s=t.spreadMethod,d="radial"==r?+t.radius:Math.max(Math.abs((+t.x2||0)-(+t.x1||0)),Math.abs((+t.y2||0)-(+t.y1||0)));if(n=n||["0%","100%"],i=("function"==typeof i?i(a):i)||n.map(function(e,t){return d3.hsl(a).brighter(o[t]||0)}),l=l||[1,1],("repeat"===s||"reflect"===s)&&(Mt.IS_IOS||Mt.SAFARI)){for(var u=[],c=[],h=[],p=0,f=0;100>p;){for(var g=0,m=n.length;m>g;g++)u.push(parseFloat(n[g])/100*d+p+"%"),h.push(f%2!=0?l[l.length-1-g]:l[g]),c.push(f%2!=0?i[i.length-1-g]:i[g]);p+=d,f+="reflect"===s?1:0}n=u,i=c,l=h}return{offset:n,color:i,opacity:l}},tt.utils=function(){};var Rt=tt.utils.mergeJSON=function(e,t,a,r){e=e||{},t=t||{};var n=null!=r&&1==r?e:Lt(e);for(var l in t)t.hasOwnProperty(l)&&(void 0!=n[l]?null==t[l]||t[l].constructor!=Object&&t[l].constructor!=Array?1==a&&"object"==typeof n&&(n[l]=t[l]):n[l]=Rt(n[l],t[l],a,r):n[l]=t[l]);return n};tt.utils.getValueOfPlotOptions=function(e,t){return function(a){return null!=e&&null!=e[a]?e[a]:null!=t&&null!=t[a]?t[a]:null}},tt.utils.getVal=function(e){return"function"==typeof e?e():e};var Lt=tt.utils.simpleClone=function(e){var t,a=e;if(e&&"object"==typeof e){a="[object Array]"===Object.prototype.toString.call(e)?[]:{};for(t in e)a[t]=Lt(e[t])}return a},Nt=tt.utils.getPropVal=function(e,t){return R(e,t,!0)};tt.scale.constructor=function(e,t,a,r){function n(){var t=e.brush?e.brush.extent:null;return e.axes.xaxis.scale=a(e,e.dataObject,e.plotarea,e.axes.xaxis.orient,null,e.dataset,"x",t),e.axes.xaxis.eventscale=null==r?e.axes.xaxis.scale:r(e,e.dataObject,e.plotarea,e.axes.xaxis.orient,null,e.dataset,"x"),[{scale:e.axes.xaxis.scale}]}function l(){for(var t=e.axesCount,n=e.axes.yaxes,l=0;t>l;l++)n.groups[l]||(n.groups[l]={}),n.groups[l].scale=a(e,e.dataObject,e.plotarea,e.axes.yaxes.orient,l,e.dataset,"y"),n.groups[l].eventscale=null==r?n.groups[l].scale:r(e,e.dataObject,e.plotarea,e.axes.yaxes.orient,l,e.dataset,"y");return e.axes.yaxes.groups}{var i,o=tt.scale.getScale;tt.scale.getEventScale}switch(a=null!=a?a:o,t){case"left":i=e.axes.rotated?n():l();break;case"bottom":i=e.axes.rotated?l():n()}return i},tt.scale.getScale=function(e,t,a,r,n,l,i,o,s){function d(){var n=p.chart.plot.plotoptions[t.pieWithAxis?"bubblepie":"bubble"]||{},l=Math.min(a.width,a.height),o=I(n.size,1),s=w?v?[I(k.endAngle,2*Math.PI),I(k.startAngle,0)]:[I(k.startAngle,0),I(k.endAngle,2*Math.PI)]:"z"==i?[re(n.minSize,l,re("2.5%",l))*o,re(n.maxSize,l,re("25%",l))*o]:v?"bottom"===r||"top"==r?[Fe(e,"width",a)-g,g]:[g,Fe(e,"height",a)-g]:"bottom"===r||"top"==r?[g,Fe(e,"width",a)-g]:[Fe(e,"height",a)-g,g];return s}var u,h,p=e.systemConf,f=p.chart.plot.border,g=B(f,"size",0,10,e.plotarea.width,e.plotarea.height);g=JSON.parse(f.show)?g:0;var m=l.getDataType(i,n),y="x"==i?e.systemConf.chart.axes.xaxis:e.systemConf.chart.axes.yaxis[n||0],v=y.reversed,x="y"==i?I(y.outerPadding,.05):null,b=c(p.seriesdata.type||p.seriesdata.chartdata[0].type,"string"),k=p.chart.plot.plotoptions[b],w="dial"===b||"web"===b&&"x"===i,C=d();switch(s=null!=s?s:k.outerPadding,s=w?0:null!=s?s:.02,m){case"numeric":var h="x"==i?o||t.getMinMaxX(0):"z"!=i?o||t.getMinMaxY(n,x):t.getMinMaxZ(),O=h[0],A=h[1];if("NoData"==h[0]&&"NoData"==h[1]&&(h=[0,0]),o||"x"==i){s=null==s?.05:s;var S=h[1]-h[0],P=0==S?e.plotarea.width/2:S*s;h[0]=h[0]-P,h[1]=h[1]+P}u=d3.scale.linear().domain(h).range(C);var M=[u(O),u(A)];u.actualRange=M;break;case"ordinal":var T=w||"x"!=i?0:I(k.padding,t.noofBarEnabledSeries?.2:.9),E=s;s="x"==i?s:x,h=o||t.getCategories(i,n),s=tt.scale.getOuterPadding(C,h.length,T,s),s+=w||"bullet"===b||0==E?0:t.extendOuterpadding(h,C,p,T,s,i,n),u=d3.scale.ordinal().domain(h).rangeBands(C,T,s);break;case"time":var O,A,z=l.getColumnIdx(i,n),R=p.metadata.columns[z].datatype,L=p.metadata.columns[z][R],N=null!=L&&null!=L.subfunction?L.subfunction:"YEAR",j=null!=L&&null!=L.useUTC?JSON.parse(L.useUTC):null,D="x"==i?o||t.getMinMaxX(0):o||t.getMinMaxY(n,0),H=new Date(D[0]),Y=new Date(D[1]);if(!p.chart.axes[i+"axis"].disableBaseValue){var F=new jt(L);F.useUTC=j,F.getBaseValue(H,N,!1),F.getBaseValue(Y,N,!0)}if(O=H,A=Y,t.isBubbleEnabled){var _=t.overBubbles([H.getTime(),Y.getTime()],i,"y"==i?n:null);H=new Date(H.getTime()-_[0]),Y=new Date(Y.getTime()+_[1])}s="y"==i?x:null==s?.05:s;var S=Y.getTime()-H.getTime(),V=0==S?e.plotarea.width/2:S*s,W=0==s?0:t.getCorrectionOverDataLabels([H.getTime(),Y.getTime()],"x");H=new Date(H.getTime()-V-W),Y=new Date(Y.getTime()+V+W),h=[H,Y],u=d3.time.scale().domain(h).range(C);var M=[u(O),u(A)];u.actualRange=M}return u.outerPadding=s,u},tt.scale.getEventScale=function(e,t,a,r,n,l,i){var o,s=l.getDataType(i,n);switch(s){default:o=tt.scale.getScale(e,t,a,r,n,l,i)}return o},tt.scale.invert=function(e,t,a,r,n,l){var i;switch(e){case"numeric":case"time":var o="y"==n?r?t.x:t.y:r?t.y:t.x;i=a.invert(o);break;case"ordinal":var s=a.range(),d=a.rangeBand(),u=s.length>1?Math.abs(s[1]-s[0]):0,c=Math.abs(u-d);s=s.map(function(e){return e-c/2});var h=r&&!l||!r&&l,p=d3.bisector("y"==n?h?d3.ascending:d3.descending:h?d3.descending:d3.ascending),f="y"==n?r?t.x:t.y:r?t.y:t.x,g=p.left(s,f,0,r&&l?s.length:s.length-1),m=r?f:s[g],y=r?s[g-1]:f;i=g>0&&m>y?g-1:g}return i},tt.scale.barBandwidth=function(e){var t=e.systemConf,a=e.dataObject,r=a.isstacked()?a.groupedByStack.keys().length||1:d3.sum(e.seriesdata.map(function(e){return a.isbarenabled(e)?e.data.length:void 0})),n=t.seriesdata.type||e.seriesdata[0].type,l=c(n,"string"),i=c(n,"numeric")==tt.charttype.bullet,o=t.chart.plot.border,s=JSON.parse(o.show)?JSON.parse(o.size):0,d="gantt"==l||"bullet"==l||"bar"==l?t.chart.plot.plotoptions[l].padding||.2:.2,u=1==r?0:"bar"==l||"gantt"==l?t.chart.plot.plotoptions[l].interPadding||0:0,h=t.chart.plot.plotoptions[l].outerPadding;h=null!=h&&""!==h?h:.02;var p,f,g=e.axes.xaxis.scale.domain().length,m=e.axes.rotated?[Fe(e,"height",e.plotarea)-s,s]:[s,Fe(e,"width",e.plotarea)-s];h=tt.scale.getOuterPadding(m,g,d,h),h+=a.extendOuterpadding(d3.range(g),m,t,d,h,"x"),e.barscale1=p=e.axes.xaxis.scale,e.barscale2=f=d3.scale.ordinal().domain(d3.range(r)).rangeBands([0,p.rangeBand()],u),f.rangeBands([0,p.rangeBand()],u);var y="bar"==l||"gantt"==l?JSON.parse(t.chart.plot.plotoptions[l].maxBandWidth)||p.rangeBand():200;if(!i&&f.rangeBand()>y){var v=(p.rangeBand()-r*y)/2;f.rangeBands([v,p.rangeBand()-v],u)}return[p,f]},tt.scale.getOuterPadding=function(e,t,a,r){var n=e[1]-e[0],l=r*n,i=(n-2*l)/(t-a+0);return l/i},tt.axis.render=function(e,t,a,r){function n(){var t,a=b.chart.axes.animation||{};if(void 0!==a.enabled)t=JSON.parse(a.enabled||!1);else{var r=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?e.seriesdata:e.seriesdata.slice(0,1);t=r.some(function(t){var a=c(t.type||e.userdata.seriesdata.type,"string");return q(b.chart.plot.plotoptions[a],t.plotoptions,e,a).enabled})}return t?I(a.duration,600):0}function l(t,a,r){var n=b.chart.plot.border,l=e.container.selectAll("div.plotareaBorder-property"),i=null;if(null!=n&&null!=n.show&&JSON.parse(n.show)||"hidden"==r.style("visibility"))l.style("border-"+t,null);else{var o=a.axisline,s=null==o.color?"transparent":o.color,d=I(o.strokeWidth,1),u=o.style||"solid";s=null!=o.show&&JSON.parse(o.show)||null==o.show?s:"transparent",l.style("border-"+t,d+"px "+u+" "+s),i={size:d,clr:s},l.node()["border-"+t]=i}r.selectAll("path.domain").style("stroke","transparent")}function i(t,a,r){var n=t.orient,l=e.axes.rotated;return n=null==n?"x"==a?l?"left":"bottom":l?"bottom":0==r?"left":"right":n}function o(t,a){var r=[];switch(t){case"left":r=e.axes.rotated?d("x",a):d("y",a);break;case"bottom":r=e.axes.rotated?d("y",a):d("x",a)}return r}function s(t,a,r,n){var l,i=e.axes.xaxis.component,o=e.axes.yaxes.groups,s="left"==a?e.axes.rotated?i:o[r].component:e.axes.rotated?o[r].component:i,d="left"==a?e.axes.rotated?"x":"y":e.axes.rotated?"y":"x";return l=p(s,d,t,a,r,n)}function d(t,r){var n=e.axes,n="x"==t?n.xaxis:n.yaxes.groups,l="x"==t?b.chart.axes.xaxis:b.chart.axes.yaxis[r]||b.chart.axes.yaxis[0],i="x"==t?n.component=l.show&&Q(e,"xaxis",a)?tt.axis.get():null:n[r]?n[r].component=l.show?tt.axis.get():null:null;return i}function h(t,a,r,n){var l=[],i="left"==r?e.axes.rotated?"x":"y":e.axes.rotated?"y":"x";return l=f(t,i,a,n)}function p(r,n,l,o,s){var d="x"==n?b.chart.axes.xaxis:b.chart.axes.yaxis[s],o=i(d,n,s),u="bottom"==o?d.ticklabel.marginTop:"top"==o?d.ticklabel.marginBottom:"left"==o?d.ticklabel.marginRight:d.ticklabel.marginLeft;u=null==u?5:JSON.parse(u);var c="bottom"==o||"top"==o?a:t,h=JSON.parse(d.show)&&Q(e,n+"axis",c);if(h){var p="x"==n?e.axes.xaxis.ticks:e.axes.yaxes.groups[s].ticks,f=(p.preCalcApproxAxisLength(S),p.tickValueObj);if(null!=r){var g=A.axes.y[s].length>1,m=e.dataset.getColumnIdx(n,s),v=A.columns[m].datatype,x=A.columns[m][v];x=g&&"y"==n?ie(s,e):x;var C=I(d.tickmark.size,6),O=k.isStackedPercentChart&&"y"==n?Ee:Ae;r.scale(l).tickPadding(u).tickSize(C,0).majorTicks(0===s?y(o):null).orient(o).plotarea(e.plotarea).systemconf(e.systemConf).tickRotation(f.rotation).preCalcTickLen(p.preCalcTickLen).chartObj(e).columnIndices(g&&"y"==n?A.axes.y[s]:[m]);var P=null!=x?x.axisformat||x.format:null;null!=P&&null!=P.specifier&&"auto"==P.specifier?r.ticks("bottom"==o?e.plotarea.width/100:e.plotarea.height/40):r.tickValues(f.ticks).tickFormat(function(t){return O(x,t,v,e,"axis")}),r.plotBorderDrawn=!w[o],r.hideAxisLabel=!Q(e,n+"axislabel",c),w[o]=!0}}return r}function f(r,n,l,i){var o="x"==n?b.chart.axes.xaxis:b.chart.axes.yaxis[l],s=r.orient(),d="bottom"==s||"top"==s?a:t,u=JSON.parse(o.show)&&Q(e,n+"axis",d),c="x"==n?n+"-axis-"+l:n+"-axis-"+l,h=W(C.selectAll("g."+n+"-axis"),"g",u?[o]:[],".","class",c);i&&r.tickLabelWidth(0),u&&(i&&"left"==s&&0==l&&(e.plotarea.left+=r.tickLabelWidth(),e.plotarea.width=e.plotarea.width-r.tickLabelWidth()),h.transition().duration(O).call(r),e.plotarea=r.plotarea(),"x"==n?g(o,l,r):m(o,l,r)),"y"==n&&R(b.chart,"scroll")&&b.chart.scroll.enabled&&e.brush.initialize(e.plotarea)}function g(t,a,r){var n=C.selectAll("g.x-axis-0");e.axes.rotated&&n.selectAll("line.majorTicks").attr("x2",e.plotarea.width);var i=r.orient(),o="right"==i?e.plotarea.left+e.plotarea.width:e.plotarea.left,s=e.axes.rotated||"top"==i?e.plotarea.top:e.plotarea.top+e.plotarea.height;n.attr("transform","translate("+o+","+s+")"),x(n,r,e,t,i),l(i,t,n,r)}function m(t,a,r){var n=b.chart.axes.yaxis,i=C.selectAll(".y-axis-0"),o=n[0].orient||(e.axes.rotated?"bottom":null!=n[0].orient?n[0].orient:"left"),s=e.axes.yaxes.groups[0].component.tickLabelWidth();if(a==e.axes.yaxes.groups.length-1){for(var d=e.axes.yaxes.groups.length-1;d>=0;d--){var u=n[d],c=u.orient;if(c=c||(e.axes.rotated?"bottom":null!=u.orient?u.orient:0==d?"left":"right"),JSON.parse(u.show)){var h=e.axes.yaxes.groups[d].component,p=C.selectAll(".y-axis-"+d),f=h.tickLabelWidth();"right"==c&&0!=d?e.plotarea.width=e.plotarea.width-f:0!=d&&(e.plotarea.width=e.plotarea.width-f,e.plotarea.left+=f),p.attr("transform","translate("+("left"==c||"bottom"==c||"top"==c?"right"==o||0==d?e.plotarea.left:e.plotarea.left-s:"left"==o||0==d?e.plotarea.width+e.plotarea.left:e.plotarea.width+e.plotarea.left+s)+","+("bottom"==c?e.plotarea.height+e.plotarea.top:e.plotarea.top)+")"),x(p,h,e,u,h.orient()),1==h.plotBorderDrawn&&l(c,u,p,r)}}e.axes.rotated?null:i.selectAll("line.majorTicks").attr("x2","right"==o?-e.plotarea.width:e.plotarea.width)}}function y(t){return"bottom"==t?[0,-e.plotarea.height]:"top"==t?[0,e.plotarea.height]:"left"==t?[e.plotarea.width,0]:"right"==t?[-e.plotarea.width,0]:void 0}function v(t,a,r,n,i,o){var s=a.orient(),d=(a.scale(),a.majorTicks(),t.node().getBBox().width);d+="left"==s?r.label.marginLeft:r.label.marginRight,d=a.tickLabelWidth(),e.plotarea.width="add"==o?e.plotarea.width-d:e.plotarea.width+d,e.plotarea.left="left"==s?"add"==o?e.plotarea.left+d:e.plotarea.left-d:e.plotarea.left;var u=0,c="add"==o?"visible":"hidden";t.style("visibility",c);for(var h=0;h<e.axes.yaxes.groups.length;h++){var p=C.selectAll("g.y-axis-"+h),f=e.axes.yaxes.groups[h].component,g=f.orient(),m=f.majorTicks(),v=b.chart.axes.yaxis[h]||b.chart.axes.yaxis[0];if(s==g&&n>h&&"left"==s){var x=d3.transform(p.attr("transform")).translate;p.attr("transform","translate("+("add"==o?x[0]+d:x[0]-d)+","+x[1]+")")}else if(s==g&&n>h&&"right"==s){var x=d3.transform(p.attr("transform")).translate;p.attr("transform","translate("+("add"==o?x[0]-d:x[0]+d)+","+x[1]+")")}"hidden"!=p.style("visibility")&&0==u?(m=y(g),f.majorTicks(m),p.transition().duration(O).call(f),u++):null!=m&&u>0&&(f.majorTicks(null),p.transition().duration(O).call(f)),1==f.plotBorderDrawn&&l(g,v,p,f)}}function x(e,t,a,r,n){var l=r.ticklabel,i=l.textOverflow;if("none"!=i){var o=[null,n,a,t.tickRotation(),i,t.scale(),e,t,"ticklabel",l];O?setTimeout(function(){de.apply(null,o)},O):de.apply(null,o)}}var b=e.systemConf,k=e.dataObject,w={left:!1,right:!1,top:!1,bottom:!1},C=e.svg.selectAll("g.xychart"),O=n(),A=e.systemConf.metadata;e.zscale=k.isBubbleEnabled?tt.scale.getScale(e,k,e.plotarea,e.axes.xaxis.orient,null,e.dataset,"z"):null;var S={left:e.plotarea.left,top:e.plotarea.top,width:e.plotarea.width,height:e.plotarea.height};if(tt.axis.constructTickObj(e,t,a,"left",S),tt.axis.constructTickObj(e,t,a,"bottom",S),e.zscale=k.isBubbleEnabled?tt.scale.getScale(e,k,e.plotarea,e.axes.xaxis.orient,null,e.dataset,"z"):null,c(e.seriesdata[0].type||e.userdata.seriesdata.type,"numeric")==tt.charttype.bullet){var P=b.chart.plot.plotoptions.bullet,M=k.getCategories("x").length,T=JSON.parse(P.padding||0)||.2,E=P.outerPadding;E=null!=E&&""!==E?E:.2,E=tt.scale.getOuterPadding(N?[0,S.width]:[S.height,0],M,T,E);var z=P.levelMarker,L=e.plotarea,N=e.axes.rotated,j=(N?S.height:S.width)/(M-T+2*E)*(1-T),B=z.bandWidth,D=z.maxBandWidth;B=I(B,j),D=I(D,j),B=Math.min(B,D);var H=B/(1-T);B=H*(M-T+2*E),N?(L.height=B+(L.height-S.height),L.top+=(S.height-B)/2):(L.width=B+(L.width-S.width),L.left+=(S.width-B)/2)}for(var Y=tt.scale.constructor(e,"left"),F=0;F<Y.length;F++){if(!r)var _=o("left",F);_=s(Y[F].scale,"left",F,r),null!=_&&h(_,F,"left",r)}for(var V=tt.scale.constructor(e,"bottom"),F=0;F<V.length;F++){if(!r)var _=o("bottom",F);_=s(V[F].scale,"bottom",F,r),null!=_&&h(_,F,"bottom",r)}"ordinal"==e.dataset.getDataType("x")&&tt.scale.barBandwidth(e),e.updateZscale=function(){k.isBubbleEnabled?e.zscale.domain(k.getMinMaxZ()):null},e.updateScale=function(r,n,o){var s,d="y"==n?u(r.yaxiscolumnorder):0,h=C.selectAll("g."+n+"-axis-"+d),p="x"==n?e.axes.xaxis:e.axes.yaxes.groups[d],f="x"==n?b.chart.axes.xaxis:b.chart.axes.yaxis[d],g=p.component?p.component.orient():i(f,n,d),m="bottom"==g||"top"==g?a:t,y=JSON.parse(f.show)&&Q(e,n+"axis",m),w=e.dataset.getColumnIdx(n,d),S=A.columns[w].datatype,P=A.columns[w][S];if(o){s=o;var M=tt.scale.getScale(e,k,e.plotarea,g,d,e.dataset,n,s);p.eventscale=p.scale=M}else{var T=c(b.seriesdata.type||e.seriesdata[0].type,"string"),E=b.chart.plot.plotoptions[T].outerPadding;s="ordinal"==S?k.getCategories(n,d):"x"==n?e.dataObject.getMinMaxX(I(E,.2)):e.dataObject.getMinMaxY(d);var M=tt.scale.getScale(e,k,e.plotarea,g,d,e.dataset,n);p.eventscale=p.scale=M}if("y"!=n||h.empty()||"NoData"!=s[0]||"NoData"!=s[1])if("y"!=n||h.empty()||"hidden"!=h.style("visibility")){if(k.isBubbleEnabled&&"y"==n&&(p.eventscale=p.scale=tt.scale.getScale(e,k,e.plotarea,g,d,e.dataset,"y")),y){p.component.scale(p.scale);var w=e.dataset.getColumnIdx(n,d),S=A.columns[w].datatype,P=A.columns[w][S];P=A.axes.y[d].length>1&&"y"==n&&null!=P&&!P.axisformat?null:P;var z=null!=P?P.axisformat||P.format:null;if(null!=z&&null!=z.specifier&&"auto"==z.specifier)p.component.ticks(e.axes.rotated?e.plotarea.height/40:e.plotarea.width/100);else{var R="x"==n?e.axes.xaxis.ticks:e.axes.yaxes.groups[d].ticks,L="bottom"==g||"top"==g?R.tickValueObj.longTickSize.height:R.tickValueObj.longTickSize.width,N=R.getTickValues(e.plotarea.width,e.plotarea.height,o,!1);R.tickValueObj=N;var j="bottom"==g||"top"==g?R.tickValueObj.longTickSize.height:R.tickValueObj.longTickSize.width,B=R.preCalcTickLen,D=L>j?j-L:j>L?j-L:0;"bottom"==g||"top"==g?B.height=B.height+D:B.width=B.width+D,p.component.tickValues(N.ticks)}if(h.transition().duration(O).call(p.component),x(h,p.component,e,f,g),0!=D&&"y"==n&&(e.updateScale(r,"x"),e.drawPlotareaClippath(),e.updatePlotareaProp()),0==d){var H="right"!=g?e.plotarea.left:e.plotarea.left+e.plotarea.width,Y="bottom"!=g?e.plotarea.top:e.plotarea.height+e.plotarea.top;h.attr("transform","translate("+H+","+Y+")")}var F=e.plotarea.width;e.axes.rotated||"y"!=n?null:C.selectAll(".y-axis-0").selectAll("line.majorTicks").attr("x2","right"!=g?F:-F),1==p.component.plotBorderDrawn&&l(g,f,h,p.component)}}else y&&v(h,p.component,f,d,"y","add");else y&&v(h,p.component,f,d,"y","remove")}},tt.axis.get=function(){function e(A){return A.each(function(A){var S=d3.select(this);v=A.label,x=A.ticklabel,k=A.tickmark,i=A.axisline,b=A.grid;var M=0==JSON.parse(v.show)||null==v.text||""==v.text||e.hideAxisLabel;h.top=M?0:null==v.marginTop?5:JSON.parse(v.marginTop)||0,h.bottom=M?0:null==v.marginBottom?5:JSON.parse(v.marginBottom)||0,h.left=M?0:null==v.marginLeft?5:JSON.parse(v.marginLeft)||0,h.right=M?0:null==v.marginRight?5:JSON.parse(v.marginRight)||0;var T=null==x.marginRight?5:JSON.parse(x.marginRight),E=null==x.marginLeft?5:JSON.parse(x.marginLeft),z=null==x.marginBottom?5:JSON.parse(x.marginBottom),R=null==x.marginTop?5:JSON.parse(x.marginTop);C=null==C||""==C?0:parseFloat(C);var N=0>C?360-Math.abs(C):C;N=N>360?Math.abs(N)-360:N,e.update=function(){S.call(e)};var j=S.selectAll("g.axisgroup").data([A]);j.enter().append("g").attr("class","axisgroup"),j.exit().remove(),r&&c.ticks(r[0],r[1]);j.call(c);var B,D,H,Y,F,_,V=A.ticklabel.events;null!=V&&(_=0==I(V.enabled,!0),B=V.mousemove,D=V.mouseout,H=V.click,Y=V.doubleclick,F=V.cursor),F=F||"pointer";var J=j.selectAll(".tick"),X=null==c.tickValues()?a.ticks?a.ticks.apply(a,[J[0].length]):a.domain():c.tickValues(),Z=j.selectAll(".tick").data(X,a),q=(W(Z,"line",null==p?[]:[1],".","class","majorTicks"),Z.select("line.majorTicks")),K=j.selectAll("text.axislabel").data(function(){return M?[]:[v.text]});K.enter().append("text"),K.exit().style("opacity",0).remove();var Q=Z.selectAll("line").filter(function(){return"majorTicks"!=this.getAttribute("class")});Q.attr("class","minorTicks"),Z.selectAll("text").attr("class","ticklabel"),d=c.orient();var $=oe(d,N,ee,c,k.size),ee=j.selectAll("text.ticklabel");U(ee,[x,l.chart,l.canvas,Pt]),ee.style({cursor:F,"text-anchor":$.textAnchor}).attr({dy:$.dy,transform:"rotate("+$.rotate[0]+" "+$.rotate[1]+" "+$.rotate[2]+")"});var te={data:u.map(function(e){return Rt(o.systemConf.metadata.columns[e],{columnindex:e},!0)})};if(!_){var ae={};null!=B&&(ae.mousemove=function(e){L(B,[d3.event,t(te,e),o])}),null!=D&&(ae.mouseout=function(e){L(D,[d3.event,t(te,e),o])}),null!=H&&(ae.click=function(e){L(H,[d3.event,t(te,e),o])}),null!=Y&&(ae.dblclick=function(e){L(Y,[d3.event,t(te,e),o])}),fe(ee,null,ae)}switch("function"==typeof x.showAs&&ee.html(function(e){return x.showAs.call(o,e,x,te)||this.innerHTML}),JSON.parse(x.tooltip||!1)?G(ee):null,j.selectAll("line.minorTicks").style({fill:"none","shape-rendering":"crispedges","stroke-width":k.strokeWidth,stroke:k.color}),j.selectAll("path.domain").style({stroke:null!=i.show&&JSON.parse(i.show)||null==i.show?i.color:"transparent",fill:"none","shape-rendering":"crispedges","stroke-width":i.strokeWidth}),U(K,[v,l.chart,l.canvas,Pt]),K.attr({"class":"axislabel","text-anchor":"middle"}).text(function(e){return P(e)}),JSON.parse(v.tooltip||!1)?G(K):null,d){case"top":y=null!=s?s.height+R+h.bottom:0,K.attr({transform:"rotate(0)",x:n.width/2,y:-y,dy:""});var re=null==K.node()?0:K.node().getBBox().height;y=y+re+h.top,de(K,d,o,0,"ellipsis",a,j,e,"axislabel");break;case"bottom":y=null!=s?s.height+z+h.top:0,K.attr({transform:"rotate(0)",x:n.width/2,y:y,dy:O});var re=null==K.node()?0:K.node().getBBox().height;y=y+re+h.bottom,de(K,d,o,0,"ellipsis",a,j,e,"axislabel");break;
case"left":y=null!=s?s.width+E+h.right:0,K.attr({transform:"rotate(270 "+-y+" "+n.height/2+")",y:n.height/2,x:-y});var re=null==K.node()?0:K.node().getBBox().height;y=y+re+h.left,null!==p&&(y>f?(n.width=n.width-(y-f),n.left+=y-f):f>y&&(n.width=n.width+(f-y),n.left-=f-y)),f=y,null!==p&&(p[0]=n.width),de(K,d,o,270,"ellipsis",a,j,e,"axislabel");break;case"right":y=null!=s?s.width+T+h.left:0,K.attr({transform:"rotate(90)",x:n.height/2,y:-y});var re=null==K.node()?0:K.node().getBBox().height;y=y+re+h.right,null!==p&&(y>f?n.width=n.width-(y-f):f>y&&(n.width=n.width+(f-y))),f=y,de(K,d,o,90,"ellipsis",a,j,e,"axislabel")}if(p){var ne=null==b.strokeWidth||""===b.strokeWidth?1:JSON.parse(b.strokeWidth),le=g(b.style,ne),ie=m(b.lineCap,b.style);q.attr({x2:p[0],y2:p[1]}).style({fill:"none","shape-rendering":"crispedges","stroke-width":b.strokeWidth,stroke:b.color,"stroke-dasharray":le,"stroke-linecap":ie});var se=null!=a.rangeExtent?a.rangeExtent():a.range(),ue=!1,ce=null==e.tickValues()?null:a(e.tickValues()[0])+(a.rangeBand?a.rangeBand()/2:0),he=o.systemConf.chart.plot.border,pe=null!=he&&null!=he.show&&JSON.parse(he.show)?he.color:w.color;ue=null!=ce&&"transparent"!=b.color&&"transparent"!=pe&&se[0]==ce,ue&&d3.select(q[0][0]).style("stroke","transparent")}var ge=A.baseline;if(null!=ge){var me=W(j,"line",JSON.parse(ge.show)&&a.domain()[0]<=ge.value&&ge.value<a.domain()[1]?[1]:[],".","class","zeroBase");me.attr({x1:"left"==d||"right"==d?0:a(ge.value),y1:"left"==d||"right"==d?a(ge.value):-n.height,x2:"left"==d||"right"==d?n.width:a(ge.value),y2:"left"==d||"right"==d?a(ge.value):0}).style({fill:"none",stroke:ge.color,"shape-rendering":"crispedges","stroke-width":ge.strokeWidth})}}),e}function t(e,t){return e.data=e.data.map(function(e){var a=e.datatype;return e.value="time"==a?Te(t,null,e.time).getTime():t,e}),e}var a,r,n,l,i,o,s,d,u,c=d3.svg.axis(),a=d3.scale.linear(),h={top:0,right:0,bottom:5,left:0},p=null,f=0,y=0,v={text:"Axis",fontFamily:"sans-serif",fontSize:11,fontColor:"#575757"},x={fontFamily:"sans-serif",fontSize:11,fontColor:"#575757",rotation:0},b={color:"#666666",style:"strokeStyle1"},k={color:"#ececec",size:3,strokeWidth:null},w={color:"#ececec"},C=0,O="0.71em";return e.axis=c,d3.rebind(e,c,"orient","ticks","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"),d3.rebind(e,a,"domain","range","rangeBand","rangeBands","ticks"),e.scale=function(t){return arguments.length?(a=t,c.scale(a),d3.rebind(e,a,"domain","range","rangeBand","rangeBands"),e):a},e.systemconf=function(t){return arguments.length?(l=t,e):l},e.ticks=function(){return arguments.length?(r=arguments,e):r},e.majorTicks=function(t){return arguments.length?(p=t,e):p},e.plotarea=function(t){return arguments.length?(n=t,e):n},e.tickLabelWidth=function(t){return arguments.length?(f=t,e):f},e.tickRotation=function(t){return arguments.length?(C=t,e):C},e.preCalcTickLen=function(t){return arguments.length?(s=t,e):s},e.chartObj=function(t){return arguments.length?(o=t,e):o},e.columnIndices=function(t){return arguments.length?(u=t,e):u},e};var jt=function(e){this.startWeekDay=D(e.startWeekDay)?e.startWeekDay:1,this.startMonth=D(e.startMonth)?e.startMonth:0};jt.MILLISEC=0,jt.SECOND=1,jt.MINUTE=2,jt.HOUR=3,jt.DATE=4,jt.MONTH=5,jt.SECOND_TYPE="ABSSECOND",jt.MINUTE_TYPE="ABSMINUTE",jt.HOUR_TYPE="ABSHOUR",jt.DAY_TYPE="ABSDAY",jt.DATETIME_TYPE="DATETIME",jt.DATE_TYPE="DATE",jt.ABSWEEK_TYPE="ABSWEEK",jt.ABSMONTH_TYPE="ABSMONTH",jt.ABSQUARTER_TYPE="ABSQUARTER",jt.ABSYEAR_TYPE="YEAR",jt.D3_WEEKDAY_FNS=[d3.time.sunday,d3.time.monday,d3.time.tuesday,d3.time.wednesday,d3.time.thursday,d3.time.friday,d3.time.saturday],jt.DAY_MILLIS=864e5,jt.prototype.setZero=function(e,t){for(var a=0,r=0;t>=r;r++)switch(r){case jt.MILLISEC:a+=this.getMilliseconds(e),this.setMilliseconds(e,0);break;case jt.SECOND:a+=this.getSeconds(e),this.setSeconds(e,0);break;case jt.MINUTE:a+=this.getMinutes(e),this.setMinutes(e,0);break;case jt.HOUR:a+=this.getHours(e),this.setHours(e,0);break;case jt.DATE:a+=this.getDate(e)-1,this.setDate(e,1);break;case jt.MONTH:a+=this.getMonth(e),this.setMonth(e,this.startMonth);break;default:throw"unknown type 333: "+t}return a},jt.prototype.getBaseValue=function(e,t,a){switch(t){case jt.SECOND_TYPE:case jt.DATETIME_TYPE:var r=this.setZero(e,jt.MILLISEC);a&&r>0&&this.setSeconds(e,this.getSeconds(e)+1);break;case jt.MINUTE_TYPE:var r=this.setZero(e,jt.SECOND);a&&r>0&&this.setMinutes(e,this.getMinutes(e)+1);break;case jt.HOUR_TYPE:var r=this.setZero(e,jt.MINUTE);a&&r>0&&this.setHours(e,this.getHours(e)+1);break;case jt.DAY_TYPE:case jt.DATE_TYPE:var r=this.setZero(e,jt.HOUR);a&&r>0&&this.setDate(e,this.getDate(e)+1);break;case jt.ABSWEEK_TYPE:var r=this.setZero(e,jt.SECOND),n=this.startWeekDay;a?(r>0&&this.setDate(e,this.getDate(e)+1),n<this.getDay(e)?this.setDate(e,this.getDate(e)+(7-this.getDay(e)+n)):this.setDate(e,this.getDate(e)+(n-this.getDay(e)))):n>this.getDay(e)?this.setDate(e,this.getDate(e)-(7-n+this.getDay(e))):this.setDate(e,this.getDate(e)-(this.getDay(e)-n));break;case jt.ABSQUARTER_TYPE:case jt.ABSMONTH_TYPE:var r=this.setZero(e,jt.DATE);a&&r>0&&this.setMonth(e,this.getMonth(e)+1);break;case jt.ABSYEAR_TYPE:var r=this.setZero(e,jt.MONTH);a&&r>this.startMonth&&this.setFullYear(e,this.getFullYear(e)+1);break;default:throw"unknow type 222: "+t}},jt.prototype.getTicksList=function(e,t,a,r){for(var n=new Array,l=t.getTime(),i=e.getTime(),o=new Date(i);l>=i;){switch(n.push(o),o=new Date(i),r){case jt.SECOND_TYPE:case jt.DATETIME_TYPE:o.setTime(o.getTime()+1e3*Math.floor(a));break;case jt.MINUTE_TYPE:o.setTime(o.getTime()+6e4*a);break;case jt.HOUR_TYPE:o.setTime(o.getTime()+36e5*a);break;case jt.DAY_TYPE:case jt.DATE_TYPE:o.setTime(o.getTime()+a*jt.DAY_MILLIS);break;case jt.ABSWEEK_TYPE:this.setDate(o,this.getDate(o)+a);break;case jt.ABSMONTH_TYPE:case jt.ABSQUARTER_TYPE:this.setMonth(o,this.getMonth(o)+a);break;case jt.ABSYEAR_TYPE:this.setFullYear(o,this.getFullYear(o)+a)}i=o.getTime()}return n},jt.prototype.range=function(e,t,a,r,n){function l(e,t){return null!=t&&t>=e?t:e}switch(e=new Date(e.getTime()),t=new Date(t.getTime()),this.getBaseValue(e,r,!1),this.getBaseValue(t,r,!0),r){case jt.SECOND_TYPE:case jt.DATETIME_TYPE:var i=1,o=Math.ceil((t.getTime()-e.getTime())/1e3),s=Math.ceil(o/a)||i;return s=l(s,n),{TYPE:d3.time.seconds,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.MINUTE_TYPE:var i=1,s=Math.ceil((t.getTime()-e.getTime())/(6e4*a))||i;return s=l(s,n),{TYPE:d3.time.hours,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.HOUR_TYPE:var i=1,s=Math.ceil((t.getTime()-e.getTime())/(36e5*a))||i;return s=l(s,n),{TYPE:d3.time.hours,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.DAY_TYPE:case jt.DATE_TYPE:var i=1,s=Math.ceil((t.getTime()-e.getTime())/(a*jt.DAY_MILLIS))||i;return s=l(s,n),{TYPE:d3.time.days,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.ABSWEEK_TYPE:var i=1,d=Math.ceil((t.getTime()-e.getTime())/(a*jt.DAY_MILLIS*7));d=l(d,n);var s=7*Math.ceil(d)||i;return{TYPE:d3.time.weeks,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.ABSMONTH_TYPE:var i=1,s=Math.ceil(this.getMonthsDiff(e,t)/a)||i;return s=l(s,n),{TYPE:d3.time.months,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.ABSQUARTER_TYPE:var i=1,u=this.getMonthsDiff(e,t)/a||i,c=Math.ceil(u/3);c=l(c,n);var s=3*c;return{TYPE:d3.time.months,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};case jt.ABSYEAR_TYPE:var i=1,s=Math.ceil((t.getFullYear()-e.getFullYear())/a)||i;return s=l(s,n),{TYPE:d3.time.years,INTERVAL:s,TICKS:this.getTicksList(e,t,s,r)};default:throw"UNKNOWN TYPE 111: "+r}},jt.MAX_DATE=new Date(2008,8,29,23,23,23,999),jt.prototype.getMaxDate=function(e){return Ae(e,jt.MAX_DATE,"time")},jt.prototype.getMonthsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},jt.prototype.getYearsDiff=function(e,t){return 12*(this.getFullYear(t)-this.getFullYear(e))+(this.getMonth(t)-this.getMonth(e))},jt.prototype.getFullYear=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCFullYear():e.getFullYear()},jt.prototype.getMonth=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMonth():e.getMonth()},jt.prototype.getDay=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDay():e.getDay()},jt.prototype.getDate=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCDate():e.getDate()},jt.prototype.getHours=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCHours():e.getHours()},jt.prototype.getMinutes=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMinutes():e.getMinutes()},jt.prototype.getSeconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCSeconds():e.getSeconds()},jt.prototype.getMilliseconds=function(e){return null!=this.useUTC&&this.useUTC?e.getUTCMilliseconds():e.getMilliseconds()},jt.prototype.setFullYear=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCFullYear(t):e.setFullYear(t)},jt.prototype.setMonth=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMonth(t):e.setMonth(t)},jt.prototype.setDate=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCDate(t):e.setDate(t)},jt.prototype.setHours=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCHours(t):e.setHours(t)},jt.prototype.setMinutes=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMinutes(t):e.setMinutes(t)},jt.prototype.setSeconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCSeconds(t):e.setSeconds(t)},jt.prototype.setMilliseconds=function(e,t){return null!=this.useUTC&&this.useUTC?e.setUTCMilliseconds(t):e.setMilliseconds(t)},tt.axis.ticks=function(e,t,a,r,n,l){"use strict";function i(t,r,l,i,o,c,h,p,f,g,m,y,v,x,b){var k,w=re(It(S.height,S.maxHeight)||tt.axis.ticks.maxTickSizeRatio_Vert,t.height),A=re(It(S.width,S.maxWidth)||tt.axis.ticks.maxTickSizeRatio_Hori,t.width),P=r.node().getBBox(),M=r;ce=r.node().getBoundingClientRect();var T,R,L,N,j=P.width+H+Y,I="bottom"==n||"top"==n?E:E+_+F,B=j>A?A:j,D=I>w?w:I,V=d(z,B,D,n,c);if("time"==C){if(g=null!=g&&""!=g&&V>g?JSON.parse(g):V,R=b.start,L=b.end,N=b.timeformat,T=x.range(R,L,Math.round(g),N,v,e),g=T.TICKS.length,p&&"auto"==S.rotation&&("x"==a&&!O||"y"==a&&O)){g>V&&(z="45"),V=d(z,B,D,n,c);var W=x.range(R,L,V,N,v,e);W.TICKS.length>T.TICKS.length&&(z="45",T=W)}o=T.TICKS,h=T.TICKS.slice(0,T.TICKS.length),m=s(h,$,q,X)}if(g>V&&"time"!=C&&(p&&"auto"==S.rotation&&("x"==a&&!O||"y"==a&&O)&&(z="45",V=d(z,B,D,n,c)),g>V&&(o=u(o,V),h=o.slice(0,o.length),m=s(h,$,q,X))),!f){var J=(l.append("line").attr("class","domain").attr({x1:0,y1:0,x2:"bottom"==n||"top"==n?t.width:0,y2:"bottom"==n||"top"==n?0:t.height}).style("stroke","black"),"none"==S.textOverflow?"":S.textOverflow),U=!1,G=-1,Z=m.actualVal;r.text(m.formattedVal);var Q=oe(n,z,r,null,ee,y);se(r,Q);var te=(K(Z)||0)+(null==K.rangeBand?0:K.rangeBand()/2);te="bottom"==n||"top"==n?te+",0":"0,"+te,i.attr("transform","translate("+te+")"),de(r,n,{svg:e.svg,canvasarea:e.canvasarea,plotarea:t,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},z,J,K,l,null,"ticklabel",S);for(var ae=r.node().textContent;!U&&G<o.length;){G+=1;var te=(K(Z)||0)+(null==K.rangeBand?0:K.rangeBand()/2);te="bottom"==n||"top"==n?te+",0":"0,"+te,i.attr("transform","translate("+te+")"),de(r,n,{svg:e.svg,canvasarea:e.canvasarea,plotarea:t,chartarea:e.chartarea,legendarea:e.legendarea,actChartObj:e},z,J,K,l,null,"ticklabel",S);var ne=r.node().textContent;ne.length>ae.length&&(ae=ne),r.node().textContent=ae;var le=G==o.length-1||1==o.length,ie=le?null:$(q,h[G],X),ue=le?!1:ne.length<ie.toString().length;ue?(Z=h[G],r.node().textContent=ie):U=!0}}var ce=M.node().getBoundingClientRect(),he=l.node().getBoundingClientRect();return k={ticks:o,rotation:z,longTickSize:ce,longtick:m,axisgroup:he}}function o(e){switch(e){case"left":return H;case"right":return Y;case"bottom":return _;case"top":return F}}function s(e,t,a,r){var n={},l=function(e,t){return null==e?1:null==t?-1:t.toString().length-e.toString().length};if(t)if(e.length){var i={};e.forEach(function(e){i[t(a,e,r)]=e});var o=-1,s=Object.keys(i).sort(l);s.forEach(function(t){e[++o]=i[t]}),n.formattedVal=s[0]}else n.formattedVal=t(a,e[0],r);else e.sort(l);return n.actualVal=e[0],n}function d(t,n,i,o,s){K=tt.scale.getScale(e,v,l,o,r,e.dataset,a,s);var d;if(null!=K){var u=K.range(),c=K.actualRange;u=u.slice(0,u.length),u.sort(function(e,t){return e-t}),c?c.sort(function(e,t){return e-t}):null,d=null!=K.rangeBand?u[u.length-1]+K.rangeBand()-u[0]:c?c[c.length-1]-c[0]:u[u.length-1]-u[0]}else d="x"==a&&O||"y"==a&&!O?l.height:l.width;var p="x"==a&&O||"y"==a&&!O?d/i:d/n,f="x"==a&&O||"y"==a&&!O?90!=t&&270!=t&&0!=t&&180!=t&&360!=t:0!=t&&180!=t&&360!=t;if(!("x"==a&&O||"y"==a&&!O)||90!=t&&270!=t||(p=d/n),f){var g=h(z,n,i,o);p=d/g.tickSpacing}return p}function u(e,t,a){var r=e.length;t=Math.round(t),a=a||Math.ceil(r/t);for(var n=0,l=[];r>n;)l.push(e[n]),n+=a;return l}function c(e,t,a,r,n,l){var i=e.selectAll("text."+l).data([1]);return i.enter().append("text").attr("class",l).text(t).attr({x:a.x||0,y:a.y||0,dy:a.dy||0}).attr("transform","rotate("+r+" "+a.x+" "+a.y+")"),U(i,["axislabel"===l?A:S,x.chart,x.canvas,Pt]),i}function h(e,t,a,r){var n=e*(2*Math.PI/360),l=(90-e)*(2*Math.PI/360);if("bottom"==r||"top"==r){var i=Math.abs(Math.cos(l)*a),o=Math.abs(a/Math.sin(n));return{tickSpacing:o+5,baseLen:0}}var i=Math.abs(Math.sin(l)*a),o=Math.abs(Math.cos(l)*a*Math.tan(n)),s=Math.abs(Math.cos(l)*t);return{tickSpacing:i+o+5,baseLen:s}}function p(e){var t=g(e),a=Math.ceil(e[0]/t)*t;return a}function f(e){var t=Math.ceil(g(e));return t}function g(e){var t=10,a=e[1]-e[0],r=Math.pow(10,Math.floor(Math.log(a/t)/Math.LN10)),n=t/a*r;return.15>=n?r*=10:.35>=n?r*=5:.75>=n&&(r*=2),r}var m={};tt.axis.ticks.maxTickSizeRatio_Vert="50%",tt.axis.ticks.maxTickSizeRatio_Hori="50%";var y,n,v=e.dataObject,x=e.systemConf,b=e.svg,k=e.canvasarea["bottom"==n||"top"==n?"height":"width"],w={top:5,right:5,bottom:5,left:5},C=e.dataset.getDataType(a,r),O=v.getAxisRotated(),A=t.label,S=t.ticklabel,M=t.tickmark,T={},E=parseFloat(tt.utils.getVal(N([S,x.chart,x.canvas],"fontSize"))),z=null!=S&&null!=S.rotation&&"auto"!=S.rotation?S.rotation:0;z=null==z||""==z?0:parseFloat(z),z=0>z?360-Math.abs(z):z,z=z>360?Math.abs(z)%360:z;var R=0==JSON.parse(A.show)||null==A.text||""==A.text||!Q(e,a+"axislabel",k),L=R?0:JSON.parse(A.marginRight),j=R?0:JSON.parse(A.marginLeft),I=R?0:JSON.parse(A.marginBottom),B=R?0:JSON.parse(A.marginTop),H=null==S.marginRight?5:JSON.parse(S.marginRight),Y=null==S.marginLeft?5:JSON.parse(S.marginLeft),F=null==S.marginBottom?5:JSON.parse(S.marginBottom),_=null==S.marginTop?5:JSON.parse(S.marginTop),V="0.71em",W=e.systemConf.metadata,J=e.dataset.getColumnIdx(a,r),X=W.columns[J].datatype,G=W.columns[J][X],Z=W.axes.y[r].length>1,q=G;q=Z&&"y"==a?ie(r,e):G;var K,$="y"==a&&e.dataObject.isStackedPercentChart?Ee:Ae;this.preCalcAxisLen=0;var ee=M.size;return ee=null!=ee&&""!=ee?JSON.parse(ee):6,m.preCalcApproxAxisLength=function(l){var i="x"==a&&e.brush?e.brush.extent:null;this.tickValueObj=m.getTickValues(l.width,l.height,i,!0),y=this.tickValueObj.ticks;var o="x"==a?a+"-axis-"+r:a+"-axis-"+r,s=e.svg.selectAll("g."+a+"-axis");s=s.selectAll("g."+o).data(function(){return[t]}),s.enter().append("g").attr("class",o),s.exit().remove();var d=s.selectAll("g.axisgroup").data([t]);d.enter().append("g").attr("class","axisgroup"),d.exit().remove(),d.selectAll("line.majorTicks").style("display","");{var u=this.tickValueObj.axisgroup,h=u.width,p=u.height;S.maxWidth,S.maxHeight}if("left"!==n&&"right"!==n||!D(S.width)?D(S.height)&&(p=re(It(S.height,S.maxHeight)||tt.axis.ticks.maxTickSizeRatio_Vert,l.height)):h=re(It(S.width,S.maxWidth)||tt.axis.ticks.maxTickSizeRatio_Hori,l.width),u=this.preCalcTickLen={x:u.left,y:u.top,width:h,height:p},this.preCalcTickLen={x:u.left,y:u.top,width:u.width,height:u.height},R)this.preCalcAxisLen="bottom"===n||"top"==n?u.height+F:u.width+Y;else switch(n){case"left":T.y=u.height/2,T.x=-(u.width+Y+w.right),T.textAnchor="middle",T.db="";var f=c(d,P(A.text),T,-90,n,"axislabel");f.attr("transform","rotate(270 "+-(u.width+Y+w.right)+" "+u.height/2+")"),this.preCalcAxisLen=u.width+Y+L+f.node().getBoundingClientRect().width+j;break;case"right":T.x=u.height/2,T.y=-(u.width+Y+w.right),T.textAnchor="middle";var f=c(d,P(A.text),T,90,n,"axislabel");f.attr("transform","rotate(90 "+-(u.width+Y+w.right)+" "+u.height/2+")"),this.preCalcAxisLen=u.width+Y+j+H+f.node().getBoundingClientRect().width+L;break;case"bottom":T.x=u.width/2,T.y=u.height+F+w.top,T.textAnchor="middle",T.dy=V;var f=c(d,P(A.text),T,0,n,"axislabel");f.attr("transform","rotate(0) "),this.preCalcAxisLen=u.height+F+I+f.node().getBoundingClientRect().height+B;break;case"top":T.x=u.width/2,T.y=u.height+_+w.bottom,T.textAnchor="middle",T.dy=V;var f=c(d,P(A.text),T,0,n,"axislabel");f.attr("transform","rotate(0) "),this.preCalcAxisLen=u.height+_+B+f.node().getBoundingClientRect().height+I}return this.preCalcAxisLen},m.getTickValues=function(d,h,g,m,y){var x,k={x:0,y:0};C=e.dataset.getDataType(a,r);var w;w=b.append("g").attr("class","dummy");var A="left"==n||"bottom"==n||"top"==n?l.left:l.left+l.width,S="bottom"==n?l.top+l.height:l.top;w.attr("transform","translate("+A+","+S+")");var P=null!=y,M=t.interval,T=t.tickCount;switch(C){case"numeric":var E=null!=g?g:"x"==a?v.getMinMaxX():v.getMinMaxY(r),R="x"==a&&O||"y"==a&&!O?[h,0]:[0,d],L=q&&q.subfunction,N=d3.scale.linear().domain(E).range(R),j=null!=M&&""!==M&&JSON.parse(M)>0?JSON.parse(M):null!=T&&""!=T?Math.ceil((E[1]-E[0])/JSON.parse(T)):null,I="x"==a&&O||"y"==a&&!O?h:d;j=null!=M&&(E[1]-E[0])/j>I?null:j,y=y||("x"==a&&O||"y"==a&&!O?h/40:d/100);var B=null!=j?d3.range(p(E),E[1],j):L&&"integer"==L?d3.range(p(E),E[1],f(E)):N.ticks(y);y=B.length;var D=B.slice(0,B.length),H=s(D,$,q,X),Y=w.append("g").attr("class","tick"),F=o(n);"bottom"==n||"top"==n?k.y=F+ee:k.x="left"==n?-(k.y=F+ee):k.y=F+ee;{var _=c(Y,H.formattedVal,k,z,n);_.call(function(){x=i(l,this,w,Y,B,g,D,m,P,y,H,F)}).remove()}break;case"ordinal":var B=null!=g?g:v.getCategories(a,r),j=null!=M&&""!==M&&JSON.parse(M)>0?JSON.parse(M):null;null!=T&&""!=T&&JSON.parse(T)<B.length?B=u(B,JSON.parse(T)):null!=j&&(B=u(B,B.length,j));var y=B.length,D=B.slice(0,B.length),H=s(D,$,q,X),Y=w.append("g").attr("class","tick"),F=o(n);"bottom"==n||"top"==n?k.y=F+ee:k.x="left"==n?-(F+ee):F+ee;{var _=c(Y,H.formattedVal,k,z,n);_.call(function(){x=i(l,this,w,Y,B,g,D,m,P,y,H,F)}).remove()}break;case"time":var V=null!=q&&null!=q.subfunction?q.subfunction:"YEAR",E=null!=g?g:"x"==a?v.getMinMaxX(0):v.getMinMaxY(r,0),W=new Date(E[0]),J=new Date(E[1]),U=new jt(q||{}),j=null!=M&&""!==M&&JSON.parse(M)>0?null!=T&&""!=T?null:JSON.parse(M):null,G=null!=q&&null!=q.useUTC?JSON.parse(q.useUTC):null;U.useUTC=G;var Z;if(null!=q&&null!=q.format&&null!=q.format.specifier&&"auto"==q.format.specifier){var K=tt.scale.getScale(e,v,l,n,r,e.dataset,a),Q=K.ticks().map(function(e){return K.tickFormat()(e)});Z=s(Q,null)}else Z=U.getMaxDate(q);var Y=w.append("g").attr("class","tick"),F=o(n);"bottom"==n||"top"==n?k.y=F+ee:k.x="left"==n?-(F+ee):F+ee;var _=c(Y,Z,k,z,n);_.call(function(){x=i(l,this,w,Y,B,g,D,m,P,y,H,F,j,U,{start:W,end:J,timeformat:V})}).remove(),z=x.rotation}return w.remove(),x},m},tt.axis.constructTickObj=function(e,t,a,r,n){var l,i,o=e.systemConf,s=e.axesCount;l="left"==r&&e.axes.rotated||"bottom"==r&&!e.axes.rotated?"x":"y",s="x"==l?1:s;for(var d=0;s>d;d++){var u=o.chart.axes.yaxis;if(d>0){i=Rt(u[d],u[0],!1);var c=null!=u[d]&&""!==u[d]?u[d]:{};i.interval=c.interval,i.tickCount=c.tickCount,i.minRange=c.minRange,i.maxRange=c.maxRange,u[d]=i}i="x"==l?o.chart.axes.xaxis:u[d],r=i.orient||r;var h="bottom"==r||"top"==r?a:t,p=JSON.parse(i.show)&&Q(e,l+"axis",h);if(p){"y"!=l||e.axes.yaxes.groups[d]||(e.axes.yaxes.groups[d]={});var f=tt.axis.ticks(e,i,l,d,"left"==r&&d>0?"right":r,n);"x"==l?e.axes.xaxis.ticks=f:e.axes.yaxes.groups[d].ticks=f;var g=f.preCalcApproxAxisLength(n);"left"==r||"right"==r?(n.left+=g,n.width=n.width-g):"bottom"==r?(e.plotarea.height=e.plotarea.height-g,e.plotarea.bottom+=g,n.height=e.plotarea.height,n.bottom+=e.plotarea.bottom):"top"==r&&(e.plotarea.height=e.plotarea.height-g,e.plotarea.top+=g,n.height=e.plotarea.height,n.top+=e.plotarea.top)}}"y"==l&&R(o.chart,"scroll")&&o.chart.scroll.enabled&&e.brush.initialize(n)},tt.axis.ticklabels=function(){};var It=function(e,t){return D(e)&&D(e)?e>t?t:e:e||t};tt.axis.polar=function(){function e(e){e.each(function(e){var a,h,p,f,y,v=d3.select(this),x=l.systemConf,b=e.axisline,k=e.tickmark,w=e.subtickmark||{},C=e.grid,O=e.ticklabel,A=O.events;null!=A&&(a=A.mousemove,h=A.mouseout,p=A.click,f=A.doubleclick,y=A.cursor);var S=e.tickOrient,P=JSON.parse(b.show||!1)?I(b.strokeWidth,1):0,M=I(C.strokeWidth,1),T=I(O.marginLeft,5),E=I(k.size,3),z=I(w.size,2),R=+w.count||0,L=d||(n.ticks?n.ticks():n.domain()),N=t(n,L,R),j=n.rangeExtent?n.rangeExtent():n.range(),B=v.selectAll(".tick").data(L,n),D=B.enter().insert("g",".domain").attr("class","tick");B.exit().remove();var H=v.selectAll(".subticks").data([1]);H.enter().insert("g","g").attr("class","subticks"),H.style("stroke",w.color);var Y=W(H,"line",N),F=W(v,"path",JSON.parse(b.show||!1)?[1]:[],".","class","domain");F.attr("d",function(){var e=d3.svg.arc().innerRadius(i-1).outerRadius(i).startAngle(j[0]).endAngle(j[1])(1);return"M"+e.split(/L|M/gi)[1]}).style({stroke:b.color,fill:"none","stroke-width":P,"stroke-dasharray":g(b.style,P),"stroke-linecap":m(b.lineCap,b.style),"pointer-events":"none"}),D.append("line").attr("class","tickmark"),D.append("line").attr("class","grid"),D.append("text");var _=B.select("text"),V=B.select("line.tickmark"),J=B.select("line.grid");_.style("cursor",y||"pointer").text(function(e){return s(e)}),U(_,[O,x.chart,x.canvas,Pt]),u={data:o.map(function(e){return Rt(l.systemConf.metadata.columns[e],{columnindex:e},!0)})};var X={mousemove:function(e){r(a,d3.event,e)},mouseout:function(e){r(h,d3.event,e)},click:function(e){r(p,d3.event,e)},dblclick:function(e){r(f,d3.event,e)}};fe(_,null,X);var G,Z,q,K;switch(S){case"inner":G=i-P/2,Z=-(E+T),q=-E,K=-z;break;default:G=i+P/2,Z=E+T,q=E,K=z}B.attr("transform",function(e){var t=ee(G,n(e));return"translate("+t[0]+","+t[1]+")"}),_.attr({dy:function(e){var t=te(n(e));return"inner"==S?t>c/2&&3*c/2>t?null:-ne(t)+"em":t>c/2&&3*c/2>t?ne(t)+"em":null},"text-anchor":function(e){var t=te(n(e));return t%c==0?"middle":"inner"==S&&c>t||"inner"!=S&&t>c?"end":null},transform:function(e){var t=ee(Z,n(e));return"translate("+t[0]+","+t[1]+")"}}),V.attr({x2:function(e){return ee(q,n(e))[0]},y2:function(e){return ee(q,n(e))[1]}}).style({stroke:k.color,"stroke-width":k.strokeWidth}),J.attr({x2:function(e){return ee(-i,n(e))[0]},y2:function(e){return ee(-i,n(e))[1]}}).style({stroke:C.color,"stroke-width":M,"stroke-dasharray":g(C.style,M),"stroke-linecap":m(C.lineCap,C.style)}),Y.attr({x2:function(e){return ee(K,n(e))[0]},y2:function(e){return ee(K,n(e))[1]},transform:function(e){var t=ee(G,n(e));return"translate("+t[0]+","+t[1]+")"}})})}function t(e,t,r){if(n=[],r&&t.length>1){for(var n,l,i,o=a(e.domain()),s=-1,d=t.length,u=(t[1]-t[0])/++r;++s<d;)for(l=r;--l>0;)(i=+t[s]-l*u)>=o[0]&&n.push(i);for(--s,l=0;++l<r&&(i=+t[s]+l*u)<o[1];)n.push(i)}return n}function a(e){var t=e[0],a=e[e.length-1];return a>t?[t,a]:[a,t]}function r(e,t,a){null!=e&&(u.data=u.data.map(function(e){return e.value=a,e}),L(e,[t,u,l]))}var n,l,i,o,s,d,u,c=Math.PI;return e.scale=function(t){return arguments.length?(n=t,e):n},e.chartObj=function(t){return arguments.length?(l=t,e):l},e.radius=function(t){return arguments.length?(i=t,e):i},e.columnIndices=function(t){return arguments.length?(o=t,e):o},e.tickValues=function(t){return arguments.length?(d=t,e):d},e.tickFormat=function(t){return arguments.length?(s=t,e):s},e},tt.axis.polar.render=function(e,t){function a(e){var t=[],a=e+(("outer"==E?O:O/2)+M*("inner"==z?-1:1)),n="inner"==z?d3.min:d3.max;return Z.selectAll("text").each(function(l){var i=S(this),o=e+(("outer"==E?O:O/2)+P+A)*("inner"==z?-1:1),s=ee(o,H(l)),d=[r(s[0]+i.x,s[1]+i.y),r(s[0]+i.x,s[1]+i.y+i.height),r(s[0]+i.x+i.width,s[1]+i.y),r(s[0]+i.x+i.width,s[1]+i.y+i.height),a];t.push(n(d))}),n(t)}function r(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function n(e){return re(v.innerRadius,e,0)}function l(e,t){if(Ce){var a=d3.svg.arc().innerRadius(e-1).outerRadius(e).startAngle(Y[0]).endAngle(Y[1])(1);return"M"+a.split(/L|M/gi)[1]}var r=t.ticks?t.ticks():t.domain(),a=r.reduce(function(a,r){var n=t(r),l=ee(e,n);return a+"L"+l[0]+" "+l[1]+" "},"");return"M"+a.substring(1)+"Z"}function i(t,a,r,n){var l=v.minmaxlabels,i=l.align,o=I(l.padding,5),u=a.domain(),c=l.showAs,h="inner"==i?n-o:"center"==i?(r+n)/2:r+o,p=W(t,"text",JSON.parse(l.show)?"min"==c?[u[0]]:"max"==c?[u[1]]:u:[],".","class","mlabel");p.attr({"text-anchor":function(e){if("center"==i)return"middle";var t=te(a(e));return t%s==0?"middle":"inner"==i&&s>t||"inner"!=i&&t>s?"end":null},dy:function(e){if("center"==i)return"1em";var t=te(a(e));return"inner"==i?t>s/2&&3*s/2>t?null:-ne(t)+"em":t>s/2&&3*s/2>t?ne(t)+"em":null},transform:function(e){var t=ee(h,a(e)),r="center"==i?o:0;return"translate("+t[0]+","+(t[1]+r)+")"}}).text(function(t){return Ae(V,t,_,e,"minmaxlabels")}),U(p,[l,d.chart,d.canvas,Pt])}var t=t||"y",o=0,s=Math.PI,d=e.systemConf,u=e.renderer[0],h=e.dataObject,p=e.plotarea,f=e.canvasarea,g=e.systemConf.metadata.columns,m=c(d.seriesdata.chartdata[0].type||d.seriesdata.type,"numeric"),y=c(d.seriesdata.chartdata[0].type||d.seriesdata.type,"string"),v=d.chart.plot.plotoptions[y],x="x"==t?d.chart.axes.xaxis:d.chart.axes.yaxis[o],b=+v.outerPadding||0,k=+v.maxRadius||0,w=m===tt.charttype.dial,C=JSON.parse(x.show||!1)&&Q(e,t+"axis",Math.min(f.width,f.height)),O=C&&JSON.parse(x.axisline.show||!1)?I(x.axisline.strokeWidth,1):0,A=I(x.ticklabel.marginLeft,5),P=I(x.tickmark.size,3),M=x.subtickmark?I(x.subtickmark.size,2):0,T=tt.utils.getVal(x.ticklabel.fontSize||d.chart.fontSize||d.canvas.fontSize||Pt.fontSize),E=x.orient||"outer",z=x.tickOrient,R=p.width-2*b,L=p.height-2*b,N=Math.min(R,L)/2;e.plotarea_approx=null;var j=n(N),B=C?+v.padding||0:0,D=tt.scale.constructor(e,"x"==t?"bottom":"left"),H="x"==t?D[0].scale:D[o].scale,Y=H.rangeExtent?H.rangeExtent():H.range(),F=e.dataset.getColumnIdx(t,o),_=g[F].datatype,V=g[F][_],J="inner"==E?"outer"===z?j-B-O/2-Math.max(M,P+A+T):j:N,X=tt.axis.polar().scale(H).chartObj(e).radius(J).columnIndices([F]).tickFormat(function(t){return Ae(V,t,_,e,"axis")}).tickValues(null),G=W(e.svg.selectAll("g.chartgroup"),"g",[1],".","class",t+"-axis"),Z=W(G,"g",C?[x]:[],".","class","axisgroup");Z.call(X),G.style("visibility","hidden");var q=d3.svg.arc().innerRadius(!w||JSON.parse(v.needle.show||!1)||Ge(v.datalabels,e)?0:j).outerRadius(N).startAngle(Y[0]).endAngle(Y[1]),K=G.append("path").attr("d",q(1)),$=G.append("g").attr("class","datalabel");if(w){if(!u){var le=0;u=e.renderer[le]=Bt(y),e.rendererConf=[],e.rendererConf[le]=new tt.plot.rendererConf,Ct.setRendererProp(e,u,e.seriesdata[le],le,[])}$.call(tt.labelRenderer.dial().renderer(u).args([e.seriesdata])),i(G,H,N,j);var oe=W($,"circle",JSON.parse(v.needle.show||!1)?[1]:[]);oe.attr("r",+v.needle.width/2||7)}var se=S(K.node()),de=S(G.node()),ue=se.height/N,ce=se.width/N,he=N+Math.min((R-de.width)/ce,(L-de.height)/ue);he=w&&he>k?k:he,j=n(he)-("inner"==E?(+v.strokeWidth||0)/2:0),J=("inner"==E?"inner"==z?j:j-(a(N)-N):he)-("inner"==z?O/2:0)-("inner"==E?B:0),X.radius(J),Z.call(X),q.outerRadius(he).innerRadius(!w||JSON.parse(v.needle.show||!1)||Ge(v.datalabels,e)?0:j),K.attr("d",q(1)),w&&i(G,H,he,j);var se=S(K.node()),de=S(G.node()),pe=ae(de,p.width,p.height,he,0);G.attr("transform","translate("+(p.left+pe[0])+","+(p.top+pe[1])+")"),G.style("visibility",null);var fe=("inner"==z&&"outer"==E?a(he):he-("inner"==E?0:O/2))-("inner"==E?0:B),ge="inner"==z?(he-fe)*ce:0,me="inner"==z?(he-fe)*ue:0;if(e.plotarea_approx={x:pe[0],y:pe[1],width:se.width-O-ge,height:se.height-O-me,radius:fe},K.remove(),$.remove(),h.isPolarAxisCategory){var t="y",ye=0,ve=d.chart.axes.yaxis[ye],N=e.plotarea_approx.radius,xe=e.plotarea_approx.x,be=e.plotarea_approx.y,E=ve.orient||"right",ke=I(ve.tickmark.size,6),we=I(ve.ticklabel["left"==E?"marginRight":"marginLeft"],3),Ce="arc"===ve.grid.type,D=tt.scale.constructor(e,"left"),Oe=D[ye].scale,Se=ve.reversed&&!h.isstacked()?[0,N]:[N,0];Oe.range(Se);var Pe={left:e.plotarea.left,top:e.plotarea.top,width:N,height:N},Me=tt.axis.ticks(e,ve,"y",0,E,Pe);Me.preCalcApproxAxisLength(Pe);var Te=Me.getTickValues(N,N,null,null,N/20),ze=e.userdata.metadata,Re=ze.axes.y[ye].length>1,F=e.dataset.getColumnIdx(t,ye),_=ze.columns[F].datatype,V=Re&&"y"==t?ie(ye,e):ze.columns[F][_],Le=h.isStackedPercentChart&&"y"==t?Ee:Ae,Ne=tt.axis.get().scale(Oe).tickPadding(we).tickSize(ke,0).orient(E).plotarea({width:N,height:N}).systemconf(e.systemConf).chartObj(e).tickRotation(Te.rotation).preCalcTickLen(Me.preCalcTickLen).tickValues(Te.ticks).tickFormat(function(t){return Le(V,t,_,e,"axis")}).columnIndices(Re&&"y"==t?ze.axes.y[o]:[F]),je=e.svg.selectAll("g.y-axis").data(JSON.parse(ve.show)?[ve]:[]);je.call(Ne).attr("transform","translate("+(xe+e.plotarea.left)+","+(be+e.plotarea.top-N)+")"),je.exit().remove();var Ie=je.selectAll(".tick");Ie.append("path");var Be=Ie.select("path");Be.attr("transform",function(e){return"translate(0,"+(N-Oe(e))+")"}).attr("d",function(e){return l(N-Oe(e),H)}).style({fill:"none",stroke:ve.grid.color,"stroke-width":ve.grid.strokeWidth}),Z.selectAll("path.domain").attr("d",function(){return l(N,H)}),Oe.range(Se.reverse())}},tt.plot.render=function(e){var t=e.systemConf.chart.plot.renderer.mode.toLowerCase(),a=c(null,"object",0,e.systemConf),r={mode:!e.isAxisCategory||e.dataObject.pieWithAxis||24===a.value?"svg":t},n={};if(n.labelQueue=[],n.notesArray=[],n.labelArray=[],e.rendererConf||(e.rendererConf=[]),"function"!=typeof tt.plot[r.mode+"Renderer"])throw new SyntaxError(""+r.mode+"Renderer not found");return r[r.mode]=tt.plot[r.mode+"Renderer"](e,n),r.draw=function(t){e.chartRendered=!1,this[this.mode].draw(t)},r},Ct.renderCompletedEvents=function(e,t,a){var r=e.systemConf,n=e.isAxisCategory||e.dataObject.isPolarAxisCategory,l=setInterval(function(){if(e.chartRendered)me(e,r.chart.plot.events,"plot",t?"onreload":"onload"),n?ue(e,a,!t):a.notesArray=tt.annotation?tt.annotation.draw(e,a.notesArray):[],clearInterval(l),me(e,r.canvas.events,"chart",t?"onreload":"onload");else{for(var i=!0,o=0;o<e.renderer.length;o++)i=0==o?e.renderer[o].chartRendered:i&&e.renderer[o].chartRendered,e.renderer[o].chartRendered&&(a.notesArray=e.renderer[o].commonRendererProp().notes());e.chartRendered=i}},10);n&&ue(e,a,t)},Ct.arrangeSeriesRenderingOrder=function(e){var t={defaultType:0,area:0,bar:1,line:2,bubble:3,bubblepie:4,scatter:5},a=e.seriesdata,r=e.userdata.seriesdata.type,n=Lt(a);return n.map(function(e,t){return e.seriesidx=t,e}),n.sort(function(e,a){var n=c(e.type||r,"string"),l=c(a.type||r,"string"),i=null==t[n]?t.defaultType:t[n],o=null==t[l]?t.defaultType:t[l];return o>i?-1:i>o?1:0}),n},Ct.setRendererProp=function(e,t,a,r,n){function l(t,a,r,l,o){var s=e.seriesdata[r].color||e.seriesColor[r%e.seriesColor.length],d=e.seriesdata[r].yaxiscolumnorder,c=u(d),h=e.rendererConf[r];h.chartObj(e).dataset(e.dataset).axisrotated(e.dataObject.getAxisRotated()).yaxiscolumnorder(c).hasNegValue(e.dataObject.containsNegativeData(c)).stacked(e.dataObject.isstacked(o)).commonPlotOptions(e.systemConf.chart.plot.plotoptions[l]).color("bubblepie"==l?e.seriesColor:e.isAxisCategory?i(t,a,s,r,c,l):e.dataObject.isPolarAxisCategory?s:e.seriesColor).notes(n.notesArray)}function i(t,a,r,n,l,i){var o=h.chart.axes.xaxis.threshold.coloroverlay,s=null!=h.chart.axes.yaxis[l]&&null!=h.chart.axes.yaxis[l].threshold?h.chart.axes.yaxis[l].threshold.coloroverlay:null,d=JSON.parse(o.show)||null!=s&&JSON.parse(s.show);if(d){var u=null!=s&&JSON.parse(s.show)?s:JSON.parse(o.show)?o:null,c=null!=s&&JSON.parse(s.show)?"y":JSON.parse(o.show)?"x":null,p=d?tt.axis.threshold.overlay(e,"continous"):null;return(e.dataObject.isbarenabled(a)||"bar"==i||"scatter"==i||"bubble"==i)&&t.threshold(d?u:null).thresholdType(c),
"bar"==i||"scatter"==i||"bubble"==i?r:p(r,u,n,c)}return r}var o=c(null,"object",r,e.userdata),s=o.name,d=o.value,h=e.systemConf;l(t,a,r,s,d),t.commonRendererProp(e.rendererConf[r]);var p=e.seriesdata[r].yaxiscolumnorder,f=u(p);if(t.chartRendered=!1,e.xymultiRenderer||e.dataObject.isPolarAxisCategory){var g=e.axes.yaxes.groups[f],m=g.scale;e.rendererConf[r].xscale(e.axes.xaxis.scale).yscale(m).datasetIndex(r).updateLabelArrayAndLabelQueue(n.labelArray,n.labelQueue),n.labelArray=e.rendererConf[r].params.labelArray,n.labelQueue=e.rendererConf[r].params.labelQueue}be(d)&&(t.bandwidth1(e.barscale1).bandwidth2(e.barscale2),n.image||t.barDatasetIndex(n.barDatasetIndex),null!=a.disabled&&a.disabled||(n.barDatasetIndex=n.barDatasetIndex+e.seriesdata[r].data.length))},tt.plot.rendererConf=function(){var e={};return e.params={},e.xscale=function(t){return arguments.length?(e.params.xscale=t,e):e.params.xscale},e.yscale=function(t){return arguments.length?(e.params.yscale=t,e):e.params.yscale},e.stacked=function(t){return arguments.length?(e.params.stacked=t,e):e.params.stacked},e.datasetIndex=function(t){return arguments.length?(e.params.datasetIndex=t,e):e.params.datasetIndex},e.axisrotated=function(t){return arguments.length?(e.params.axisrotated=t,e):e.params.axisrotated},e.commonPlotOptions=function(t){return arguments.length?(e.params.commonPlotOptions=t,e):e.params.commonPlotOptions},e.color=function(t){return arguments.length?(e.params.color=t,e):e.params.color},e.chartObj=function(t){return arguments.length?(e.params.chartObj=t,e):e.params.chartObj},e.notes=function(t){return arguments.length?(e.params.notesArray=t,e):e.params.notesArray},e.updateLabelArrayAndLabelQueue=function(t,a){return arguments.length?(e.params.labelArray=t,e.params.labelQueue=a,e):[e.params.labelArray,e.params.labelQueue]},e.hasNegValue=function(t){return arguments.length?(e.params.hasNegValue=t,e):e.params.hasNegValue},e.dataset=function(t){return arguments.length?(e.params.dataset=t,e):e.params.dataset},e.yaxiscolumnorder=function(t){return arguments.length?(e.params.yaxiscolumnorder=t,e):e.params.yaxiscolumnorder},e},tt.plot.svgRenderer=function(e,t){var a={},r=e.systemConf;return a.draw=function(a){"ordinal"==e.dataset.getDataType("x")&&e.isAxisCategory&&tt.scale.barBandwidth(e),t.barDatasetIndex=0;var n,l=[];e.chartRendered=!1;var i,o=e.dataObject.isCombinationalChart,s=o?Ct.arrangeSeriesRenderingOrder(e):e.seriesdata;e.seriesdata.forEach(function(d,u){var h=s[u],p=o?h.seriesidx:u;if(!(p>0)||e.xymultiRenderer||e.dataObject.isPolarAxisCategory){if(n=c(h.type||e.userdata.seriesdata.type,"numeric"),n==tt.charttype.bubblepie){if(null!=i)return e.renderer[p]=e.renderer[i],e.rendererConf[p]=new tt.plot.rendererConf,void Ct.setRendererProp(e,e.renderer[p],h,p,t);e.bubblePieRendererIndex=i=p}var f=[],g=tt.charttypenames.get(n),m=h.plotoptions,y=r.chart.plot.plotoptions[g],v=q(y,m,e,g),x=v.enabled,b=v.type;null==e.renderer[p]&&(e.renderer[p]=Bt(g),e.rendererConf[p]=new tt.plot.rendererConf),e.renderer[p].chartRendered=!1,0==u&&(me(e,r.chart.plot.events,"plot","init"),e.hideLoading(e.container)),!x||/(allseries|pointTween|vertPathTweenAll|fadeAll|verticalAll|sizing)/.test(b)||n!=tt.charttype.scatter&&n!=tt.charttype.area&&n!=tt.charttype.arearange&&n!=tt.charttype.bubble||a?(Ct.setRendererProp(e,e.renderer[p],h,p,t),Dt(e,h,e.renderer[p])):(l[p]=!1,f[p]=setInterval(function(){e.renderer[p].chartRendered&&clearInterval(f[p]),!l[p]&&(0==p||p>0&&e.renderer[p-1].chartRendered)&&(Ct.setRendererProp(e,e.renderer[p],h,p,t),Dt(e,h,e.renderer[p]),l[p]=!0)},10))}}),Ct.renderCompletedEvents(e,a,t)},a};var Bt=function(e){switch(e){case"gantt":case"bullet":e="bar";break;case"web":case"arearange":e="area";break;case"bubble":case"geoscatter":case"geobubble":e="scatter"}return new wt[e]},Dt=function(e,t,a,r){function n(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}if(r)a.update();else{var l=e.svg.selectAll("g.xychart").data([e.systemConf]);n(l,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}).datum(e.seriesdata).call(a),e.dataObject.isPolarAxisCategory&&l.selectAll("g.seriesholder").selectAll(function(){return this.childNodes}).attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),n(e.staticPaneSVG,"labelholder",{x:e.plotarea.left,y:e.plotarea.top})}};tt.plot.imageRenderer=function(e,t){function a(){function t(e,t,a){return e.select("g."+t).attr("transform","translate("+a.x+","+a.y+")")}function a(e){var t="",a=Object.keys(e),r=0;for(var n in e)t+=n+"="+e[n],e.hasOwnProperty(a[r+1])&&(t+="&"),r++;return t}function r(t){if(JSON.parse(e.systemConf.chart.plot.renderer.image.addDimensionInSource)===!0){var a=t.indexOf("?")>-1?"&":"?";t+=a+"WIDTH="+e.plotarea.width+"&HEIGHT="+e.plotarea.height}{var r=300;l.append("svg:image").attr("xlink:href",t).attr("width",Math.round(e.plotarea.width)).attr("height",Math.round(e.plotarea.height)).attr("x",0).attr("y",0).style("opacity",0).attr("onload",function(){e.hideLoading(e.container),e.svg.selectAll(".threshold").transition().style("opacity","1").duration(r)}).on("error",function(){throw e.chartRendered=!1,e.hideLoading(e.container),new ReferenceError("Invalid image source.")}).transition().style("opacity","1").duration(r).each("end",function(){e.chartRendered=!0})}}e.chartRendered=!1;var n=e.svg.selectAll("g.xychart");t(n,"seriesholder",{x:e.plotarea.left,y:e.plotarea.top}),t(n,"labelholder",{x:e.plotarea.left,y:e.plotarea.top});var l=e.svg.select(".seriesholder");e.svg.selectAll(".threshold").style({opacity:0});var i=e.systemConf.chart.plot.renderer.image.source;if("auto"!=i)return l.selectAll("*:not(.zmarea)").remove(),void r(i);l.selectAll("*:not(.zmarea)").remove(),e.showLoading(e.container);var o=e.seriesdata[0].type||e.userdata.seriesdata.type,s=c(o,"string"),d=e.systemConf,u=d.chart.plot.plotoptions[s].datalabels.fontSize;u="function"==typeof u?u():u,d.chart.plot.plotoptions[s].datalabels.fontSize=u;var h=JSON.parse(JSON.stringify(d));h.chart.plot.renderer.mode="svg",R(e.userdata,"chart.plot.datalabels.fontColor")||delete h.chart.plot.datalabels.fontColor,R(e.userdata,"chart.plot.plotoptions."+s+".datalabels.fontColor")||delete h.chart.plot.plotoptions[s].datalabels.fontColor;var p={url:e.systemConf.chart.plot.renderer.image.exportUrl,type:"POST",data:{DATA:encodeURIComponent(JSON.stringify(h)),HEIGHT:Math.round(e.plotarea.height),WIDTH:Math.round(e.plotarea.width)}};e.xhr&&e.xhr.abort();var f=a(p.data),g=d3.xhr(p.url).header("Content-type","application/x-www-form-urlencoded").post(f,function(t,a){l.selectAll("image").remove();var n=JSON.parse(a.responseText);n.rendered&&(e.hideLoading(e.container),r(n.serverPath)),delete e.xhr});e.xhr=g}var r={};return r.draw=function(r){e.systemConf.legend.highlightEffect.selectedSeries="none",e.systemConf.loader.enabled=!0,"ordinal"==e.dataset.getDataType("x")&&e.isAxisCategory&&tt.scale.barBandwidth(e),t.barDatasetIndex=0;var n;e.chartRendered=!1;var l=e.dataObject.isCombinationalChart,i=l?Ct.arrangeSeriesRenderingOrder(e,e.seriesdata):e.seriesdata;a(),e.seriesdata.forEach(function(a,r){var o=i[r],s=l?o.seriesidx:r;if(e.isAxisCategory||!(s>0)){var d=c(null,"object",s,e.userdata),u=d.name;null==e.renderer[s]?(n=c(o.type||e.userdata.seriesdata.type,"numeric"),e.renderer[s]=Bt(u),e.rendererConf[s]=new tt.plot.rendererConf):e.renderer[s].commonOption=null,Ct.setRendererProp(e,e.renderer[s],o,s,t),e.renderer[s].chartRendered=!1,0==r&&me(e,e.systemConf.chart.plot.events,"plot","init")}}),Ct.renderCompletedEvents(e,r,t)},r},tt.legend.render=function(e){function t(){var t=i.chartarea(e.chartarea).systemconf(r).color(e.seriesColor);return t}function a(){n.legpos;i=t(n),i.chartObj=e,i(e.legendarea.element.datum(n));var a=e.legendarea.element.node(),r=a.offsetWidth,l=a.offsetHeight,o=null!=n.x&&""!==n.x&&null!=n.y&&""!==n.y;n.marginLeft=+n.marginLeft,n.marginRight=+n.marginRight,n.marginTop=+n.marginTop,n.marginBottom=+n.marginBottom,o||e.isGeoChart||("center"==n.vAlign?(e.chartarea.width-=r+n.marginLeft+n.marginRight,e.plotarea.width-=r+n.marginLeft+n.marginRight,"left"==n.hAlign&&(e.chartarea.left+=r+n.marginLeft+n.marginRight,e.plotarea.left+=r+n.marginLeft+n.marginRight)):"top"==n.vAlign?(e.chartarea.top+=l+n.marginTop+n.marginBottom,e.plotarea.top+=l+n.marginTop+n.marginBottom,e.chartarea.height-=l+n.marginTop+n.marginBottom,e.plotarea.height-=l+n.marginTop+n.marginBottom):"bottom"==n.vAlign&&(e.chartarea.height-=l+n.marginTop+n.marginBottom,e.plotarea.height-=l+n.marginTop+n.marginBottom)),e.legendarea.x=a.offsetLeft,e.legendarea.y=a.offsetTop,e.legendarea.width=a.offsetWidth,e.legendarea.height=a.offsetHeight}var r=e.systemConf,n=r.legend,l=(e.dataObject,e.seriesdata),i=e.legend.component,o=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?!(1==l.length&&void 0===l[0].seriesname):!(c(l[0].type||e.userdata.seriesdata.type,"numeric")==tt.charttype.dial),s=e.canvasarea[null==n||null==n.vAlign?"height":"top"===n.vAlign||"bottom"===n.vAlign?"height":"width"],d=null!=n&&null!=n.x&&""!==n.x&&null!=n.y&&""!==n.y;o=d||Q(e,"legend",s)?o:!1,o&&JSON.parse(n.enabled)?(e.legendarea.show=!0,e.legendarea.element.style("display",""),a()):(e.legendarea.show=!1,e.legendarea.element.style("display","none"))},tt.legend.get=function(){"use strict";function e(i){return i.each(function(i){b=i,C=e.chartObj,w=[i,p.canvas,Pt],k=[i.itemHoverStyle,i,p.canvas,Pt];var c=null!=i.x&&""!==i.x&&null!=i.y&&""!==i.y;f=+tt.utils.getVal(i.fontSize||p.canvas.fontSize),m=i.colorBox,g=N(w,"fontColor"),y=i.patternPallete?tt.legutil.patternPallete.get(i.patternPallete):null,v=C.xymultiRenderer||C.isNonAxisMultiSeriesCategory?C.seriesdata:C.seriesdata[0].data[0];var x,E,R,j,B,H,Y=C.dataset.getColumnIdx(C.xymultiRenderer||C.isNonAxisMultiSeriesCategory?"clr":"x"),_=i.showAs,V=b.expandable||{},J=p.legend.events;null!=J&&(H=0==I(J.enabled,!0),x=J.click,E=J.doubleclick,R=J.mouseover,j=J.mouseout,B=J.cursor),B=B||"pointer";var X=d3.select(this);e.update=function(){X.transition().call(e)},h=X.style({display:"block",position:"absolute",left:null,top:null}).selectAll("div.legendgroup").data([i]);var G=(h.enter().append("div").attr("class","legendgroup"),i.shadow);if(JSON.parse(G.show)){var Z=G.x+"px "+G.y+"px "+G.blur+"px "+G.color;Z=JSON.parse(G.inset)?Z+" inset":Z,X.style("box-shadow",Z)}else X.style("box-shadow",null);var q=d3.rgb(i.background.color.toString());X.style("background-color","rgba("+q.r+","+q.g+","+q.b+","+i.background.alpha+")");var K=i.border;JSON.parse(K.show)?X.style({border:+K.size+"px "+K.style+" "+K.color,"border-radius":K.radius+"px"}):X.style("border",null);var Q=i.title,$=I(Q.margin,5),ee=W(h,"div",JSON.parse(Q.show)?[Q]:[],".","class","legendtitle");ee.attr("text-anchor","start").text(P(Q.text)).style({height:"25px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap",margin:F($)}),U(ee,[Q,p.canvas,Pt],!0);var te=W(h,"ul",[i],".","class","legseries");te.style({"white-space":"normal","overflow-y":"hidden",cursor:B,width:"","list-style-type":"none",margin:0,padding:0});var ae=!1,ne=[];if(V.show){var le=re(i.maxHeight||A,d.height),ie=s()+ +i.itemMargin,oe=Math.floor(le/ie);if(ae=v.length>oe,ne=v.slice(0,oe),ae){var se=W(h,"div",[1],".","class","expandable");se.style({"margin-left":i.itemMargin+"px",color:V.fontColor,"font-size":V.fontSize+"px","font-family":V.fontFamily||N(w,"fontFamily"),"text-align":V.textAlign,cursor:"pointer"});var de=V.text;"function"==typeof de&&(de=de(v.length-oe,C)),se.html(de||v.length-oe+" more...")}}else h.selectAll(".expandable").remove();var ue=te.selectAll("li.series").data(ae?ne:v),ce=ue.enter().append("li").attr("class","series");if(ce.append("div").attr("class","legendfilterbox"),ce.append("span").attr("class","legendlabel"),ue.exit().remove(),ue.style({color:function(e){return o(e.disabled,g)},"white-space":"nowrap",margin:+i.itemMargin+"px",overflow:"hidden","text-align":"left","text-overflow":"ellipsis","line-height":D(i.lineHeight)?+i.lineHeight+"px":null,"vertical-align":"middle","font-size":f+"px",width:null==i.itemWidth||""==i.itemWidth?null:i.itemWidth+"px",height:null==i.itemHeight||""==i.itemHeight?null:i.itemHeight+"px","font-family":N(w,"fontFamily"),"font-weight":N(w,"fontWeight")}),!H){var he={mouseover:function(e,t){null==R?a(this,e,t,i):L(R,[d3.event,e,t,C])},mouseout:function(e,t){null==j?r(this,e,t,i):L(j,[d3.event,e,t,C])},click:function(e,a){null==x?t(this,e,a,i):L(x,[d3.event,e,a,C])},dblclick:function(e,t){null==E||L(E,[d3.event,e,t,C])}};fe(ue,null,he)}var pe=ue.select("span.legendlabel");pe.style("padding-left",i.textPadding+"px").text(function(e,t){var a=C.xymultiRenderer||C.isNonAxisMultiSeriesCategory?t:0,r=C.xymultiRenderer||C.isNonAxisMultiSeriesCategory?0:t;return _?C.dataset.getCustomizedVal(C,_,a,0,r,e,"legend"):C.dataset.getDataPointValue(C,e,Y,a,null,"legend")}).attr("title",function(){return JSON.parse(i.tooltip||!1)?this.textContent:null});var ge={fontColor:function(e){return o(e.disabled,g)},textDecoration:function(e){return e.disabled&&JSON.parse(i.itemDisabledStyle.strikeout)?"line-through":null}};U(pe,[ge,i,p.canvas,Pt],!0);var me=te.select("span.legendlabel").node().offsetHeight,ye=((+i.lineHeight||me)-f)/2,ve=ue.select("div.legendfilterbox");ve.html(function(e){return e.disabled?i.itemDisabledStyle.text||"":m.text}),ve.style({width:f+"px",height:f+"px","float":"left","margin-top":ye+"px","border-color":"transparent","background-repeat":"no-repeat","line-height":f+"px","text-align":"center","font-family":m.fontFamily,"font-size":(m.fontSize||f)+"px",color:function(e){return e.disabled?i.itemDisabledStyle.fontColor:m.fontColor||"white"}}),ve.style(y?{"background-image":function(e,t){return e.disabled?null:"url("+y[t%y.length]+")"},"background-size":"50px 50px","background-color":function(e){return e.disabled?i.itemDisabledStyle.color||"silver":null}}:{"background-image":function(e,t){var a=i.shapes?i.shapes[t%i.shapes.length]:null,r=o(e.disabled,m.strokeColor||u[t%u.length]),n=o(e.disabled,m.fillColor||u[t%u.length]);return l(r,n,f,f,m,a)},"background-size":null});var xe,be,ke=[],we=null!=i.itemWidth?+i.itemWidth+2*+i.itemMargin:null;ue.each(function(){var e=d3.select(this).select("div.legendfilterbox"),t=d3.select(this).select("span.legendlabel");be=be||e.node().offsetWidth,xe=t.node().offsetWidth;var a=be+xe;ke.push(we||a+2*+i.itemMargin+ +i.textPadding)}),we=null!=i.itemWidth?we:d3.max(ke);var Ce=i.itemHeight||me+2*+i.itemMargin;te.style("overflow-y",ae?"hidden":"auto"),te.style("overflow-x","hidden");var Oe=0,Ae=[],Se=i.hAlign,Pe=i.vAlign;if(O=0,c){var Me=re(i.maxHeight||A,d.height),Te=C.legendarea.element.node().getBoundingClientRect(),Ee=Math.min(C.canvasarea.width-Te.width,i.x),ze=Math.min(C.canvasarea.height-Te.height,i.y);X.style("left",Ee+"px"),X.style("top",ze+"px"),te.style("max-height",Me+"px")}else if("center"!=Pe){ue.style("display","inline-block");for(var Me=re(i.maxHeight||S,d.height),Re=re(i.maxWidth||T,d.width),Le=Re-+i.marginLeft-+i.marginRight-(JSON.parse(i.border.show)?2*i.border.size:0);Le>O&&Oe<ke.length;)Ae[Oe]=ke[Oe],O+=ke[Oe],Oe++;for(;O>Le&&Oe>1;){Ae=[],Oe--;for(var Ne=0;Ne<ke.length;Ne++)Ae[Ne%Oe]=ke[Ne%Oe];O=Ae.reduce(function(e,t){return e+t})}var je=ke.length%Oe,Ie=(ke.length-je)/Oe,Be=0==je?Ie:Ie+1;te.style({height:Be*Ce+2+"px","max-height":Me+"px","max-width":Re+"px"}),ee.style("max-width",Re-+i.marginLeft-+i.marginRight+"px");var De=te.node().scrollHeight>te.node().offsetHeight?z:0;te.style("width",O+2+De+"px");var He=n(i,X);X.style({left:He.x+"px",top:He.y+"px"})}else{ue.style("display","block"),Oe=1;var Me=re(i.maxHeight||A,d.height),Re=re(i.maxWidth||M,d.width);te.style("max-height",Me+"px"),te.style("max-width",Re+"px"),ee.style("max-width",Re-+i.marginLeft-+i.marginRight+"px");var De=te.node().scrollHeight>te.node().offsetHeight?z:0;te.style({width:we+2+De+"px",height:null});var Ye=X.node().offsetWidth;"right"==Se?(X.style("left",d.width-Ye-+i.marginRight+"px"),X.style("top",d.top+ +i.marginTop+"px")):(X.style("left",+i.marginLeft+"px"),X.style("top",d.top+ +i.marginTop+"px"))}}),e}function t(t,a,r,n){e.toggleItemNUpdateChart(t,a,r,n)}function a(t,a,r,n){e.highlightSeries(t,a,r,n,C,!0),e.highlightItem(t,a,r,n,!0)}function r(t,a,r,n){e.highlightSeries(t,a,r,n,C),e.highlightItem(t,a,r,n)}function n(e,t){var a=e.hAlign,r=e.vAlign,n=t.node().offsetWidth,l=t.node().offsetHeight,i={};return"left"==a?i.x=d.left+ +e.marginLeft:"center"==a?i.x=d.width/2-n/2:"right"==a&&(i.x=d.width-n-+e.marginRight),"top"==r?i.y=d.top+ +e.marginTop:"bottom"==r&&(i.y=d.height+d.top-l-+e.marginBottom),i}function l(e,t,a,r,n,l){var o=x(l||n.shape||"square")(10);return'url("data:image/svg+xml;base64,'+St("<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='"+a+"' height='"+r+"'><path d='"+o+"' transform='translate("+a/2+","+r/2+") scale("+a/(10+2*I(n.strokeWidth,1))+")' style='stroke: "+i(e)+"; fill: "+i(t)+"; fill-opacity: "+n.fillOpacity+"; stroke-width: "+I(n.strokeWidth,1)+"px; stroke-opacity: "+n.strokeOpacity+";'></path> </svg>")+'")'}function i(e){if(e&&-1==e.toString().indexOf("#"))return e;var t=parseInt(d3.rgb(e).toString().replace(/#/g,""),16);return"rgb("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+")"}function o(e,t){var a=b.itemDisabledStyle;return e?a.color||(!a.color||JSON.parse(a.strikeout)?t:"silver"):t}function s(){var e=d3.select(document.body).append("span");e.style({"font-family":N(w,"fontFamily"),"font-weight":N(w,"fontWeight"),"font-size":f+"px",visibility:"hidden"}).text("My");var t=e.node().offsetHeight;return e.remove(),t}var d,u,h,p,f,g,m,y,v,b,k,w,C,O=0,A="80%",S="20%",M="20%",T="100%",E=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout"),z=20;return e.dispatch=E,e.chartarea=function(t){return arguments.length?(d=t,e):d},e.systemconf=function(t){return arguments.length?(p=t,e):p},e.color=function(t){return arguments.length?(u=t,e):u},e.filterSeriesNUpdate=function(e,t,a){v=v||(a.xymultiRenderer||a.isNonAxisMultiSeriesCategory?a.seriesdata:a.seriesdata[0].data[0]);var r=v[t],n=v.filter(function(e){return e.disabled}),l=n.length==v.length-1&&!r.disabled;l||(r.disabled=!r.disabled,a.dataObject.pieWithAxis?r.data.forEach(function(t){var a=c(e.type||p.seriesdata.type,"numeric")===tt.charttype.bubblepie;t.forEach(function(e){e.disabled=r.disabled||!a})}):null,a.dataObject.isHierarchy?p.seriesdata.chartdata[t].disabled=r.disabled:null,a.dataObject.data=a.systemConf,a.addorremoveseries(r))},e.toggleItemNUpdateChart=function(t,r,n,i){if(JSON.parse(i.filter.enabled)){e.filterSeriesNUpdate(r,n,C);var s,d,c,h,p,v=d3.select(t),x=i.shapes?i.shapes[n%i.shapes.length]:null,b=m.strokeColor||u[n%u.length],k=m.fillColor||u[n%u.length];r.disabled?(h=y?null:l(o(!0,b),o(!0,k),f,f,m,x),c=y?i.itemDisabledStyle.color||"silver":null,s=o(!0,g),d=JSON.parse(i.itemDisabledStyle.strikeout)?"line-through":null,p=i.itemDisabledStyle.tickColor||"silver",e.highlightItem(t,r,n,i,!1,!0)):(h=y?"url("+y[n%y.length]+")":l(b,k,f,f,m,x),c=null,s=g,d=null,p=m.fontColor||"white"),v.selectAll(".legendfilterbox").style({"background-image":h,"background-color":c,color:p}).html(r.disabled?i.itemDisabledStyle.text||"":m.text),v.selectAll(".legendlabel").style({color:s,"text-decoration":d}),null==d3.event.touches&&a(t,r,n,i)}},e.highlightItem=function(e,t,a,r,n,l){if((l||!t.disabled)&&r.itemHoverStyle){var i=d3.select(e);i.style("background-color",(n?r.itemHoverStyle:r).backgroundColor),U(i.selectAll("span"),n?k:w,!0)}},e.highlightSeries=function(e,t,a,r,n,l){var i=n.legendHighlight;l?t.disabled||(i.highlightSelectedSeries(r,a),i.highlightUnselectedSeries(r,a)):i.reset(r,a)},e},tt.legutil=function(){},tt.legutil.colorpallete=d3.map(),tt.legutil.colorpallete.set("greenish",["#6c6c6d","#1ba98e","#00ff80","#00ffc0","#00ffff","#40ff00","#40ff40","#40ff80","#40ffc0","#40ffff","#80ff00","#80ff40","#80ff80","#80ffc0","#80ffff"]),tt.legutil.colorpallete.set("pinkish",["#ff00ff","#ff00c0","#ff0080","#ff0040","#ff0000","#c000ff","#c000c0","#c00080","#c00040","#c00000","#8000ff","#8000c0","#800080","#800040","#800000"]),tt.legutil.colorpallete.set("countries",["#00c6e4","#faa43a","#5da5da","#60bd68","#f17cb0","#b2912f","#307d99"]),tt.legutil.colorpallete.set("saturate5",["#594f4f","#547980","#45ada8","#97843a","#518058","#975156"]),tt.legutil.colorpallete.set("ocean5",["#ff7f00","#6a4a3c","#cc333f","#eb6841","#edc951","#975156"]),tt.legutil.colorpallete.set("zoho-reports-old",["#FF465B","#04C36B","#3A92E9","#FDC33A","#D65587","#FC7C63","#51A5A9","#BFBFBF","#91CD6A","#BE9B89","#7D8DB0","#B68E2E","#C6D5B0","#D1ACCE","#E0AE60","#5CD29F","#716398","#AD8686","#FF99A8","#A0C0C0","#2D7094","#553D4E","#B2449D","#FED577","#D3D159","#AAAAAA","#7ED9D9","#F7A26D","#8ABFA2","#767676","#E36068","#A3AFC7"]),tt.legutil.colorpallete.set("zoho-reports-new",["#60bfdf","#ffa060","#aadf80","#ff6c7d","#c9ac66","#bf80bf","#df6060","#606060","#60a0df","#ff99a8","#feff60","#a0dfdf","#dfa080","#dfdfdf","#a0a060","#a080bf","#a06060","#5cd29f","#ffbe60","#bfa080","#f28fb5","#8080bf","#bfbfbf","#dfdf80","#80a060","#80a060","#a08060","#7ed9d9","#be9b89","#bf6060","#a0bf60","#fc7c63"]),tt.legutil.colorpallete.set("colors",["#0eaadd","#1ac9bb","#92c658","#dbbe56","#ee7d54","#ef4f6a","#b952ef"]),tt.legutil.colorpallete.set("flat-ui-colors",["#23a96e","#bca634","#f75a51","#39b6c5","#f9ce8d","#983a67","#634c3f","#d7dab9","#357180","#983a67","#b16b76","#7f90a0"]),tt.legutil.colorpallete.set("MEMobile",["#73c2f4","#ecd543","#e6be3f","#da7b36","#c84b37","#9c240f","#9bcedd","#ffe560","#ffe560","#c67c99","#c6db4c"]),tt.legutil.colorpallete.set("Toddler",["#f8d0db","#9be1ed","#c4ead1","#fbe2aa","#e5e5e5","#d6b65f","#be9fbf","#ffe560","#ffe560","#c67c99","#c6db4c"]),tt.legutil.colorpallete.set("BrightNDull",["#47bac1","#8ccace","#72c3f5","#71bfee","#ac66ad","#c5a0c6","#906aa6","#b29dbf","#fd9f94","#f6cac4","#ff759c","#f6acc1"]),tt.legutil.colorpallete.set("BlueShades",["#00c6e4","#6ad4e4","#a3dbe4","#c3e0e4","#e4e4e4","#c8c8c8","#aac4c8"]),tt.legutil.colorpallete.set("graphite6",["#595959","#767676","#373737","#9d9d9d","#bfbfbf","#222222"]),tt.legutil.colorpallete.set("chalk",["#FFFFFF","#FAFAFA","#CCCCCC"]),tt.legutil.colorpallete.set("map",["#FB0D0D","#53B808","#B80894","#2ADBDD"]),tt.legutil.patternPallete=d3.map(),tt.legutil.patternPallete.set("linesndots",["01.png","02.png","03.png","04.png","05.png","06.png","07.png","08.png","09.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),tt.legutil.patternPallete.set("dotsfirst",["13.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png"]),tt.legutil.patternPallete.set("stones",["01.jpg","02.jpg","03.jpg"]),pe(),tt.legutil.getMonochromeColorPallette=function(e){var t=[0,+e.count-1],a=[+e.colorGamma[0],+e.colorGamma[1]],r=A(e.baseColor,t,a);return d3.range(e.count).map(function(e,t){return r(t)})},tt.legendHighlight=function(e,t){function a(e,t){v.selSeriesObj=l(t);for(var a=(o(t),v.getLegendHighlightEffect(t,"selectedSeries")),r=v.selSeriesObj.selectedSeries,n=v.selSeriesObj.charttypes,i=r.length,s=0;i>s;s++){var d=tt.charttypenames.get(n[s]),c=v.getEffect(a,d);u(r[s],c,t)}}function r(e,t){v.unselSeriesObj=i(t);for(var a=v.unselSeriesObj.unselectedSeries,r=v.unselSeriesObj.indices,n=v.unselSeriesObj.charttypes,l=a.length,o=0;l>o;o++){var s=tt.charttypenames.get(n[o]),d=v.getLegendHighlightEffect(r[o],"unselectedSeries"),c=v.getEffect(d,s);u(a[o],c,r[o])}}function n(){e.container.select(".highlight-canvas").style("visibility","hidden")}function l(e){function a(e,t){var n;if(e==tt.charttype.bar||e==tt.charttype.stkdbar||e==tt.charttype.bullet){var o=r.selectAll("g.barseries_"+t);n=o.selectAll("path.bar")}else if(e==tt.charttype.line){var s=r.selectAll("g.lineseries_"+t);n=s.selectAll("path.line")}else if(xe(e)||e==tt.charttype.web){var d=r.selectAll("g.areaseries_"+t);n=d.selectAll("path.area")}else{if(ke(e)){var u=r.selectAll("g.scatterseries_"+t),c=u.selectAll("g.scatter").selectAll("path.outer"),h=u.selectAll("g.scatter").selectAll("path.inner");return i.push(c,h),void l.push(e,e)}if(e==tt.charttype.pie||e==tt.charttype.bubblepie){var p=r.selectAll("g.piegroup");n=p.selectAll("path#arc_"+t)}else if(e==tt.charttype.funnel){var f=r.selectAll("g.funnelgroup"),g=f.selectAll("g.trapezoidgroup");n=g.selectAll("path#funnel"+t)}else if(e==tt.charttype.pyramid){var m=r.selectAll("g.pyramidgroup");n=m.selectAll("g#section_"+t)}else if(e==tt.charttype.sunburst){var y=r.selectAll("g.sunburstgroup");n=y.selectAll("path.burst_"+t)}else if(e==tt.charttype.packedbubble){var v=r.selectAll("g.packedbubblegroup");n=v.selectAll("circle.packedbubble_"+t)}else if(we(e)){var x=r.select("g.series:nth-child("+(t+1)+")");i.push(x.selectAll("g").selectAll("path.outer"),x.selectAll("g").selectAll("path.inner"))}}i.push(n),l.push(e),xe(e)&&a(tt.charttype.line,t),e==tt.charttype.line&&(Mt.IE||Mt.SAFARI)&&a(tt.charttype.scatter,t)}var r=t.selectAll("g.seriesholder"),n=c(null,"object",e,k).value,l=[],i=[];return a(n,e),{selectedSeries:i,charttypes:l}}function i(a){function r(t,a){var s,d;if(e.isAxisCategory&&!e.dataObject.pieWithAxis||e.isNonAxisMultiSeriesCategory)e.seriesdata.forEach(function(e,r){if(r!=a&&1!=e.disabled){if(d=t||c(null,"object",r,k).value,d==tt.charttype.bar||d==tt.charttype.stkdbar||d==tt.charttype.bullet){var u=o.selectAll("g.barseries_"+r);s=u.selectAll("path.bar")}else if(d==tt.charttype.line){var h=o.selectAll("g.lineseries_"+r);s=h.selectAll("path.line")}else if(xe(d)||d==tt.charttype.web){var p=o.selectAll("g.areaseries_"+r);s=p.selectAll("path.area")}else{if(ke(d)||we(d)){var f=o.selectAll("g.scatterseries_"+r),g=f.selectAll("g.scatter").selectAll("path.outer"),m=f.selectAll("g.scatter").selectAll("path.inner");return n.push(g,m),i.push(d,d),void l.push(r,r)}if(d==tt.charttype.sunburst){var y=o.selectAll("g.sunburstgroup");s=y.selectAll("path.burst_"+r)}else if(d==tt.charttype.packedbubble){var v=o.selectAll("g.packedbubblegroup");s=v.selectAll("circle.packedbubble_"+r)}}n.push(s),l.push(r),i.push(d)}});else if(d=t||c(null,"object",a,k).value,d==tt.charttype.pie||d==tt.charttype.bubblepie)s=o.selectAll("g.piegroup").selectAll("path").filter(function(e,t){var r=this.getAttribute("id")!="arc_"+a;return r&&(n.push(d3.select(this)),l.push(t),i.push(d)),r});else if(d==tt.charttype.funnel)s=o.selectAll("path").filter(function(e,t){var r=this.getAttribute("id")!="ellipse"+a&&this.getAttribute("id")!="funnel"+a&&null!=this.getAttribute("id");return r&&(n.push(d3.select(this)),l.push(t),i.push(d)),r});else if(d==tt.charttype.pyramid){var u=o.selectAll("g.pyramidgroup");s=u.selectAll("g").filter(function(e,t){var r=this.getAttribute("id")!="section_"+a;return r&&(n.push(d3.select(this)),l.push(t),i.push(d)),r})}xe(d)&&r(tt.charttype.line,a),d==tt.charttype.line&&(Mt.IE||Mt.SAFARI)&&r(tt.charttype.scatter,a)}var n=[],l=[],i=[],o=t.selectAll("g.seriesholder");return r(null,a),{unselectedSeries:n,indices:l,charttypes:i}}function o(t){return e.isAxisCategory?e.renderer[t]:e.renderer[0]}function s(e,t,a){if(null!=t&&t.constructor==Object&&null!=e&&null!=e.node()){var r={},n=h(e,a);for(var l in t)if(t.hasOwnProperty(l)){r[l]=e.style(l);var i=tt.utils.getVal(t[l]);e.style(l,i)}x[n]=x[n]||r}}function d(e){e.style("visibility","hidden")}function u(t,a,r){if(null!=a&&a.constructor==Object&&null!=t&&null!=t.node()){if("svg"!==e.plot.renderer.mode)return void d(t);var n=h(t,r),l=x[n];for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];t.style(i,function(e){return c(null,"object",r,k).value==tt.charttype.sunburst&&"fill"==i?e.arcColor:o})}}}function h(e,t){var a=e.node(),r=a.localName,n=a.getAttribute("class"),l=a.getAttribute("id"),i=r+"_"+t;return null!=n&&(i+="_"+n),null!=l&&(i+="_"+l),i}function p(e,t){e.style("visibility",t?"visible":"hidden")}function f(e){return/(bar|bullet|area|arearange|pie|funnel|pyramid|web|sunburst)/.test(e)?"diagonalPattern":"strokeEnlarge"}function g(e,t){return/(line|scatter)/.test(t)&&/(((\D)+Pattern)|((\D)+Stripes|illuminate|moody))/.test(e)}function m(e,t){v.selSeriesObj=l(t);for(var a=(o(t),v.getLegendHighlightEffect(t,"selectedSeries")),r=v.selSeriesObj.selectedSeries,n=v.selSeriesObj.charttypes,i=r.length,d=0;i>d;d++){var u=tt.charttypenames.get(n[d]),c=v.getEffect(a,u);s(r[d],c,t)}}function y(t,a){var r=v.getLegendHighlightEffect(a,"selectedSeries");if("none"!==r){v.baseClr=e.seriesColor[a];var n=c(null,"object",a,k),i=n.name,o=n.value,s=l(a);if(s.selectedSeries[0].length>0)return void p(s.selectedSeries[0],!0);if(e.chartRendered){e.systemConf.chart.plot.animation.enabled=!1,e.systemConf.chart.plot.plotoptions[i].animation.enabled=!1,e.seriesdata[a].plotoptions&&e.seriesdata[a].plotoptions.animation&&(e.seriesdata[a].plotoptions.animation.enabled=!1);var d=Bt(i),u=e.systemConf.seriesdata.chartdata[a],h=0;if(o===tt.charttype.bar||o===tt.charttype.stkdbar)for(var f=0;a>f;f++)n=c(null,"object",f,k),o=n.value,void 0!=e.seriesdata[f].disabled&&e.seriesdata[f].disabled||o!==tt.charttype.bar&&o!==tt.charttype.stkdbar&&o!==tt.charttype.bullet||(h+=e.seriesdata[f].data.length);return Ct.setRendererProp(e,d,u,a,{labelQueue:[],barDatasetIndex:h}),Dt(e,u,d),m(t,a),!0}}}var v={},x={},b=e.defsLocation,k=e.userdata;return v.highlightSelectedSeries=function(t,a){switch(v.baseClr=e.seriesColor[a%e.seriesColor.length],e.plot.renderer.mode){case"svg":m(t,a);break;case"canvas":canvasUtils.highlightCanvasSeries(e,t,a);break;default:y(t,a)}},v.highlightUnselectedSeries=function(e,t){for(var a=i(t),r=a.unselectedSeries,n=a.indices,l=a.charttypes,o=r.length,d=0;o>d;d++){var u=tt.charttypenames.get(l[d]),c=this.getLegendHighlightEffect(n[d],"unselectedSeries"),h=v.getEffect(c,u);s(r[d],h,n[d])}},v.reset=function(e,t){a(e,t),r(e,t),x={},n()},v.getLegendHighlightEffect=function(t,a,r){var n=c(null,"string",t,k),l=e.isAxisCategory||e.isNonAxisMultiSeriesCategory?e.seriesdata[t].plotoptions:e.seriesdata[0].plotoptions,i=e.systemConf.chart.plot.plotoptions[n],o=l&&l.legendHighlightEffect&&i.legendHighlightEffect?tt.utils.getValueOfPlotOptions(l.legendHighlightEffect,i.legendHighlightEffect)(a):i.legendHighlightEffect&&i.legendHighlightEffect[a],s=e.systemConf.legend.highlightEffect[a];return"plot"===r?o||("none"!==s?s:f(n)):s||o||f(n)},v.getEffect=function(t,a,r){if(r=r||v.baseClr,"function"==typeof t)return t(e,r,Et);t=null===t||g(t,a)?f(a):t;var n={};if(/(diagonalPattern|circlePattern|noisePattern|horizontalStripes|crossStripes)/.test(t)){var l=Et.get(t,{bgClr:r,strokeWidth:2,strokeOpacity:.7});n.fill="url("+b+"#"+l+")"}else if(/(saturate|grayscale|blur|glow|shadow)/.test(t)){var i,o=/(saturate|grayscale)/.test(t)?"colorMatrix":"dropShadow";switch(t){case"saturate":i={type:"saturate",values:"0.3"};break;case"grayscale":i={type:"matrix",values:".33 .33 .33 0 0 .33 .33 .33 0 0 .33 .33 .33 0 0 0 0 0 1 0"};break;case"blur":i={blur:6,source:"SourceGraphic"};break;case"glow":i={blur:3,color:"gold"};break;case"shadow":i={dx:5,dy:5,blur:3}}var s=Et.get(o,i);n.filter="url("+b+"#"+s+")"}else if(/(moody|illuminate)/.test(t)){var d="moody"===t;n.fill=-1!=r.indexOf("url")?d?"grey":"silver":d3.hsl(r)[d?"darker":"brighter"](.6)}else"strokeEnlarge"===t?n["stroke-width"]=3:"fadeOut"===t&&(n["fill-opacity"]=n["stroke-opacity"]=.3);return n},v},tt.events.mouseevents=function(e,t,a,r,n,l,i,s,d,h,p){function f(r,i,o){var s=o.getBBox(),d=r[0]-s.x,f=r[1]-s.y,g={x:d,y:f},m=w(g,l,ne,a),y=e.seriesdata,v=m.seriesPos,b=m.itemPos,k=m.subseriesindex;Se=m.highlightpoint,Q=m.levelMarkerPoint,k=k[v];var C=e.eventHandler.oldInfo,O=e.systemConf.tooltip.sharedSeriesInfo;null!=v&&(pe=v);var A=null==v?!0:!1;if(null==v)return e.eventHandler.mouseOut(),void(e.eventHandler.oldInfo={isNoInfo:A});var S=c(y[v].type||e.userdata.seriesdata.type,"numeric"),P=S==tt.charttype.arearange,M=P?1:null,T=(null!=l.rangeBand?l.rangeBand():null,u(y[v].yaxiscolumnorder)),E=ne[T].eventscale,z=e.renderer[v],R=(null!=z.seriesdataAfterUpdate?z.seriesdataAfterUpdate[k]:y[v].data[k])[b],L=n.getX(R),N=n.getY(R,T),j=e.dataObject.getXYvalue(ie,Te(S),l,E,T,R,"x",null,M),I=e.dataObject.getXYvalue(ie,Te(S),l,E,T,R,"y",null,M),B=e.plotarea,D=Y({
x:B.left,y:B.top,width:B.width,height:B.height},{x:B.left+j,y:B.top+I});if(be(S)||null!=D){if(null!=C&&!C.isNoInfo){var F=C.nearestPoint,_=c(C.type||e.userdata.seriesdata.type,"numeric");if(F&&F.seriesPos==m.seriesPos&&F.itemPos==m.itemPos&&F.subseriesindex==m.subseriesindex&&_==S)return h.selectAll("#zcbarhighlight,#zcareahighlight").style("display",""),t.style("display",JSON.parse(a.tooltip.enabled)?"inline-block":"none"),t.style("visibility",JSON.parse(a.tooltip.enabled)?"visible":"hidden"),void(H()&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible"))}var V=U({x:l(L),y:E(N)},g),W=O?e.seriesdata.length:1;h.selectAll("#zcscatterhighlight").selectAll("*").remove();for(var J=d3.map(),X=0;W>X;X++){var G=O?X:v;x(e,G,L,b,k,m,O,V>10,J)}var Z=e.eventHandler.tooltipElement;if(JSON.parse(a.tooltip.enabled)){var q=O&&H()?ie?{left:B.width,top:g.y,actLeft:j+B.left,actTop:g.y+B.top}:{left:g.x,top:0,actLeft:g.x+B.left,actTop:I+B.top}:ie?{left:g.x,top:g.y,actLeft:j+B.left,actTop:g.y+B.top}:{left:g.x,top:g.y,actLeft:g.x+B.left,actTop:I+B.top},K=i.touches?i.touches[0]:i,$=g.x-K.clientX,ee=g.y-K.clientY;q.left-=$,q.top-=ee,q.dLeft=$+B.left,q.dTop=ee+B.top;var te={dataset:n,seriesindex:v,subseriespos:k,itempos:b,color:p,tooltipSharedInfo:J,tooltipShared:O};Z.show(e,q,null,!0,te)}}}function g(r,i,o){var s=10,d=e.dataObject.isPolarAxisCategory,f=o.getBBox(),g=r[0]-f.x-(d?e.plotarea_approx.x:0),m=r[1]-f.y-(d?e.plotarea_approx.y:0),y={x:g,y:m},v=e.eventHandler.oldInfo,b=a.tooltip.sharedSeriesInfo,k=b?P(y,l,ne,a):M(y,l,ne,a),w=k.seriesPos,C=k.itemPos,O=k.subseriesindex,A=null==w?!0:!1;if(null==w)return e.eventHandler.mouseOut(),void(e.eventHandler.oldInfo={isNoInfo:A});pe=w;var S=e.seriesdata,T=u(S[w].yaxiscolumnorder),E=ne[T].eventscale,z=c(S[w].type||e.userdata.seriesdata.type,"numeric"),R=z==tt.charttype.arearange,L=R?1:null,N=(null!=l.rangeBand?l.rangeBand():null,e.renderer[w]),j=null!=N.seriesdataAfterUpdate?N.seriesdataAfterUpdate[O]:S[w].data[O],I=j[C],B=e.dataset.getX(I),D=e.dataObject.getXYvalue(ie,Te(z),l,E,T,I,"x",null,L),F=e.dataObject.getXYvalue(ie,Te(z),l,E,T,I,"y",null,L),_=e.plotarea,V=Y({x:_.left,y:_.top,width:_.width,height:_.height},{x:_.left+D,y:_.top+F});if(d||null!=V){var W=e.eventHandler.tooltipElement,J=U({x:D,y:F},y);if(null!=v&&!b){var X=v.nearestPoint,G=c(v.type||e.userdata.seriesdata.type,"numeric");if(X&&X.seriesPos==k.seriesPos&&X.itemPos==k.itemPos&&X.subseriesindex[X.seriesPos]==k.subseriesindex[k.seriesPos]&&G==z)return h.selectAll(xe(z)?"#zcscatterhighlight,#zcareahighlight":"#zcscatterhighlight").style("display",""),t.style({display:JSON.parse(a.tooltip.enabled)?"inline-block":"none",visibility:JSON.parse(a.tooltip.enabled)?"visible":"hidden"}),void(H()&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible"))}var Z=b?e.seriesdata.length:1;h.selectAll("#zcscatterhighlight").selectAll("*").remove();for(var q=d3.map(),K=0;Z>K;K++){var Q=b?K:w;x(e,Q,B,C,O,k,b,s>J,q)}if(JSON.parse(a.tooltip.enabled)){var $=b&&H()?ie?{left:_.left,top:F,actLeft:_.left+D,actTop:_.top+F}:{left:D,top:0,actLeft:_.left+D,actTop:_.top+F}:{left:D,top:F,actLeft:_.left+D,actTop:_.top+F,distance:e.dataObject.isBubbleEnabled?e.dataObject.getXYvalue(ie,Te(z),l,E,T,I,"z",e.zscale)/2:0},ee=i.touches?i.touches[0]:i,te=y.x-ee.clientX,ae=y.y-ee.clientY;$.left-=te,$.top-=ae,$.dLeft=te+_.left+(d?e.plotarea_approx.x:0),$.dTop=ae+_.top+(d?e.plotarea_approx.y:0);var re={dataset:n,seriesindex:w,subseriespos:O,itempos:C,color:p,tooltipShared:b,tooltipSharedInfo:q};W.show(e,$,null,!0,re)}}}function m(t,a,l,i,s,d,u,c,f,g,m,y){var v=e.seriesdata,x=e.legendHighlight.getLegendHighlightEffect(s,"selectedSeries","plot"),b="none"===x?{fill:"transparent"}:e.legendHighlight.getEffect(x,"area",p[s%p.length]);B(h.selectAll("g#zcbarhighlight")),t.style("display","").attr("transform","translate("+r.left+","+r.top+")").style(b);var k,w,C,A,S,P,M,T,E=te(l,i)("mode"),z=o(n,"x"),R=o(n,"y",g);if("linear"==E&&null!=y){var L=d3.merge(y.map(function(e){return[e.x,e.y]})),N=W(t,"polygon",[y],".","class","areapoly");N.attr("points",L.toString()).style({"fill-opacity":.2,display:""})}else{var j,I,D=Te(a),H=e.dataObject.containsNegativeData(g);if(e.dataObject.isPolarAxisCategory){var Y=e.renderer[s];I=null!=Y.seriesdataAfterUpdate?Y.seriesdataAfterUpdate[d]:v[s].data[d];var F=e.systemConf.chart.axes.yaxis[g||0].reversed,_=F&&!D?f.domain().length-1:0;j=d3.svg.area.radial().angle(function(e){return c(n.getX(e))}).outerRadius(function(e){var t=D?f(e.y0+e.y):f(n.getY(e,g))+(null!=f.rangeBand?f.rangeBand()/2:0);return Math.max(t,f.range()[_])}).innerRadius(function(e){var t;return t=D?0==s?Math.min(f.range()[0],f(H)):f(e.y0):f(f.domain()[_])+(null!=f.rangeBand?f.rangeBand()/2:0),Math.max(t,f.range()[_])}).interpolate(E)}else{var V=a==tt.charttype.arearange,J=V?1:null,Y=e.renderer[s],X=null!=Y.seriesdataAfterUpdate?Y.seriesdataAfterUpdate[d]:v[s].data[d],U=X[u],G=e.dataObject.getXYvalue(ie,D,c,f,g,U,"x",null,J),Z=e.dataObject.getXYvalue(ie,D,c,f,g,U,"y",null,J);if(0!=u){var q=X[u-1],K=e.dataObject.getXYvalue(ie,D,c,f,g,q,"x",null,J),Q=e.dataObject.getXYvalue(ie,D,c,f,g,q,"y",null,J);k=(G+K)/2,w=(Z+Q)/2}if(u!=X.length-1){var $=X[u+1],ee=e.dataObject.getXYvalue(ie,D,c,f,g,$,"x",null,J),ae=e.dataObject.getXYvalue(ie,D,c,f,g,$,"y",null,J);C=(G+ee)/2,A=(Z+ae)/2}S=ie?0:null==k?G:k,P=d3.min([w,Z,A,f(f.domain()[1])]),M=ie?d3.max([k,G,C,f(H)||G]):null!=k&&null!=C?C-k:null==k?null==C?1:C-G:G-k,T=ie?null==w?Z-A:null==A?w-Z:w-A:r.height-P;var re=O({x:S,y:P,width:M,height:T},"rect"),ne=W(t,"defs",[1]),le=W(ne,"clipPath",[1],"#","id",re),oe=W(le,"rect",[1]);oe.attr({x:S,y:P,width:M,height:T}),t.attr("clip-path","url("+e.defsLocation+"#"+re+")").style("display","block"),I=X,j=d3.svg.area().defined(function(e){return!R(n.getY(e,g))&&!z(n.getX(e))}).x(function(t){return e.dataObject.getXYvalue(ie,D,c,f,g,t,"x")}).y(function(t){return e.dataObject.getXYvalue(ie,D,c,f,g,t,"y",null,J)}).interpolate(E),ie?j.x0(function(e,t){return D?0==s&&0==d&&0==t?Math.max(f.range()[0],f(H)):f(e.y0):null!=f.rangeBand?f.range()[0]+f.rangeBand():Math.max(f.range()[0],f(H))}):j.y0(function(t,a){return D?0==s&&0==d&&0==a?Math.min(f.range()[0],f(H)):f(t.y0):V?e.dataObject.getXYvalue(ie,D,c,f,g,t,"y",null,0):null!=f.rangeBand?f.range()[0]+f.rangeBand():Math.min(f.range()[0],f(H))})}var se=h.selectAll("#areapath");se.datum(I).attr("d",j).attr("stroke","").style({"fill-opacity":.2,display:""})}}function y(e,t,a,n,l){B(h.selectAll("g#zcareahighlight,g#zcscatterhighlight")),h.selectAll("g#zcbarhighlight").style("display",""),e.attr("d",function(){return X(t.x,t.y,t.width,t.height,a,l,ie)}).attr("transform","translate("+r.left+","+r.top+")").style("display","")}function v(t,a,n,l,i,o,s,d,u,c,p,f,g,m,y,v){var x=a==tt.charttype.gantt;x||B(h.selectAll("g#zcbarhighlight")),y||e.dataObject.isPolarAxisCategory||(B(h.selectAll("g#zcareahighlight").selectAll("*")),B(h.selectAll("g#zcareahighlight")));var k,w,C=h.selectAll("#zcscatterhighlight"),O=n?Rt(l.hoveroptions,n.hoveroptions,!0):l.hoveroptions;if(!x||!l.marker||l.marker.enabled!==!1){if(Ce(a)){var A=e.dataObject.getXYvalue(ie,Te(a),d,u,c,p[g].data[f][m],"z",e.zscale);w=.1*(A+re("2.5%",Math.min(r.width,r.height))),k=A/2*.1}else{var S=a===tt.charttype.line||xe(a),P=e.dataObject.isPolarAxisCategory,M=n&&n.marker?te(n.marker,l.marker)("size"):l.marker.size,T=!S&&!P||null!=M&&""!==M?M||1:te(n,l)("strokeWidth");T=null!=O.size&&""!==O.size?1:+T,x&&(O=n?Rt(v.hoveroptions,n.hoveroptions,!0):v.hoveroptions),w=T*(P?.7:S?.9:2),k=T*(P?.35:S?.4:1)}C.attr("transform","translate("+r.left+","+r.top+")").style("display",""),b(t,null,O,{color:i,symbolSize:{inner:k,outer:w},transform:[o,s],imageSize:15})}}function x(e,t,i,o,s,d,f,g,x){var b=e.seriesdata,w=u(b[t].yaxiscolumnorder),C=ne[w].scale,O=c(b[t].type||e.userdata.seriesdata.type,"numeric"),S=O==tt.charttype.arearange,P=O===tt.charttype.gantt,M=e.dataObject.isPolarAxisCategory,T=S||P?1:null,E=null!=l.rangeBand?l.rangeBand():null,z=e.renderer[t],R=null!=z.seriesdataAfterUpdate?z.seriesdataAfterUpdate[s]:b[t].data[s],L=R[o];if(o=L&&n.getX(L)===i?o:A(i,R),null!=o&&!q(e.seriesdata[t])){x.set(t,o),k(x,t);var N,j=R[o],I=e.dataObject.getXYvalue(ie,Te(O),l,C,w,j,"x",null,T),B=e.dataObject.getXYvalue(ie,Te(O),l,C,w,j,"y",null,T),D=b[t].plotoptions,H=a.chart.plot.plotoptions[tt.charttypenames.get(O)],Y=ye(D,H,e,"mousemove"),F=ye(D,H,e,"cursor");if(O!==tt.charttype.line&&O!==tt.charttype.scatter&&!we(O)||!g?Pe.addCursor(e.eventHandler.trackerElement,F):Pe.hideCursor(e.eventHandler.trackerElement),null!=Y){var _=event||e.eventHandler.targetEvent;("string"==typeof Y?window[Y]:Y)(_,{x:I,y:B,data:e.dataset.getMetaInfoObj(e,b[t].data[s][o],t)},e)}else{if(null!=Se&&be(O)){var V=e.systemConf.chart.axes.yaxis[w||0].reversed,J=te(D,H)("border"),X=O===tt.charttype.bullet?0:J.radius;X=null!=J&&JSON.parse(J.show)?X:0;var z=e.renderer[t],U=e.dataObject.getTransRectValue("radius",null,null,null,null,X),G=e.legendHighlight.getLegendHighlightEffect(t,"selectedSeries","plot"),Z="none"===G?{fill:"transparent"}:e.legendHighlight.getEffect(G,"bar",/(illuminate|moody)/.test(G)?p[t%p.length]:"transparent"),K=h.selectAll("#zcbarhighlight").select("#barpath").style(Z);y(K,Se,U,z,V);var $=D&&D.levelMarker?Rt(H.levelMarker,D.levelMarker,!0):H.levelMarker;if(P&&$.enabled){var ee=e.dataObject.getTransRectValue("radius",null,null,null,0),ae=JSON.parse(te(D,H)("multiColoring")||!1)&&!e.legendarea.show,re=p[(ae?o:t)%p.length],le={fill:$.color||re},oe=W(h.selectAll("#zcbarhighlight"),"path",[1],"#","id","levelMarkerpath");oe.style(le),y(oe,Q,ee,z,V)}}if(!f&&(xe(O)||M)){N=!0;var se=h.selectAll("#zcareahighlight");m(se,O,D,H,t,s,o,l,C,w,E,d.poly)}if(xe(O)||Oe(O)||we(O)||O===tt.charttype.line||M||P){var ae=(ke(O)||P)&&JSON.parse(te(D,H)("multiColoring")||!1)&&!e.legendarea.show,de=p[(ae?o:t)%p.length],ue=h.selectAll("#zcscatterhighlight"),ce=W(ue,"g",[1],".","class","highlight"+t);if(S||P){var he,pe,fe=W(ce,"g",[1],".","class","yrangePos_0"),ge=W(ce,"g",[1],".","class","yrangePos_1"),me={};if(P){me=z.markerProperties;var ve=z.getMarkerPosition(j,me.subseriesIndex,0,z.commonOption);ie?(I=ve.y,B=ve.x+ve.width/2,he=ve.y+ve.height,pe=ve.x+ve.width/2):(I=ve.x+ve.width/2,B=ve.y,he=ve.x+ve.width/2,pe=ve.y+ve.height)}else he=e.dataObject.getXYvalue(ie,Te(O),l,C,w,j,"x",null,0),pe=e.dataObject.getXYvalue(ie,Te(O),l,C,w,j,"y",null,0);v(fe,O,D,H,de,he,pe,l,C,w,b,s,t,o,N,{size:me.size,hoveroptions:H.hoveroptions.end}),v(ge,O,D,H,de,I,B,l,C,w,b,s,t,o,N,{size:me.size,hoveroptions:H.hoveroptions.start})}else v(ce,O,D,H,de,I,B,l,C,w,b,s,t,o,N)}M&&h.selectAll("#zcareahighlight,#zcscatterhighlight").attr({"clip-path":null,transform:"translate("+(r.left+e.plotarea_approx.x)+","+(r.top+e.plotarea_approx.y)+")"}).style("display","")}e.eventHandler.oldInfo={nearestPoint:d,type:O,chartObj:e,isNoInfo:!1}}}function k(t,a){var r=n.getColumnIdx("clr"),l=n.getColumnIdx("y",e.seriesdata[a].yaxiscolumnorder||[0,0]),i="{{val("+l+")}}";t.y_val_pattern=t.y_val_pattern||"",t.y_col_pattern=t.y_col_pattern||"",-1==t.y_val_pattern.indexOf(i)&&(t.y_val_pattern+=i,t.y_col_pattern+=e.ismultiy||null==r?""!=t.y_col_pattern?"":"{{val(null)}}":"{{val("+r+")}}")}function w(t,a,r,l){var s,d,h,p,f,g,m=e.systemConf.chart.axes.xaxis.reversed,y=tt.scale.invert("ordinal",t,i,ie,null,m),v=e.seriesdata,x=e.dataObject.isCombinationalChart,b=-1,k=null,w=!1,O=!1,A=l.tooltip.sharedSeriesInfo,S="x",P="y";ie&&(S="y",P="x");var M=v.map(function(l,i){var m=c(l.type||e.userdata.seriesdata.type,"numeric"),v=Oe(m)||we(m)||m===tt.charttype.line;p=null==p?!v||A?null:x&&v?10:50:p;var M=u(l.yaxiscolumnorder),T=e.systemConf.chart.axes.yaxis[M||0].reversed,E=r[M].eventscale,L=e.dataObject.containsNegativeData(M),j=o(n,"y",M),I={};if(q(l))return[null];b++;var B=e.renderer[i],D=B.commonOption||ce(e.rendererConf[i],i);return l.data.map(function(r,l){var o={},u=null!=B.seriesdataAfterUpdate?B.seriesdataAfterUpdate[l]:r;if(f=C(y,u)||0,be(m)){if(null==u[f])return null;if(o.x=e.dataObject.getTransRectValue("x",u[f],l,f,D),o.y=e.dataObject.getTransRectValue("y",u[f],l,f,D),o.width=e.dataObject.getTransRectValue("width",u[f],l,f,D),o.height=e.dataObject.getTransRectValue("height",u[f],l,f,D),j(u[f]))return null;var c=Y(o,t,T);return 0==c&&(O=!0,h=f,s=o,m===tt.charttype.gantt&&(d=B.getGanttLevelMarkerProp(u[f],l,f,D))),c}if(xe(m)||Oe(m)||we(m)||m===tt.charttype.line){if(p=Ce(m)?e.dataObject.getXYvalue(ie,Te(m),a,E,M,u[f],"z",e.zscale)/2:p,ke(m))c=z(u[f],t,a,E,M,m,null,S,P);else{var v=m==tt.charttype.arearange;I=N(i,l,f,u,u[f-1],u[f],u[f+1],e.dataObject,n,ie,Te(m),a,E,M,L,v);var b=xe(m)||x?m===tt.charttype.bubblepie?Z(t,I,i,l,u[f]):G(t,I.points):!0;b&&(c=0==l?J(t,I.curpt,I.curNext):l==u.length-1?J(t,I.prevCur,I.curpt):d3.min([J(t,I.prevCur,I.curpt),J(t,I.curpt,I.curNext)]))}return(null==p||p>c)&&null!=c&&(O=!0,p=c,R=i,g=l,h=f,k=I.points,w=m===tt.charttype.line||Oe(m)),c}})}),T=[],E=M.map(function(e,t){var a=d3.min(e);return T[t]=null!=a?e.indexOf(a):null,a});w&&(E=E.map(function(t,a){var r=c(e.seriesdata[a].type||e.userdata.seriesdata.type,"numeric");return r===tt.charttype.line||Oe(r)?t:null}));var R=E.indexOf(d3.min(E));return null!=E[R]&&O||(R=null),{seriesPos:R,itemPos:h,subseriesindex:T,highlightpoint:s||null,levelMarkerPoint:d||null,distance:E[R],poly:k}}function C(e,t){var a=l.domain(),r=a[e],i=null,s=o(n,"x");return t.some(function(e,t){var a=!s(n.getX(e))&&n.getX(e)===r;return a&&(i=t),a}),i}function A(e,t){var a=null,r=o(n,"x");return t.some(function(t,l){var i=!r(n.getX(t))&&n.getX(t)===e;return i&&(a=l),i}),a}function S(t,a,r,n,l){if(tt.annotation){var i=e.seriesdata,o=r[a],s=o.slice(),d=s.splice(0,s.length);i.length>1&&d.push(i[t].seriesname),tt.annotation.addNotes(e,{coordinate:[n,l],data:d,basedOn:"plot"})}}function P(t,a,r,l){var i=a.invert(ie?t.y:t.x),o=l.seriesdata.chartdata,s=d3.bisector(function(e){return n.getX(e)}).left,d=o.map(function(t,a){var r=e.renderer[a];return t.data.map(function(e,t){return e=null!=r.seriesdataAfterUpdate?r.seriesdataAfterUpdate[t]:e,s(e,i,0,e.length-1)})}),h=o.map(function(l,i){var o=e.renderer[i],s=u(l.yaxiscolumnorder),h=c(l.type||e.userdata.seriesdata.type,"numeric"),p=r[s].scale;return l.data.map(function(e,r){e=null!=o.seriesdataAfterUpdate?o.seriesdataAfterUpdate[r]:e;var l=d[i][r],u={x:a(n.getX(e[l])),y:p(Te(h)?e[l].y+e[l].y0:n.getY(e[l],s))};if(l>0){var c=Math.abs(t.x-u.x),f={x:a(n.getX(e[l-1])),y:p(Te(h)?e[l-1].y+e[l-1].y0:n.getY(e[l-1],s))},g=Math.abs(t.x-f.x),m=c>g?l-1:l;c=c>g?g:c;{U(u,t),U(t,f)}return{dist:c,xbis:m}}if(0==l){var c=Math.abs(t.x-u.x);return{dist:c,xbis:l}}})}),p=[],f=[],g=h.map(function(e,t){var a=e.map(function(e){return e.dist}),r=d3.min(a),n=a.indexOf(r);return p[t]=r?n:null,f[t]=r?e[n].xbis:null,r}),m=g.indexOf(d3.min(g)),y=f[m];return{itemPos:y,seriesPos:m,subseriesindex:p[m]}}function M(t,a,r){var l,i,o,s,d,h,p,f=e.seriesdata,g=null,m=e.dataObject.isPolarAxisCategory,y=e.dataObject.isBubbleEnabled?e.zscale.range()[1]/2+50:50,v="x",x="y";return ie&&(v="y",x="x"),f.map(function(f,b){var k=c(f.type||e.userdata.seriesdata.type,"object"),w=k.value,C=(k.name,w==tt.charttype.arearange);l=null==l?xe(w)||m?null:y:l;var O,A=e.renderer[b],S=u(f.yaxiscolumnorder),P=r[S].eventscale,M=e.dataObject.containsNegativeData(S),R=C?1:null,L={};return q(f)?[null]:f.data.map(function(r,u){r=null!=A.seriesdataAfterUpdate?A.seriesdataAfterUpdate[u]:r;var c=m?r.map(function(t){var r=e.dataObject.getXYvalue(ie,Te(w),a,P,S,t,"x"),n=e.dataObject.getXYvalue(ie,Te(w),a,P,S,t,"y");return{x:r,y:n}}):null;return r.map(function(f,y){var k;if(ke(w)){if(i=z(f,t,a,P,S,w,R,v,x),Ce(w)){var A;k=i<=(A=e.dataObject.getXYvalue(ie,Te(w),a,P,S,f,"z",e.zscale)/2),s=s||k,k||(i-=A)}}else{var N=E(f,b,u,y,r,t,O,w,a,P,S,M,C,c,m);i=N.distance,L=N.polygonPoints,O=f}var j=Ce(w)&&s?k&&(null==o||o>i):null==l||l>i;j&&null!=i&&!T(f,n,S)&&(l=i,d=b,h=u,p=y,g=L.points,s&&(o=i))})})}),{seriesPos:d,itemPos:p,subseriesindex:h,poly:g}}function T(t,a,r){return e.seriesdata[0].type==tt.charttype.stkdarea?!1:null==t||o(a,"x")(a.getX(t))||o(a,"y",r)(a.getY(t,r))}function E(t,a,r,l,i,o,s,d,u,c,h,p,f,g,m){var y=null,v=N(a,r,l,i,s,i[l],i[l+1],e.dataObject,n,ie,Te(d),u,c,h,p,f,g),x=xe(d)||m?G(o,v.points):d===tt.charttype.bubblepie?Z(o,v,a,r,t):!0;if((e.isGeoChart||(1==i.length||1==v.points.length)&&!T(t,n,h))&&(y=_(o,v.curpt)),x&&!T(t,n,h)&&!e.isGeoChart){var b=J(o,v.curpt,v.curNext),k=J(o,v.prevCur,v.curpt),w=0!==l&&T(s,n,h);y=0==l?b:l==i.length-1?k:w?b:d3.min([k,b])}return{distance:y,polygonPoints:v}}function z(t,a,r,n,l,i,o,s,d){var u={};u[s]=e.dataObject.getXYvalue(ie,Te(i),r,n,l,t,"x"),u[d]=e.dataObject.getXYvalue(ie,Te(i),r,n,l,t,"y",null,o);var c=u.x-a[s],h=u.y-a[d];return Math.sqrt(F(c)+F(h))}function N(t,a,r,n,l,i,o,s,d,u,c,h,p,f,g,m,y){var v,x,b,k,w,C,O=m?1:null;v=0==r||T(l,d,f)?{x:0,y:0}:{x:s.getXYvalue(u,c,h,p,f,l,"x"),y:s.getXYvalue(u,c,h,p,f,l,"y",null,O)},x=T(i,d,f)?{x:0,y:0}:{x:s.getXYvalue(u,c,h,p,f,i,"x"),y:s.getXYvalue(u,c,h,p,f,i,"y",null,O)},b=r==n.length-1||T(o,d,f)?{x:0,y:0}:{x:s.getXYvalue(u,c,h,p,f,o,"x"),y:s.getXYvalue(u,c,h,p,f,o,"y",null,O)},k=0==r||T(l,d,f)?{x:0,y:0}:j(s,u,c,t,a,r-1,h,p,f,g,l,m),w=T(i,d,f)?{x:0,y:0}:j(s,u,c,t,a,r,h,p,f,g,i,m),C=r==n.length-1||T(o,d,f)?{x:0,y:0}:j(s,u,c,t,a,r+1,h,p,f,g,o,m);{var A=0==r||T(l,d,f)?{x:0,y:0}:{x:(v.x+x.x)/2,y:(v.y+x.y)/2},S=r==n.length-1||T(o,d,f)?{x:0,y:0}:{x:(b.x+x.x)/2,y:(b.y+x.y)/2},P=0==r||T(l,d,f)?{x:0,y:0}:{x:(k.x+w.x)/2,y:(k.y+w.y)/2},M=r==n.length-1||T(o,d,f)?{x:0,y:0}:{x:(C.x+w.x)/2,y:(C.y+w.y)/2},E=[];T(l,d,f)&&T(o,d,f)?E.push(x):0==r||T(l,d,f)?E.push(x,S,M,w):r==n.length-1||T(o,d,f)?E.push(A,x,w,P):E.push(A,x,S,M,w,P)}return{points:e.dataObject.isPolarAxisCategory?y:E,prevCur:A,curNext:S,curpt:x}}function j(t,a,r,n,l,i,o,s,d,u,c,h){var p,f,g=h?0:null;if(a){var m=t.getXYvalue(a,r,o,s,d,c,"y",null,g),y=h||e.isGeoChart?t.getXYvalue(a,r,o,s,d,c,"x",null,g):s.range()[0];r?(f=0==n&&0==l&&0==i?Math.max(s.range()[0],s(u)):s(c.y0),p={x:f,y:m}):(f=null!=s.rangeBand?s.range()[0]+s.rangeBand():Math.max(y,s(u)),p={x:f,y:m})}else{var m=t.getXYvalue(a,r,o,s,d,c,"x"),y=h||e.isGeoChart?t.getXYvalue(a,r,o,s,d,c,"y",null,g):s.range()[0];r?(f=0==n&&0==l&&0==i?Math.min(s.range()[0],s(u)):s(c.y0),p={x:m,y:f}):(f=null!=s.rangeBand?y+s.rangeBand():Math.min(y,s(u)),p={x:m,y:f})}return p}function B(e){e.style("display","none")}function H(){return"none"!=e.systemConf.tooltip.crosshair.type}function Y(e,t,a){var r=e.x,n=e.y,l=r+e.width,i=n+e.height;a&&(ie?l=(r-=e.width)+e.width:i=n-e.height);var o=r<=t.x&&t.x<=l&&(a&&!ie?i<=t.y&&t.y<=n:n<=t.y&&t.y<=i);return o?0:null}function F(e){return e*e}function _(e,t){return F(e.x-t.x)+F(e.y-t.y)}function V(e,t,a){var r=_(t,a);if(0===r)return _(e,t);var n=((e.x-t.x)*(a.x-t.x)+(e.y-t.y)*(a.y-t.y))/r;return 0>n?_(e,t):n>1?_(e,a):_(e,{x:t.x+n*(a.x-t.x),y:t.y+n*(a.y-t.y)})}function J(e,t,a){return Math.sqrt(V(e,t,a))}function U(e,t){var a=0,r=0;return a=t.x-e.x,a*=a,r=t.y-e.y,r*=r,Math.sqrt(a+r)}function G(e,t){for(var a,r,n,l,i,o,s=e.x,d=e.y,u=!1,i=0,c=t.length-1;i<t.length;c=i++)a=t[i].x,n=t[i].y,r=t[c].x,l=t[c].y,o=n>d!=l>d&&(r-a)*(d-n)/(l-n)+a>s,o&&(u=!u);return u}function Z(t,a,r,l,i){var o=n.getX(i),s=e.subrenderer[l][o],d=s.data[r],u=d.startAngle,c=d.endAngle,h=Math.atan2(t.x-a.curpt.x,-(t.y-a.curpt.y));return le(u,c,h)}function q(t){var r=t.plotoptions,n=c(t.type||e.userdata.seriesdata.type,"string"),l=a.chart.plot.plotoptions[n];return t.disabled||0==I(ye(r,l,e,"enabled"),!0)}var K,Q,$,ee,te=tt.utils.getValueOfPlotOptions,ae=n.getDataType("x"),ne=d,p=p,ie=e.dataObject.getAxisRotated(),oe=e.legendarea.element.selectAll(".legseries").node(),se=oe?oe.children:[],de=e.legend.component.highlightItem,ue=a.legend,he=!1,pe=null,me=null,Ae=a.legend.itemHoverStyle&&a.legend.itemHoverStyle.showOnDataHover;oe&&($=oe.clientHeight,ee=oe.scrollHeight>$);var Se,Pe={},Me=0,Te=function(t){return e.dataObject.isstacked(t)};return Pe.initializeListener=function(){var r=e.eventHandler;r.trackerElement=h.selectAll("rect.eventhandler").data([1]),r.tooltipElement=tt.events.tooltip(t,a,e),r.tooltipElement.initialize();var n=e.eventHandler.trackerElement;n.enter().append("rect").attr("class","eventhandler").style("fill-opacity",0);var l={click:r.click,dblclick:function(){r.doubleclick(e.eventHandler.mousePos,e.eventHandler.trackerElement.node())},contextmenu:r.contextMenu},i={mousemove:r.mouseMove,mouseout:r.mouseOut};fe(n,"chart",l),fe(n,"chartmove",i);var o={mousemove:r.mouseMove,mouseout:r.mouseOut};fe(t,null,o),R(a.chart,"zoom.type")&&"none"!==a.chart.zoom.type&&(tt.getDefaultOptions("zoom",e.systemConf.chart,e.globalProp),r.initializeZoomListener())},Pe.initializeZoomListener=function(){e.zoom=tt.events.zoom(e,ie,a,n);var t=e.eventHandler.trackerElement,r=d3.select(document.documentElement),l=e.zoom,i=e.eventHandler;l.zmInit();var o=!1,s={mousedown:function(){ge(t,"chartmove"),fe(r,null,d),d3.event.preventDefault()}},d={mousemove:function(){e.eventHandler.mousePos=ve(t.node(),d3.event),o||(e.eventHandler.mouseOut(),l.zmStart(e.eventHandler.mousePos),o=!0),l.zmMove(e.eventHandler.mousePos)},mouseup:function(){ge(r,null,d);var a=l.zmEnd(e.eventHandler.mousePos);o&&(e.eventHandler.mousePos=ve(t.node(),d3.event),l=e.zoom,l.zoomed(a));var n={mousemove:i.mouseMove,mouseout:i.mouseOut};fe(t,"chartmove",n),o=!1}};fe(t,"zoom",s)},Pe.updateParams=function(o){e=o,a=e.systemConf,r=e.plotarea,n=e.dataset,l=e.axes.xaxis.eventscale,ne=e.axes.yaxes.groups,i=e.barscale1,s=e.barscale2,p=e.seriesColor,t=e.tooltip.element,Te=function(t){return e.dataObject.isstacked(t)},ie=e.dataObject.getAxisRotated(),e.eventHandler.tooltipElement.initialize(),h=e.staticPaneSVG.selectAll("g.eventgroup"),ae=n.getDataType("x"),e.eventHandler.tooltipElement=tt.events.tooltip(e.tooltip.element,a,e)},Pe.mouseMove=function(t){var r=t.element||this;if(e.chartRendered){var l=e.eventHandler.tooltipElement;if(null!=l&&null!=l.timeout&&clearTimeout(l.timeout),d3.event.defaultPrevented)return;if(e.stopPropogate!==!1&&d3.event.stopPropagation(),e.eventHandler.targetEvent=d3.event,e.xymultiRenderer||e.dataObject.isPolarAxisCategory){e.eventHandler.mousemovetimer&&clearTimeout(e.eventHandler.mousemovetimer);var i=e.eventHandler.trackerElement.node();e.eventHandler.mousePos=ve(i,d3.event),e.eventHandler.mousemovetimer=setTimeout(function(){var t=e.dataObject.noofBarEnabledSeries>0,r="ordinal"===ae&&(t||a.tooltip.sharedSeriesInfo)?f:g;r(e.eventHandler.mousePos,e.eventHandler.targetEvent,i)},Me)}else{var i=e.svg.node();e.eventHandler.mousePos=ve(i,d3.event);var o=e.eventHandler.mousePos[0],s=e.eventHandler.mousePos[1],d={x:o,y:s},u=d3.event.srcElement||d3.event.target,h=d3.select(u).attr("id"),m="zctooltip"==r.id||/(zctooltip|tooltipcontent|zctooltipafter|zctooltipbefore)/.test(h);if(!m){var y=e.seriesdata,v=c(y[0].type||e.userdata.seriesdata.type,"string"),x=y[t.seriesPos].plotoptions,b=a.chart.plot.plotoptions[v],k=ye(x,b,e,"mousemove");if(null!=k){var w=d3.event||e.eventHandler.targetEvent,C={data:e.dataset.getMetaInfoObj(e,t.data.data||t.data,t.seriesPos)};L(k,[w,C,e])}else e.eventHandler.oldRenderer=t,t.renderer.defaultMouseOverFunc(t.data,t.seriesPos,t.itemPos,t.nearestItem);if(JSON.parse(a.tooltip.enabled)){var O={left:d.x,top:d.y},w=d3.event.touches?d3.event.touches[0]:d3.event,A=d.x-w.clientX,S=d.y-w.clientY;O.left-=A,O.top-=S,O.dLeft=A,O.dTop=S;var P={dataset:n,seriesindex:t.seriesPos,subseriespos:t.subseriesPos,color:t.color||p,itempos:t.itemPos,d:e.dataObject.isHierarchy?t.data:null};l.show(e,O,null,!0,P)}}pe=e.isNonAxisMultiSeriesCategory?t.seriesPos:t.itemPos}}if(Ae&&null!==pe){if(se[pe]){var M=null;e.xymultiRenderer||e.dataObject.isPolarAxisCategory||(M=e.seriesdata[0]),pe!==me&&null!==me&&de(se[me],M||e.seriesdata[me],me,ue),de(se[pe],M||e.seriesdata[pe],pe,ue,!0),he=!0,!ee||e.systemConf.legend.expandable&&e.systemConf.legend.expandable.show||(oe.scrollTop=se[pe].offsetTop-$/2)}me=pe}},Pe.mouseOut=function(t,r,n){var l=e.seriesdata,i=this,o=c(l[0].type||e.userdata.seriesdata.type,"string"),s=e.isNonAxisMultiSeriesCategory&&!e.dataObject.isPolarAxisCategory?l[n].plotoptions:l[0].plotoptions,d=a.chart.plot.plotoptions[o],u=ye(s,d,e,"mouseout"),p=e.eventHandler.oldInfo;if(e.chartRendered){var f=d3.event,g=0;if(null!=u){if(!e.xymultiRenderer||null!=p&&!p.isNoInfo){var m=f||e.eventHandler.targetEvent;L(u,[m,r,e])}}else{if(e.xymultiRenderer||e.dataObject.isPolarAxisCategory){var y=e.eventHandler.trackerElement.node(),v=null!=f?ve(y,f):e.eventHandler.mousePos,x=y.getBBox(),b=ie?v[1]:v[0],k=ie?v[0]:v[1],w={x:b,y:k};g=Y(x,w)}var C=e.eventHandler.tooltipElement,O=null!=f?f.relatedTarget:null,A=null!=f?f.target:null;if(e.xymultiRenderer&&0==g&&null!=O&&null!=C&&(A==C.element.node()||A==C.element.selectAll("div#tooltipcontent").node()||O==C.element.node()||O==C.element.selectAll("div#tooltipcontent").node()))return;if(!e.xymultiRenderer&&!e.dataObject.isPolarAxisCategory)if("zctooltip"==i.id||null!=O&&null!=C&&(A==C.element.node()||A==C.element.selectAll("div#tooltipcontent").node()||A==C.element.selectAll("div#zctooltipafter").node()||A==C.element.selectAll("div#zctooltipbefore").node()||O==C.element.node()||O==C.element.selectAll("div#tooltipcontent").node()||O==C.element.selectAll("div#zctooltipafter").node()||O==C.element.selectAll("div#zctooltipbefore").node())){var S=e.eventHandler.oldRenderer;null!=S&&S.renderer.defaultMouseOutFunc(S.data,e.isNonAxisMultiSeriesCategory?S.seriesPos:S.itemPos)}else t.defaultMouseOutFunc(r,n);e.eventHandler.mouseouttimer&&clearTimeout(e.eventHandler.mouseouttimer),e.eventHandler.mouseouttimer=setTimeout(function(){h.selectAll("#zcscatterhighlight,#zcbarhighlight,#zcareahighlight").style("display","none"),e.eventHandler.tooltipElement.timeout&&clearTimeout(e.eventHandler.tooltipElement.timeout),e.eventHandler.tooltipElement.timeout=setTimeout(function(){e.eventHandler.tooltipElement.element.style({display:"none",visibility:"hidden"}),H()&&e.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},110)},Me)}if(he){if(D(se[pe])){var P=null;e.xymultiRenderer||e.dataObject.isPolarAxisCategory||(P=e.seriesdata[0]),de(se[pe],P||e.seriesdata[pe],pe,ue)}pe=null}he=!1,Pe.hideCursor(e.eventHandler.trackerElement)}},Pe.click=function(t,r,n){if(e.chartRendered){var i=e.eventHandler.tooltipElement;i.hide(i.element),Pe.hideCursor(e.eventHandler.trackerElement);var o=e.seriesdata,s=e.dataObject.isPolarAxisCategory;if(e.xymultiRenderer||s){var d=d3.event;K=e.eventHandler.trackerElement.node();var h=ve(K,d)||e.eventHandler.mousePos,p=K.getBBox(),f=h[0]-p.x-(s?e.plotarea_approx.x:0),g=h[1]-p.y-(s?e.plotarea_approx.y:0),m={x:f,y:g};K=this;var y=e.dataObject.noofBarEnabledSeries>0,v="ordinal"===ae&&y?w:M,x=v(m,l,ne,a),b=x.seriesPos,k=x.itemPos,C=x.subseriesindex instanceof Array?x.subseriesindex[b]:x.subseriesindex;if(null==b)return;var O=c(o[b].type||e.userdata.seriesdata.type,"numeric"),A=o[b].plotoptions,S=a.chart.plot.plotoptions[tt.charttypenames.get(O)],P=ye(A,S,e,"click"),T=ye(A,S,e,"cursor");if(null!=P){var E=u(o[b].yaxiscolumnorder),z=ne[E].eventscale,t=e.renderer[b],R=null!=t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[C]:o[b].data[C],r=R[k];if(be(O)){Pe.addCursor(e.eventHandler.trackerElement,T);var N=d3.event||e.eventHandler.targetEvent,j={x:x.highlightpoint.x,y:x.highlightpoint.y,data:e.dataset.getMetaInfoObj(e,r,b)};L(P,[N,j,e])}else{var I=e.dataObject.getXYvalue(ie,Te(O),l,z,E,r,"x"),B=e.dataObject.getXYvalue(ie,Te(O),l,z,E,r,"y"),D=O===tt.charttype.area||O===tt.charttype.stkdarea||s?null:U({x:I,y:B},m),H=Ce(O)?e.zscale(e.dataset.getZ(r))/2:10;if(!(H>=D))return void Pe.hideCursor(e.eventHandler.trackerElement);Pe.addCursor(e.eventHandler.trackerElement,T);var N=d3.event||e.eventHandler.targetEvent,j={x:I,y:B,data:e.dataset.getMetaInfoObj(e,r,b)};L(P,[N,j,e])}}}else{var Y=c(o[0].type||e.userdata.seriesdata.type,"string"),A=o[e.isNonAxisMultiSeriesCategory?n:0].plotoptions,S=a.chart.plot.plotoptions[Y],P=ye(A,S,e,"click");if(null!=P){var N=d3.event||e.eventHandler.targetEvent,j={data:e.dataset.getMetaInfoObj(e,r.data||r,n)};L(P,[N,j,e])}}}},Pe.doubleclick=function(t,r,n){if(e.chartRendered){e.noPropogate&&d3.event.stopPropagation();var i=e.eventHandler.tooltipElement;i.hide(i.element),Pe.hideCursor(e.eventHandler.trackerElement);var o=e.seriesdata,s=e.dataObject.isPolarAxisCategory;if(e.xymultiRenderer||s){K=K||e.eventHandler.trackerElement.node();var d=ve(K,d3.event),h=K.getBBox(),p=d[0]-h.x-(s?e.plotarea_approx.x:0),f=d[1]-h.y-(s?e.plotarea_approx.y:0),g={x:p,y:f};K=this;var m=e.dataObject.noofBarEnabledSeries>0,y="ordinal"===ae&&m?w:M,v=y(g,l,ne,a),x=v.seriesPos;if(null==x)return;var b=v.itemPos,k=v.subseriesindex instanceof Array?v.subseriesindex[x]:v.subseriesindex,C=e.renderer[x],O=null!=C.seriesdataAfterUpdate?C.seriesdataAfterUpdate[k]:o[x].data[k],t=O[b],A=c(o[x].type||e.userdata.seriesdata.type,"numeric"),P=o[x].plotoptions,T=a.chart.plot.plotoptions[tt.charttypenames.get(A)],E=ye(P,T,e,"doubleclick"),z=ye(P,T,e,"cursor");if(be(A))if(Pe.addCursor(e.eventHandler.trackerElement,z),null!=E){var R=d3.event||e.eventHandler.targetEvent,N={data:e.dataset.getMetaInfoObj(e,t,x)};L(E,[R,N,e])}else S(x,b,O,v.highlightpoint.x,v.highlightpoint.y);else{var j=u(o[x].yaxiscolumnorder),I=ne[j].eventscale,B=e.dataObject.getXYvalue(ie,Te(A),l,I,j,t,"x")+(s?e.plotarea_approx.x:0),D=e.dataObject.getXYvalue(ie,Te(A),l,I,j,t,"y")+(s?e.plotarea_approx.y:0),H=A===tt.charttype.area||A===tt.charttype.stkdarea||s?null:U({x:B,y:D},g),Y=Ce(A)?e.zscale(e.dataset.getZ(t))/2:10;if(!(Y>=H))return void Pe.hideCursor(e.eventHandler.trackerElement);if(Pe.addCursor(e.eventHandler.trackerElement,z),null!=E){var R=d3.event||e.eventHandler.targetEvent,N={x:B,y:D,data:e.dataset.getMetaInfoObj(e,t,x)};L(E,[R,N,e])}else S(x,b,O,B,D)}}else{var F=c(o[0].type||e.userdata.seriesdata.type,"string"),P=o[e.isNonAxisMultiSeriesCategory?r:0].plotoptions,T=a.chart.plot.plotoptions[F],E=ye(P,T,e,"doubleclick");if(null!=E){var R=d3.event||e.eventHandler.targetEvent,N={data:e.dataset.getMetaInfoObj(e,t.data||t,r)};L(E,[R,N,e])}else tt.annotation?tt.annotation.addNotes(e,n):null}}},Pe.contextMenu=function(){var t=a.chart.plot.events.contextmenu;if(null!=t){var r=d3.event||e.eventHandler.targetEvent;L(t,[r,e]),d3.event.preventDefault()}},Pe.addCursor=function(t,r){var r=r||(R(a.chart,"zoom.type")&&"none"!=e.systemConf.chart.zoom.type?"crosshair":"pointer");t.style("cursor",r)},Pe.hideCursor=function(e){e.style("cursor","default")},Pe};var Ht={YYYY:"%Y",MMMM:"%B",EEEE:"%A",EEE:"%a",MMM:"%b",YY:"%y",MM:"%m",EE:"%U",dd:"%d",HH:"%H",hh:"%I",mm:"%M",ss:"%S",a:"%p",MILLI:"%L",z:"%Z"},Yt={exponent:"e","float":"f",decimal:"d",binary:"b",octal:"o",hexadecimal:"x",SIprefix:"s"};tt.events.tooltip=function(e,t,a){"use strict";function r(e,t,a,r){{var l=r.type;e.staticPaneSVG.selectAll("g.crosshair").style("visibility","visible")}("x"==l||"xy"==l)&&n(e,t,a,r,"x"),("y"==l||"xy"==l)&&n(e,t,a,r,"y")}function n(e,t,a,r,n){var l=e.staticPaneSVG.selectAll("line."+n+"-crosshair"),i="x"==n&&!e.axes.rotated||"y"==n&&e.axes.rotated;l.attr({x1:i?t:e.plotarea.left,y1:i?e.plotarea.top:a,x2:i?t:e.plotarea.left+e.plotarea.width,y2:i?e.plotarea.height+e.plotarea.top:a}).style({"shape-rendering":"crispEdges",stroke:r.color,"stroke-width":r.strokeWidth,"stroke-dasharray":g(r.dashStyle,r.strokeWidth),"pointer-events":"none"})}function l(e,t,a,r){var n=2,l=r.canvasarea,o=C+O+(e.distance||0),s=e.dTop||0,d=e.dLeft||0;m={left:50,top:100,rotation:0};var u={left:Math.abs(Math.min(d,0))+(r.scrolledX||0),top:Math.abs(Math.min(s,0))+(r.scrolledY||0),right:l.width-n-Math.max(d,0)+Math.abs(Math.min(d,0)),bottom:l.height-Math.max(s,0)+Math.abs(Math.min(s,0))},c={x:e.left-t/2,y:e.top-a-o};if(!E||r.scrolledX||r.scrolledY)return c;var h=e.top-a-o,p=e.left+t+o,f=e.left-t-o,g=e.top+a+o;return h>u.top?(i(e,t,a,c,u,"top"),m.rotation=0,m.top=100):p<u.right?(c.x=e.left+o,i(e,t,a,c,u,"right"),m.rotation=90,m.left=0):f>u.left?(c.x=e.left-o-t,i(e,t,a,c,u,"left"),m.rotation=-90,m.left=100):g<u.bottom&&(i(e,t,a,c,u,"bottom"),
c.y=e.top+o,m.rotation=180,m.top=0),c}function i(e,t,a,r,n,l){var i;/(top|bottom)/.test(l)?e.left-t/2<n.left?(i=o("top"==l?"blx":"tlx"),r.x=n.left,m.left=Math.max(i,e.left-n.left)/t*100):e.left+t/2>n.right?(i=o("top"==l?"brx":"trx"),r.x=n.right-t,m.left=100*(1-Math.max(i,n.right-e.left)/t)):m.left=50:e.top-a/2<n.top?(i=o("left"==l?"trY":"tly"),r.y=n.top,m.top=Math.max(i,e.top-n.top)/a*100):e.top+a/2>n.bottom?(i=o("left"==l?"bry":"bly"),r.y=n.bottom-a,m.top=100*(1-Math.max(i,n.bottom-e.top)/a)):(r.y=e.top-a/2,m.top=50)}function o(e){return O+B[e]+Math.sqrt(Math.pow(z,2)+Math.pow(z,2))}function s(e,t,r,n,l,i,o,s){if(R(tt,"tooltip.getTheme")&&D(e.tooltip.theme)&&""!==e.tooltip.theme&&D(a.tooltip.content))return t.getCustomizedVal(a,a.tooltip.content,r,n,l,i,"tooltip",s);var u=(e.seriesdata.chartdata,e.metadata),c=u.axes,p=u.columns,f=o?"<table cellspacing='0' cellpadding='0' border='0' style='border-spacing: 5px;'><tbody>":"";return c.tooltip.forEach(function(a,u){var g=null!=p[a]?d:h;f+=g(e,t,r,n,l,i,o,a,u,s,c.tooltip)}),f+=o?"</tbody></table>":""}function d(e,t,r,n,l,i,o,s){var d=t.getColumnName(s,!1),c=u(a.seriesdata[r].yaxiscolumnorder),h=i||t.getDataPoint(a,s,r,n,l),p="",f=t.getColumnIdx("y",c);if(null!=h){var g=t.getDataPointValue(a,h,s,r,!1,"tooltip");g=s==f&&g instanceof Array?g[0]+" - "+g[1]:g,p=o?"<tr style='vertical-align: top;'><td style='max-width:"+.4*N+"px;'>"+d+": </td><td style='max-width:"+.6*N+"px;'>"+g+"</td></tr>":d+" : "+g+"<br>"}return p}function h(e,t,r,n,l,i,o,s,d,u,c){var h=t.getCustomizedVal(a,s,r,n,l,i,"tooltip",u);return o?"<tr style='vertical-align: top;'><td style='max-width:"+N+"px;'>"+h+"</td></tr>":h+(d==c.length-1?"":"<br>")}function p(e,t,a,r){var n=e.metadata.axes.tooltip,l=n.some(function(e){return"string"==typeof e&&At.test(e)});if(!l){n=[];var i="{{val("+t.getColumnIdx("x")+")}}",o=r.y_val_pattern,s="{{clr}}",d=r.y_col_pattern,u=a?"<tr style='vertical-align: top;'><td style='max-width:"+.6*N+"px;'>"+i+"</td></tr>":i,c=a?"<tr style='vertical-align: top;'><td style='margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:"+s+"''></td><td style='max-width:"+.4*N+"px;'>"+d+": </td><td style='max-width:"+.6*N+"px;'>"+o+"</td></tr>":"<div style='margin-right:0.2em;display:inline-block;vertical-align:middle;border-radius: 50%;padding:0.4em;background:"+s+"''></div>"+d+" : "+o;n.push(u,c)}return n}function f(e,t,r,n,l,i,o,s,u,c){var f=o?"<table cellspacing='0' cellpadding='0' border='0' style='border-spacing: 5px;'><tbody>":"",g=t.getColumnIdx("clr"),m=a.seriesdata[r].yaxiscolumnorder||[0,0],y=t.getColumnIdx("y",m),v=s.keys(),x=e.metadata.columns,b=s.y_val_pattern,k=p(e,t,o,s);return k.forEach(function(p,m){if(null!=x[p])f+=d(e,t,r,n,l,i,o,p);else if("string"==typeof p&&-1!=p.indexOf("{{val("+y+")}}"))for(var m=0,w=s.size();w>m;m++){var C=parseInt(v[m]),O=parseInt(s.get(v[m])),A=p,S=b,P=u.constructor==Array?u[(c?O:C)%u.length]:u;(a.ismultiy||null==g)&&(A=p.replace("{{val(null)}}",M(a.seriesdata[C].seriesname)||S.replace(/val/gi,"col")));var T=t.getCustomizedVal(a,A,C,n,O,i,"tooltip",P);f+=T+"<br>"}else f+=h(e,t,r,n,l,i,o,p,m,u,k)}),f+=o?"</tbody></table>":""}var m={left:50,top:100,rotation:0},y="40%",v="100%",x={};x.element=e;var b=a.systemConf.tooltip,k=null;if(b.theme&&""!==b.theme){var w=R(tt,"tooltip.getTheme")&&tt.tooltip.getTheme(b.theme,a);null!==w&&(b=a.systemConf.tooltip=Rt(b,w.borderStyle),a.tooltip.content=[w.body],k=w.maxWidth)}var C=20,O=I(b.hookHeight,6),A=D(b.borderWidth)?b.borderWidth:1,S=D(b.borderRadius)?b.borderRadius:5,P=D(b.borderStyle)?b.borderStyle:"solid",T=D(b.padding)?b.padding+"":"5",E=I(b.withinChart,!0),z=I(b.hookBorderWidth,/ /g.test(A)?1:+A),N=re(b.maxWidth||k||y,a.chartarea.width),j=(re(b.maxHeight||v,a.chartarea.height),Math.max(.05*a.chartarea.width,2*O)),B=a.dataObject.getTransRectValue("radius",null,null,null,null,S);return x.initialize=function(){var t=tt.utils.getVal(b.fontSize),r=+t+.35*+t,n=null!=a.userdata.canvas?a.userdata.canvas.fontColor:null;e.style({width:"auto","box-shadow":b.shadow,opacity:b.opacity,"z-index":b.zindex,"border-radius":F(S),"border-width":F(A),"border-style":P,"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","-o-backface-visibility":"hidden","backface-visibility":"hidden","pointer-events":"none",padding:F(T)});var l=W(e,"div",[1],"#","id","tooltipcontent");l.style({"max-width":N+"px","min-width":j+"px","line-height":(b.lineHeight||r)+"px","word-wrap":"break-word","white-space":"normal","pointer-events":"none"}),U(l,[{fontColor:null==b.fontColor&&null==n?"white":b.fontColor||n},b,a.systemConf.canvas,Pt],!0);var i=W(e,"div",[1],"#","id","zctooltipbefore");i.style({"border-color":"transparent","border-top-color":"white","margin-left":-(O+2*z)+"px",position:"absolute",top:"100%",left:"50%","pointer-events":"none",width:0,height:0,content:" ",border:O+2*z+"px solid transparent"});var o=W(e,"div",[1],"#","id","zctooltipafter");o.style({"border-color":"transparent","border-top-color":"white","margin-left":-O+"px",position:"absolute",top:"100%",left:"50%","pointer-events":"none",width:0,height:0,content:" ",border:O+"px solid transparent"})},x.show=function(t,a,n,i,o){function d(){if(P)return S.keys().map(function(e){var a=parseInt(e),r=parseInt(S.get(e)),n=C.getColumnIdx("clr"),l=u(t.seriesdata[a].yaxiscolumnorder),i=t.ismultiy||null==n?C.getColumnIdx("y",l):n,o=C.getDataPoint(t,i,a,k,r),s=C.getMetaInfoObj(t,o,a);return{actData:o,metaInfo:s}});var e=C.getDataPoint(t,null,b,k,w,o.d),a=t.dataset.getMetaInfoObj(t,e,b);return{actData:e,metaInfo:a}}var h,p=t.systemConf,g=p.tooltip,y=e,v=g.crosshair,x=o.color,b=o.seriesindex,k=o.subseriespos,w=o.itempos,C=o.dataset,O=o.backgroundColor||g.backgroundColor,A=o.borderColor||g.borderColor,S=o.tooltipSharedInfo,P=o.tooltipShared;i=null==n&&null!=i&&JSON.parse(i);var M="column"===g.view;if(i){var T=c(t.seriesdata[b].type||t.userdata.seriesdata.type,"string");h=/(bar|scatter|bubble|bullet|gantt)/.test(T)&&!t.legendarea.show&&JSON.parse(p.chart.plot.plotoptions[T].multiColoring||!1)}var E=x.constructor==Array?x[(h?w:b)%x.length]:x;E=P?"black":E,A=null!=A?A:E,O=null!=O&&""!=O?O:E;var z,R="",N=g.headerContent;i&&null!=N&&(R=L(N,[d3.event,z=d(),t])),R+=i?g.content?L(g.content,[d3.event,z=z||d(),t]):P?f(p,C,b,k,w,o.d,M,S,x,h):s(p,C,b,k,w,o.d,M,A):n,y.interrupt().transition(),y.transition().delay(0);var j=y.selectAll("div#tooltipcontent");y.style({visibility:"hidden",display:"inline-block"});var I=g.footerContent;i&&null!=I&&(R+=L(I,[d3.event,z=z||d(),t])),j.html(R);var B=y.node().offsetWidth,D=y.node().offsetHeight,H=l(a,B,D,t);"none"!=v.type&&t.isAxisCategory&&r(t,a.actLeft||a.left,a.actTop||a.top,v);var Y=y.style("left"),F=y.style("top");Y=null==Y||"auto"==Y?H.x:(2*parseFloat(Y.split("px")[0])+H.x)/3,F=null==F||"auto"==F?H.y:(parseFloat(F.split("px")[0])+H.y)/2,y.style({opacity:g.opacity,visibility:"visible",display:"inline-block","background-color":O,"border-color":A,left:Y+"px",top:F+"px"}).transition().duration(100).ease("linear").style({left:H.x+"px",top:H.y+"px"});var _=y.selectAll("div#zctooltipbefore"),V=y.selectAll("div#zctooltipafter");P?(_.style("display","none"),V.style("display","none")):(_.style("display",""),V.style("display",""));var W="rotate("+m.rotation+"deg)",J="50% 0%";_.style({"border-top-color":A,left:m.left+"%",top:m.top+"%",transform:W,"-webkit-transform":W,"-ms-transform":W,"transform-origin":J,"-webkit-transform-origin":J,"-ms-transform-origin":J}),V.style({"border-top-color":O,opacity:1,left:m.left+"%",top:m.top+"%",transform:W,"-webkit-transform":W,"-ms-transform":W,"transform-origin":J,"-webkit-transform-origin":J,"-ms-transform-origin":J})},x.hide=function(e){e=null==e?this.element:e,e.style("display","none").style("visibility","hidden"),"none"!=a.systemConf.tooltip.crosshair.type&&a.staticPaneSVG.selectAll("g.crosshair").style("visibility","hidden")},x},wt.bar=function(){function e(p){return p.each(function(p){var f=d3.select(this);e.update=function(){f.transition().call(e)};var y=a.params,v=y.chartObj,x=y.xscale,k=y.stacked,w=y.datasetIndex,C=y.axisrotated,S=y.commonPlotOptions,P=y.color,M=y.labelQueue,T=y.hasNegValue,z=y.yaxiscolumnorder,R=y.dataset,L=v.systemConf,N=v.plotarea;l=y.yscale;var B=L.chart.axes.yaxis[y.yaxiscolumnorder||0].reversed,F=v.systemConf.chart.axes.xaxis.reversed,_=v.defsLocation,V=p[w],J=V.plotoptions,U=V.data,G=c(v.seriesdata[w].type||v.userdata.seriesdata.type,"string"),Z=tt.utils.getValueOfPlotOptions(J,S),K=[C?l.range()[0]:x.range()[1],C?x.range()[1]:l.range()[0]],Q=v.dataObject.noofBarEnabledSeries,$="bullet"==G,ee="gantt"==G,te=x.domain(),ae=W(f,"g",[V],".","class","barseries_"+w);if(!r||!n)return h=!0,void(e.chartRendered=!0);var re,ne=J&&J.levelMarker?Rt(S.levelMarker,J.levelMarker,!0):S.levelMarker,le=J&&J.border?Rt(S.border,J.border,!0):S.border,ie=JSON.parse(Z("multiColoring")||!1)&&!v.legendarea.show,oe=q(S,J,v,"bar"),se=oe.enabled,de=oe.easingType,ue=oe.type,pe=se?100:0;u=h?se?300:0:oe.duration;var fe=ce(v.rendererConf[w],w),ge=fe.barWidth,me=fe.levelMarkerWidth,ye=fe.padding,ve=fe.levelMarkerPadding,xe=v.userdata.seriesdata.stackGroup,be=xe?he(w,xe):0;e.getParamValue=v.dataObject.getTransRectValue;var ke,we,Ce=fe.addRangeBand,Oe=ne.color;if($||ee){ne.overlayRange="below";var Ae=ee?"marker":"targetMarker";ke=J&&J[Ae]?Rt(S[Ae],J[Ae],!0):S[Ae],we=W(v.container.selectAll("g.threshold"),"g",JSON.parse(ke.enabled||!1)&&!V.disabled?[w]:[],".","class",ee?"markerSeries"+w:"markerSeries")}var Se={tlx:0,tly:0,trx:0,trY:0,brx:0,bry:0,blx:0,bly:0},Pe=Se,Me=0,Te=null,Ee=null,ze=Se;D(le)&&H(le.show)&&(Me=le.size,Te=le.color,Ee=le.style,Pe=e.getParamValue("radius",null,null,null,fe,le.radius));var Re,Le=g(Ee,null==Me?2:Me);null!=o&&(Re=tt.axis.threshold.overlay(v,"discrete",o)),e.seriesdataAfterUpdate=[],U.forEach(function(a,c){function p(e){return{start:J(e.source),end:J(e.target),type:nt.link.type.toUpperCase()||"ES"}}function y(e,t,a){var r=ut,n=ct;e=e.toUpperCase();var l=null,i=null,o=null,s=M(e,t,a);return d3.svg.line().x(function(d,u){switch(u){case 0:case 1:case 2:if(o=t,0==u)"SS"==e||"SE"==e?l=C?o.x:o.x+o.width/2:("EE"==e||"ES"==e)&&(l=C?o.x+o.width:o.x+o.width/2);else if(1==u)"SS"==e||"SE"==e?l=C?o.x-r:l:("EE"==e||"ES"==e)&&(l=C?o.x+o.width+r:l);else{var c;"SS"==e?(c=t.x-a.x,c=0>c?0:c,l=C?o.x-c-r:l):"EE"==e?(c=t.x+t.width-(a.x+a.width),c=c>0?0:c,l=C?o.x+o.width+r-c:l):"SE"==e?C?(l=o.x-r,i=s?o.y+o.height:a.y):l=F?l-o.width:l+o.width:"ES"==e&&(C?(l=o.x+r+o.width,i=s?o.y+o.height:a.y):l=F?l-o.width:l+o.width)}break;default:C&&(i=null),o=a,3==u?(C&&s&&(i=t.y+t.height),"SS"==e||"EE"==e?l=C?l:o.x+o.width/2:"SE"==e?l=C?o.x+o.width+r:l:"ES"==e&&(l=C?o.x-r:l)):4==u?"SE"==e?l=C?o.x+o.width+r:o.x+o.width/2:"ES"==e&&(l=C?l:o.x+o.width/2):"SS"==e||"ES"==e?l=C?o.x-n:l:("EE"==e||"SE"==e)&&(l=C?o.x+o.width+n:l)}return l}).y(function(l,d){return C?(i||o.y)+o.height/2:(0==d?"SS"==e||"SE"==e?i=t.y+t.height:("EE"==e||"ES"==e)&&(i=t.y):1==d?"SS"==e||"SE"==e?i+=r:("EE"==e||"ES"==e)&&(i=t.y-r):2==d?"SS"==e?i=t.y+t.height<a.y+a.height?a.y+a.height+r:i:"EE"==e&&(i=t.y>a.y?a.y-r:i):3==d?"SE"==e?i=s?a.y-r:i:"ES"==e&&(i=s?a.y+a.height+r:i):4==d?i+=0:"SS"==e||"ES"==e?i=a.y+a.height+n:("EE"==e||"SE"==e)&&(i=a.y-n),i)}).interpolate("linear")}function M(e,t,a){var r=!1;switch(e){case"SS":case"EE":r=!0;break;case"SE":r=C?t.x>a.x+a.width:t.y+t.height<a.y;break;case"ES":r=C?t.x+t.width<a.x-2*ut:t.y>a.y+a.height}return!r}function H(e,t,a){var r=[];return e.forEach(function(n){var l=n[t];e.forEach(function(e){e!==n&&D(l)&&Y(l)&&-1!==l.indexOf(e[a])&&r.push({source:n,target:e})})}),r.length?r:void 0}function J(t){var a,r,n,l;return n=e.getParamValue("x",t,c,null,fe),l=e.getParamValue("y",t,c,null,fe),a=e.getParamValue("width",t,c,null,fe),r=e.getParamValue("height",t,c,null,fe),{x:n,y:l,width:a,height:r}}function U(t,a,r,n,i){switch(t){case"x":return C?l(a.y0):e.getParamValue("x",a,r,n,i);case"y":return C?e.getParamValue("y",a,r,n,i):l(a.y0);case"width":return C?1:ge;case"height":return C?ge:1}}function q(e,t){var a=$?e[ne.dataindex]||[]:[],o=$&&a.length>0,s=d3.min(a),d=d3.max(a),u=R.getX(e),h=(k?r(u)+(n(t.stackGroupIndex)||0):r(u)+n(i+c))+ve,p=o?l(C?Math.min(0,s):Math.max(0,d)):C&&null!=T?l(T):0,f=C?o?l(Math.max(0,d))-l(Math.min(0,s)):null!=T?N.width-l(T):N.width:me,g=C?me:o?l(Math.min(0,s))-l(Math.max(0,d)):null!=T?l(T):N.height;return{x:h,y:p,width:f,height:g}}function le(e){var t=e[ne.dataindex]||[];if(!Oe){ne.color=[];var a=ie?v.seriesColor[j%v.seriesColor.length]:P,r=[0,t.length-1],n=[JSON.parse(ne.colorGamma[0]),JSON.parse(ne.colorGamma[1])],l=A(a,r,n);ne.color=t.map(function(e,t){return l(t)})}var i=t.filter(function(e){return 0>e});return i.length>0&&-1==t.indexOf(0)&&(t=t.sort(d3.descending),t.splice(t.length-i.length,0,0)),ne.values=t,tt.axis.threshold.overlay(v,"continous")("transparent",ne,0,"y")}function oe(t,n){var i=I(t.size,me-2*I(t.padding,ye/2)),o=we.selectAll("g.markers"+n).data([a],function(e){return[R.getX(e)]}),s=null==t.strokeWidth||""===t.strokeWidth?1:JSON.parse(t.strokeWidth);o.enter().append("g"),o.exit().remove(),o.attr({"class":"markers"+n,transform:"translate("+N.left+","+N.top+")","stroke-width":s,"stroke-dasharray":g(t.dashStyle,s),"stroke-linecap":m(t.lineCap,t.dashStyle),fill:t.color,stroke:t.color});var d=o.selectAll("g").data(Ge,function(e){return R.getX(e)});d.enter().append("g");var u="line"===t.symbol?{inner:0,outer:1}:{inner:.6,outer:1};d.each(function(e,a){var o=d3.select(this),s=ie?v.seriesColor[a%v.seriesColor.length]:P;o.attr({transform:function(e,a){var i=0,o=0;if(ee){var s=se(e,c,a,fe);return 0===n?(i=s.x+s.width/2,o=s.y):(i=s.x+s.width/2,o=s.y+s.height),"translate("+(C?o:i)+","+(C?i:o)+")"}return i=r(R.getX(e))+me/2,o=l(e[t.dataindex]),null==e[t.dataindex]?null:"translate("+(C?o:i)+","+(C?i:o)+") rotate("+(C?90:0)+")"}}).style("display",function(e){return null==e[t.dataindex]&&$?"none":null}),t.size=t.size||i/10,b(o,null,t,{symbolSize:u,color:ee?s:null})}),ee&&(e.markerProperties={subseriesIndex:c})}function se(t,a,r,n){var l,i,o,s;return o=e.getParamValue(C?"y":"x",t,a,r,n),s=e.getParamValue(C?"x":"y",t,a,r,n),l=e.getParamValue(C?"height":"width",t,a,r,n),i=e.getParamValue(C?"width":"height",t,a,r,n),{x:o,y:s,width:l,height:i}}function ce(t,a,r,n){var l,i,o,s,d=t[ne.dataindex],u=R.getY(t,z),c=u[0],h=u[1],p=n&&n.yscale.range()[1],f=h-c,g=f*d/100,m=n.yscale(c+g),y=C?0:n.levelMarkerPadding,x=C?n.levelMarkerPadding:0;l=v.dataObject.getTransRectValue("x",t,a,r,n)+y;var b=n.yscale(null==n.hasNegValue?R.getY(t,n.yaxiscolumnorder,0):n.hasNegValue);return n.axisrotated?(i=e.getParamValue("y",t,a,r,n)+x,o=n.stacked?Math.abs(n.yscale(t.y+t.y0)-n.yscale(t.y0))+n.addRangeBand(n.yscale):(Math.abs(p-b-(p-m))||0)+n.addRangeBand(n.yscale),s=n.levelMarkerWidth||n.barWidth):(i=m,o=n.levelMarkerWidth||n.barWidth,s=n.stacked?Math.abs(b-n.yscale(t.y+t.y0)-(b-n.yscale(t.y0)))+n.addRangeBand(n.yscale):Math.abs(b-m)+n.addRangeBand(n.yscale)),{x:l,y:i,width:o,height:s}}e.getGanttLevelMarkerProp=ce;var he,Ae,Ee,Ne,je,Ie,Be,De,He=V.disabled;e.seriesdataAfterUpdate[c]=E(a),e.seriesdataAfterUpdate[c]=v.dataObject.updateSeriesdatabyCategories(e.seriesdataAfterUpdate[c],te),F&&(e.seriesdataAfterUpdate[c]=e.seriesdataAfterUpdate[c].slice(0).reverse());var Ye;if(null!=d){Ye=E(a);for(var Fe=d.count,_e=0;Fe>=_e;_e++)Ye.splice(_e,0,[null,null]);if(h){var Ve=x(R.getX(a[0])),We=O({x:Ve,y:0,width:v.plotarea.width,height:v.plotarea.height},"rect"),Je=W(v.svg,"defs",[1]),Xe=W(Je,"clipPath",[1],"#","id",We),Ue=W(Xe,"rect",[1]);Ue.attr({x:Ve,y:0,width:v.plotarea.width,height:v.plotarea.height}),ae.attr("clip-path","url("+_+"#"+We+")")}}var Ge=null!=d?Ye:e.seriesdataAfterUpdate[c];re="verticalAll"==ue||h?u:u/(Ge.length*Q);var Ze=JSON.parse(ne.enabled)&&($||k&&Q>0||!He)&&!v.dataObject.isStackedPercentChart&&(xe?v.dataObject.groupedByStack.has(be):!0),qe=(k?f:ae).selectAll(k?"g.levelMarkerSeries_"+be:"g.subseries_levelMarker_"+c).data(function(e){return Ze?[e]:[]}),Ke=ae.selectAll("g.subseries_"+c).data(function(e){return He?[]:[e]});(k?ae:f).selectAll(k?"g.subseries_levelMarker_"+c:"g.levelMarkerSeries_"+be).remove(),qe.exit().selectAll("path.levelMarker").transition().duration(pe).attr("d",function(a,r){if(ee){var n=d3.select(this).attr("d"),i=t(n),o=i[0][0],s=i[3][1],d=ce(a,c,r,fe),u=d.x||o,h=d.y+(C?0:d.height*(B?-1:1))||s,p=C?0:d.width,f=C?d.height:0;return X(u,h,p,f,Pe,B,C)}var u=e.getParamValue("x",a,c,r,fe)||t(d3.select(this).attr("d"))[0][0],h=l(l.domain()[0]),p=C?0:e.getParamValue("width",a,c,r,fe),f=C?e.getParamValue("height",a,c,r,fe):0;return X(u,h,p,f,Pe,B,C)}).remove(),Ke.exit().selectAll("path.bar").transition().duration(pe).attr("d",function(a,r){var n=d3.select(this).attr("d"),i=t(n),o=i[0][0],s=i[3][1],d=e.getParamValue("x",a,c,r,fe)||o,u=(C?e.getParamValue("y",a,c,r,fe):ee?e.getParamValue("y",a,c,r,fe,null,0):(k?l(a.y0):null!=T?l(T):null!=l(0)?Math.min(l(0),l.range()[0]):l.range()[0])+2*Ce())||s,h=C?0:e.getParamValue("width",a,c,r,fe),p=C?e.getParamValue("height",a,c,r,fe):0;return X(d,u,h,p,Pe,B,C)}).remove(),Ke.enter().append("g").attr("class","subseries_"+c);var Qe=ee?qe.enter().append("g"):qe.enter().insert("g",":first-child");Qe.attr("class",k?"levelMarkerSeries_"+be:"subseries_levelMarker_"+c);var $e=qe.selectAll("path.levelMarker").data(Ge,function(e){return R.getX(e)});$e.enter().append("path").attr("class","levelMarker"),$e.style({fill:function(e,t){if($)return le(e);if(ee&&null==ne.color){var a=ie?v.seriesColor[t%v.seriesColor.length]:P;return a}return ne.color},"fill-opacity":ne.fillOpacity}).attr("d",function(e,t){var a=ee?ce(e,c,t,fe):q(e,fe),r=a.x,n=a.y,l=a.width,i=a.height;return ee?X(r,n,l,i,ze,B,C):C?X(n,r,l,i,Pe,B,C):X(r,n,l,i,Pe,B,C)}),ne.color=Oe,$e.exit().remove(),$?oe(ke,""):ee&&(oe(ke.start,0),oe(ke.end,1));{var et=Ke.selectAll("path.bar").attr("class","bar").data(Ge,function(e){return R.getX(e)});et.enter().append("path").style("fill-opacity",Z("fillOpacity")).attr({"class":"bar",y:function(){return C?k?null!=T?l(T):l.range()[0]:null!=T?l(T):l.range()[0]:(k?null!=T?l(T):l.range()[0]:null!=T?l(T):null!=l(0)?Math.min(l(0),l.range()[0]):l.range()[0])+2*Ce()},height:0,d:function(e){var t=R.getX(e);return he=k?r(t):r(t)+n(i+c),Ae=C?k?null!=T?l(T):l.range()[0]:null!=T?l(T):l.range()[0]:(k?null!=T?l(T):l.range()[0]:null!=T?l(T):null!=l(0)?Math.min(l(0),l.range()[0]):l.range()[0])+2*Ce(),Ee=C?0:ge,Ne=C?ge:0,C?X(Ae,he,Ee,Ne,Se,B,C):X(he,Ae,Ee,Ne,Se,B,C)}}),et.attr({stroke:function(e,t){var a=ie?v.seriesColor[t%v.seriesColor.length]:P;return Te||a},"stroke-width":Me,"stroke-dasharray":Le}).style({"fill-opacity":Z("fillOpacity"),fill:function(e,t){var a="x"==s?R.getX(e):R.getY(e,z),r=ie?v.seriesColor[t%v.seriesColor.length]:P,n=null!=o?Re(o,o.color,a,P):r,l=zt.get(L.chart.plot.plotoptions[G].gradients,r,K,"bar");return l?"url("+_+"#"+l+")":n}})}if(null==d?et.transition().duration(h?re:0).delay(function(e,t){return"verticalAll"==ue||h?0:(t*Q+w)*re}).attr("d",function(t,a){var r=d3.select(this),n=parseFloat(r.attr("height"));return je=C&&!ee?parseFloat(r.attr("y")):e.getParamValue("x",t,c,a,fe),Ie=C?e.getParamValue("y",t,c,a,fe):ee&&!n?e.getParamValue("y",t,c,a,fe,null,0):parseFloat(r.attr("y")),Be=C?parseFloat(r.attr("height")):e.getParamValue("width",t,c,a,fe),De=C?e.getParamValue("height",t,c,a,fe):n,X(je,Ie,Be,De,Pe,B,C)}).each("end",function(t,a){d3.select(this).transition().delay(function(){return"verticalAll"==ue||h?0:(a*Q+w)*re}).duration(re).ease(de).attr("d",function(t){return je=e.getParamValue("x",t,c,a,fe),Ie=e.getParamValue("y",t,c,a,fe),Be=e.getParamValue("width",t,c,a,fe),De=e.getParamValue("height",t,c,a,fe),X(je,Ie,Be,De,Pe,B,C)})}).attr({y:function(t,a){var r=C?"x":"y";return e.getParamValue(r,t,c,a,fe)},height:function(t,a){var r=C?"width":"height";return e.getParamValue(r,t,c,a,fe)}}):et.transition().duration(h?re:0).attr({d:function(t,a){return je=e.getParamValue("x",t,c,a,fe),Ie=e.getParamValue("y",t,c,a,fe),Be=e.getParamValue("width",t,c,a,fe),De=e.getParamValue("height",t,c,a,fe),X(je,Ie,Be,De,Pe,B,C)},y:function(t,a){var r=C?"x":"y";return e.getParamValue(r,t,c,a,fe)},height:function(t,a){var r=C?"width":"height";return e.getParamValue(r,t,c,a,fe)}}),et.exit().transition().duration(re).remove(),c>0&&k){var at=W(ae,"g",He?[]:[1],".","class","subdividerseries_"+c),rt=at.selectAll("rect").data(Ge,function(e){return R.getX(e)});rt.enter().append("rect").style({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attr({width:U("width"),height:U("height"),x:function(e,t){return U("x",e,c,t,fe)},y:function(e,t){return U("y",e,c,t,fe)}}),rt.transition().duration(re).ease(de).style({fill:"white",opacity:.7,"shape-rendering":"crispedges"}).attr({width:U("width"),height:U("height"),x:function(e,t){return U("x",e,c,t,fe)},y:function(e,t){return U("y",e,c,t,fe)}}),rt.exit().remove()}if(ee){{var nt=S.dependency,lt=JSON.parse(nt.enabled||null),it=null,ot=ae.selectAll("g.dependencySeries").data(lt?[a]:[]);ot.enter().insert("g",":first-child")}if(ot.attr("class","dependencySeries"),ot.exit().remove(),lt&&D(nt.sourceIndex)&&D(nt.targetIndex)&&(it=H(Ge,+nt.sourceIndex,+nt.targetIndex)),it){var st=nt.marker,dt=nt.link,ut=D(dt.padding)?dt.padding:1,ct=D(st.padding)?st.padding:ut;ct=Math.min(ut,ct);var ht=W(ot,"g",[1],".","class","links"),pt=W(ot,"g",[1],".","class","symbol"),ft=W(ht,"path",it,".","class","link");ft.attr("d",function(e){var t=p(e);return y(t.type,t.end,t.start)(new Array(6))}).attr("stroke",function(e){var t=R.getY(e.source,z)[0],a=R.getY(e.target,z)[1],r=a>t;return r?dt.errorStyle:dt.strokeColor}).attr("stroke-width",dt.strokeWidth).attr("fill","none");var gt=JSON.parse(nt.marker.enabled),mt=W(pt,"g",gt?it:[],".","class","arrow");nt.marker.enabled&&mt.each(function(){var e,t=(st.symbol,{inner:.4,outer:.7}),a=d3.select(this);a.attr("transform",function(t){var a,r,n=p(t),l=n.type;return"SS"==l||"ES"==l?(a=C?n.start.x-ct:n.start.x+n.start.width/2,r=C?n.start.y+n.start.height/2:n.start.y+n.start.height+ct,e=C?"triangle-right":"triangle-up"):("EE"==l||"SE"==l)&&(a=C?n.start.x+n.start.width+ct:n.start.x+n.start.width/2,r=C?n.start.y+n.start.height/2:n.start.y-ct,e=C?"triangle-left":"triangle-down"),"translate("+a+","+r+")"}),b(a,null,st,{symbolSize:t,color:null,symbol:e})})}}e.getMarkerPosition=se}),M.push({renderer:e,charttype:"bar",chartObj:v,args:[V,w]})}),setTimeout(function(){h=!0,e.chartRendered=!0},2*u+10),e}function t(e){e=e.substring(1);var t=e.split(/L|A/gi);return t=t.map(function(e){var t=e.split(/,| /g);return t.map(function(e){return Number(e)})})}var a,r,n,l,i,o,s,d,u,l,h=!1;return e.commonRendererProp=function(t){return arguments.length?(a=t,e):a},e.bandwidth1=function(t){return arguments.length?(r=t,e):r},e.bandwidth2=function(t){return arguments.length?(n=t,e):n},e.barDatasetIndex=function(t){return arguments.length?(i=t,e):i},e.threshold=function(t){return arguments.length?(o=t,e):o},e.thresholdType=function(t){return arguments.length?(s=t,e):s},e.shiftInfo=function(t){return arguments.length?(d=t,e):d},e},wt.line=function(){function e(_){return _.each(function(y){var _=r.params;R=_.chartObj,n=_.xscale,l=_.yscale,S=_.stacked,i=_.datasetIndex,d=_.axisrotated,M=_.commonPlotOptions,h=_.color,P=_.labelQueue,z=_.hasNegValue,u=_.yaxiscolumnorder,s=_.dataset,T=R.systemConf;var V=R.defsLocation,J=y[i],X=J.plotoptions,U=J.data,G=c(J.type||T.seriesdata.type,"string"),Z=c(J.type||T.seriesdata.type,"numeric"),ee=tt.utils.getValueOfPlotOptions(X,M),te=c(J.type||R.userdata.seriesdata.type,"numeric")!=tt.charttype.line,ae="arearange"==G,re=R.dataObject.isPolarAxisCategory,ne=d?[l.range()[0],n.range()[1]]:[n.range()[1],l.range()[0]],le=R.canvasarea,ie=ee("mode"),oe=ee("dashStyle"),se=I(ee("strokeWidth"),2),de=ee("strokeOpacity"),ue=ee("strokeColor"),ce=Mt.IE||Mt.SAFARI||"step-before"==ie||"step-after"==ie,he=X&&X.marker?Rt(M.marker,X.marker,!0):M.marker,pe=q(M,X,R,G),fe=pe.enabled,ge=pe.easingType;B=pe.duration,D=pe.type,D="vertPathTweenAll"==D?"vertPathTween":D;var me=X&&X.animation&&X.animation.blink?Rt(M.animation.blink,X.animation.blink,!0):M.animation.blink,ye=$(R,"marker")&&Q(R,"marker",Math.min(le.width,le.height))?JSON.parse(he.enabled):!1,ve=m(ee("lineCap"),oe);x=g(oe,se);var xe=X&&X.animation&&X.animation.marquee?Rt(M.animation.marquee,X.animation.marquee,!0):M.animation.marquee;k=JSON.parse(xe.enabled),C=JSON.parse(xe.duration);var be=!te&&X&&X.gradients?Rt(M.gradients,X.gradients,!0):M.gradients,ke=R.dataset.getDataType("x"),we="ordinal"==ke?n.domain():R.dataObject.getCategories("x"),Ce=o(s,"x"),Oe=o(s,"y",u),Ae=T.chart.axes.yaxis[u].reversed;"ordinal"!=ke&&0==we.length&&fe&&"pointTween"==D&&(we=R.dataObject.findXCategories()),e.seriesdataAfterUpdate=[],U.forEach(function(t,a){var r=e.seriesdataAfterUpdate[a]="ordinal"==ke?R.dataObject.updateSeriesdatabyCategories(E(t),we):t,i=Mt.FIREFOX&&1==r.length?"linear-closed":ie;H[a]=re?d3.svg.line.radial().defined(function(e){return!e.isDummy}).radius(function(e){var t=S?l(e.y+e.y0):l(s.getY(e,u))+(null!=l.rangeBand?l.rangeBand()/2:0);return Math.max(t,l.range()[Ae&&!S?l.domain().length-1:0])}).angle(function(e){return n(s.getX(e))}).interpolate(i):d3.svg.line().defined(function(e){var t=!Oe(s.getY(e,u))&&!Ce(s.getX(e));return Z===tt.charttype.stkdarea?!0:!e.isDummy&&t}).x(function(e){var t=R.dataObject.getXYvalue(d,S,n,l,u,e,"x",null,j);if(isNaN(t)&&null!=N){var a=R.dataObject.getXYvalue(d,S,n,l,u,r[1],"x",null,j)-R.dataObject.getXYvalue(d,S,n,l,u,r[0],"x",null,j);t=R.dataObject.getXYvalue(d,S,n,l,u,r[r.length-1],"x",null,j)+a}return t}).y(function(e){return R.dataObject.getXYvalue(d,S,n,l,u,e,"y",null,j)}).interpolate(i)});var Se=d3.select(this);e.update=function(){Se.transition().call(e)},p=W(Se,"g",[J],".","class","lineseries_"+i),ae&&(p=W(p,"g",[J],".","class","rangePos_"+j));var Pe,Me=re?{inner:.32,outer:.56}:{inner:.4,outer:.7};if(ye&&!ce&&(he.color=J.color||R.seriesColor[i%R.seriesColor.length],Pe=O(he,"marker")+O(me,"blink"),A=b(p,Pe,he,{color:he.color,symbolSize:Me,strokeWidth:se}),delete he.color),ye&&!ce&&JSON.parse(me.enabled||!1)&&w(A.selectAll(".outer,.inner"),me),ye&&ce?(Y.commonRendererProp(r).shiftInfo(N).yrangePos(j),Y.chartRendered=!1,Se.call(Y)):Se.selectAll("g.scatterseries_"+i).remove(),U.forEach(function(r,o){function c(){var e=d3.interpolate(H[o](P),H[o](w));return function(t){return e(t)}}var g=J.disabled;if(R.brush&&R.brush.extent){var m=R.axes.xaxis.scale.domain(),y=(R.axes.xaxis.ticks.tickValueObj.ticks,"time"==ke?m[0].getTime():"ordinal"==ke?we.indexOf(m[0]):m[0]),b="time"==ke?m[1].getTime():"ordinal"==ke?we.indexOf(m[m.length-1]):m[1],k="ordinal"==ke?function(e){return we.indexOf(R.dataset.getX(e))}:function(e){return R.dataset.getX(e)};e.seriesdataAfterUpdate[o]=f(e.seriesdataAfterUpdate[o],y,b,k)}var w=e.seriesdataAfterUpdate[o];R.systemConf.chart.axes.xaxis.reversed&&(w=w.slice(0).reverse());var C,A,P=w,M=W(p,"g",function(e){return g?[]:[e]},".","class","subseries_"+o);if(v=M.selectAll("path.line").data(function(e){return g?[]:[e]}),fe&&"strokeTween"!=D){if("pointTween"==D)P=null!=L?L.map(function(){return Object.create(L[0])}):w.map(function(){return Object.create(w[0])});else{var T="horiPathTween"==D?s.xidx:s.yidx(u),Y="horiPathTween"==D?n:l,X=re&&Ae&&!S?Y.domain().length-1:0;P=w.map(function(e){var t=Object.create(e);if(S&&"horiPathTween"!=D)t.y0=0,t.y=re||null==z||null==Y(z)?Y.domain()[0]:Math.max(z,Y.domain()[0]);else if(ae&&"vertPathTween"==D){var a=new Array(2),r=R.dataset.getY(e,u,0);a[0]=r,a[1]=null==t[T]?null:null!=z&&null!=Y(z)?Math.max(z,r):r,t[T]=a}else t[T]=null==t[T]?null:re||null==z||null==Y(z)?Y.domain()[X]:Math.max(z,Y.domain()[0]);return t})}C=E(P)}var U=[];if(null!=N){A=E(w);for(var Z=N.count,q=0;Z>=q;q++)A.splice(q,0,N.point);for(var Q=0;Q<w.length;Q++)U[Q]=[],U[Q][0]=w[Q][0],U[Q][1]=0==Q?N.point[1]:w[Q-1][1];if(U.push(["dummmy",w[w.length-1][1]]),F){var $=n(w[0][0])+(null!=n.rangeBand?n.rangeBand()/2:0),ee=R.dataObject.getXYvalue(d,S,n,l,u,w[w.length-1],"x",null,j)-R.dataObject.getXYvalue(d,S,n,l,u,w[0],"x",null,j),le=O({x:$,y:0,width:ee,height:R.plotarea.height},"rect"),ie=W(R.svg,"defs",[1]),oe=W(ie,"clipPath",[1],"#","id",le),he=W(oe,"rect",[1]);he.attr({x:$,y:0,width:ee,height:R.plotarea.height}),p.attr("clip-path","url("+V+"#"+le+")")}}var pe=v.enter().append("path").attr("class","line").datum(P,function(e){return s.getX(e)}).attr("d",H[o]).style("stroke",J.color||h).style("stroke-width",se).style("stroke-opacity",null==de||""===de?1:de);fe&&("pointbypoint"==D||"pointTween"==D?K(P,C,w,we,D,ge,B,_,function(e){return{d:H[o](e)}},pe):"strokeTween"==D?t(pe,ge,B):pe.transition().duration(B).ease(ge).attrTween("d",c));var me=v.datum(w,function(e){return s.getX(e)}).attr({id:"line_"+i,"stroke-dasharray":x}).style({"stroke-linecap":ve,"stroke-width":se,"stroke-opacity":I(de,1),fill:"none",stroke:function(){var e=te?null:zt.get(be,ue||R.seriesColor[i%R.seriesColor.length],ne,G);return e?"url("+V+"#"+e+")":ue||h}}),xe=null!=N?U:w,Ce=null!=N?R.dataObject.getXYvalue(d,S,n,l,u,w[1],"x",null,j)-R.dataObject.getXYvalue(d,S,n,l,u,w[0],"x",null,j):null;null!=N?me.datum(xe).attr("d",H[o]).attr("transform",null).transition().duration(B).ease(ge).attr("transform",function(){return null==Ce?null:"translate(-"+Ce+",0)"}):null==pe.node()&&(v.datum(xe).attr("transform",null).transition().duration(B).ease(ge).attr("d",H[o]),a(v));var Oe=ye&&!ce?"url("+V+"#"+Pe+")":null;v.attr({"marker-end":Oe,"marker-start":Oe,"marker-mid":Oe}),v.exit().remove()}),!ce||!ye){var Te=ye?(JSON.parse(he.size||null)||se)*Me.outer*10+se/2:0;P.push({renderer:e,charttype:"scatter",chartObj:R,args:[J,i,Te,j]})}}),setTimeout(function(){k&&y(p.selectAll("#line_"+i),C,x,e),e.chartRendered=!0,F=!0},F?2*B+20:B+20),e}function t(e,t,r){e.style({"stroke-dasharray":function(){return this.getTotalLength()+" "+this.getTotalLength()},"stroke-dashoffset":function(){return this.getTotalLength()}}).transition().duration(r).ease(t).style("stroke-dashoffset",0).each("end",function(){a(d3.select(this))})}function a(e){e.style({"stroke-dasharray":x,"stroke-dashoffset":null})}var r,n,l,i,s,d,u,h,p,v,x,k,C,A,S,P,M,T,z,R,L,N,j,B,D,H=[],Y=wt.scatter(),F=!1;return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e.shiftInfo=function(t){return arguments.length?(N=t,e):N},e.yrangePos=function(t){return arguments.length?(j=t,e):j},e},wt.area=function(){function e(A){return A.each(function(A){var S=t.params;p=S.chartObj,a=S.xscale,r=S.yscale,x=S.stacked,v=S.datasetIndex,b=S.axisrotated,d=S.commonPlotOptions,i=S.color,s=S.labelQueue,h=S.hasNegValue,l=S.yaxiscolumnorder,n=S.dataset,u=p.systemConf;var P=p.defsLocation,M=p.dataObject.isPolarAxisCategory,T=A[v],z=T.plotoptions,R=T.data,L=c(T.type||u.seriesdata.type,"string"),N=tt.utils.getValueOfPlotOptions(z,d),j=N("mode"),I=N("fillOpacity"),B=N("strokeWidth"),D=N("strokeColor"),H=JSON.parse(null!=z?tt.utils.getValueOfPlotOptions(z.marker,d.marker)("enabled"):d.marker.enabled),Y=null!=B&&""!=B&&0!=parseInt(B)||null!=D&&""!=D||H,F=q(d,z,p,L),_=F.enabled,V=F.easingType,J=F.type;g=F.duration,J="vertPathTweenAll"==J?"vertPathTween":J;var X=p.dataset.getDataType("x"),U="ordinal"==X?a.domain():p.dataObject.getCategories("x"),G=o(n,"x"),Z=o(n,"y",l),Q=u.chart.axes.yaxis[l].reversed,$=M&&Q&&!x?r.domain().length-1:0;"ordinal"!=X&&0==U.length&&_&&"pointTween"==J&&(U=p.dataObject.findXCategories());var ee="arearange"==L,te=ee?1:null;e.seriesdataAfterUpdate=[],R.forEach(function(t,i){if(e.seriesdataAfterUpdate[i]="ordinal"==X?p.dataObject.updateSeriesdatabyCategories(E(t),U):t,p.brush&&p.brush.extent){var o=p.axes.xaxis.scale.domain(),s=p.axes.xaxis.ticks.tickValueObj.ticks,d="time"==X?s[0].getTime():"ordinal"==X?U.indexOf(o[0]):o[0],u="time"==X?o[1].getTime():"ordinal"==X?U.indexOf(o[o.length-1]):o[1],c="ordinal"==X?function(e){
return U.indexOf(p.dataset.getX(e))}:function(e){return p.dataset.getX(e)};e.seriesdataAfterUpdate[i]=f(e.seriesdataAfterUpdate[i],d,u,c)}var g=e.seriesdataAfterUpdate[i];p.systemConf.chart.axes.xaxis.reversed&&(g=g.slice(0).reverse()),y=null!=m?null==y||0==y?p.dataObject.getXYvalue(b,x,a,r,l,g[g.length-1],"x")-p.dataObject.getXYvalue(b,x,a,r,l,g[g.length-2],"x"):y:0,C[i]=M?d3.svg.area.radial().angle(function(e){return a(n.getX(e))}).outerRadius(function(e){var t=x?r(e.y0+e.y):r(n.getY(e,l))+(null!=r.rangeBand?r.rangeBand()/2:0);return Math.max(t,r.range()[$])}).innerRadius(function(e){var t;return t=x?0==v?Math.min(r.range()[0],r(h)):r(e.y0):r(r.domain()[$])+(null!=r.rangeBand?r.rangeBand()/2:0),Math.max(t,r.range()[$])}).interpolate(j):d3.svg.area().defined(function(e){return x?!G(n.getX(e)):!Z(n.getY(e,l))&&!G(n.getX(e))}).x(function(e){var t=p.dataObject.getXYvalue(b,x,a,r,l,e,"x",null,te);return isNaN(t)&&null!=m&&(t=p.dataObject.getXYvalue(b,x,a,r,l,g[g.length-1],"x",null,te)+y),t}).y(function(e){return p.dataObject.getXYvalue(b,x,a,r,l,e,"y",null,te)}).interpolate(j),M||(b?C[i].x0(function(e,t){return x?0==v&&0==i&&0==t?Math.max(r.range()[0],r(h)):r(e.y0):ee?p.dataObject.getXYvalue(b,x,a,r,l,e,"x",null,0):null!=r.rangeBand?r.range()[0]+r.rangeBand():Math.max(r.range()[0],r(h))}):C[i].y0(function(e,t){return x?0==v&&0==i&&0==t?Math.min(r.range()[0],r(h)):r(e.y0):ee?p.dataObject.getXYvalue(b,x,a,r,l,e,"y",null,0):null!=r.rangeBand?r.range()[0]+r.rangeBand():Math.min(r.range()[0],r(h))}))});var ae=d3.select(this);e.update=function(){ae.transition().call(e)};var re=ae.selectAll("g.areaseries_"+v).data([T]);if(re.enter().insert("g",M?":first-child":null).attr("class","areaseries_"+v),Y||H){if(w.commonRendererProp(t).shiftInfo(m),w.chartRendered=!1,ee){w.yrangePos(1);var ne=wt.line().commonRendererProp(t).shiftInfo(m).yrangePos(0);ne.chartRendered=!1,ae.call(ne)}ae.call(w)}else ae.selectAll("g.lineseries_"+v+",g.scatterseries_"+v).remove();R.forEach(function(t,o){function s(){var e=d3.interpolate(C[o](y),C[o](f));return function(t){return e(t)}}var d,c,f=e.seriesdataAfterUpdate[o],y=f;if(_){if("pointTween"==J)y=f.map(function(){return Object.create(f[0])});else{var v="horiPathTween"==J?n.xidx:n.yidx(l),w="horiPathTween"==J?a:r,A=M&&Q&&!x?w.domain().length-1:0;y=f.map(function(e){var t=Object.create(e);if(x&&"horiPathTween"!=J)t.y0=M&&"strokeTween"===J?Math.min(0,w.domain()[0]):0,t.y=M||null==h||null==w(h)?w.domain()[0]:Math.max(h,w.domain()[0]);else if(ee&&"vertPathTween"==J){var a=new Array(2),r=p.dataset.getY(e,l,0);a[0]=r,a[1]=null==t[v]?null:null!=h&&null!=w(h)?Math.max(h,r):r,t[v]=a}else t[v]=null==t[v]?null:M||null==h||null==w(h)?w.domain()[A]:Math.max(h,w.domain()[0]);return t})}d=E(y)}var z=T.disabled,R=W(re,"g",function(e){return z?[]:[e]},".","class","subseries_"+o),N=R.selectAll("path.area").data(function(e){return z?[]:[e]}),j=N.enter().append("path").datum(y).attr("class","area").style("opacity",I).style("fill",i).attr("d",C[o]);_&&("pointbypoint"==J||"pointTween"==J?K(y,d,f,U,J,V,g,S,function(e){return{d:C[o](e)}},j):null!=j.node()&&"strokeTween"==J?j.transition().duration(0).delay(g).attr("d",function(e){return C[o](e)}):j.transition().duration(g).ease(V).attrTween("d",s));var B=M?[p.plotarea_approx.radius,p.plotarea_approx.radius]:[b?r(r.domain()[0]):a(a.domain()[1]),b?a(a.domain()[1]):r(r.domain()[0])],D=[];if(null!=m){c=E(f);for(var H=m.count,Y=0;H>=Y;Y++)c.splice(Y,0,m.point);for(var F=0;F<f.length;F++)D[F]=[],D[F][0]=f[F][0],D[F][1]=0==F?m.point[1]:f[F-1][1];if(D.push(["dummmy",f[f.length-1][1]]),k){var X=a(f[0][0])+(null!=a.rangeBand?a.rangeBand()/2:0),G=p.dataObject.getXYvalue(b,x,a,r,l,f[f.length-1],"x")-p.dataObject.getXYvalue(b,x,a,r,l,f[0],"x"),Z=O({x:X,y:0,width:G,height:p.plotarea.height},"rect"),q=W(p.svg,"defs",[1]),$=W(q,"clipPath",[1],"#","id",Z),te=W($,"rect",[1]);te.attr({x:X,y:0,width:G,height:p.plotarea.height}),re.attr("clip-path","url("+P+"#"+Z+")")}}var ae=null!=m?D:f,ne=N.datum(ae).style("opacity",I).style("fill",function(){var e=zt.get(u.chart.plot.plotoptions[L].gradients,i,B,L);return e?"url("+P+"#"+e+")":i}),le=null!=m?p.dataObject.getXYvalue(b,x,a,r,l,f[1],"x")-p.dataObject.getXYvalue(b,x,a,r,l,f[0],"x"):null;null!=m?ne.datum(ae).attr("d",C[o]).attr("transform",null).transition().duration(g).ease(V).attr("transform",function(){return null==le?null:"translate(-"+le+",0)"}):null!=j.node()&&"strokeTween"==J?ne.datum(ae).transition().duration(0).delay(g).attr("d",function(e){return C[o](e)}):ne.datum(ae).transition().delay("pointbypoint"!=J&&"pointTween"!=J||null==j.node()?0:g).duration(g).ease(V).attr("d",C[o]),N.exit().remove()}),Y||H||(ee?(s.push({renderer:e,charttype:"scatter",chartObj:p,args:[T,v,0,1]}),s.push({renderer:e,charttype:"scatter",chartObj:p,args:[T,v,0,0]})):s.push({renderer:e,charttype:"scatter",chartObj:p,args:[T,v,0]}))}),setTimeout(function(){e.chartRendered=!0,k=!0},g),e}var t,a,r,n,l,i,s,d,u,h,p,g,m,y,v=0,x=!1,b=!1,k=!1,w=wt.line(),C=[];return e.commonRendererProp=function(a){return arguments.length?(t=a,e):t},e.shiftInfo=function(t){return arguments.length?(m=t,e):m},e},wt.scatter=function(){function e(k){return k.each(function(k){var S=C.params;t=S.chartObj,a=S.xscale,r=S.yscale,s=S.stacked,n=S.datasetIndex,u=S.axisrotated,m=S.commonPlotOptions,i=S.color,g=S.labelQueue,v=S.hasNegValue,l=S.yaxiscolumnorder,d=S.dataset,y=t.systemConf;var P=t.defsLocation,M=y.chart.axes.xaxis.reversed,T=y.chart.axes.yaxis[l].reversed,z=d3.select(this);e.update=function(){z.transition().call(e)};var R=k[n],L=R.plotoptions,N=c(t.seriesdata[n].type||t.userdata.seriesdata.type,"numeric"),j=tt.charttypenames.get(N),B=N==tt.charttype.bubble||N==tt.charttype.geobubble,D=ke(N)||we(N),H=t.dataObject.isPolarAxisCategory,Y=R.data,F=W(z,"g",[R],".","class","scatterseries_"+n);"arearange"===j&&(F=W(F,"g",[R],".","class","rangePos_"+O));var _=q(m,L,t,j),V=_.enabled,J=_.easingType,X=_.type;b=_.duration;var U=L&&L.marker?Rt(m.marker,L.marker,!0):m.marker,G=U.symbol,Z=U.size;D?(Z=I(Z,1),X="fadeAll"==X?"fade":X):(Z=(null==Z||""==Z?parseInt(null!=L?tt.utils.getValueOfPlotOptions(L,m)("strokeWidth"):m.strokeWidth)||2:Z)*(H?.56:.7),X="vertPathTween"==X||"vertPathTweenAll"==X?"verticalAll":X,X="horiPathTween"==X?"horizontalAll":X,i=R.color||i);var Q,$=x(G,Z),ee=D?JSON.parse(tt.utils.getValueOfPlotOptions(L,m)("multiColoring")||!1)&&!t.legendarea.show:!1,te=10*Z,ae="fade"==X?0:U.outerFillOpacity,re="fade"==X?0:U.outerStrokeOpacity,ne="fade"==X?0:U.innerFillOpacity,le="fade"==X?0:U.innerStrokeOpacity,ie=null!=U.imageUrl&&""!==U.imageUrl,oe={name:U.imageUrl};null!=h&&(Q=tt.axis.threshold.overlay(t,"discrete",h)),e.seriesdataAfterUpdate=[];var se=t.dataset.getDataType("x"),de="ordinal"==se&&null!=a.domain?a.domain():t.dataObject.getCategories("x"),ue=o(d,"x"),ce=o(d,"y",l);Y.forEach(function(n,o){function c(e){switch(X){case"verticalAll":var n=null!=v&&null!=r(v)?r(Math.max(v,r.domain()[0])):r.range()[0];return u?n:t.dataObject.getXYvalue(u,s,a,r,l,e,"x",null,O);case"horizontalAll":var n=(null!=v&&null!=a(v)?a(Math.max(v,a.domain()[0])):a.range()[0])+(null!=a.rangeBand?a.rangeBand()/2:0);return u?t.dataObject.getXYvalue(u,s,a,r,l,e,"x",null,O):n;case"fade":case"sizing":case"pointTween":case"pointbypoint":case"strokeTween":return t.dataObject.getXYvalue(u,s,a,r,l,e,"x",null,O);default:var i=(u?r:a).range(),o=u&&T||!u&&M?i.length-1:0;return i[o]}}function g(e){switch(X){case"verticalAll":var n=null!=v&&null!=r(v)?r(Math.max(v,r.domain()[0])):r.range()[0];return u?t.dataObject.getXYvalue(u,s,a,r,l,e,"y",null,O):n;case"horizontalAll":var i=(null!=v&&null!=a(v)?a(Math.max(v,a.domain()[0])):a.range()[0])+(null!=a.rangeBand?a.rangeBand()/2:0);return u?i:t.dataObject.getXYvalue(u,s,a,r,l,e,"y",null,O);case"fade":case"sizing":case"pointTween":case"pointbypoint":case"strokeTween":return t.dataObject.getXYvalue(u,s,a,r,l,e,"y",null,O);default:var o=(u?a:r).range(),d=u&&M||!u&&T?o.length-1:0;return o[d]}}function x(e){return N!==tt.charttype.stkdarea&&(ue(d.getX(e))||ce(d.getY(e,l)))?0:B?t.dataObject.getXYvalue(u,s,a,r,l,e,"z",t.zscale,O):te}if(e.seriesdataAfterUpdate[o]="ordinal"==se?t.dataObject.updateSeriesdatabyCategories(E(n),de):n,t.brush&&t.brush.extent){var k=t.axes.xaxis.scale.domain(),C=t.axes.xaxis.ticks.tickValueObj.ticks,A="time"==se?C[0].getTime():"ordinal"==se?de.indexOf(k[0]):k[0],z="time"==se?k[1].getTime():"ordinal"==se?de.indexOf(k[k.length-1]):k[1],I="ordinal"==se?function(e){return de.indexOf(t.dataset.getX(e))}:function(e){return t.dataset.getX(e)};e.seriesdataAfterUpdate[o]=f(e.seriesdataAfterUpdate[o],A,z,I)}var Y,_,G,Z=e.seriesdataAfterUpdate[o],q=R.disabled;if("pointbypoint"==X||"pointTween"==X){if(Y=Z,M&&(Y=Y.slice(0).reverse()),_=Y,"pointTween"==X)_=Y.map(function(){return Object.create(Y[0])});else if("pointbypoint"==X){var he=H&&T&&!s?r.domain().length-1:0;_=Y.map(function(e){var t=Object.create(e),a=H||null==v||null==r(v)?r.domain()[he]:Math.max(v,r.domain()[0]);return s&&(t.y0=0,t.y=a),t[d.yidx(l)]=a,t})}G=E(_)}var pe=W(F,"g",function(){return q?[]:[Z]},".","class","subseries_"+o),fe=pe.selectAll("g.scatter").data(function(e){return e}),ge=fe.enter().append("g").attr("class","scatter"),me=fe.size(),ye="onebyone"!=X?b:b/me,ve=function(e,a){return N!==tt.charttype.stkdarea&&(!e||e.isDummy||ue(d.getX(e))||ce(d.getY(e,l)))?[]:[{color:ee?t.seriesColor[a%t.seriesColor.length]:i,data:e}]},xe=W(ge,"path",ve,".","class","outer");xe.style({"fill-opacity":ae,"stroke-opacity":re});var be=W(ge,"path",ie?[]:ve,".","class","inner");be.style({"fill-opacity":ne,"stroke-opacity":le}),V&&("pointbypoint"==X||"pointTween"==X?K(_,G,Y,de,X,J,b,S,function(e){return{transform:function(t,a){return"translate("+c(e[a])+","+g(e[a])+")"}}},ge,"scatter"):ge.attr("transform",function(e){return"translate("+c(e)+","+g(e)+")"+(ie&&"sizing"===X?" scale(0)":"")}).transition().delay(function(e,t){return"onebyone"==X?t*ye:0}).duration(ye).ease(J).attr("transform",function(e){return"translate("+t.dataObject.getXYvalue(u,s,a,r,l,e,"x",null,O)+","+t.dataObject.getXYvalue(u,s,a,r,l,e,"y",null,O)+")"}));var ke=fe;ke.transition().delay(function(e,t){return"pointbypoint"!=X&&"pointTween"!=X||null==ge.node()?"onebyone"==X?t*ye:0:b}).duration(ye).ease(J).attr("transform",function(e){return"translate("+t.dataObject.getXYvalue(u,s,a,r,l,e,"x",null,O)+","+t.dataObject.getXYvalue(u,s,a,r,l,e,"y",null,O)+")"});var we=ke.selectAll("path.outer").attr("d",function(e){var t=d3.select(this.parentNode).attr("size"),a=null!=t?t:"sizing"!=X||ie?x(e.data):0;return $(a)}).style({"stroke-width":U.outerStrokeWidth,fill:function(e){var t=x(e.data);if(ie)return oe.width=oe.height=parseFloat(t),oe.x=oe.y=-parseFloat(t)/2,"url("+P+"#"+Et.get("imageFill",oe)+")";var a="x"==p?d.getX(e.data)||de[0]:d.getY(e.data,l),r=null!=h?Q(h,h.color,a,U.outerFillColor||e.color):U.outerFillColor||e.color,n=t/2,i=D?zt.get(y.chart.plot.plotoptions[j].gradients,r,[n,n],"scatter"):null;return i?"url("+P+"#"+i+")":r},stroke:function(e){var t="x"==p?d.getX(e.data)||de[0]:d.getY(e.data,l);return null!=h?Q(h,h.color,t,U.outerStrokeColor||e.color):U.outerStrokeColor||e.color}}),Ce=ke.selectAll("path.inner").attr("d",function(e){var t=d3.select(this.parentNode).attr("size"),a=null!=t?t:"sizing"!=X||ie?x(e.data):0;return $(a/2)}).style({"stroke-width":U.innerStrokeWidth,fill:function(e){var t="x"==p?d.getX(e.data)||de[0]:d.getY(e.data,l),a=null!=h?Q(h,h.color,t,U.innerFillColor||e.color):U.innerFillColor||e.color,r=x(e.data)/4,n=D?zt.get(y.chart.plot.plotoptions[j].gradients,a,[r,r],"scatter"):null;return n?"url("+P+"#"+n+")":a},stroke:function(e){var t="x"==p?d.getX(e.data)||de[0]:d.getY(e.data,l);return null!=h?Q(h,h.color,t,U.innerStrokeColor||e.color):U.innerStrokeColor||e.color}});we.transition().duration(ye).ease(J).attr("d",function(e){return $(x(e.data))}).style({"fill-opacity":U.outerFillOpacity,"stroke-opacity":U.outerStrokeOpacity}),Ce.transition().duration(ye).ease(J).attr("d",function(e){return $(x(e.data)/2)}).style({"fill-opacity":U.innerFillOpacity,"stroke-opacity":U.innerStrokeOpacity});var Oe=(L&&L.animation&&L.animation.blink?Rt(m.animation.blink,L.animation.blink,!0):m.animation.blink)||{},Ae=JSON.parse(Oe.enabled||!1);Ae&&w(fe.selectAll(".outer,.inner"),Oe),fe.attr("size",function(e){return x(e)}),fe.exit().remove()}),null!=tt.labelRenderer&&g.push({renderer:e,charttype:"scatter",chartObj:t,args:[R,n,te+U.outerStrokeWidth,O]}),setTimeout(function(){A=!0,e.chartRendered=!0},b)}),e}var t,a,r,n,l,i,s,d,u,h,p,g,m,y,v,b,k,C,O,A=!1;return e.commonRendererProp=function(t){return arguments.length?(C=t,e):C},e.shiftInfo=function(t){return arguments.length?(k=t,e):k},e.threshold=function(t){return arguments.length?(h=t,e):h},e.thresholdType=function(t){return arguments.length?(p=t,e):p},e.yrangePos=function(t){return arguments.length?(O=t,e):O},e},wt.pie=function(){function e(t,O){return t.each(function(t){var S=s.params;d=S.chartObj,P=S.commonPlotOptions,f=S.color,T=S.notesArray,M=d.systemConf;var U=S.yaxiscolumnorder,Z=S.dataset,K=S.datasetIndex||0,Q=d.defsLocation,$=d.seriesdata[K],ee=c($.type||d.userdata.seriesdata.type,"string"),te="bubblepie"===ee;E="dial"===ee,_=te?I(P.dataindex,3):Z.yidx(U),F=Y||(E?d.plotarea_approx:d.plotarea),k=F.width,b=F.height,u=I(F.radius,Math.min(k,b)/2);var ae=$.plotoptions,ne=tt.utils.getValueOfPlotOptions(ae,P),le=I(ne("maxRadius"),250),ie=(ne("fillOpacity"),P.levelMarker),oe=E||te?0:+ne("outerPadding"),se=ne("strokeWidth"),de=Ge(P.datalabels,d),ue=+(P.datalabels.padding||0),ce={},he=0;if(z=Math.min(le,u-oe),!E&&!te&&de){var pe=k*V,ge=k-2*z;pe>ge&&(ue=ce.padding=5,he=Math.max(pe-ge,0),z-=he/2)}h=Math.max(0,re(ne("innerRadius"),z,0)),se=I(se,1),z=E&&JSON.parse(ie.enabled)?z+Math.min(0,re(ie.outerPadding,u,0)):z,h=E&&JSON.parse(ie.enabled)?h-Math.min(0,re(ie.innerPadding,u,0)):h,z-=.5*se,R=Math.max(h,z),B=ae&&ae.models?Rt(P.models,ae.models,!0):P.models;var me=q(P,ae,d,ee),ve=me.enabled,xe=ve?G?200:me.duration:0,be=me.easingType,ke=me.type,we=0==I(ye(ae,P,d,"enabled"),!0),Ce=we?null:ye(ae,P,d,"cursor")||"pointer";g=d3.select(this),m=W(g,"g",[t],".","class","piegroup"),m.style({"stroke-width":se,"fill-opacity":ne("fillOpacity"),"stroke-opacity":1,cursor:Ce}),J.startAngle(JSON.parse(P.startAngle)).endAngle(JSON.parse(P.endAngle)).value(function(e){return e.disabled?0:Math.abs(e[_]||0)});var Oe=J(t=te?t:$.data[0]);e.data=Oe,N=Oe.reduce(function(e,t){return e+(t.value?1:0)},0),p=Oe.reduce(function(e,t){return e+t.value},0);var Ae=!0;if(Ae)X.outerRadius(R).innerRadius(h);else{var Se=re(ie.interPadding,R,10),Pe=t.length,Me=(R-h-(Pe-1)*Se)/Pe;X.innerRadius(function(e,t){return t*(Me+Se)+h}).outerRadius(function(e,t){return(t+1)*Me+t*Se+h}).startAngle(P.startAngle).endAngle(function(e){return e.endAngle})}A=d3.svg.arc().innerRadius(R).outerRadius(R+ue);var Te=d3.svg.arc().innerRadius(R).outerRadius(R);L=se;var Ee=o(m),ze=(Ee.height+se)/z,Re=(Ee.width+se)/z,Le=z+Math.min((k-2*oe-he-(Ee.width+se))/Re,(b-2*oe-he-(Ee.height+se))/ze);if(Le=Math.min(le,Math.max(z,Le)),E){var Ne=d.axes.yaxes.groups[0].scale;Oe.forEach(function(e){e.endAngle=Ne(e.value)})}else Le!=z&&(z=Le,h=Math.max(0,re(ne("innerRadius"),z,0)),R=Math.max(h,z),X.outerRadius(R).innerRadius(h),A=d3.svg.arc().innerRadius(R).outerRadius(R+ue),Te=d3.svg.arc().innerRadius(R).outerRadius(R),o(m));var je=!E&&B.type?"url("+Q+"#"+r(a())+")":null,Be=[R,R];if(j=2*re(ne("sliceOutHeight"),z,0),C=m.selectAll("path").data(),w=W(m,"path",Oe),w.attr({"clip-path":je,id:function(e,t){return"arc_"+t}}).style({display:"block",fill:function(e,t){var a=f[t%f.length],r=zt.get(P.gradients,a,Be,"pie");return r?"url("+Q+"#"+r+")":a},stroke:function(e,t){return ne("strokeColor")||f[t%f.length]}}),!we){var De={mousemove:function(t,a){var r=d3.event.touches?d3.event.touches[0]:d3.event,n={renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:f[a%f.length],coordinates:[r.pageX,r.pageY],element:this,data:t};d.eventHandler.mouseMove(n)},mouseout:function(t,a){d.eventHandler.mouseOut(e,t,a)},click:function(t){d.eventHandler.click(e,t.data)},dblclick:function(e,t){var a=tt.annotation?Ie(e.data,null):e.data,r=A.centroid(e);r=[r[0]+D,r[1]+H];var n={coordinate:r,data:a,basedOn:"plot"};d.eventHandler.doubleclick(e,t,n)}};fe(w,null,De,!0)}if(/(\D)+onebyone/.test(ke)&&!G){var He="fanonebyone"==ke,Ye=He?xe:xe/N,Fe=0;w.transition().ease(be).duration(function(e){return He?Ye*(e.value/p):Ye}).delay(function(e){var t=Ye*Fe;return Fe+=He?e.value/p:1,t}).call(He?l:n)}else w.transition().duration(xe).ease(be).call("fanAll"==ke||G?i:"inner"==ke?n:l).each("end",function(e){var t=e.data.disabled||!e.value;d3.select(this).style("display",t?"none":"block")});g.transition().delay(xe).duration(0).each("end",function(){if(E)wt.dial.endFunctions();else if(w.style("display",function(e){return e.data.disabled||!e.value?"none":null}),tt.labelRenderer){var t=te?[F.left+D,F.top+H]:[D,H];tt.labelRenderer.drawLabel({renderer:e,charttype:"pie",chartObj:d,args:[m.datum(),Oe,R,p,A,Te,X,t,O,ce]})}y=d.staticPaneSVG.selectAll("g.insidelabel_0"),v=d.staticPaneSVG.selectAll("g.link_0"),x=d.staticPaneSVG.selectAll("g.label_0"),tt.annotation&&!te&&(T=tt.annotation.preprocessAnnotations(d.seriesdata,0,function(e,t,a){var r=A.centroid(Oe[a]);return[r[0]+D,r[1]+H]},T,d,S)),e.chartRendered=!0,G=!0})}),e}function t(e){for(var t=[],a=[],r=0,n=0;e>n;n++)"gear1"==B.type?a.push([r++,0],[r++,1],[r++,1]):a.push([r,0],[r++,1],[r,1],[r++,0]);return t.push(a),t}function a(){var e=-1,a=B.count,r="zigzag"==B.type?-50+h/5:"sun"==B.type?-1:-10,n=t(a),l=d3.scale.linear().range([0,2*Math.PI]).domain([0,"gear1"==B.type?3*a:2*a]),i=d3.scale.linear().range([h,R]).domain([r,1]),o=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return i(e[1])}).angle(function(t,a){return e="gear"==B.type?a%2==0?e+1:e:"gear1"!=B.type&&a%2!=0?e+1:e,l("gear1"==B.type?e++:e)});return o(n[0])}function r(e){var t=O({OR:R,model:B.type,count:B.count,IR:h},"pieModels"),a=(Mt.SAFARI?d.svg:Pt.patternSVG).selectAll("defs"),r=W(a,"clipPath",[1],"#","id",t),n=W(r,"path",[1]);return n.attr("d",e),t}function n(e){e.attrTween("d",function(e){var t=d3.interpolate(h,R);return function(a){return X.outerRadius(t(a)),X(e)}})}function l(e){e.attrTween("d",function(e){var t=d3.interpolate(e.startAngle,e.endAngle);return function(a){return e.endAngle=t(a),X(e)}})}function i(e){e.attrTween("d",function(e,t){var a=C[t]||C[C.length-1],r=G&&a?a.endAngle:JSON.parse(P.startAngle),n=G&&a?C[t]?a.startAngle:a.endAngle:JSON.parse(P.startAngle),l=d3.interpolate(r,e.endAngle),i=d3.interpolate(n,e.startAngle);return function(a){return e.endAngle=l(a)||0,e.startAngle=i(a)||0,X(e,t)}})}function o(t){var a=[];a[_]=1;var r=g.append("path").attr("d",X(J([a])[0],e.data.length-1)).style({fill:"none",stroke:"none"}),n=S(r.node());r.remove();var l=ae(n,k,b,z,L);return D=E?F.x:l[0],H=E?F.y:l[1],t.attr("transform",function(){return"translate("+D+","+H+")"}),n}var s,d,u,h,p,f,g,m,y,v,x,b,k,w,C,A,P,M,T,E,z,R,L,N,j,B,D,H,Y,F,_,V=.3,J=d3.layout.pie().sort(null),X=d3.svg.arc(),U=function(e){return ee(j,(e.startAngle+e.endAngle)/2)},G=!1;return e.commonRendererProp=function(t){return arguments.length?(s=t,e):s},e.plotarea=function(t){return arguments.length?(Y=t,e):Y||F},e.innerRadius=function(t){return arguments.length?(h=t,e):h},e.defaultMouseOverFunc=function(t,a,r){if(1!=N){w.transition().ease("linear").attr("transform","translate(0,0)");var n=U(t);m.selectAll("#arc_"+r).transition().ease("linear").attr("transform","translate("+n[0]+","+n[1]+")"),y.selectAll("#label_"+r).transition().ease("linear").attr("transform",function(){var e=d3.select(this).attr("translated"),a=U(t);e=e?e.split(/,| /).map(function(e){return JSON.parse(e)}):null;var r=(e||X.centroid(t))[0]+a[0],n=(e||X.centroid(t))[1]+a[1];return"translate("+r+","+n+")"}),v.selectAll("#link"+r).style("stroke-width",3*e.lineStrokeWidth),"circular"==e.showlabel&&x.selectAll("#outsidelabel_"+r).transition().ease("linear").attr({x:function(e){return A.centroid(e)[0]+U(e)[0]},y:function(e){return A.centroid(e)[1]+U(e)[1]}}),x.selectAll("#outsidelabel_"+r).style("text-shadow","0 0 0 rgba(0,0,0,1)")}},e.defaultMouseOutFunc=function(){w.transition().ease("linear").attr("transform","translate(0,0)"),y.selectAll("text").transition().ease("linear").attr("transform",function(e){var t=d3.select(this).attr("translated")||X.centroid(e);return"translate("+t+")"}),v.selectAll("path").style("stroke-width",e.lineStrokeWidth),"circular"==e.showlabel&&x.selectAll("text").transition().ease("linear").attr({x:function(e){return A.centroid(e)[0]},y:function(e){return A.centroid(e)[1]}}),x.selectAll("text").style("text-shadow",null)},e},wt.funnel=function(){function e(l){l.each(function(l){function O(){ze.transition().delay(we?he?Oe:300:0).duration(0).each("end",function(){var t=a(h);tt.labelRenderer&&tt.labelRenderer.drawLabel({renderer:e,chartObj:c,charttype:"funnel",args:[ze.datum(),h,p,E+2+K,w,oe,t]}),H=c.staticPaneSVG.selectAll("g.link_0"),B=c.staticPaneSVG.selectAll("g.label_0"),tt.annotation&&(U=tt.annotation.preprocessAnnotations(c.seriesdata,0,function(e,t,a){return[C[C.length-1-a].bottomLeft[0]+(k/2-oe.width/2),C[C.length-1-a].bottomLeft[1]+(E+2+K)]},U,c,le)),he=!0,e.chartRendered=!0})}function pe(e){e[0].reverse(),e.data(h)}le=u.params,c=le.chartObj,J=le.commonPlotOptions,S=le.color,U=le.notesArray,_=le.yaxiscolumnorder,x=le.dataset,X=c.systemConf,ne=c.defsLocation,k=c.plotarea.width,A=c.plotarea.height,V=l[0].plotoptions;var ge=tt.utils.getValueOfPlotOptions(V,J);$=X.legend.patternPallete,oe.canOverlap=JSON.parse(ge("canOverlap")),Z=JSON.parse(ge("split")),T=JSON.parse(ge("threeDimension"));var me=J.emptyFunnel;G=JSON.parse(J.datalabels.padding);var ve=Ge(J.datalabels,c),xe=q(J,V,c,"funnel"),be=xe.type,ke=xe.easingType,we=xe.enabled,Ce=xe.duration,Oe=we?200:0;K=re(ge("outerPadding"),A,0)/2,m=ge("stemHeight"),y=ge("stemWidth"),te="width"===ge("weighted"),ae="none"===ge("weighted"),te&&(m=y=0,Z=!0),h=l=l[0].data[0],p=h.reduce(function(e,t){return e+(x.getY(t,_)&&!t.disabled?1:0)},0),g=p-1;var Ae=o();oe.height=A-2*Ae-.01*A-2*K;var Se=ge("coneWidth");if(Se=re(Se,oe.height,.95*oe.height),oe.width=Math.min(k,Se),b=oe.height*se,R=Math.min(ue,Math.max(de,b/g)),oe.gapHeight=!we||Z||he?R:"horizontalAll"==be?R:0,(te||ae)&&D(J.maxSliceHeight)&&(oe.height-=Math.max(0,oe.height-R*g-re(J.maxSliceHeight,oe.height)*p)),ve){var Pe=k*ie,Me=k-oe.width;Pe>Me&&(G=oe.datalabelPadding=5,oe.width-=Math.max(Pe-Me,0))}m=re(m,oe.height,.2*oe.height),v=y=re(y,oe.width,m*oe.width/oe.height)/2,f=oe.height-m,E=.05*oe.height,E=Math.max(ce,(E-h.length)/h.length),z=E=T?oe.canOverlap?E+ue/2:R/2-1:0,w=h.reduce(function(e,t,a){return e+(h[a].disabled?0:Math.abs(x.getY(h[a],_)))},0),ee=Math.max.apply(null,h.map(function(e,t){return h[t].disabled?0:Math.abs(x.getY(h[t],_))/w})),F=d3.scale.linear().domain(te?[0,ee]:[m,oe.height]).range([oe.width/2-y,0]),Y=d3.scale.linear().domain(te?[0,ee]:[m,oe.height]).range([oe.width/2+y,oe.width]),C=t(h),Q=[oe.width,oe.height];var Te=0==I(ye(V,J,c,"enabled"),!0),Ee=Te?null:ye(V,J,c,"cursor")||"pointer",ze=d3.select(this);L=W(ze,"g",[1],".","class","funnelgroup"),L.attr("transform","translate("+(k/2-oe.width/2)+","+(E+2+K)+")").style({cursor:Ee,stroke:ge("strokeColor"),"stroke-opacity":ge("strokeOpacity"),"stroke-width":ge("strokeWidth")}),N=W(L,"g",[1],".","class","ellipsegroup"),j=W(L,"g",[1],".","class","trapezoidgroup"),P=W(j,"path",h),pe(P),P.attr("id",function(e,t){return"funnel"+t}).style("fill",function(e,t){var a=zt.get(J.gradients,S[t%S.length],Q,"funnel");return a?"url("+ne+"#"+a+")":S[t%S.length]}),M=W(N,"path",T?h:[]),pe(M),M.attr("id",function(e,t){return"ellipse"+t}).style("fill",function(e,t){return d3.rgb(S[t%S.length]).darker(.5)});var Re={mousemove:function(t,a){var r=d3.event.touches?d3.event.touches[0]:d3.event,n={renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:S[a%S.length],coordinates:[r.pageX,r.pageY],element:this,data:t};c.eventHandler.mouseMove(n)},mouseout:function(t,a){c.eventHandler.mouseOut(e,t,a)},click:function(t){c.eventHandler.click(e,t)},dblclick:function(e,t){var a=tt.annotation?Ie(e,null):e,r=C[l.length-1-t].bottomLeft;r=[r[0]+(k/2-oe.width/2),r[1]+(E+2+K)];var n={coordinate:r,data:a,basedOn:"plot"};c.eventHandler.doubleclick(e,l.length-1-t,n)}};Te||(fe(P,null,Re,!0),fe(M,null,Re,!0));var Le=oe.canOverlap?2*y/oe.width*E:E+1,Ne="M0,0L"+(oe.width/2-y)+","+f+"L"+(oe.width/2-y)+","+oe.height+"A"+y+","+Le+",0,0,0,"+(oe.width/2+y)+","+oe.height+"L"+(oe.width/2+y)+","+f+"L"+oe.width+",0A"+oe.width/2+","+E+",0,0,0,0,0A"+oe.width/2+","+E+",0,0,0,"+oe.width+",0",je=W(L,"path",!he&&JSON.parse(me.show)&&we?[1]:[],"#","id","emptyFunnel");if(je.attr("d",Ne).style({stroke:me.color||"grey",fill:"none"}),r(Ne),he)P.transition().duration(Oe).ease("linear").attr("d",function(e,t){return s(C[h.length-1-t])}),M.transition().duration(Oe).ease("linear").attr("d",function(e,t){return d(C[h.length-1-t])}),i(l,Oe),O();else{i(l,0);var Be=0,De=0;P.transition().duration(function(e){var t=x.getY(e,_);return"vertical"==be?e.disabled||!t?0:te||ae?Ce/p:Math.abs(t)/w*Ce:Ce}).delay(function(e){var t=x.getY(e,_);return Be+=e.disabled||!t?0:te||ae?Ce/p:Math.abs(t),"vertical"==be?te||ae?Ce-Be:(w-Be)/w*Ce:0}).ease(ke).attrTween("d",function(e,t){return n(e,h.length-1-t,"funnel",be)}).each("end",function(){De++}),Be=0,M.transition().duration(function(e){var t=x.getY(e,_);return"vertical"==be?e.disabled||!t?0:te||ae?Ce/p:Math.abs(t)/w*Ce:Ce}).delay(function(e){var t=x.getY(e,_);return Be+=e.disabled||!t?0:te||ae?Ce/p:Math.abs(t),"vertical"==be?te||ae?Ce-Be:(w-Be)/w*Ce:0}).ease(ke).attrTween("d",function(e,t){return n(e,h.length-1-t,"ellipse",be)});var He=setInterval(function(){De==h.length&&("horizontalAll"!=be&&(oe.gapHeight=R,C=t(h),P.transition().duration(we?250:0).delay(50).ease("linear").attr("d",function(e,t){return s(C[h.length-1-t])}),M.transition().duration(we?250:0).delay(50).ease("linear").attr("d",function(e,t){return d(C[h.length-1-t])})),O(),L.selectAll("path#emptyFunnel").transition().duration(50).delay(310).style("stroke-opacity",0).remove(),clearInterval(He))},10)}})}function t(e){var t=0,a=oe.height,r=0,n=0;return C=[],v=y,e.forEach(function(l,i){var o=e[e.length-1-i],s=x.getY(o,_),d=o.disabled;n=w?(d?0:te||ae?s?1/p:0:Math.abs(s)/w)*(oe.height-(p-1)*oe.gapHeight):0,t+=d?0:s,n=r+n;var u=s/w,c={};t!=w||0!=s&&!d?te?(c.bottomLeft=[F(u),oe.height-n],c.topLeft=[F(u),a],c.middleLeft=[F(u),oe.height-n],c.bottomRight=[Y(u),oe.height-n],c.topRight=[Y(u),a],c.middleRight=[Y(u),oe.height-n]):(c.bottomLeft=[oe.height-n>=f?oe.width/2-y:F(n),oe.height-n],c.topLeft=[a>=f?oe.width/2-y:F(r),a],c.middleLeft=[a>=f?oe.width/2-y:c.bottomLeft[0],a>=f&&oe.height-n<=f?f:oe.height-n],c.bottomRight=[oe.height-n>=f?oe.width/2+y:Y(n),oe.height-n],c.topRight=[a>=f?oe.width/2+y:Y(r),a],c.middleRight=[a>=f?oe.width/2+y:c.bottomRight[0],a>=f&&oe.height-n<=f?f:oe.height-n]):(c.topLeft=c.bottomLeft=c.middleLeft=[F(te?ee:oe.height),0],c.topRight=c.bottomRight=c.middleRight=[Y(te?ee:oe.height),0]),C.push(c),a=!s||d?oe.height-n:oe.height-n-oe.gapHeight,r=!s||d?n:n+oe.gapHeight}),C}function a(e){var t=[],a=oe.height,r=0,n=0;return e.forEach(function(l,i){var o=e[e.length-1-i],s=x.getY(o,_),d=o.disabled;n=(d?0:te||ae?s?1/p:0:Math.abs(s)/w)*(oe.height-(p-1)*oe.gapHeight)/2;var u=n;n=r+n;var c=s/w,h=te?F(c):oe.height-n>=f?oe.width/2-y:F(n),g=te?Y(c):oe.height-n>=f?oe.width/2+y:Y(n);t.push({rightx:g+G,leftx:h-G,y:Math.abs(oe.height-n),y0:Math.abs(oe.height-n+u)}),n+=u,a=!s||d?oe.height-n:oe.height-n-oe.gapHeight,r=!s||d?n:n+oe.gapHeight}),t}function r(e){var t=O({path:e},"FunnelClipPath"),a=(Mt.SAFARI?c.svg:Pt.patternSVG).selectAll("defs"),r=W(a,"clipPath",[1],"#","id",t),n=W(r,"path",[1]);n.attr("d",e),L.attr("clip-path",te?null:"url("+ne+"#"+t+")")}function n(e,t,a,r){var n=l(r,t),e=C[t],i="funnel"==a?d3.interpolate(s(n),s(e)):d3.interpolate(d(n),d(e));return function(e){return i(e)}}function l(e,t){var a=Lt(C["verticalAll"==e?0:t]);return"horizontalAll"===e?a.topLeft[0]=a.middleLeft[0]=a.bottomLeft[0]=a.topRight[0]=a.middleRight[0]=a.bottomRight[0]=oe.width/2:(a.middleLeft=a.bottomLeft=a.topLeft,a.middleRight=a.bottomRight=a.topRight),a}function i(e,t){M.each(function(a,r){var n=e[r].disabled||!x.getY(h[r],_);setTimeout(function(){N.selectAll("#ellipse"+r).style("display",n?"none":null),j.selectAll("#funnel"+r).style("display",n?"none":null)},n?t:0)})}function o(){var e=A-2*K,t=.05*e,a=e*se,r=Math.min(ue,Math.max(de,a/g));return t=(t-h.length)/h.length,t=Math.max(ce,t),t=T?oe.canOverlap?t+ue/2:r/2-1:0}function s(e){var t=(e.topRight[0]-e.topLeft[0])/2,a=(e.bottomRight[0]-e.bottomLeft[0])/2,r=oe.canOverlap?2*t/oe.width*E:z,n=oe.canOverlap?2*a/oe.width*E:z;return"M"+e.topLeft[0]+" "+e.topLeft[1]+" A"+t+" "+r+" 0 0 0 "+e.topRight[0]+" "+e.topRight[1]+" L"+e.middleRight[0]+" "+e.middleRight[1]+" L"+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+a+" "+n+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]+" L"+e.middleLeft[0]+" "+e.middleLeft[1]+"Z"}function d(e){var t=(e.bottomRight[0]-e.bottomLeft[0])/2,a=oe.canOverlap?2*t/oe.width*E+1:z;return"M"+e.bottomLeft[0]+" "+e.bottomLeft[1]+" A"+t+" "+a+" 0 0 1 "+e.bottomRight[0]+" "+e.bottomRight[1]+" A"+t+" "+(oe.canOverlap?a:a+1)+" 0 0 1 "+e.bottomLeft[0]+" "+e.bottomLeft[1]}var u,c,h,p,f,g,m,y,v,x,b,k,w,C,A,S,P,M,T,E,z,R,L,N,j,B,H,Y,F,_,V,J,X,U,G,Z,K,Q,$,ee,te,ae,ne,le,ie=.3,oe={},se=.375,de=4,ue=10,ce=1,he=!1;return e.commonRendererProp=function(t){return arguments.length?(u=t,e):u},e.defaultMouseOverFunc=function(e,t,a){$?(P.style("fill-opacity",function(e,t){return t===a?null:.3}),M.style("fill-opacity",function(e,t){return t===a?null:.3})):(P.style("fill",function(e,t){var r=d3.rgb(S[t%S.length]).darker(t===a?.6:0),n=zt.get(J.gradients,r,Q,"funnel");return n?"url("+ne+"#"+n+")":r}),M.style("fill",function(e,t){return d3.rgb(S[t%S.length]).darker(t===a?1:.5)})),B.selectAll("text").style("text-shadow",null),H.selectAll("path").style("stroke-width",null),B.selectAll("#label_"+a).style("text-shadow","0 0 0 rgba(0,0,0,1)"),H.selectAll("#label_link_"+a).style("stroke-width",1)},e.defaultMouseOutFunc=function(){$?(P.style("fill-opacity",null),M.style("fill-opacity",null)):(P.style("fill",function(e,t){var a=zt.get(J.gradients,S[t%S.length],Q,"funnel");return a?"url("+ne+"#"+a+")":S[t%S.length]}),M.style("fill",function(e,t){return d3.rgb(S[t%S.length]).darker(.5)})),B.selectAll("text").style("text-shadow",null),H.selectAll("path").style("stroke-width",null)},e},wt.pyramid=function(){function e(t){t.each(function(t){var a=d.params;z=a.chartObj,g=a.commonPlotOptions,T=a.color,y=a.notesArray,c=a.yaxiscolumnorder,u=a.dataset,m=z.systemConf,x=z.defsLocation,p=z.plotarea.width,f=z.plotarea.height;var r=Math.min(p,f);B=JSON.parse(g.datalabels.padding);var n=Ge(g.datalabels,z);if(n){var F=p*D,_=p-r;F>_&&(B=H.datalabelPadding=5,r-=Math.max(F-_,0))}H.width=r,H.height=4*r/5;var V=t[0].plotoptions,J=tt.utils.getValueOfPlotOptions(V,g);v=m.legend.patternPallete;var X=J("strokeColor"),U=J("strokeWidth"),G=J("strokeOpacity"),Z=JSON.parse(J("threeDimension"));h=J("fillOpacity");var K=q(g,V,z,"pyramid"),Q=K.enabled,$=K.easingType,ee=Y?Q?200:0:K.duration;s=K.type;var te=0==I(ye(V,g,z,"enabled"),!0),ae=te?null:ye(V,g,z,"cursor")||"pointer",re=d3.select(this);R=W(re,"g",[t],".","class","pyramidgroup"),R.attr("transform","translate("+(p/2-H.width/2)+","+(f/2-H.height/2)+")").style("cursor",ae),t=t[0].data[0],j=t.length,E=[],b=H.height,w=H.width,C=Z?H.height/6:0;var ne=25,le=Math.sqrt(Math.pow(C/Math.sin(ne*Math.PI/180),2)-Math.pow(C,2));w-=le,O=d3.scale.linear().range([(w+le)/2,0]).domain([0,b]),A=d3.scale.linear().range([(w+le)/2,w]).domain([0,b]),S=d3.scale.linear().range([(w+le)/2,w+le]).domain([0,b]),P=d3.scale.linear().range([(w+le)/2,le]).domain([0,b]),M=d3.scale.linear().range([0,C]).domain([0,b-C/2]),L=[H.width,H.height];var ie=0;k=t.reduce(function(e,t){return e+(t.disabled?0:(ie++,Math.abs(u.getY(t,c))))},0);var oe=0;t.forEach(function(e){E.push({
height:(oe+(e.disabled?0:Math.abs(u.getY(e,c))))/k*(b-C/2)||0,previousHeight:oe/k*(b-C/2)||0}),oe+=e.disabled?0:Math.abs(u.getY(e,c))}),N=W(R,"g",t),N.attr("id",function(e,t){return"section_"+(j-1-t)}).style({stroke:X,"stroke-opacity":G,"stroke-width":U,"fill-opacity":h,fill:function(e,t){var a=T[(j-1-t)%T.length],r=zt.get(g.gradients,a,L,"pyramid");return r?"url("+x+"#"+r+")":a}}).each(function(e,t){var a=d3.select(this),r=W(a,"path",[e,e,e,e]);r.attr("class","section_"+t)});var se={mousemove:function(){var a=this.parentNode,r=parseInt(d3.select(a).attr("id").replace(/section_/gi,"")),n=d3.event.touches?d3.event.touches[0]:d3.event,l={renderer:e,seriesPos:0,subseriesPos:0,itemPos:r,color:T[r%T.length],coordinates:[n.pageX,n.pageY],element:a,data:t[r]};z.eventHandler.mouseMove(l)},mouseout:function(){var a=this.parentNode,r=parseInt(d3.select(a).attr("id").replace(/section_/gi,""));z.eventHandler.mouseOut(e,t[r],r)},click:function(){var a=this.parentNode,r=parseInt(d3.select(a).attr("id").replace(/section_/gi,""));z.eventHandler.click(e,t[r],r)},dblclick:function(e){var a=this.parentNode,r=parseInt(d3.select(a).attr("id").replace(/section_/gi,"")),n=tt.annotation?Ie(t[r],null):t[r],l=E[r].previousHeight,i=[O(l+M(l)/2)+(p/2-H.width/2),M(l)/2+l+(f/2-H.height/2)],o={coordinate:i,data:n,basedOn:"plot"};z.eventHandler.doubleclick(e,r,o)}};te||fe(N.selectAll("path"),null,se,!0);var de=0;N.each(function(e,t){var a=R.selectAll("#section_"+t).selectAll("path");if(Y)a.transition().duration(ee).ease("linear").attr("d",function(e,a){return l(t,a)});else{var r=u.getY(e,c),n="vertical"==s?(e.disabled||!r?0:Math.abs(r))/k*ee:ee;de+=e.disabled||!r?0:Math.abs(r);var o="vertical"==s?(k-de)/k*ee:0;a.transition().duration(n).delay(o).ease($).attrTween("d",function(a,r){return i(e,t,r)})}}),setTimeout(function(){tt.labelRenderer&&tt.labelRenderer.drawLabel({renderer:e,chartObj:z,charttype:"funnel",args:[re.datum(),t,ie,0,k,H,o(t)]}),tt.annotation&&(y=tt.annotation.preprocessAnnotations(z.seriesdata,0,function(e,t,a){var r=E[a].previousHeight;return[O(r+M(r)/2)+(p/2-H.width/2),M(r)/2+r+(f/2-H.height/2)]},y,z,a)),Y=!0,e.chartRendered=!0},ee+10)})}function t(e,t){return"M"+O(e+M(e)/2)+" "+(M(e)/2+e)+" L"+A(e+M(e)/2)+" "+(M(e)/2+e)+" L"+A(t+M(t)/2)+" "+(M(t)/2+t)+" L"+O(t+M(t)/2)+" "+(M(t)/2+t)+" L"+O(e+M(e)/2)+" "+(M(e)/2+e)}function a(e,t){return"M"+A(e+M(e)/2)+" "+(M(e)/2+e)+" L"+S(e+M(e)/2)+" "+(-M(e)/2+e)+" L"+S(t+M(t)/2)+" "+(-M(t)/2+t)+" L"+A(t+M(t)/2)+" "+(M(t)/2+t)+" L"+A(e+M(e)/2)+" "+(M(e)/2+e)}function r(e,t){return"M"+S(e+M(e)/2)+" "+(-M(e)/2+e)+" L"+P(e+M(e)/2)+" "+(-M(e)/2+e)+" L"+P(t+M(t)/2)+" "+(-M(t)/2+t)+" L"+S(t+M(t)/2)+" "+(-M(t)/2+t)+" L"+S(e+M(e)/2)+" "+(-M(e)/2+e)}function n(e,t){return"M"+P(e+M(e)/2)+" "+(-M(e)/2+e)+" L"+O(e+M(e)/2)+" "+(M(e)/2+e)+" L"+O(t+M(t)/2)+" "+(M(t)/2+t)+" L"+P(t+M(t)/2)+" "+(-M(t)/2+t)+" L"+P(e+M(e)/2)+" "+(-M(e)/2+e)}function l(e,l,i){var o=E[e].height,s="down"==i?o:E[e].previousHeight;switch(l){case 0:return r(o,s);case 1:return n(o,s);case 2:return t(o,s);case 3:return a(o,s)}}function i(e,t,a){var r=d3.interpolate(l("vertical"==s?t:j-1,a,"down"),l(t,a));return function(e){return r(e)}}function o(e){var t=[];return e.forEach(function(a,r){var n=e.length-1-r,l=E[n].height,i=E[n].previousHeight,o=(l+i)/2,s={x:S(l+M(l)/2),y:-M(l)/2+l},d={x:S(i+M(i)/2),y:-M(i)/2+i},u={x:O(l+M(l)/2),y:M(l)/2+l},c={x:O(i+M(i)/2),y:M(i)/2+i},h=(s.x+d.x)/2,p=(s.y+d.y)/2,f=(u.x+c.x)/2,g=(u.y+c.y)/2,m=(O(o+M(o)/2)+A(o+M(o)/2))/2;t.push({rightx:h+B,leftx:f-B,y:p,y0:l+M(l)/2,midX:m,leftY:g})}),t}var s,d,u,c,h,p,f,g,m,y,v,x,b,k,w,C,O,A,S,P,M,T,E,z,R,L,N,j,B,D=.3,H={},Y=!1;return e.commonRendererProp=function(t){return arguments.length?(d=t,e):d},e.defaultMouseOverFunc=function(e,t,a){v?N.style("fill-opacity",function(e,t){return t==j-1-a?1:.2}):N.style("fill",function(e,t){var r=t==j-1-a?d3.rgb(T[a%T.length]).darker(.5):T[(j-1-t)%T.length],n=zt.get(g.gradients,r,L,"pyramid");return n?"url("+x+"#"+n+")":r})},e.defaultMouseOutFunc=function(){v?N.style("fill-opacity",h):N.style("fill",function(e,t){var a=T[(j-1-t)%T.length],r=zt.get(g.gradients,a,L,"pyramid");return r?"url("+x+"#"+r+")":a})},e},wt.sunburst=function(){function e(M){return M.each(function(T){var E=l.params;v=E.chartObj,w=E.commonPlotOptions,y=E.color,x=E.notesArray,f=E.yaxiscolumnorder,u=E.dataset,h=v.systemConf,g=v.plotarea.width,m=v.plotarea.height;var z=tt.utils.getValueOfPlotOptions,R=+w.innerRadius||0,L=+w.outerPadding||0,N=0==I(ye(null,w,v,"enabled"),!0),j=N?null:w.events?w.events.cursor||"pointer":h.chart.plot.events.cursor||"pointer",B=q(w,null,v,"sunburst"),D=B.enabled,H=B.type,Y=B.easingType,F=P?D?200:0:B.duration;d=Math.min(g,m)/2-L,i=d3.scale.linear().range([0,2*Math.PI]),o=d3.scale.linear().range([0,d]);var _=d3.layout.partition().value(function(e){return null!=e.parent&&e.parent.disabled?0:Math.abs(u.getY(e,f))}).children(function(e,t){return 1==t?e.data[0]:e.data}).sort(null);C=function(e){return Math.max(0,Math.min(2*Math.PI,i(e.x)))},O=function(e){return Math.max(0,Math.min(2*Math.PI,i(e.x+e.dx)))},A=function(e){return 1==e.depth?Math.min(Math.max(0,R),Math.max(0,o(e.y))):Math.max(0,o(e.y))},S=function(e){return function(t){return Math.max(0,e(t.y+t.dy))}},s=d3.svg.arc().startAngle(C).endAngle(O).innerRadius(A).outerRadius(S(o)),c=d3.svg.arc().startAngle(C).endAngle(O).innerRadius(A).outerRadius(S(o));var V=0,J=0;k=W(M,"g",[{data:T}],".","class","sunburstgroup"),k.attr("transform","translate("+g/2+","+m/2+")").style("cursor",j),p=[],k.selectAll("path").each(function(e){p.push({x:e.x,dx:e.dx})}),b=W(k,"path",_.nodes),b.transition().duration(F).ease(P?"linear":Y).attrTween("d",P||"fan"===H?t:"wheel"===H?r:a);var X=0;b.attr("class",function(e,t){e.idx=t,e.parent&&!e.parent.depth&&X++,e.seriesPos=X-1;for(var a=e.seriesPos+1+1,r=0;r<e.seriesPos;r++)a+=T[r].data[0].length;return e.itemPos=t-a,"burst_"+(X-1)}).attr("id",function(e,t){return"arcPath_"+e.seriesPos+"_"+e.itemPos+"_"+t}).each(function(e){if(1==e.depth)J=0,e.arcColor=y[V++%y.length],e[u.xidx]=e.children.map(function(e){return u.getX(e)}),e[u.yidx(f)]=e.value;else if(0==e.depth)e.arcColor=e.arcColor||"white";else{var t=d3.scale.linear().domain([0,n(e.parent)]).range([e.parent.arcColor,d3.rgb(e.parent.arcColor).brighter(1.5)]),a=T[e.seriesPos].plotoptions,r=null!=a?z(a,w)("childrenColors"):w.childrenColors;e.arcColor=null!=r?r[J%r.length]:t(J),J++}e.arcColor=null!=v.systemConf.legend.patternPallete&&""!=v.systemConf.legend.patternPallete&&0!=e.depth?y[e.seriesPos%y.length]:e.arcColor}),b.style({fill:function(e){return e.arcColor},stroke:function(e){return e.depth?z(T[e.seriesPos].plotoptions,w)("strokeColor"):"white"},"stroke-opacity":function(e){return e.depth?z(T[e.seriesPos].plotoptions,w)("strokeOpacity"):1},"fill-opacity":function(e){return e.depth?z(T[e.seriesPos].plotoptions,w)("fillOpacity"):1},"stroke-width":function(e){return e.depth?z(T[e.seriesPos].plotoptions,w)("strokeWidth"):1}});var U={mousemove:function(t){var a=d3.event.touches?d3.event.touches[0]:d3.event,r={renderer:e,seriesPos:t.seriesPos,subseriesPos:0,itemPos:t.itemPos,coordinates:[a.pageX,a.pageY],element:this,color:t.arcColor,data:t};v.eventHandler.mouseMove(r)},mouseout:function(t){v.eventHandler.mouseOut(e,t,t.seriesPos)},click:function(t){v.eventHandler.click(e,t,t.seriesPos)},dblclick:function(t){if(e.chartRendered){var a=null==t.children?null!=tt.annotation?Ie(t,T.length>1?t.parent.seriesname:null):t:[t.seriesname,t.value],r=c.centroid(t);r=[r[0]+g/2,r[1]+m/2];var n={coordinate:r,data:a,basedOn:"plot"};v.eventHandler.doubleclick(t,t.seriesPos,n)}}};N||fe(b.filter(function(e){return 0!=e.depth}),null,U,!0),setTimeout(function(){if(null!=tt.labelRenderer){var t=d3.scale.linear().range([0,d+w.datalabels.padding]),a=d3.svg.arc().startAngle(C).endAngle(O).innerRadius(S(o)).outerRadius(S(o)),r=d3.svg.arc().startAngle(C).endAngle(O).innerRadius(S(t)).outerRadius(S(t));tt.labelRenderer.drawLabel({renderer:e,chartObj:v,charttype:"pie",args:[T,null,d,function(e){return e.parent.value},r,a,c,[g/2,m/2]]})}null!=tt.annotation&&T.forEach(function(e,t){x=tt.annotation.preprocessAnnotations(T,t,function(e){var t=c.centroid(e);return[t[0]+g/2,t[1]+m/2]},x,v,E)}),P=!0,e.chartRendered=!0},F+10)}),e}function t(e,t){var a=d3.interpolate(P?C(p[t]):0,C(e)),r=d3.interpolate(P?O(p[t]):0,O(e));return function(t){return s.startAngle(a(t)).endAngle(r(t)),s(e)}}function a(e){var t=d3.interpolate(0,A(e)),a=d3.interpolate(0,S(o)(e));return function(r){return s.innerRadius(t(r)).outerRadius(a(r)),s(e)}}function r(e){var t=d3.interpolate(C(e),O(e));return function(a){return s.endAngle(t(a)),s(e)}}function n(e){return e.children.length}var l,i,o,s,d,u,c,h,p,f,g,m,y,v,x,b,k,w,C,O,A,S,P=!1;return e.commonRendererProp=function(t){return arguments.length?(l=t,e):l},e.defaultMouseOverFunc=function(e,t){b.style("fill",function(e){return e.arcColor}),k.selectAll("path#arcPath_"+e.seriesPos+"_"+e.itemPos+"_"+e.idx).style(v.legendHighlight.getEffect(v.legendHighlight.getLegendHighlightEffect(t,"selectedSeries"),"sunburst",e.arcColor))},e.defaultMouseOutFunc=function(){b.style("fill",function(e){return e.arcColor})},e},wt.pie=function(){function e(t,O){return t.each(function(t){var S=s.params;d=S.chartObj,P=S.commonPlotOptions,f=S.color,T=S.notesArray,M=d.systemConf;var U=S.yaxiscolumnorder,Z=S.dataset,K=S.datasetIndex||0,Q=d.defsLocation,$=d.seriesdata[K],ee=c($.type||d.userdata.seriesdata.type,"string"),te="bubblepie"===ee;E="dial"===ee,_=te?I(P.dataindex,3):Z.yidx(U),F=Y||(E?d.plotarea_approx:d.plotarea),k=F.width,b=F.height,u=I(F.radius,Math.min(k,b)/2);var ae=$.plotoptions,ne=tt.utils.getValueOfPlotOptions(ae,P),le=I(ne("maxRadius"),250),ie=(ne("fillOpacity"),P.levelMarker),oe=E||te?0:+ne("outerPadding"),se=ne("strokeWidth"),de=Ge(P.datalabels,d),ue=+(P.datalabels.padding||0),ce={},he=0;if(z=Math.min(le,u-oe),!E&&!te&&de){var pe=k*V,ge=k-2*z;pe>ge&&(ue=ce.padding=5,he=Math.max(pe-ge,0),z-=he/2)}h=Math.max(0,re(ne("innerRadius"),z,0)),se=I(se,1),z=E&&JSON.parse(ie.enabled)?z+Math.min(0,re(ie.outerPadding,u,0)):z,h=E&&JSON.parse(ie.enabled)?h-Math.min(0,re(ie.innerPadding,u,0)):h,z-=.5*se,R=Math.max(h,z),B=ae&&ae.models?Rt(P.models,ae.models,!0):P.models;var me=q(P,ae,d,ee),ve=me.enabled,xe=ve?G?200:me.duration:0,be=me.easingType,ke=me.type,we=0==I(ye(ae,P,d,"enabled"),!0),Ce=we?null:ye(ae,P,d,"cursor")||"pointer";g=d3.select(this),m=W(g,"g",[t],".","class","piegroup"),m.style({"stroke-width":se,"fill-opacity":ne("fillOpacity"),"stroke-opacity":1,cursor:Ce}),J.startAngle(JSON.parse(P.startAngle)).endAngle(JSON.parse(P.endAngle)).value(function(e){return e.disabled?0:Math.abs(e[_]||0)});var Oe=J(t=te?t:$.data[0]);e.data=Oe,N=Oe.reduce(function(e,t){return e+(t.value?1:0)},0),p=Oe.reduce(function(e,t){return e+t.value},0);var Ae=!0;if(Ae)X.outerRadius(R).innerRadius(h);else{var Se=re(ie.interPadding,R,10),Pe=t.length,Me=(R-h-(Pe-1)*Se)/Pe;X.innerRadius(function(e,t){return t*(Me+Se)+h}).outerRadius(function(e,t){return(t+1)*Me+t*Se+h}).startAngle(P.startAngle).endAngle(function(e){return e.endAngle})}A=d3.svg.arc().innerRadius(R).outerRadius(R+ue);var Te=d3.svg.arc().innerRadius(R).outerRadius(R);L=se;var Ee=o(m),ze=(Ee.height+se)/z,Re=(Ee.width+se)/z,Le=z+Math.min((k-2*oe-he-(Ee.width+se))/Re,(b-2*oe-he-(Ee.height+se))/ze);if(Le=Math.min(le,Math.max(z,Le)),E){var Ne=d.axes.yaxes.groups[0].scale;Oe.forEach(function(e){e.endAngle=Ne(e.value)})}else Le!=z&&(z=Le,h=Math.max(0,re(ne("innerRadius"),z,0)),R=Math.max(h,z),X.outerRadius(R).innerRadius(h),A=d3.svg.arc().innerRadius(R).outerRadius(R+ue),Te=d3.svg.arc().innerRadius(R).outerRadius(R),o(m));var je=!E&&B.type?"url("+Q+"#"+r(a())+")":null,Be=[R,R];if(j=2*re(ne("sliceOutHeight"),z,0),C=m.selectAll("path").data(),w=W(m,"path",Oe),w.attr({"clip-path":je,id:function(e,t){return"arc_"+t}}).style({display:"block",fill:function(e,t){var a=f[t%f.length],r=zt.get(P.gradients,a,Be,"pie");return r?"url("+Q+"#"+r+")":a},stroke:function(e,t){return ne("strokeColor")||f[t%f.length]}}),!we){var De={mousemove:function(t,a){var r=d3.event.touches?d3.event.touches[0]:d3.event,n={renderer:e,seriesPos:0,subseriesPos:0,itemPos:a,color:f[a%f.length],coordinates:[r.pageX,r.pageY],element:this,data:t};d.eventHandler.mouseMove(n)},mouseout:function(t,a){d.eventHandler.mouseOut(e,t,a)},click:function(t){d.eventHandler.click(e,t.data)},dblclick:function(e,t){var a=tt.annotation?Ie(e.data,null):e.data,r=A.centroid(e);r=[r[0]+D,r[1]+H];var n={coordinate:r,data:a,basedOn:"plot"};d.eventHandler.doubleclick(e,t,n)}};fe(w,null,De,!0)}if(/(\D)+onebyone/.test(ke)&&!G){var He="fanonebyone"==ke,Ye=He?xe:xe/N,Fe=0;w.transition().ease(be).duration(function(e){return He?Ye*(e.value/p):Ye}).delay(function(e){var t=Ye*Fe;return Fe+=He?e.value/p:1,t}).call(He?l:n)}else w.transition().duration(xe).ease(be).call("fanAll"==ke||G?i:"inner"==ke?n:l).each("end",function(e){var t=e.data.disabled||!e.value;d3.select(this).style("display",t?"none":"block")});g.transition().delay(xe).duration(0).each("end",function(){if(E)wt.dial.endFunctions();else if(w.style("display",function(e){return e.data.disabled||!e.value?"none":null}),tt.labelRenderer){var t=te?[F.left+D,F.top+H]:[D,H];tt.labelRenderer.drawLabel({renderer:e,charttype:"pie",chartObj:d,args:[m.datum(),Oe,R,p,A,Te,X,t,O,ce]})}y=d.staticPaneSVG.selectAll("g.insidelabel_0"),v=d.staticPaneSVG.selectAll("g.link_0"),x=d.staticPaneSVG.selectAll("g.label_0"),tt.annotation&&!te&&(T=tt.annotation.preprocessAnnotations(d.seriesdata,0,function(e,t,a){var r=A.centroid(Oe[a]);return[r[0]+D,r[1]+H]},T,d,S)),e.chartRendered=!0,G=!0})}),e}function t(e){for(var t=[],a=[],r=0,n=0;e>n;n++)"gear1"==B.type?a.push([r++,0],[r++,1],[r++,1]):a.push([r,0],[r++,1],[r,1],[r++,0]);return t.push(a),t}function a(){var e=-1,a=B.count,r="zigzag"==B.type?-50+h/5:"sun"==B.type?-1:-10,n=t(a),l=d3.scale.linear().range([0,2*Math.PI]).domain([0,"gear1"==B.type?3*a:2*a]),i=d3.scale.linear().range([h,R]).domain([r,1]),o=d3.svg.line.radial().interpolate("linear-closed").radius(function(e){return i(e[1])}).angle(function(t,a){return e="gear"==B.type?a%2==0?e+1:e:"gear1"!=B.type&&a%2!=0?e+1:e,l("gear1"==B.type?e++:e)});return o(n[0])}function r(e){var t=O({OR:R,model:B.type,count:B.count,IR:h},"pieModels"),a=(Mt.SAFARI?d.svg:Pt.patternSVG).selectAll("defs"),r=W(a,"clipPath",[1],"#","id",t),n=W(r,"path",[1]);return n.attr("d",e),t}function n(e){e.attrTween("d",function(e){var t=d3.interpolate(h,R);return function(a){return X.outerRadius(t(a)),X(e)}})}function l(e){e.attrTween("d",function(e){var t=d3.interpolate(e.startAngle,e.endAngle);return function(a){return e.endAngle=t(a),X(e)}})}function i(e){e.attrTween("d",function(e,t){var a=C[t]||C[C.length-1],r=G&&a?a.endAngle:JSON.parse(P.startAngle),n=G&&a?C[t]?a.startAngle:a.endAngle:JSON.parse(P.startAngle),l=d3.interpolate(r,e.endAngle),i=d3.interpolate(n,e.startAngle);return function(a){return e.endAngle=l(a)||0,e.startAngle=i(a)||0,X(e,t)}})}function o(t){var a=[];a[_]=1;var r=g.append("path").attr("d",X(J([a])[0],e.data.length-1)).style({fill:"none",stroke:"none"}),n=S(r.node());r.remove();var l=ae(n,k,b,z,L);return D=E?F.x:l[0],H=E?F.y:l[1],t.attr("transform",function(){return"translate("+D+","+H+")"}),n}var s,d,u,h,p,f,g,m,y,v,x,b,k,w,C,A,P,M,T,E,z,R,L,N,j,B,D,H,Y,F,_,V=.3,J=d3.layout.pie().sort(null),X=d3.svg.arc(),U=function(e){return ee(j,(e.startAngle+e.endAngle)/2)},G=!1;return e.commonRendererProp=function(t){return arguments.length?(s=t,e):s},e.plotarea=function(t){return arguments.length?(Y=t,e):Y||F},e.innerRadius=function(t){return arguments.length?(h=t,e):h},e.defaultMouseOverFunc=function(t,a,r){if(1!=N){w.transition().ease("linear").attr("transform","translate(0,0)");var n=U(t);m.selectAll("#arc_"+r).transition().ease("linear").attr("transform","translate("+n[0]+","+n[1]+")"),y.selectAll("#label_"+r).transition().ease("linear").attr("transform",function(){var e=d3.select(this).attr("translated"),a=U(t);e=e?e.split(/,| /).map(function(e){return JSON.parse(e)}):null;var r=(e||X.centroid(t))[0]+a[0],n=(e||X.centroid(t))[1]+a[1];return"translate("+r+","+n+")"}),v.selectAll("#link"+r).style("stroke-width",3*e.lineStrokeWidth),"circular"==e.showlabel&&x.selectAll("#outsidelabel_"+r).transition().ease("linear").attr({x:function(e){return A.centroid(e)[0]+U(e)[0]},y:function(e){return A.centroid(e)[1]+U(e)[1]}}),x.selectAll("#outsidelabel_"+r).style("text-shadow","0 0 0 rgba(0,0,0,1)")}},e.defaultMouseOutFunc=function(){w.transition().ease("linear").attr("transform","translate(0,0)"),y.selectAll("text").transition().ease("linear").attr("transform",function(e){var t=d3.select(this).attr("translated")||X.centroid(e);return"translate("+t+")"}),v.selectAll("path").style("stroke-width",e.lineStrokeWidth),"circular"==e.showlabel&&x.selectAll("text").transition().ease("linear").attr({x:function(e){return A.centroid(e)[0]},y:function(e){return A.centroid(e)[1]}}),x.selectAll("text").style("text-shadow",null)},e},wt.dial=function(){function e(l){return l.each(function(l){var w=i.params;o=w.chartObj,u=w.commonPlotOptions,d=w.color,c=w.dataset,h=w.yaxiscolumnorder,g=o.systemConf;var C=l[0].plotoptions;p=Math.max(0,c.getY(l[0].data[0][0],h));var O=o.defsLocation;m=o.axes.yaxes.groups[0].scale,v=m.domain(),f=o.plotarea_approx,u=C?Rt(u,C,!0):u;var A=q(u,C,o,"dial"),S=A.enabled,P=A.easingType,M=x?S?200:0:A.duration,T=d3.select(this).data(t(l));y=T.selectAll("path.dial").data();var E=u.levelMarker,z=f.radius,R=I(E.strokeWidth,1),L=!0,N=re(u.innerRadius,z,0),j=d3.svg.arc().endAngle(function(e){return m(e[1])});if(L)j.innerRadius(N+Math.max(0,re(E.innerPadding,z,0))).outerRadius(z-Math.max(0,re(E.outerPadding,z,0))-.5*R).startAngle(function(e){return m(e[0])});else{var B=re(E.interPadding,z,10),D=l[0].data[0].length,H=(z-N-(D-1)*B)/D;j.innerRadius(function(e,t){return t*(H+B)+N}).outerRadius(function(e,t){return(t+1)*H+t*B+N}).startAngle(u.startAngle)}var Y=W(T,"g",[1],".","class","levelmarkerSeries"),F=W(Y,"path",JSON.parse(E.enabled)?a(l,E):[]);F.attr({transform:"translate("+f.x+","+f.y+")",d:j}).style({stroke:function(e,t){return E.strokeColor||b[t]},"stroke-width":R,"stroke-opacity":E.strokeOpacity,"fill-opacity":E.fillOpacity,fill:function(e,t){var a=b[t],r=zt.get(u.gradients,a,[z,z],"pie");return r?"url("+O+"#"+r+")":a}}),i.commonPlotOptions(u),k.commonRendererProp(i),k.chartRendered=!1,T.call(k),s=k.innerRadius();var _=W(T,"path",JSON.parse(u.needle.show)?[p]:[],".","class","dial");_.attr("d",r()).style({stroke:u.needle.strokeColor||"black","stroke-width":u.needle.strokeWidth,fill:u.needle.fillColor||"none"}).transition().duration(M).ease(P).call(n),tt.labelRenderer&&tt.labelRenderer.drawLabel({renderer:e,charttype:"dial",chartObj:o,args:[l]})}),e}function t(e){var t=e[0].data[0];return e[0].data[0]=[t[0]],[e]}function a(e,t){var a=[],r=e[0].data[0],n=r[0][t.dataindex]||t.values||[],l=t.color;if(n.length>0){var i=n.slice(0);if(!l)var o=d[0],s=[0,i.length-1],u=[JSON.parse(t.colorGamma[0]),JSON.parse(t.colorGamma[1])],c=A(o,s,u);i.sort(d3.ascending);var h=v[0];i.forEach(function(e,t){var r=n.indexOf(e);a[t]=[h,e],b[t]=l?l[r]:c(r),h=e})}else r.forEach(function(e,t){a[t]=v,b[t]=(l instanceof Array?l[t]:l)||"#d1d1d1"});return a}function r(){var e=u.needle,t=JSON.parse(e.width)/2||7,a=-re(e.innerRadius,f.radius,0),r=-re(e.radius,f.radius,s)+JSON.parse(e.padding);switch(e.type){case"clock":return"M"+t+" "+a+" A"+t+" "+t+" 0 0 1 "+-t+" "+a+" A"+t+" "+t+" 0 0 1 "+t+" "+a+" M0 "+(a-t)+" L0 "+r+" M"+-t+" "+(t+r)+" L0 "+r+" L"+t+" "+(t+r)+" L0 "+r;case"sharp":return"M"+t+" "+a+" L0 "+(a+t)+" L"+-t+" "+a+" L0 "+r+" L"+t+" "+a;default:return"M"+t+" "+a+" A"+t+" "+t+" 0 0 1 "+-t+" "+a+" L0 "+r+" L"+t+" "+a}}function n(e){var t=f.x,a=f.y;e.attrTween("transform",function(e){var r=d3.interpolate(x&&null!=y[0]?y[0]:v[0],e);return function(e){return"translate("+t+","+a+") rotate("+l(m(r(e)))+",0,0)"}})}function l(e){return 180*e/Math.PI}var i,o,s,d,u,c,h,p,f,g,m,y,v,x=!1,b=[],k=wt.pie();return e.commonRendererProp=function(t){return arguments.length?(i=t,e):i},wt.dial.endFunctions=function(){e.chartRendered=!0,x=!0},e},wt.packedbubble=function(){function e(h){return h.each(function(p){var f=r.params;i=f.chartObj;var g=f.color,m=f.notesArray,y=f.yaxiscolumnorder,v=f.dataset,x=i.systemConf;o=f.commonPlotOptions;var b=p.filter(function(e,t){return e.seriesIndex=t,c[t]=[],!e.disabled}),k=i.plotarea.width,w=i.plotarea.height,C=tt.utils.getValueOfPlotOptions;s=o.mode;var O=+o.interPadding||0,A=+o.outerPadding||0,S=Math.min(k,w)-A,P=0==I(ye(null,o,i,"enabled"),!0),M=o.events?o.events.cursor||"pointer":x.chart.plot.events.cursor||"pointer",T=q(o,null,i,"packedbubble"),E=T.enabled,z=T.type,R=T.easingType,L=u?E?200:0:T.duration,N=function(){var e=d3.select(this).attr("transform");return null!=e?e:"translate("+S/2+","+S/2+")"},j=function(e){return"translate("+e.x+","+e.y+")"},B=function(){var e=d3.select(this).attr("r");return null!=e?e:0},D=function(e){return e.r},H=function(e){return e.depth?C(p[e.seriesPos].plotoptions,o)("fillOpacity"):o.fillOpacity},Y=function(e){return e.depth?C(p[e.seriesPos].plotoptions,o)("strokeOpacity"):o.strokeOpacity},F=!u&&("fade"===z||"fadeAll"===z);d.size([S,S]).value(function(e){return v.getY(e,y)}).children(function(e){return a(e)}).padding(O).sort(null),n=W(h,"g",[1],".","class","packedbubblegroup"),n.attr("transform","translate("+(k-S)/2+","+(w-S)/2+")").style("cursor",M),l=W(n,"circle",d.nodes(t({data:b}))),l.attr({"class":function(e){return"packedbubble_"+e.seriesPos},id:function(e,t){return"packedbubble_"+(e.idx=t)},transform:F?j:N,r:F?D:B}).style({fill:function(e){return e.arcColor=e.depth?g[e.seriesPos%g.length]:"flat"==s?"none":"grey"},"fill-opacity":F?0:H,"stroke-opacity":F?0:Y,stroke:function(e){return(e.depth?C(p[e.seriesPos].plotoptions,o)("strokeColor"):o.strokeColor)||e.arcColor},"stroke-width":function(e){return e.depth?C(p[e.seriesPos].plotoptions,o)("strokeWidth"):o.strokeWidth}});var _=l.size(),V=u||"fade"!==z?L:L/_,J="fade"===z?V:0;l.transition().delay(function(e,t){return u?0:t*J}).duration(V).ease(u?"linear":R).attr({transform:j,r:D}).style({"fill-opacity":H,"stroke-opacity":Y});var X={mousemove:function(t){var a=d3.event.touches?d3.event.touches[0]:d3.event,r={renderer:e,seriesPos:t.seriesPos,subseriesPos:0,itemPos:t.itemPos,coordinates:[a.pageX,a.pageY],element:this,color:t.arcColor,data:t};i.eventHandler.mouseMove(r)},mouseout:function(t){i.eventHandler.mouseOut(e,t,t.seriesPos)},click:function(t){i.eventHandler.click(e,t,t.seriesPos)},dblclick:function(t){if(e.chartRendered){var a=tt.annotation?Ie(t,p.length>1?t.parent.parent.seriesname:null):t,r=[t.x,t.y];r=[r[0]+(k-S)/2,r[1]+(w-S)/2];var n={coordinate:r,data:a,basedOn:"plot"};i.eventHandler.doubleclick(t,t.seriesPos,n)}}};P||fe(l.filter(function(e){return!e.children}),null,X,!0),setTimeout(function(){if(tt.annotation&&p.forEach(function(e,t){m=tt.annotation.preprocessAnnotations(p,t,function(e){var t=[e.x,e.y];return[t[0]+(k-S)/2,t[1]+(w-S)/2]},m,i,f)}),tt.labelRenderer){var t=[],a=[(k-S)/2,(w-S)/2],r=function(e){return e.parent.value};p.forEach(function(n,l){t.push({renderer:e,charttype:"scatter",chartObj:i,args:[p[l],l,null,null,r,c[l],a]})}),tt.labelRenderer.drawLabelsFromQueue(t,[],i)}u=!0,e.chartRendered=!0},L+17)}),e}function t(e){function t(e,l){var i=a(e);i?i.forEach(function(e,a){var n=D(l)?l+"_"+a:e.seriesIndex+"";r(e,n),t(e,n)}):(r(e,l),c[e.seriesPos].push(e),"flat"==s&&n.push(e))}function r(e,t){var a=t.split(/_/);e.seriesPos=+a[0],e.itemPos=+a[a.length-1]}var n=[];return t(e),"flat"==s?n:e}function a(e){return e.data?e.data:e[0]instanceof Array?e:null}var r,n,l,i,o,s,d=d3.layout.pack(),u=!1,c=[];return e.commonRendererProp=function(t){return arguments.length?(r=t,e):r},e.defaultMouseOverFunc=function(e,t){l.style({fill:function(e){return e.arcColor},"stroke-width":function(e){return 0!=e.depth?tt.utils.getValueOfPlotOptions(i.seriesdata[e.seriesPos].plotoptions,o)("strokeWidth"):o.strokeWidth}}),n.selectAll("circle#packedbubble_"+e.idx).style(i.legendHighlight.getEffect(i.legendHighlight.getLegendHighlightEffect(t,"selectedSeries"),"packedbubble",e.arcColor))},e.defaultMouseOutFunc=function(){l.style({fill:function(e){return e.arcColor},"stroke-width":function(e){return e.depth?tt.utils.getValueOfPlotOptions(i.seriesdata[e.seriesPos].plotoptions,o)("strokeWidth"):o.strokeWidth}})},e},wt.bubblepie=function(){function e(t){return t.each(function(t){var a=n.params,r=a.chartObj,i=a.datasetIndex,o=a.commonPlotOptions,s=a.dataset,d=a.axisrotated,u=a.stacked,h=a.xscale,p=a.yscale,f=a.yaxiscolumnorder,g=d3.select(this),m=t[i],y=m.plotoptions,v=(m.data,c(m.type||r.userdata.seriesdata.type,"string"),q(o,y,r,"bubblepie")),x=v.duration,b=r.dataObject.bubblepieData,k=r.subrenderer,w=W(g,"g",[1],".","class","scatterseries");b.forEach(function(e,t){k[t]=k[t]||{};var a=W(w,"g",[1],".","class","subseries_"+t),l=a.selectAll("g.scatter").data(e,function(e){return s.getX(e)});l.enter().append("g").attr("class","scatter"),l.exit().remove(),l.each(function(e,a){var l=e[r.bubblePieRendererIndex],i=s.getX(l);k[t][i]=(k[t][i]||wt.pie()).commonRendererProp(n);var o=r.dataObject.getXYvalue(d,u,h,p,f,l,"x")||0,c=r.dataObject.getXYvalue(d,u,h,p,f,l,"y")||0,g=r.dataObject.getXYvalue(d,u,h,p,f,l,"z",r.zscale);k[t][i].plotarea({width:g,height:g,left:o-g/2,top:c-g/2}),k[t][i].chartRendered=!1,d3.select(this).attr("transform","translate("+(o-g/2)+","+(c-g/2)+")").call(k[t][i],t+"_"+a)})}),setTimeout(function(){l=!0,e.chartRendered=!0},x)}),e}var t,a,r,n,l=!1;return e.commonRendererProp=function(t){return arguments.length?(n=t,e):n},e.shiftInfo=function(t){return arguments.length?(r=t,e):r},e.threshold=function(a){return arguments.length?(t=a,e):t},e.thresholdType=function(t){return arguments.length?(a=t,e):a},e},tt.axis.threshold=function(e,t){function a(e,t,a,r){return e?(e.threshold||(e.threshold={}),e.threshold[r]=t.show?"line"==r?tt.axis.threshold.line():tt.axis.threshold.range():null,e.threshold[r]):null}function r(t,a,r,n,i,o){var s;return l.axisObj=function(e){return arguments.length?(a=e,l):a},l.thresholdIndex=function(e){return arguments.length?(r=e,l):r},l.type=function(e){return arguments.length?(n=e,l):n},l.values=function(e){return arguments.length?(s=e,l):s},l.chartObj=function(t){return arguments.length?(e=t,l):e},l.thresholdIndex(r).type(n).values(o.values).chartObj(e),"line"==i&&l.axisObj(a),t.parentObj(l),t}function n(t,n,l,i,o,s,d){var u=e.staticPaneSVG.selectAll("g.threshold"),c=e.svg.selectAll("g."+o+"-axis-"+l),h=null==c||""!=c.style("visibility")&&"visible"!=c.style("visibility")?"hidden":"visible",p=W(u,"g",JSON.parse(d.show||null)&&"visible"==h?[n]:[],".","class","threshold"+s+"-"+o+"-axis-"+l);if(null!=t&&JSON.parse(n.show||null)){var f=i&&null!=t.threshold&&null!=t.threshold[s]?t.threshold[s]:a(t,n,l,s);f=r(f,t,l,o,s,d),p.call(f)}}var l={},i=e.systemConf,o=i.chart.axes.xaxis,s=R(e.userdata,"chart.axes.xaxis")?e.userdata.chart.axes.xaxis:{};null!=s.threshold&&null!=s.threshold.line&&n(e.axes.xaxis,o.threshold.line,0,t,"x","line",s.threshold.line),null!=s.threshold&&null!=s.threshold.range&&n(e.axes.xaxis,o.threshold.range,0,t,"x","range",s.threshold.range);for(var d=i.chart.axes.yaxis,u=R(e.userdata,"chart.axes.yaxis")?e.userdata.chart.axes.yaxis:{},c=0;c<e.axesCount;c++)null!=u&&null!=u[c]&&null!=u[c].threshold&&null!=u[c].threshold.line&&n(e.axes.yaxes.groups[c],d[c].threshold.line,c,t,"y","line",u[c].threshold.line),null!=u&&null!=u[c]&&null!=u[c].threshold&&null!=u[c].threshold.range&&n(e.axes.yaxes.groups[c],d[c].threshold.range,c,t,"y","range",u[c].threshold.range)},tt.axis.threshold.textAlign=function(e,t,a,r,n,l){var i;return n=n||0,"left"==e?i=r?"left"==l||"bottom"==l?"x"==t?n:a.height-n:"x"==t?n:a.height-n:"left"==l||"bottom"==l?"x"==t?a.height-n:n:"x"==t?n:a.width-n:"center"==e?i=r?"x"==t?(a.width+n)/2:(a.height-n)/2:"left"==l||"bottom"==l?"x"==t?(a.height-n)/2:(a.width+n)/2:"x"==t?(a.height+n)/2:(a.width-n)/2:"right"==e&&(i=r?"x"==t?a.width:0:"left"==l||"bottom"==l?"x"==t?0:a.width:"x"==t?a.height:0),i},tt.axis.threshold.line=function(){function e(u){u.each(function(u){var c=d3.select(this);e.update=function(){c.transition().call(e)},n=o.chartObj(),t=o.thresholdIndex(),i=o.type(),s=o.axisObj(),d=o.values(),a=n.plotarea;var h=s.scale,p=h.range();p=p.slice(0,p.length),p.sort(function(e,t){return e-t});var f=null!=h.rangeBand?h.rangeBand()/2:0,m=u.label,y=u.marker,v=null!=y&&null!=y.enabled?JSON.parse(y.enabled):!0;l=n.axes.rotated,r=n.systemConf;var b=[],k=[],w=[],C={x:2,y:2},O=r.chart.axes.xaxis.axisline,A=r.chart.axes.yaxis[t].axisline;D(O)&&O.show&&(C.x+=+O.strokeWidth-1),D(A)&&A.show&&(C.y+=+A.strokeWidth-1);var S,M=0,T=[],E=[],z=[],R=[],L=[],N=[],j=n.dataset.getDataType(i,t),I=n.dataset.getColumn(i,t);"time"==j&&(S=Nt(I,"time")||null),d.map(function(e,t){var a=null!=e&&""!=e?"time"==j?Te(e,null,S).getTime():e:null;null!=e&&""!==e&&h(a)+f>=p[0]&&h(a)+f<=p[p.length-1]&&(b[M]=a,k[M]=je(Nt(u,"label.text["+t+"]")||"",d,I,n),w[M]=(Y(u.color)?u.color[t]:u.color)||"black",T[M]=D(u.label)?(Y(u.label.hAlign)?u.label.hAlign[t]:u.label.hAlign)||"center":"center",z[M]=(Y(u.strokeWidth)?u.strokeWidth[t]:u.strokeWidth)||1,E[M]=Y(u.dashStyle)?u.dashStyle[t]:u.dashStyle,R[M]=D(u.marker)&&u.marker.enabled?(Y(u.marker.strokeWidth)?u.marker.strokeWidth[t]:u.marker.strokeWidth)||2:null,N[M]=u.marker&&u.marker.enabled?(Y(u.marker.size)?u.marker.size[t]:u.marker.size)||1:null,M++)});var B=n.container.node().getBoundingClientRect(),H={left:B.left+a.left,top:B.top+a.top,width:a.width,height:a.height,right:B.left+a.left+a.width,bottom:B.top+a.top+a.height},F=s.component.orient(),_={top:0,left:0,right:0,bottom:0},V="..";c.attr("transform","translate("+a.left+","+a.top+")");var X=W(c,"g",[u],".","class","thresline-"+t),U=n.container.selectAll("div.plotareaBorder-property").node(),G=U.border||U["border-"+F],Z="left"==F?U.border||U["border-right"]:"right"==F?U.border||U["border-left"]:null,q=null==G||null==G.clr||"transparent"==G.clr?0:G.size,K=null==Z||null==Z.clr||"transparent"==Z.clr?0:Z.size,Q=q+K,$=W(X,"path",null!=y&&v?b:[],".","class","marker");$.attr("d",function(e,t){return x(Y(y.symbol)?y.symbol[t]:y.symbol)(10*N[t])}).style("stroke-width",function(e,t){return R[t]||2}).style("stroke",function(e,t){return(Y(y.strokeColor)?y.strokeColor[t]:y.strokeColor)||w[t]}).attr("fill",function(e,t){var a=Y(y.fillColor)?y.fillColor[t]:y.fillColor;return a||(null===a?w[t]:"white")}),$.attr("transform",function(e,t){var r=R[t]/2,n=d3.select(this).node().getBBox();L[t]=n.width+q;var l="bottom"==F||"top"==F?h(e)+f:"left"==F?r+q+n.width/2:a.width-(r+q+n.width/2),i="bottom"==F?a.height-r-(Q+n.width/2):"top"==F?r+Q+n.height/2:h(e)+f;return"translate("+l+","+i+")"});var ee=W(X,"line",b);ee.attr("x1",function(e,t){return"bottom"==F||"top"==F?h(e)+f:"left"==F?(L[t]||0)+R[t]:0}).attr("y1",function(e,t){return"bottom"==F?0:"top"==F?(L[t]||0)+R[t]:h(e)+f}).attr("x2",function(e,t){return"bottom"==F||"top"==F?h(e)+f:"left"==F?a.width-K:a.width-R[t]-(L[t]||0)}).attr("y2",function(e,t){return"bottom"==F?a.height-R[t]-(L[t]||0):"top"==F?a.height:h(e)+f}).attr("stroke",function(e,t){return"    "+w[t]}).attr("stroke-width",function(e,t){return z[t]+"px"}).attr("shaperendering","crispedges").attr("stroke-dasharray",function(e,t){return g(E[t],z[t])});var te=W(X,"text",null!=m?b:[]);te.text(function(e,t){return"    "+P(k[t])}).attr("x",function(e,t){var r=10*N[t]+C[i]+(R[t]||2),n="x"==i&&!l||"y"==i&&l?-tt.axis.threshold.textAlign(T[t]||"right",i,a,l,r,F):tt.axis.threshold.textAlign(T[t]||"right",i,a,l,r,F);return n}).attr("y",function(e){var t="x"==i&&!l||"y"==i&&l?h(e)+f:h(e)+f;return t-5}).attr("transform","x"==i&&!l||"y"==i&&l?"rotate(-90)":"rotate(0)").style({"font-family":function(e,t){return(Y(m.fontFamily)?m.fontFamily[t]:m.fontFamily)||r.chart.fontFamily||r.canvas.fontFamily||Pt.fontFamily},"font-size":function(e,t){return tt.utils.getVal((m.fontSize instanceof Function?m.fontSize[t]:m.fontSize)||r.chart.fontSize||r.canvas.fontSize)+"px";

},fill:function(e,t){return(Y(m.fontColor)?m.fontColor[t]:m.fontColor)||r.chart.fontColor||r.canvas.fontColor||Pt.fontColor},"font-weight":function(e,t){return(Y(m.fontWeight)?m.fontWeight[t]:m.fontWeight)||r.chart.fontWeight||r.canvas.fontWeight||Pt.fontWeight},"font-style":function(e,t){return(Y(m.fontStyle)?m.fontStyle[t]:m.fontStyle)||r.chart.fontStyle||r.canvas.fontStyle||Pt.fontStyle},"text-Anchor":function(e,t){return"left"==F||"bottom"==F?"center"==T[t]?"middle":"right"==T[t]?"end":"start":"center"==T[t]?"middle":"right"==T[t]?"start":"end"}}).each(function(){J(this,this.textContent,this.getBoundingClientRect(),H,Ne(F),V,_)})})}var t,a,r,n,l,i,o,s,d;return e.parentObj=function(t){return arguments.length?(o=t,e):o},e},tt.axis.threshold.range=function(){function e(e){e.each(function(e){var l=d3.select(this);a=n.chartObj(),t=n.thresholdIndex(),r=n.type();var i=a.systemConf,o=e.label,s=[],d=[],u=[],c=a.container.node().getBoundingClientRect(),h=a.plotarea,p={left:c.left+h.left,top:c.top+h.top,width:h.width,height:h.height,right:c.left+h.left+h.width,bottom:c.top+h.top+h.height},f=a.axes["x"==r?"yaxes":"xaxis"].orient,y={top:0,left:0,right:0,bottom:0},v="..",x=W(l,"g",JSON.parse(e.show)?[e]:[],".","class","thresholdrangegroup-"+r),b=a.axes.rotated;if(JSON.parse(e.show)){var k,w=a.dataset.getDataType(r,t),C=a.dataset.getColumn(r,t);"time"==w&&(k=null!=C.time?C.time:null);var O=[],A=[],S={x:2,y:2},M=i.chart.axes.xaxis.axisline,T=i.chart.axes.yaxis[t].axisline;D(M)&&M.show&&(S.x+=+M.strokeWidth-1),D(T)&&T.show&&(S.y+=+T.strokeWidth-1),e.values.map(function(t,a){A=[],t.map(function(e,t){A[t]=null!=e&&""!=e?"time"==w?Te(e,null,k).getTime():e:null}),O[a]=A,s[a]=(e.label.hAlign instanceof Array?e.label.hAlign[a]:e.label.hAlign)||"center",d[a]=e.dashStyle instanceof Array?e.dashStyle[a]:e.dashStyle,u[a]=e.lineCap instanceof Array?e.lineCap[a]:e.lineCap});var E=x.selectAll("g.rangebox-"+t).data(O),z=E.enter().append("g").attr("class","rangebox-"+t);E.exit().remove(),z.append("rect"),z.append("text");var R=E.select("rect"),L=E.select("text"),N=b?a.axes.yaxes.groups[t].scale:a.axes.xaxis.scale,j=b?a.axes.xaxis.scale:a.axes.yaxes.groups[t].scale,I=null!=N.rangeBand&&a.dataObject.noofBarEnabledSeries>0?N.rangeBand():0,B=null!=j.rangeBand&&a.dataObject.noofBarEnabledSeries>0?j.rangeBand():0,H=null!=N.rangeBand?a.dataObject.noofBarEnabledSeries>0?0:N.rangeBand()/2:0,Y=null!=j.rangeBand?a.dataObject.noofBarEnabledSeries>0?0:j.rangeBand()/2:0;R.attr({x:function(e){return"x"==r&&!b||"y"==r&&b?N(e[0])+H+a.plotarea.left:a.plotarea.left+S[r]},y:function(e){return"x"==r&&!b||"y"==r&&b?a.plotarea.top:j(e[1])+Y+a.plotarea.top},width:function(e){return"x"==r&&!b||"y"==r&&b?N(e[1])-N(e[0])+I:a.plotarea.width-S[r]},height:function(e){return"x"==r&&!b||"y"==r&&b?a.plotarea.height-S[r]:j(e[0])-j(e[1])+B}}).style({fill:function(t,a){return(e.fillColor instanceof Array?e.fillColor[a]:e.fillColor)||"grey"},"fill-opacity":function(t,a){return(e.fillOpacity instanceof Array?e.fillOpacity[a]:e.fillOpacity)||"0.2"},stroke:function(t,a){return(e.strokeColor instanceof Array?e.strokeColor[a]:e.strokeColor)||"black"},"stroke-dasharray":function(e,t){return g(d[t])},"stroke-linecap":function(e,t){return m(u[t],d[t])}}),L.attr({transform:function(e,t){var n=R[0][t].getBBox(),l=tt.axis.threshold.textAlign(s[t],r,a.plotarea,b,S[r],f);return"x"==r&&!b||"y"==r&&b?"translate("+(n.x+n.width/2)+","+(l+a.plotarea.top)+") rotate(-90)":"translate("+(l+a.plotarea.left)+","+(n.y+n.height/2)+")"}}).style({"font-family":function(e,t){return(o.fontFamily instanceof Array?o.fontFamily[t]:o.fontFamily)||i.chart.fontFamily||i.canvas.fontFamily||Pt.fontFamily},"font-size":function(e,t){return tt.utils.getVal((o.fontSize instanceof Function?o.fontSize[t]:o.fontSize)||i.chart.fontSize||i.canvas.fontSize)+"px"},fill:function(e,t){return(o.fontColor instanceof Array?o.fontColor[t]:o.fontColor)||i.chart.fontColor||i.canvas.fontColor||Pt.fontColor},"font-weight":function(e,t){return(o.fontWeight instanceof Array?o.fontWeight[t]:o.fontWeight)||i.chart.fontWeight||i.canvas.fontWeight||Pt.fontWeight},"font-style":function(e,t){return(o.fontStyle instanceof Array?o.fontStyle[t]:o.fontStyle)||i.chart.fontStyle||i.canvas.fontStyle||Pt.fontStyle},"text-Anchor":function(e,t){return"center"==s[t]?"middle":"right"==s[t]?"end":"start"}}).text(function(t,r){return P(je(e.label.text[r],e.values,C,a))}).each(function(){J(this,this.textContent,this.getBoundingClientRect(),p,Ne(f),v,y)})}})}var t,a,r,n;return e.parentObj=function(t){return arguments.length?(n=t,e):n},e},tt.axis.threshold.overlay=function(e,t,a){var r=e.dataObject.getAxisRotated();if("discrete"==t){var n=a.values.map(function(e){return e}),l=a.overlayRange,i=a.defaultColor,o=n.sort(function(e,t){return"below"==l||"equalandbelow"==l?t>e?-1:e>t?1:0:e>t?-1:t>e?1:0});return function(e,t,r,n){if(null==a.values||0==a.length)return n;for(var s=0;s<o.length;s++){var d=o[s],u="equalandbelow"==l?d>=r:"equalandabove"==l?r>=d:"below"==l?d>r:r>d;if(u){var c=a.values.indexOf(d);return null==t||null==t[c]?i?n:"black":t[c]}}return n}}return"continous"==t?function(t,a,n,l){var i="x"==l?e.axes.xaxis.scale:e.axes.yaxes.groups[0].scale,o=n,s=a.values;if(null==s||0==s.length)return t;var d,u=s.slice(),h=a.color,p=a.overlayRange,f=a.defaultColor,g=e.dataset.getDataType(l,n);if("time"==g){var m=e.dataset.getColumn(l,n);d=null!=m.time?m.time:null}u=u.map(function(e){return"time"==g?Te(e,null,d).getTime():e}),u.sort("x"==l&&!r||"y"==l&&r?function(e,t){return t>e?-1:e>t?1:0}:function(e,t){return e>t?-1:t>e?1:0});var y=i.domain().length,v="x"==l&&!r||"y"==l&&r?i(i.domain()[y-1])-i(i.domain()[0]):i(i.domain()[0])-i(i.domain()[y-1]),x=[];x.push(0);for(var b=0;b<u.length;b++){var k=i(u[b])+(null!=i.rangeBand?i.rangeBand()/2:0);x.push(k/v*100),x.push(k/v*100)}x.push(100);var w=[];("y"==l&&"below"==p&&!r||"x"==l&&"above"==p&&!r||"y"==l&&"above"==p&&r||"x"==l&&"below"==p&&r)&&w.push(t);for(var b=0;b<u.length;b++){var n=s.indexOf(u[b]);w.push(null==h||null==h[n]?f?t:"black":h[n])}("y"==l&&"above"==p&&!r||"x"==l&&"below"==p&&!r||"y"==l&&"below"==p&&r||"x"==l&&"above"==p&&r)&&w.push(t);for(var C=[],b=0;b<2*(u.length+1);b++){var O={};O.offset=x[b]+"%",O.color=b%2==0?w[b/2]:w[(b-1)/2],C.push(O)}var A={};A.type="thresholdLinear",A.options={};var S=A.options,P=r?e.axes.yaxes.groups[0].scale:e.axes.xaxis.scale,M=r?e.axes.xaxis.scale:e.axes.yaxes.groups[0].scale;S.x1="x"==l&&!r||"y"==l&&r?P(P.domain()[0]):0,S.x2="x"==l&&!r||"y"==l&&r?P(P.domain()[y-1]):0,S.y1="x"==l&&!r||"y"==l&&r?0:M(M.domain()[y-1]),S.y2="x"==l&&!r||"y"==l&&r?0:M(M.domain()[0]),S.values=u,S.color=w,S.seriesclr=t,S.overlayRange=p;var T=c(null,"object",o,e.userdata).name,E=e.systemConf.chart.plot.plotoptions[T],z="line"===T?E.strokeOpacity:E.fillOpacity;return zt.get(A,w,[S.x1,S.x2,S.y1,S.y2],C,e,z)}:void 0},tt.annotation=function(){},tt.annotation.draw=function(e,t){"use strict";if(e.systemConf.notes&&JSON.parse(e.systemConf.notes.enabled)){var a=e.dataObject.isPolarAxisCategory,r=R(e.systemConf,"notes.chartValues")?e.systemConf.notes.chartValues:[];if(r.forEach(function(t){tt.annotation.addNotes(e,{coordinate:[t.x,t.y],conf:t})}),JSON.parse(e.systemConf.notes.enabled)&&(e.isAxisCategory||a))for(var n=0,l=e.seriesdata.length;l>n;n++){var i=e.renderer[n];"image"===e.plot.renderer.mode&&Ct.setRendererProp(e,i,e.seriesdata,n,{image:!0});var o,s=e.rendererConf[n].params,d=s.xscale,u=s.yscale,h=s.stacked,p=s.datasetIndex,f=s.axisrotated,g=s.yaxiscolumnorder,m="ordinal"==e.dataset.getDataType("x")?d.domain():e.dataObject.getCategories("x"),y=c(e.seriesdata[p].type||e.userdata.seriesdata.type,"numeric");o=be(y)?function(t,a,r){var n=i.commonOption||ce(e.rendererConf[p],p);return[e.dataObject.getTransRectValue("x",t,a,r,n),e.dataObject.getTransRectValue("y",t,a,r,n)]}:function(t){var r=a?[e.plotarea_approx.x,e.plotarea_approx.y]:[0,0];return[e.dataObject.getXYvalue(f,h,d,u,g,t,"x")+r[0],e.dataObject.getXYvalue(f,h,d,u,g,t,"y")+r[1]]},t=tt.annotation.preprocessAnnotations(e.seriesdata,p,o,t,e,s,m)}t.forEach(function(t){tt.annotation.addNotes(e,t)})}return t=[]},tt.annotation.addNotes=function(e,t){"use strict";if(e.systemConf.notes&&JSON.parse(e.systemConf.notes.enabled)){var a=e.systemConf.notes,r=e.canvasarea.width,n=e.canvasarea.height,l=t.coordinate,i=t.basedOn||"chart",o=t.data,s=t.conf||{},d=t.disabled,u=s.type||a.type||"stickyNote",c="plot"==i?JSON.stringify(o):"block"==i?O(s,""):JSON.stringify(l);c="plot"!=i&&null!=s.id?s.id:i+c.replace(/[`~!@#$%^&*( )_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,""),s.id=c;var h=W(e.notes,"div",[1],"#","id",i);h.style({width:"0",height:"0"});var p=W(h,"div",[t],"#","id",c);p.style({display:d?"none":null,position:"absolute",left:"0",top:"0"});var f=tt.annotation["stickyNote"===u?"stickyNote":"customNote"](),g=Rt(a.options[u],t.conf||{},!0);f.chartObj(e).conf(g),U(p,[g,e.systemConf.canvas,Pt],!0),p.call(f);var m=p.node(),y="stickyNote"===u?Math.max(parseFloat(p.selectAll(".head").style("width")),parseFloat(p.selectAll(".body").style("width"))):0,v="stickyNote"===u?parseFloat(p.selectAll(".head").style("height"))+parseFloat(p.selectAll(".body").style("height")):0;l=l.map(function(t,a){return"plot"===i?t+e.plotarea[0==a?"left":"top"]:"function"==typeof t?t(e,s,m):"function"==typeof window[t]?window[t](e,s,m):re(t,0==a?r:n,0)});var x="plot"===i||"block"===i?s.transform:null;x=null==x?null:"function"==typeof x?x:"function"==typeof window[x]?window[x]:null,l=null!=x?x(e,s,m,l):l,f.coordinate(l),l=De(l[0],l[1],y,v,r,n),p.style({left:l[0]+"px",top:l[1]+"px"});var b="plot"==i?o:c,k=He(a,b,i);return-1==k&&Be(a,b,"",t.coordinate,i),p}},tt.annotation.preprocessAnnotations=function(e,t,a,r,n,l,i){"use strict";function o(e,t){var a=e[0],r=e[1];return a>=0&&r>=0&&a<=t.width&&r<=t.height}function s(e,t,a,n){r.push({coordinate:e,data:t,conf:a,disabled:n,basedOn:"plot"})}if(null==n.systemConf.notes||!JSON.parse(n.systemConf.notes.enabled||!1))return r;var d=n.systemConf.notes.plotValues,u=n.isAxisCategory,h=n.isNonAxisMultiSeriesCategory,p=l.dataset,f=l.stacked,g=n.plotarea,m=l.yaxiscolumnorder,y=e[t],v=y.data,x=(u||h)&&e.length>1?y.seriesname:null,b=c(y.type||n.userdata.seriesdata.type,"string"),k=n.dataObject.seriesNames||(n.dataObject.seriesNames=n.seriesdata.map(function(e){return e.seriesname})),w=u&&e.length>1?d.filter(function(e){var t=e.data[e.data.length-1];return x==t||-1==k.indexOf(t)}):d;return w.forEach(function(t){for(var r=!1,n=t.data,l=0,d=u?v.length:1;d>l&&!r;l++)for(var c=0,w=v[l].length;w>c&&!r;c++){var C=v[l][c],O=Ie(C,x);if(JSON.stringify(O)==JSON.stringify(n)){r=!0;var A=a(C,l,c),S=u&&!o(A,g)?!0:u||h?y.disabled:C.disabled;s(A,O,t,S)}}if(u&&!r&&("bar"===b?-1!=i.indexOf(p.getX(n)):!0)){r=!0;var C=Ie(n);f&&(C.y=p.getY(n,m),C.y0=0);var A=a(C,0,c),S=u&&!o(A,g)?!0:u&&e.length>1&&-1==k.indexOf(n[n.length-1])?!1:y.disabled;s(A,C,t,S)}if(!r&&"sunburst"===b){var P=[x,y.value];JSON.stringify(P)===JSON.stringify(n)&&s(a(y),P,t,y.disabled)}}),r},tt.annotation.addBlockAnnotations=function(e){"use strict";if(null!=e.systemConf.notes&&JSON.parse(e.systemConf.notes.enabled||!1)){var t,a,r=(tt.getDefaultOptions("notes",e.systemConf,e.globalProp),e.systemConf.notes.blockValues),n=e.plotarea,l=n.width,i=n.height,o=n.left,s=n.top,d=n.bottom;r.forEach(function(r){var u=r.hAlign,c=r.vAlign,h="right"===u,p="left"===u,f="top"===c,g="bottom"===c;if(!(a&&f||t&&g)){var m=function(e,t,a){var r=a.getBoundingClientRect(),n=h?o+l:p?o:o+l/2,i=h?r.width:p?0:r.width/2;return Math.max(n-i,0)},y=function(e,t,a){var r=a.getBoundingClientRect(),n=f?s:s+i,l=f?0:r.height;return n-l},v=tt.annotation.addNotes(e,{coordinate:[m,y],conf:r,basedOn:"block"}),x=v.node().getBoundingClientRect();if(x.height>.1*i)v.remove();else{var b=x.height;n.height=i-b,f?n.top=s+b:g&&(n.bottom=d+b)}a=a||f,t=t||g}})}},tt.annotation.stickyNote=function(){function e(e){e.each(function(e){var n=d3.select(this),l=t.systemConf.notes,i=t.canvasarea.width,o=t.canvasarea.height,s=t.notes,d=e.basedOn||"chart",u=(e.data,e.disabled,e.coordinate),c="string"==typeof u[0]&&u[0].indexOf("%")>-1,h="string"==typeof u[1]&&u[1].indexOf("%")>-1,p=a.text,f=s.selectAll(".head").size(),g=a.color,m="open"===a.mode,y=I(a.bodyWidth,100),v=I(a.bodyHeight,100),x=I(a.headWidth,15),b=I(a.headHeight,15),k=m?0:1;g=g instanceof Array?g[f%g.length]:g;d3.behavior.drag().on("drag",function(){if(!d3.event.defaultPrevented){var e=d3.select(this.parentNode),t=parseFloat(e.style("left"))+d3.event.x,a=parseFloat(e.style("top"))+d3.event.y,n=Math.max(k%2!=0?0:y,x),s=(k%2!=0?0:v)+b;t=t>i-n?i-n:0>t?0:t,a=a>o-s?o-s:0>a?0:a,r[0]=t,r[1]=a;var u=t+"px",p=a+"px";if(e.style({left:u,top:p}),"plot"!=d){var f=e.attr("id"),g=He(l,f,d);-1!=g&&(l.chartValues[g].x=c?t/i*100+"%":t,l.chartValues[g].y=h?a/o*100+"%":a)}}});n.attr("class","group").style({width:0,height:0,"z-index":2});var w=W(s,"textarea",[1]);w.style({width:y+"px",height:v+"px",position:"absolute","border-color":"transparent","border-radius":(a.bodyBorderRadius||0)+"px","background-color":"transparent",overflow:"hidden",display:"none",resize:"none","z-index":2}).on("blur",function(){var e=w.attr("eleID");if(w.style("display","none"),null!=e){var t=d3.select("#"+e),a=t.selectAll(".body");a.style("color",null),t.style("z-index",2)}}).on("input",function(){var e=d3.select(this);if("none"!==e.style("display")){var t=d3.select("#"+e.attr("eleID")),a=t.selectAll(".body"),r=t.attr("id"),n=w[0][0].value,i=t.datum(),o=i.basedOn||"chart",s=i.data;a.text(n);var d="plot"==o?s:r,c=He(l,d,o);-1==c?Be(l,d,n,u,o):l[o+"Values"][c].text=n}}).text(p);var C=W(n,"div",[1],".","class","head",{"background-color":g});C.style({width:x+"px",height:b+"px",border:a.border,"border-radius":(a.headBorderRadius||0)+"px","z-index":"auto"});var O={click:function(){if(!d3.event.defaultPrevented){var e=k%2==0,t=d3.select(this.nextSibling),a=d3.select(this.parentNode);if(w.on("blur")(),e)a.transition().delay(250).duration(0).style({left:r[0]+"px",top:r[1]+"px"});else{var n=De(parseFloat(a.style("left")),parseFloat(a.style("top")),y,b+v,i,o);a.style({left:n[0]+"px",top:n[1]+"px"})}t.style("color",null).transition().ease("linear").style({width:e?"0px":y+"px",height:e?"0px":v+"px",display:e?null:"block"}),t.transition().delay(250).style("display",e?"none":null),s.selectAll(".group").style("z-index",1),a.style("z-index",2),k++}}};fe(C,null,O);var A=W(n,"div",[1],".","class","body",{"background-color":g});A.style({width:m?y+"px":"0",height:m?v+"px":"0",display:m?null:"none",border:a.border,overflow:"hidden","box-shadow":a.shadow,"border-radius":(a.bodyBorderRadius||0)+"px","z-index":"auto"}).text(p);var O={click:function(){var e=d3.select(this),t=d3.select(this.parentNode);w.on("blur")(),w.style({display:null,left:t.style("left"),top:parseFloat(t.style("top"))+b+"px",color:t.style("color"),"font-size":t.style("font-size"),"font-family":t.style("font-family"),"font-weight":t.style("font-weight"),"font-style":t.style("font-style")}).attr("eleID",t.attr("id")),w[0][0].value=e.text(),w[0][0].focus(),e.style("color","transparent"),s.selectAll(".group").style("z-index",1),t.style("z-index",2),w.style("z-index",3)}};fe(A,null,O)})}var t,a,r;return e.chartObj=function(a){return arguments.length?(t=a,e):t},e.conf=function(t){return arguments.length?(a=t,e):a},e.coordinate=function(t){return arguments.length?(r=t,e):r},e},tt.annotation.customNote=function(){function e(e){e.each(function(e){d3.select(this).html(L(t.htmlEl,[r,e.conf]))})}var t,a,r;return e.coordinate=function(t){return arguments.length?(a=t,e):a},e.conf=function(a){return arguments.length?(t=a,e):t},e.chartObj=function(t){return arguments.length?(r=t,e):r},e},tt.events.zoom=function(e,t,a){"use strict";function r(t,r,n,l){a.chart.axes[t+"axis"].disableBaseValue=!0;var i=f[t]={};"ordinal"==l?i.categories=n:(i.minRange=n[0],i.maxRange=n[1]),e.updateScale(p[r],t,n)}function n(t,a){return t=L(t,[e,d]),t=null!=t?t:a}function l(e){return{x:Math.min(Math.max(e[0]-v.left,0),v.width),y:Math.min(Math.max(e[1]-v.top,0),v.height)}}var i,o,s,d,u=!1,c={},h=e.svg,p=a.seriesdata.chartdata,f=a.chart.zoom,y=2,v=e.plotarea,x=f.selectionArea,b=f.resetButton,k=b.border,w=b.shadow,C=b.label,A=f.type,S=JSON.parse(k.show||!1),P=b.x,M=b.y,T=S?k.radius:0,E=null;JSON.parse(w.show||!1)&&(E="zp"+O(w,"dropShadow"),Et.dropShadow(w,E),E="url("+e.defsLocation+"#"+E+")");var z=f.events||{};return c.zmInit=function(){s=W(h.select(".seriesholder"),"rect",[1],".","class","zmarea"),s.style({fill:x.fillColor||"grey","fill-opacity":x.fillOpacity,visibility:"hidden"});var t=W(e.staticPaneSVG.select(".eventgroup"),"rect",[1],".","class","zmbtn"),r=g(k.style,k.size);t.attr({rx:T,ry:T,filter:E}).style({fill:b.fillColor,"fill-opacity":b.fillOpacity,stroke:k.color,"stroke-width":S?k.size:0,"stroke-dasharray":r,"stroke-linecap":m(k.lineCap,r),visibility:"hidden",cursor:"pointer"});var l={click:c.reset};fe(t,null,l);var i=W(e.staticPaneSVG.select(".eventgroup"),"text",[1],".","class","zmbtn");i.attr("dy","0.9em").style({visibility:"hidden","pointer-events":"none"}).text(C.text),U(i,[C,a.chart,a.canvas,{fontColor:"white",fontSize:11,fontFamily:"verdana"},Pt]);var o=i.node().getBBox();t.attr({width:o.width+C.marginLeft+C.marginRight,height:o.height+C.marginTop+C.marginBottom}),d=t.node().getBBox(),P=n(P,v.left+v.width-d.width),M=n(M,10),t.attr({x:P,y:M}),i.attr({x:P+C.marginLeft,y:M+C.marginTop})},c.zoomInitialized=!1,c.zmStart=function(a){A=f.type,u=!0,i=l(a);var r={};s.style("visibility","visible");var n=A.indexOf("x")>-1&&!t||A.indexOf("y")>-1&&t,o=A.indexOf("y")>-1&&!t||A.indexOf("x")>-1&&t;n?r.x=i.x:r.width=v.width,o?r.y=i.y:r.height=v.height,s.attr(r),c.zoomInitialized=!0,_(!0,z.zoomstart,i,{x:f.x,y:f.y},e)},c.zmMove=function(a){if(A=f.type,u){var r=l(a),n={},o=A.indexOf("x")>-1&&!t||A.indexOf("y")>-1&&t,d=A.indexOf("y")>-1&&!t||A.indexOf("x")>-1&&t;o&&(r.x<i.x&&(n.x=r.x),n.width=Math.abs(r.x-i.x)),d&&(r.y<i.y&&(n.y=r.y),n.height=Math.abs(r.y-i.y)),s.attr(n)}_(!0,z.zoom,r,{x:f.x,y:f.y},e)},c.zmEnd=function(e){return c.zoomInitialized?(o=l(e),s.attr({height:0,width:0}).style("visibility","hidden"),u=!1,c.zoomInitialized=!1,{startPt:i,endPt:o}):!1},c.zoomed=function(n,l,i,s){A=f.type;var d=null!=l,u=t?"y":"x",h=t?"x":"y",p=A.indexOf("x")>-1&&(d||Math.abs(n.startPt[u]-n.endPt[u])>y),g=A.indexOf("y")>-1&&(d||Math.abs(n.startPt[h]-n.endPt[h])>y),m=A.indexOf("x")>-1&&(d?i[0]!=i[1]:n.startPt[u]!=n.endPt[u])||A.indexOf("y")>-1&&(d?s[0]!=s[1]:n.startPt[h]!=n.endPt[h]);if(m){if(me(e,a.chart.axes.events,null,"init"),p){var v=e.dataset.getDataType("x");if(!d){var x=e.axes.xaxis.scale,b=a.chart.axes.xaxis.reversed,k=tt.scale.invert(v,n.startPt,x,t,"x",b),w=tt.scale.invert(v,n.endPt,x,t,"x",b);if(k>w){var C=k;k=w,w=C}i="ordinal"==v?x.domain().slice(k,w+1,0):[k,w]}r("x",d?l:0,i,v)}if(g)for(var O=d?l:0,S=d?l+1:e.axes.yaxes.groups.length;S>O;O++){var v=e.dataset.getDataType("y",O);if(!d){var P=e.axes.yaxes.groups[O].scale,b=a.chart.axes.yaxis[O].reversed,M=tt.scale.invert(v,n.startPt,P,t,"y",b),T=tt.scale.invert(v,n.endPt,P,t,"y",b);M>T&&(M=M+T-(T=M)),s="ordinal"==v?P.domain().slice(M,T+1,0):[M,T]}r("y",O,s,v)}me(e,a.chart.axes.events,null,"onreload"),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e),c.clipMarker||(e.drawPlotareaClippath(),c.clipMarker=!0),e.drawThreshold(!0),e.staticPaneSVG.selectAll(".zmbtn").style("visibility","visible"),_(!0,z.zoomend,o,{x:f.x,y:f.y},e)}},c.reset=function(){if(delete f.x,delete f.y,me(e,a.chart.axes.events,null,"init"),A=f.type,A.indexOf("x")>-1&&(a.chart.axes.xaxis.disableBaseValue=!1,e.updateScale(p[0],"x")),A.indexOf("y")>-1)for(var t=0;t<e.axes.yaxes.groups.length;t++)a.chart.axes.yaxis.disableBaseValue=!1,e.updateScale(p[t],"y");me(e,a.chart.axes.events,null,"onreload"),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e),e.drawThreshold(!0);var r=setInterval(function(){e.chartRendered&&(e.drawPlotareaClippath(),c.clipMarker=!1,clearInterval(r))},10);e.staticPaneSVG.selectAll(".zmbtn").style("visibility","hidden"),_(z.reset,e)},c};var Ft=function(e,t){function a(){a.component=d3.svg.brush(),a.component.on("brush",function(){a.scrollNrender()}).on("brushstart",function(){}).on("brushend",function(){}),a.context||(a.context=W(e.svg,"g",[1],".","class","brush")),f=e.dataObject.getAxisRotated(),f?(e.plotarea.width-=m.height||y.scrollHeight,a.context.attr("transform","translate("+(e.plotarea.left+e.plotarea.width)+","+e.plotarea.top+")")):(e.plotarea.bottom+=m.height||y.scrollHeight,e.plotarea.height-=m.height||y.scrollHeight,a.context.attr("transform","translate("+e.plotarea.left+","+(e.plotarea.top+e.plotarea.height)+")"))}function r(a){var r,n=tt.scale.invert(p,a[0],e.axes.xaxis.scrollScale,f,t),l=tt.scale.invert(p,a[1],e.axes.xaxis.scrollScale,f,t);return r="ordinal"==p?e.axes.xaxis.scrollScale.domain().slice(n,l+1,0):[n,l]}function n(){var t,r,n=d3.transform(a.context.attr("transform")).translate;f?(t=e.plotarea.left+e.plotarea.width,r=e.plotarea.top):(t=e.plotarea.left,r=n[1]),a.context.attr("transform","translate("+t+","+r+")");var o={};o[f?"width":"height"]=m.height||y.scrollHeight,l(a.context.selectAll("rect.extent"),m.slider,y.slider,o),l(a.context.selectAll("rect.background"),m.tracker,y.tracker,o),l(a.context.selectAll(".resize").selectAll("rect"),m.resizer,y.resizer,o),i()}function l(e,t,a,r){t=t||{},e.style({visibility:"visible",cursor:t.cursor||a.cursor,fill:t.fillColor||a.fillColor,opacity:t.fillOpacity,"stroke-width":t.strokeWidth,stroke:t.strokeColor}).attr({rx:t.radius,ry:t.radius}).attr(r)}function i(){var e=m.resizer||{};JSON.parse(e.enabled||!1)||a.context.selectAll(".resize").remove()}function o(e,t,r){var n=e.axes.xaxis.scrollScale=tt.scale.getScale(e,e.dataObject,t,g,0,e.dataset,r,null,0);"x"!=r||f?a.component.y(n):a.component.x(n)}function s(e,t,a){var r=f?e.height:e.width,n=m.visibleCategories,l=m.categoryThickness;a=2*v*a,v=l||(n?Math.floor((r-a)/n):v);var i=n?v:v/(1-t);return i}function d(e,t){var a=e.dataObject.getCategories("x");a=a&&a.length?a:e.dataObject.findXCategories();var r=a.length,n=r>t?r/t:1;return n}function u(e,t){var a=f?t.height:t.width,r=e.systemConf.seriesdata.type||e.seriesdata[0].type,n=c(r,"string"),l="gantt"==n||"bullet"==n||"bar"==n?e.systemConf.chart.plot.plotoptions[n].padding||.2:.2,i=e.systemConf.chart.plot.plotoptions[n].outerPadding||.02,o=s(t,l,i);i=2*o*i;var u=h(e,t,i,o),p=d(e,u),g=Math.floor(a/p);return g}function h(e,t,a,r){return Math.floor(f?(t.height-a)/r:(t.width-a)/r)}var p,f,g,m=e.systemConf.chart.scroll,y={slider:{fillColor:"#B3B6B7",cursor:"pointer"},tracker:{fillColor:"#ECF0F1",cursor:"pointer"},resizer:{fillColor:"none"},scrollHeight:10},v=15;return a.initialize=function(r){p=e.dataset.getDataType(t),g=f?"left":"bottom",o(e,r,t),a.scrollBarLength=u(e,r),a.extent=[],a.context.call(a.component);var l=f?[{y:r.height,x:0},{y:r.height-a.scrollBarLength,x:0}]:[{x:0,y:0},{x:a.scrollBarLength,y:0}];a.setExtent(l),n()},a.scrollNrender=function(){a.updateExtentPosition(),e.updateScale(e.seriesdata[0],t,a.extent),e.drawThreshold(!0),e.drawPlotareaClippath(),e.plot.renderer.draw(!0),e.eventHandler.updateParams(e)},a.updateExtentPosition=function(){var t=a.component.extent(),r="ordinal"==p?f?[t[1],t[0]]:[t[0],t[1]]:[e.axes.xaxis.scrollScale(t[0]),e.axes.xaxis.scrollScale(t[1])],n=r[0]===r[1];n&&(f?(r[1]=r[1]<0?0:r[1],r[0]=r[1]+a.scrollBarLength,r[0]=r[0]>e.plotarea.height?e.plotarea.height:r[0],r[1]=r[0]-a.scrollBarLength):(r[0]=r[1]>e.plotarea.width?r[0]-(r[1]-e.plotarea.width):r[0],r[1]=r[0]+a.scrollBarLength,r[0]=r[0]+a.scrollBarLength>e.plotarea.width?r[0]-(r[1]-e.plotarea.width):r[0],r[1]=r[0]+a.scrollBarLength));var l=f?[{y:r[0],x:0},{y:r[1],x:0}]:[{x:r[0],y:0},{x:r[1],y:0}];a.setExtent(l),a.scrollBarLength=Math.abs(r[1]-r[0]),n&&(a.context.call(a.component),i())},a.setExtent=function(e){var t=r(e);a.extent=t;var n=f?[e[0].y,e[1].y]:[e[0].x,e[1].x];a.component.extent("ordinal"==p?n:t)},a};Ye.initialize=function(e){if(e.isAxisCategory&&(e.systemConf.chart.width||e.systemConf.chart.height)){var t=W(e.container.selectAll(".d3container"),"div",[1],"#","id","zohocharts_scroll");t.style({width:"10px",height:"10px",overflow:"auto"}),W(t,"div",[1],".","class","child").style({width:"20px",height:"20px"});var a=e.dataObject.getAxisRotated(),r=e.defaultScroll;scroll_node=t.node();var n=a?scroll_node.offsetWidth-scroll_node.clientWidth:scroll_node.offsetHeight-scroll_node.clientHeight;t.attr("scrollbarSize",n),r||(r=e.defaultScroll={},r.tickmarkSize=+e.systemConf.chart.axes.xaxis.tickmark.size,r.marginRight=+e.systemConf.chart.marginRight),a?(e.plotarea.bottom+=n,e.plotarea.width-=n):e.systemConf.chart.axes.xaxis.tickmark.size=+r.tickmarkSize+n}},tt.labelRenderer=function(){},tt.labelRenderer.drawLabelsFromQueue=function(e,t,a){if("image"!==a.plot.renderer.mode){var r=a.dataObject,n=function(){var e=r.groupedByStack;e.keys().forEach(function(t,n){var l=e.get(t),i=l.stackLabelIndex;if((r.noofBarEnabledSeries||r.isCombinationalChart)&&null!=i){var o={renderer:a.renderer[i],chartObj:a,args:[{data:[l.stackExtent]},i,"stackLabels",n],charttype:"bar"};tt.labelRenderer.drawLabel(o)}})};n(),e.forEach(function(e){tt.labelRenderer.drawLabel(e)});var l=Ke(a),i=t.length,o={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom},s=function(){var e=r.isContinousChart;t=e?t.sort(function(e,t){return d3.ascending(e.x1,t.x1)}):t;for(var a=1;i>a;a++){var n,l,s=0,d=!1,u=0,c=t[a].pointRadius||0,h=t[a].x1,p=t[a].y1,f=t[a].x2,g=t[a].y2,m=t[a].x2-t[a].x1,y=t[a].y2-t[a].y1,v=t.slice(0,a);v=e?v.reverse():v;do{switch(u){case 0:n=t[a],l="hidden"===n.overlap||r.isBubbleEnabled;break;case 1:n.y1=p-y/2,n.y2=g-y/2;break;case 2:n.x1=(h+f)/2+c,n.x2=(h+f)/2+c+m,n.y1=g+1,n.y2=g+y+1;break;case 3:n.x1=h,n.x2=f,n.y1=g+2*(c+1),n.y2=g+2*(c+1)+y;break;case 4:n.x1=(h+f)/2-c-m,n.x2=(h+f)/2-c,n.y1=g+1,n.y2=g+y+1}for(var x=a-1;x>=0;x--)if(d=We(v[x],n)){s++;break}}while(++u<5&&d);if(0!=s){var b=e?Je(n,o):!0,k=t[a].translateFunction,w=t[a].id;if(!b||5==s||l)k(w,null,null,!0),t[a].x1=t[a].y1=t[a].x2=t[a].y2=0;else{var C=n.x1-h,O=n.y1-p;k(w,C,O)}}}},d=function(){var e=r.getAxisRotated();t.sort(function(t,a){return e?d3.descending(t.y1,a.y1):d3.ascending(t.x1,a.x1)});for(var a=0;i>a;a++){for(var n=!1,l=0,s=0,d=t[a].x1,u=t[a].y1,c=t[a],h=t.slice(0,a).sort(function(t,a){return e?d3.descending(t.x1,a.x1):d3.ascending(t.y1,a.y1)}),p="hidden"===c.overlap,f=a-1;f>=0&&2>l;f--){var g=We(h[f],c);g&&(e?(s=h[f].x2-c.x1,c.x2+=s,c.x1+=s):(s=h[f].y1-c.y2,c.y2+=s,c.y1+=s),l++),n=n||g}if(n){var m=Je(c,o),y=t[a].translateFunction,v=t[a].id;if(!m||l>1||p)y(v,null,null,!0),t[a].x1=t[a].y1=t[a].x2=t[a].y2=0;else{var x=c.x1-d,b=c.y1-u;y(v,x,b)}}}};(r.isCombinationalChart||r.isContinousChart||r.isPolarAxisCategory?s:d)(),a.staticPaneSVG.select(".temp_label").remove(),D(a.labelHandler)&&a.labelHandler.draw()}},tt.labelRenderer.drawLabel=function(e){var t=e.chartObj,a=e.renderer,r=e.charttype,n=e.args,l=t.staticPaneSVG.selectAll("g.labelholder"),i=t.labelHandler;if(/(bar|scatter)/.test(r)&&!t.labelHandler){var o=t.plot.renderer.mode;i=t.labelHandler=Ot[o].initialize(t),i.chartType=r}var s=tt.labelRenderer[r]();s.renderer(a).args(n),l.call(s,i)},tt.labelRenderer.bar=function(){function e(e,i){e.each(function(){var e,s=a[0],d=a[1],u=t.commonRendererProp().params,c=s.plotoptions,h=u.chartObj,p=h.systemConf,f=u.commonPlotOptions,g=u.dataset,m=u.stacked,y=u.yscale,v=u.yaxiscolumnorder,x=u.labelArray,b="stackLabels"===a[2];r=u.axisrotated,e=b?f.datalabels.stackLabels:c&&c.datalabels?Rt(f.datalabels,c.datalabels,!0):f.datalabels;var k=b?Ze(e,h):Ge(e,h);if(!s.disabled&&k){var w=Ke(h),C=Math.max(0,I(e.padding,2)),O=e.textOverlap,A=e.labelPos||"top",P=b?!1:JSON.parse(p.chart.plot.datalabels.handleOverlapping||!1),M=JSON.parse(tt.utils.getValueOfPlotOptions(c,f)("multiColoring")||!1)&&!h.legendarea.show,T=w.left,E=w.top,z=w.right,R=w.bottom,L=h.svg.node().getBoundingClientRect(),N=L.left+h.plotarea.left,j=L.top+h.plotarea.top,B=.75*(r?h.plotarea.width:h.plotarea.height),D=Ue(h,u,e,a[2]||"datalabels",y.domain()[1],d),H=o(g,"x"),Y=o(g,"y",v),F=p.chart.axes.yaxis[v||0].reversed,_="clip"===O;C=C>B?B:C,n=e.textDirection,n=!n||m?r?"vertical":"horizontal":n,l=r?"horizontal"==n?90:0:"horizontal"==n?0:270;var V=t.commonOption,J=h.dataObject.getTransRectValue,X=W(h.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),U=i.update,G=i.add;s.data.forEach(function(a,i){var o=t.seriesdataAfterUpdate&&!b?t.seriesdataAfterUpdate[i]:s.data[i],c=[];_e(X,e,h,u.color),X.style({fill:"transparent"}),o.forEach(function(e,t){var a,o=null,s=F?-1:1;X.text(function(){return a=b?D(e[1]):e.isDummy||H(g.getX(e))||Y(g.getY(e,v))||0===g.getY(e,v)?null:D(e)});var u,p,f,k;if(b){o=S(X.node());var w=V.bandwidth1(e[0])+V.bandwidth2(V.stackGroupIndex)+V.levelMarkerPadding,M=y(e[1]),L=h.barscale2.rangeBand()||0,I=e[1]<0;u=r?M:w,p=r?w:M,r?(u+=(I?-C:C)*s,p+=L/2,f="0.3em",k=F?I?null:"end":I?"end":null):(u+=L/2,p+=(I?C:-C)*s,f=F?I?"-0.3em":"1em":I?"1em":"-0.3em",k="middle")}else{var B=o=S(X.node()),w=J("x",e,i,t,V)||0,M=J("y",e,i,t,V)||0,W=J("width",e,i,t,V)||0,G=J("height",e,i,t,V)||0,I=g.getY(e,v)<0,Z=_;if(u=w,p=M,r)m?(p+=G/2,f="0.3em","middle"==A?(u+=W/2*s,k="middle"):"top"==A?(u+=(I?C:W-C)*s,k=F?I?"end":null:I?null:"end"):(u+=(I?W-C:C)*s,k=F?I?null:"end":I?"end":null)):"vertical"==n?(p+=G/2,f="0.3em",Z=Z&&"top"!=A&&B.width>W,Z?"bottom"==A?u+=F?I?-W+C:-W:I?0:C:"middle"==A&&(u+=F?-W:0):(k=F?I?null:"end":I?"end":null,"middle"==A?(u+=(B.width>W?I?W:0:W/2)*s,k=B.width>W?k:"middle"):u+="top"==A?(I?-C:W+C)*s:(I?W-C:C)*s)):(f=F?I?"-0.3em":"1em":I?"1em":"-0.3em",Z=Z&&B.width>G,"middle"==A?(u+=(B.height>W?F?I?0:W:I?W:0:W/2)*s,f=B.height>W?f:"0.3em"):u+="top"==A?(I?-C:W+C)*s:(I?W-C:C)*s,Z||(p+=G/2,k="middle","middle"==A&&(f="0.3em")));else if(m)u+=W/2,k="middle","middle"==A?(p+=G/2*s,f="0.3em"):"top"==A?(p+=(I?G-C:C)*s,f=F?I?"1em":"-0.3em":I?"-0.3em":"1em"):(p+=(I?C:G-C)*s,f=F?I?"-0.3em":"1em":I?"1em":"-0.3em");else if("vertical"==n){var q=!F&&I||F&&!I?B.width:0;Z=Z&&"top"!=A&&B.width+C>G,f="0.3em",Z?(u+=W/2,p+="middle"==A?F?0:G:F?I?-C:0:G+(I?0:-C)):(u+=W/2,"middle"==A?(p+=B.width>G?(I?0:G)*s+q:G/2*s,k=B.width>G?null:"middle"):p+="top"==A?(I?G+C:-C)*s+q:(I?C:G-C)*s+q)}else Z=Z&&B.width>W,f=F?I?"-0.3em":"1em":I?"1em":"-0.3em","middle"==A?(p+=(B.height<G?G/2:I?0:G)*s,f=B.height<G?"0.3em":f):p+="top"==A?(I?G+C:-C)*s:(I?C:G-C)*s,Z||(u+=W/2,k="middle")}if(X.attr({x:u,y:p,dy:f,"text-anchor":k,transform:"rotate("+l+" "+u+" "+p+")"}),!_){var B=X.node().getBoundingClientRect(),K=B.left-N,Q=K+B.width+(h.scrolledX||0),$=B.top-j,ee=$+B.height+(h.scrolledY||0),te=u+(T>K?T-K:Q>z?-(Q-z):0);te!=u&&(u=te);var ae=p+(E>$?E-$:ee>R?-(ee-R):0);ae!=p&&(p=ae)}var re=!0;if(P)if(m){o=S(X.node());var w=J("x",e,i,t,V)||0,M=J("y",e,i,t,V)||0,G=J("height",e,i,t,V)||0,W=J("width",e,i,t,V)||0;F&&(r?w-=W:M-=G);var ne={x1:o.x,y1:o.y,x2:o.x+o.width,y2:o.y+o.height},le={x1:w,y1:M,x2:w+W,y2:M+G},ie=Je(ne,le);ie||(re=!1)}else if(!_){var B=X.node().getBoundingClientRect(),oe=B.left-N,se=B.top-j,de={id:"lbl"+d+"_"+i+"_"+t,translateFunction:U,x1:oe,y1:se,x2:oe+B.width,y2:se+B.height,overlap:O};x.push(de)}var ue={X:u,Y:p,DY:f,ANCHOR:k,text:a,display:re,height:o.height};c.push(ue)});var p=G(c,d,i,null,b);p.properties={type:"bar",dataLabels:e,rotation:l,color:u.color,dataUpdate:o,showlabel:k,multiColoring:M,textDirection:n,rp:u}})}})}var t,a,r,n,l;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},tt.labelRenderer.pie=function(){function e(e){e.each(function(){function e(e){var t=S(this),r=d3.select(this),l=P.centroid(e),i=t.width/2,o=t.height/2,s={x:l[0]-i,y:l[1]-o},d={x:l[0]+i,y:l[1]-o},u={x:l[0]-i,y:l[1]+o},c={x:l[0]+i,y:l[1]+o},h=n(s,e,P)&&n(d,e,P)&&n(u,e,P)&&n(c,e,P);if(!h){if("adjust"===v){var g,m,y=p?f.startAngle()(e):e.startAngle,x=p?f.endAngle()(e):e.endAngle,b=a(e),k=t.height,w=Math.atan2(s.x,-s.y),C=Math.atan2(d.x,-d.y),O=Math.atan2(u.x,-u.y),A=Math.atan2(c.x,-c.y),M=[w,C,O,A],T=[s,d,u,c],E=d3.extent(M),g=T[M.indexOf(E[0])],m=T[M.indexOf(E[1])],z=Math.sqrt((g.x-m.x)*(g.x-m.x)+(g.y-m.y)*(g.y-m.y)),R=Math.abs(z/2/Math.tan((x-y)/2))+k,L=[Math.sin(b)*R,-(Math.cos(b)*R)],s={
x:L[0]-i,y:L[1]-o},d={x:L[0]+i,y:L[1]-o},u={x:L[0]-i,y:L[1]+o},c={x:L[0]+i,y:L[1]+o};h=n(s,e,P)&&n(d,e,P)&&n(u,e,P)&&n(c,e,P)}h?r.attr({transform:"translate("+L+")",translated:p?null:L}):r.style("display","none")}}var x,b=d3.select(this),k=i[0],w=i[1],C=i[2],O=i[3],A=i[4],P=i[6],M="translate("+i[7][0]+","+i[7][1]+")",T=i[8],E=i[9]||{},z=l.commonRendererProp().params,R=z.chartObj,L=R.systemConf,j=z.commonPlotOptions,I=z.color,B=z.datasetIndex||0,D=(l.plotarea?l.plotarea():R.plotarea).height;p=!w,f=i[5],o=z.dataset,s=z.yaxiscolumnorder,d=0,u=0,c=0,h=0;var H,Y,F,_,V,J=JSON.parse(L.chart.plot.datalabels.handleOverlapping||!1),X=[],U=[];k=p?k:[k[B]],k.forEach(function(n,i){var o=T||i,s=n.plotoptions,d=p&&n.disabled;x=s&&s.datalabels?Rt(j.datalabels,s.datalabels,!0):j.datalabels;var u=x.type,c=x.line,h=Ue(R,z,x,"datalabels",O,i);_=Ge(x,R)?u:"hidden",H=E.padding||+(x.padding||0),F=+tt.utils.getVal(N([x,L.chart.plot.datalabels,L.chart,L.canvas],"fontSize")),Y=+(tt.utils.getValueOfPlotOptions(s,j)("outerPadding")||0),l.autoLabelDone=!1,l.showlabel=_,l.lineStrokeWidth=+(c.strokeWidth||0),V=function(e){var t=a(e);return"circular"==_&&t>Math.PI/2&&t<3*Math.PI/2?ne(t)+"em":"0"};var k=W(b,"g","hidden"==_||d?[]:[1],".","class","label_"+o);k.attr("transform",M),_e(k,x,R,p?I[i%I.length]:null);var S=W(k,"text",w||n.children);S.text(function(e){var a=p?e:e.data,r=p?0==e.depth:t(e);return r?null:h(a)}).attr({id:function(e,t){return"outsidelabel_"+t},"text-anchor":function(e){var t=a(e);return 0>t||t>Math.PI?"end":"start"},x:function(e){var t=a(e);return"doubleside"==_?0>t||t>Math.PI?-(C+H):C+H:A.centroid(e)[0]},y:function(e){var t=Math.max(0,F-Y-10-(C+A.centroid(e)[1]));return A.centroid(e)[1]+t},dy:V}).style({display:function(e){return t(e)?"none":null},fill:function(e,t){return p?null:Ve(L,I[t%I.length],x.fontColor,R)}});var B=W(b,"g",!J&&"doubleside"!=_||d||"hidden"===_?[]:[1],".","class","link_"+o),D=W(B,"path",w||n.children);B.attr("transform",M).style({stroke:c.strokeColor,"stroke-width":c.strokeWidth,fill:"none"}),D.attr("id",function(e,t){return"link"+t}).style({display:function(e){return t(e)?"none":null},stroke:function(e,t){return p||c.strokeColor?null:Ve(L,I[t%I.length],c.strokeColor,R)}}),"doubleside"==_&&D.attr("d",function(e){var t=a(e),r="M "+f.centroid(e)[0]+" "+f.centroid(e)[1]+" L"+A.centroid(e)[0]+" "+A.centroid(e)[1];return r+" L"+A.centroid(e)[0]+" "+A.centroid(e)[1]+" L"+(0>t||t>Math.PI?-(C+H):C+H)+" "+A.centroid(e)[1]});var G=x.innerLabel,h=function(e){return Ue(R,z,e,"innerLabel",O,i)};v=G.textOverlap||"adjust",g=JSON.parse(G.show||!1),m=p&&0!=(G.parentLabel.show||g),g=g&&$(R,"datalabels"),m&&(y=Rt(G.parentLabel,G));var Z=W(b,"g",g||m?[1]:[],".","class","insidelabel_"+o);Z.attr({"text-anchor":"middle",transform:M}).style("pointer-events","none"),_e(Z,G,R,p?I[i%I.length]:null);var q=W(Z,"text",w||r(n));q.attr({dy:"0.35em",transform:function(e){return"translate("+P.centroid(e)+")"},id:function(e,t){return"label_"+t},"class":function(e){return m&&e.children?"parent":null},translated:null}).style({display:null,fill:function(e,t){return p?null:Ve(L,I[t%I.length],G.fontColor,R)}}).text(function(e){var a=p?e:e.data,r=p?0==e.depth:t(e);return r?null:h(m&&e.children?y:G)(a)}),"none"!=v&&q.each(e),m&&_e(Z.selectAll("text.parent"),y,R),d||(X.push("g.label_"+i),U.push("g.link_"+i))});var G=b.selectAll(X.toString()).selectAll("text"),Z=b.selectAll("path");if(J&&G.length>0){l.showlabel="auto";var q,K,Q=[],ee=[],te=-i[7][1],ae=D-i[7][1],re=0,le=0,ie=0,oe=0,se=[],de=[];rightCo=0,leftCo=0,MARGIN=5;var ue;if(G.attr("dy",null),G.each(function(e){var r=a(e),n=S(this),l={x1:n.x,x2:n.x+n.width,y1:n.y-MARGIN,y2:n.y+n.height+MARGIN,hide:t(e)};if(e.obj=l,0>r||r>Math.PI){var i=et(l,ue,te,ae,q,ee,le,oe,!0);ue=i.totalslot,q=i.prev,le=i.count,oe=i.need}else{var i=et(l,ue,te,ae,K,Q,re,ie);ue=i.totalslot,K=i.prev,re=i.count,ie=i.need}}),ie||oe){rightCo=$e(Q,rightCo,se,te),ee.reverse(),leftCo=$e(ee,leftCo,de,te),Qe(se,te,ue,rightCo),Qe(de,te,ue,leftCo);var ce=10;G.each(function(e){var t=d3.select(this),r=e.obj;if(r.hide)t.style("display","none");else{var n=a(e),l=parseFloat(t.attr("y")),i=0>n||n>Math.PI?-(C+H+ce):C+H+ce,o=l+(r.translate||0);t.attr({x:i,y:o})}}),Z.each(function(e){var t=d3.select(this),r=e.obj;if(r.hide)t.style("display","none");else{var n=a(e),l=Math.max(0,F-Y-10-(C+A.centroid(e)[1])),i=A.centroid(e)[1]+l,o=0>n||n>Math.PI?-1:1,s=i+(r.translate||0),d=r.translate?(C+H+ce)*o:A.centroid(e)[0],u=A.centroid(e)[1],c=(C+H+ce)*o,h=s,p="M "+f.centroid(e)[0]+" "+f.centroid(e)[1]+" Q "+d+" "+u+" "+c+" "+h;t.attr("d",p)}})}else G.attr("dy",V),l.showlabel=_,l.autoLabelDone=!0}l.autoLabelDone&&"doubleside"!=_&&b.selectAll(U.toString()).data([]).exit().remove(),qe(G,R,i[7],F)})}function t(e){return p?null==e.parent||0==e.value:0==e.value}function a(e){var t=p?f.startAngle()(e):e.startAngle,a=p?f.endAngle()(e):e.endAngle;return(t+a)/2}function r(e){var t=g?e.children.slice(0):[];return m&&t.push(e),t}function n(e,t,a){var r=a.innerRadius()(t),n=a.outerRadius()(t),l=a.startAngle()(t),i=a.endAngle()(t),o=e.x*e.x+e.y*e.y,s=Math.atan2(e.x,-e.y);return o>=r*r&&n*n>=o&&le(l,i,s)}var l,i,o,s,d,u,c,h,p,f,g,m,y,v;return e.renderer=function(t){return arguments.length?(l=t,e):l},e.args=function(t){return arguments.length?(i=t,e):i},e},tt.labelRenderer.dial=function(){function e(e){e.each(function(){var e,r=d3.select(this),n=a[0],l=t.commonRendererProp().params,i=l.chartObj,o=l.commonPlotOptions,s=(l.dataset,l.yaxiscolumnorder,l.color),d=n.plotoptions,u=i.plotarea_approx||{x:0,y:0},c=i.axes.yaxes.groups[0].scale.domain();e=d&&d.datalabels?Rt(o.datalabels,d.datalabels,!0):o.datalabels;var h=Ge(e,i),p=Ue(i,l,e,"datalabels",c[1]-c[0],0),f=W(r,"text",h?[i.userdata.seriesdata.chartdata[0].data[0][0]]:[]);f.text(function(e){return p(e)}),_e(f,e,i,s[0]),f.attr({"text-anchor":"middle",dy:"-.3em",transform:function(){return"translate("+u.x+","+(u.y+(JSON.parse(o.needle.show)?S(this).height+(+e.padding||0)+(+o.needle.width/2||7):S(this).height/2))+")"}})})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},tt.labelRenderer.funnel=function(){function e(e){e.each(function(){function e(e){var t=r[X-1-e];return t.disabled||!O.getY(t,A)}function n(e){return N([e,w.chart.plot.datalabels,w.chart,w.canvas],"fontSize")}function l(e){switch(F){case"singleside":return!1;case"doubleside":return e%2==0;case"strokeddoubleside":return e>=p/2}}function i(e,t){return l(t)?e.leftx+L:e.rightx-L}function o(e,t,a){var r=l(t);return _&&"overlap"!=s?r?e.leftx:e.rightx:(a=D(a)?a:L,r?0-a:v+a)}var s,d,u=d3.select(this),h=a[0],p=a[2],f=a[3],g=a[4],m=a[5],y=a[6],v=m.width,x=m.height,b=t.commonRendererProp().params,k=b.chartObj,w=k.systemConf,C=b.commonPlotOptions,O=b.dataset,A=b.yaxiscolumnorder,P=b.color,M=0,T=c(h[0].type||k.userdata.seriesdata.type,"string"),E=k.svg.selectAll("g."+T+"group").attr("transform"),z="pyramid"===T;r=a[1];var R=h[0].plotoptions;d=R&&R.datalabels?Rt(C.datalabels,R.datalabels,!0):C.datalabels;var L=m.datalabelPadding||+d.padding||0,j=d.type,I=d.line,B=JSON.parse(w.chart.plot.datalabels.handleOverlapping||!1),H=tt.utils.getVal(n(d)),Y=Ue(k,b,d,"datalabels",g,0),F=Ge(d,k)?j:"hidden",_=JSON.parse(d.relativeX||!1),V=y.length,J=P.length,X=r.length,U=d3.transform(E).translate,G=W(u,"g","hidden"==F?[]:[1],".","class","label_0");G.attr("transform",E),_e(G,d,k,null);var Z=W(G,"text",y);if(Z.each(function(t,a){var n=d3.select(this),i=e(a),s=r[X-1-a],u=P[(V-1-a)%J];n.attr({y:z&&l(M)?t.leftY:Math.max(t.y,H-f-t.y),id:"label_"+(V-1-a),"text-anchor":l(M)?"end":null,x:o(t,M)}).style({display:i?"none":null,fill:Ve(w,u,d.fontColor,k)}).text(i?null:Y(s)),M+=i?0:1}),M=0,s=F,B){var q,K,Q=[],ee=[],te=-U[1],ae=x+U[1],re=0,ne=0,le=0,ie=0,oe=[],se=[];rightCo=0,leftCo=0,MARGIN=5;var de;if(Z.each(function(t,a){var r=S(this),n=e(a),i={x1:r.x,x2:r.x+r.width,y1:r.y-MARGIN,y2:r.y+r.height+MARGIN,hide:n};if(t.obj=i,l(M)){var o=et(i,de,te,ae,q,ee,ne,ie,!0);de=o.totalslot,q=o.prev,ne=o.count,ie=o.need}else{var o=et(i,de,te,ae,K,Q,re,le,!0);de=o.totalslot,K=o.prev,re=o.count,le=o.need}M+=n?0:1}),le||ie){Q.reverse(),rightCo=$e(Q,rightCo,oe,te),ee.reverse(),leftCo=$e(ee,leftCo,se,te),Qe(oe,te,de,rightCo),Qe(se,te,de,leftCo);M=0,Z.each(function(t,a){var r=d3.select(this),n=t.obj;if(n.hide)r.style("display","none");else{var i=l(M)?-(0+L):v+L,o=+r.attr("y")+(n.translate||0);r.attr({x:i,y:o,"text-anchor":l(M)?"end":null})}M+=e(a)?0:1}),s="overlap"}}qe(Z,k,U,H);var ue=W(u,"g","hidden"==F?[]:[1],".","class","link_0"),ce=W(ue,"path",y);ue.attr("transform",E).style({fill:"none",stroke:I.strokeColor,"stroke-width":I.strokeWidth}),M=-1,ce.attr({d:function(t,a){M+=e(a)?0:1;var r=D(t.obj)?t.obj.translate||0:0,n=z&&l(M)?t.leftY:t.y;return"overlap"==s?"M"+i(t,M)+" "+n+" L"+o(t,M,0)+" "+n+" L"+o(t,M)+" "+(n+r):"M"+i(t,M)+" "+n+" L"+o(t,M)+" "+n},id:function(e,t){return"label_link_"+(V-1-t)}}).style("display",function(t,a){return e(a)||D(t.obj)&&t.obj.hide?"none":null});var he=d.innerLabel,pe=JSON.parse(he.show||!1),H=tt.utils.getVal(n(he)),Y=Ue(k,b,he,"innerLabel",g,0),fe=z?function(e){return e.midX}:v/2,ge=z?function(e){return e.leftY}:function(e){return e.y};pe=pe&&$(k,"datalabels");var me=W(u,"g",pe?[1]:[],".","class","insidelabel_0");me.attr({"text-anchor":"middle",transform:E}).style("pointer-events","none"),_e(me,he,k,null);var ye=W(me,"text",y);ye.attr({id:function(e,t){return"inside_label_"+(V-1-t)},x:fe,y:ge,dy:".5em"}).text(function(e,t){return Y(r[X-1-t])}).style({fill:function(e,t){var a=P[(V-1-t)%J];return Ve(w,a,he.fontColor,k)},display:function(e){var t;if(z)t=H>2*(e.y0-e.leftY);else{var a=m.canOverlap?(e.rightx-e.leftx-2*L)/v*f:f;t=H<e.y-(e.y0-e.y)+a&&H>e.y0+a-(e.y-(e.y0-e.y)+a)}return t?"none":null}})})}var t,a,r;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},tt.labelRenderer.scatter=function(){function e(e,r){e.each(function(){var e,n=a[0],l=a[1],i=a[2]||0,s=a[3],d=a[4],u=a[5],h=a[6]||[],p=n.plotoptions,f=t.commonRendererProp().params,g=f.chartObj,m=g.systemConf,y=f.commonPlotOptions,v=f.dataset,x=f.stacked,b=f.axisrotated,k=f.yaxiscolumnorder,w=f.xscale,C=f.yscale,O=f.labelArray,A=c(n.type||g.userdata.seriesdata.type,"numeric"),P="arearange"==c(n.type||m.seriesdata.type,"string"),M=ke(A),T=A==tt.charttype.bubble,E=A==tt.charttype.packedbubble,z=g.dataObject.isPolarAxisCategory;e=p&&p.datalabels?Rt(y.datalabels,p.datalabels,!0):y.datalabels;var R=Ge(e,g);if(!n.disabled&&R){var L=Ke(g),N=Math.max(0,(+e.padding,0)),j=e.textOverlap,I=JSON.parse(m.chart.plot.datalabels.handleOverlapping||!1),B=M?JSON.parse(tt.utils.getValueOfPlotOptions(p,y)("multiColoring")||!1)&&!g.legendarea.show:!1,D=g.svg.node().getBoundingClientRect(),H=L.left,Y=L.top,F=L.right,_=L.bottom,V=D.left+g.plotarea.left,J=D.top+g.plotarea.top,X=Ue(g,f,e,"datalabels",E?d:C.domain()[1],l,s),U=o(v,"x"),G=o(v,"y",k),Z=W(g.staticPaneSVG.select(".labelholder"),"text",[1],".","class","temp_label"),q=r.update,K=r.add;n.data.forEach(function(a,r){var o=t.seriesdataAfterUpdate?t.seriesdataAfterUpdate[r]:E?u:n.data[r],d=[];_e(Z,e,g,f.color),Z.style({fill:"transparent"}),o.forEach(function(e,t){var a=null,n=null,o=null,u=!0,c="",p=T||E?"0.3em":"-0.3em";if(Z.text(function(){return o=e.isDummy||U(v.getX(e))||G(v.getY(e,k,s))?null:X(e)}).style({display:function(){if(z||E)return null;var t=g.dataObject.getXYvalue(b,x,w,C,k,e,"x",null,s),a=g.dataObject.getXYvalue(b,x,w,C,k,e,"y",null,s),r=H>t||t>F||Y>a||a>_;return r?(u=!1,"none"):null}}).attr({transform:null,dy:p,x:function(){return a=E?e.x+h[0]:g.dataObject.getXYvalue(b,x,w,C,k,e,"x",null,s),a||0},y:function(){var t=(T?0:i)/2;return n=E?e.y+h[1]:g.dataObject.getXYvalue(b,x,w,C,k,e,"y",null,s)+(t+N)*(P&&!s?1:-1),n||0},"text-anchor":"middle"}),c="lbl"+l+"_"+r+"_"+t+"_"+s,!z&&!E){var f=Z,m=Z.node().getBoundingClientRect(),y=m.left-V,A=y+m.width+(g.scrolledX||0),M=a+(H>y?H-y:A>F?-(A-F):0);if(M!=a&&(a=M,f.attr("x",M)),g.dataObject.isStackedPercentChart&&!b){var R=m.top-J;n=parseFloat(f.attr("y"));var L=n+(Y>R?m.height+i+N:0);L!=n&&(n=L,f.attr("y",L))}}var B=S(Z.node());if(I){var D=E?e.r:(T?g.dataObject.getXYvalue(b,x,w,C,k,e,"z",g.zscale):i)/2;if(T||E){var W=E?e.x+h[0]:g.dataObject.getXYvalue(b,x,w,C,k,e,"x"),K=E?e.y+h[1]:g.dataObject.getXYvalue(b,x,w,C,k,e,"y"),Q=Math.sqrt(Math.pow(W-B.x,2)+Math.pow(K-B.y,2)),$=Math.sqrt(Math.pow(W-(B.x+B.width),2)+Math.pow(K-(B.y+B.height),2));if(Q>D||$>D){var ee;if("ellipsis"===j){var te=Math.min(B.height/2,D),ae=Math.sqrt(Math.pow(D,2)-Math.pow(te,2)),re={left:W-ae,top:K-ae,right:W+ae,bottom:K+ae};qe(Z,g,h,0,re);var ne=Z.text();".."!==ne&&(o=ne,ee=!0)}ee||(u=!1,Z.style("display","none"))}}if(!E){var le={id:c,x1:B.x,y1:B.y,x2:B.x+B.width,y2:B.y+B.height,pointRadius:D+N,translateFunction:q,overlap:j};O.push(le)}}d.push({X:a,Y:n,DY:p,ANCHOR:"middle",text:o,display:u,height:B.height})});var c=K(d,l,r,s);c.properties={type:"scatter",dataLabels:e,color:f.color,dataUpdate:o,showlabel:R,multiColoring:B,rp:f,rangeChart:P,yrangePos:s}})}})}var t,a;return e.renderer=function(a){return arguments.length?(t=a,e):t},e.args=function(t){return arguments.length?(a=t,e):a},e},Ot.svg={},Ot.svg.initialize=function(e){function t(t,a,r){var n=W(s,"g",[1],".","class","label_"+r);if(t){var l=t.properties,i=l.dataUpdate,o=l.dataLabels,d=l.rp,u=l.rangeChart,c=l.yrangePos,h=e.dataObject.isPolarAxisCategory;u&&(n=W(n,"g",[1],".","class","rangePos_"+c)),n.attr("text-anchor","middle"),_e(n,o,e,d.color),h&&n.attr("transform","translate("+e.plotarea_approx.x+","+e.plotarea_approx.y+")"),t.forEach(function(t,a){var r=W(n,"g",[1],".","class","subseries_"+a),s=W(r,"text",i);s.style({display:function(e,a){return t[a].display===!1?"none":null},fill:function(t,a){return l.multiColoring?Ve(e.systemConf,e.seriesColor[a%e.seriesColor.length],o.fontColor,e):null}}).text(function(e,a){return t[a].text}).attr({x:function(e,a){return t[a].X},y:function(e,a){return t[a].Y},dy:function(e,a){return t[a].DY},"text-anchor":function(e,a){return t[a].ANCHOR}})})}}function a(t,a,n,l,i){var o=W(s,"g",[a],".","class",l?"stacklabel_"+i:"label_"+n);if(t){var d=t.properties,u=d.rotation,c=d.dataUpdate,h=d.dataLabels,p=e.renderer[n],f=p.bandwidth2().rangeBand(),g=Math.max(0,JSON.parse(h.padding||0)),m=p.commonOption,y=d.rp,v=y.axisrotated,x=e.dataObject.getTransRectValue;t.forEach(function(t,a){var n=W(o,"g",[1],".","class","subseries_"+a),l=W(n,"text",c);_e(o,h,e,d.color);var i="clip"===h.textOverlap,s=d.textDirection;if(i)var p=(Mt.SAFARI?e.svg:Pt.patternSVG).selectAll("defs"),y=W(p,"g",[1],".","class","textClipPaths"),b=h.labelPos||"top";l.style({display:function(e,a){return t[a].display===!1?"none":null},fill:function(t,a){return d.multiColoring?Ve(e.systemConf,e.seriesColor[a%e.seriesColor.length],h.fontColor,e):null}}).text(function(e,a){return t[a].text}).attr({x:function(e,a){return t[a].X},y:function(e,a){return t[a].Y},dy:function(e,a){return t[a].DY},"text-anchor":function(e,a){return t[a].ANCHOR},transform:function(e,a){return"rotate("+u+" "+t[a].X+" "+t[a].Y+")"},"clip-path":function(t,n){if(i){var l,o=S(this),d=o.x,u=o.y;if("horizontal"!=s)if(v){var c=x("width",t,a,n,m)||0;l="top"==b?o.width:c+("bottom"==b?-g:0)}else{var h=x("height",t,a,n,m)||0;l="top"==b?o.width:h+("bottom"==b?-g:0)}else l=f;var p=r(y,d,u,Math.max(0,l),o.height);return"url("+e.defsLocation+"#textclip_"+p+")"}return null}})})}}function r(e,t,a,r,n){var l=t+"_"+a+"_"+r+"_"+n;l=l.replace(/\./g,"__");var i=e.selectAll("#textclip_"+l).data([1]);i.enter().append("clipPath"),i.attr("id","textclip_"+l).style("clipPathUnits","objectBoundingBox");var o=W(i,"rect",[1],"#","id","rec_"+l);return o.attr({x:t,y:a,width:r,height:n}),l}var n=[],l=[],i=[],o=null,s=e.staticPaneSVG.select(".labelholder"),d=!1;return function(){var r={};return r.add=function(e,t,a,r,s){s&&(d=!0,o=t);var u=s?i:r?l:n;return u[t]=u[t]||[],u[t][a]=u[t][a]||[],u[t][a].push.apply(u[t][a],e),u[t]},r.update=function(e,t,a,r){var i=e.match(/\d+/g),o=i[0],s=i[1],d=i[2],u=+i[3]||0,c=u?l:n,h=c[o][s][d];h.X+=t,h.Y+=a,h.display=h.display&&!r},r.draw=function(){var r=e.dataObject.groupedByStack,o=e.userdata.seriesdata.stackGroup||r.keys();o.forEach(function(e,t){if(d&&r.has(t)){var n=r.get(t);a(i[n.stackLabelIndex],1,n.stackLabelIndex,!0,t)}else W(s,"g",[],".","class","stacklabel_"+t)}),e.seriesdata.forEach(function(e,r){var i=n[r];i&&"bar"===i.properties.type?a(i,e,r):i?(t(i,e,r),D(l[r])&&t(l[r],e,r)):W(s,"g",[],".","class","label_"+r)}),e.labelHandler=null},r}()};var _t=function(){var e=navigator.userAgent,t={};if(e.indexOf("OPR")>0){t.name="Opera",t.jsPrefix="webkit",t.cssPrefix="-webkit-";var a=e.indexOf("OPR/");t.version=parseInt(e.substr(a+4))}else if(e.indexOf("Chrome")>0){t.name="Chrome",t.jsPrefix="webkit",t.cssPrefix="-webkit-";var a=e.indexOf("Chrome/");t.version=parseInt(e.substr(a+7))}else if(e.indexOf("Safari")>0){t.name="Safari",t.jsPrefix="webkit",t.cssPrefix="-webkit-";var a=e.indexOf("Version/");t.version=parseInt(e.substr(a+8))}else if(e.indexOf("Firefox")>0){t.name="Firefox",t.jsPrefix="Moz",t.cssPrefix="-moz-";var a=e.indexOf("Firefox/");t.version=parseInt(e.substr(a+8))}else if(e.indexOf("MSIE")>0){t.name="Internet Explorer",t.jsPrefix="ms",t.cssPrefix="-ms-";var a=e.indexOf("MSIE");t.version=parseInt(e.substr(a+5))}else t=void 0;return t},Vt=function(e,t){var a=getComputedStyle(e),r=_t();for(var n in t)if(t.hasOwnProperty(n))if(n in a)e.style[n]=t[n];else if(void 0!=r){var l=r.jsPrefix+n.charAt(0).toUpperCase()+n.slice(1);e.style[l]=t[n]}},Wt=function(e,t){var a={type:"zBars",scale:1,duration:1.2},r=document.getElementById("ZCloader");Wt.style||(r=document.createElement("style"),r.setAttribute("id","ZCloader"),document.head.appendChild(r),Wt.style=!0);for(var n in t)t.hasOwnProperty(n)&&(a[n]=t[n]);var l=a.colors||["rgb(204, 32, 50)","rgb(24, 153, 74)","rgb(1, 115, 178)","rgb(253, 208, 25)"],i=l[0%l.length],o=l[1%l.length],s=l[2%l.length],d=l[3%l.length],u=_t(),c="";if(void 0===u?(u={},u.cssPrefix=""):"Internet Explorer"===u.name&&u.version<10&&(a.type="wheel"),!e.loader){var h=document.createElement("div");if("zBlocks"==a.type){if(!Wt.zBlocks){var c="\n@"+u.cssPrefix+"keyframes "+a.type+" {";c+="0% { left:0px; top:0px; "+u.cssPrefix+"transform:rotate(0deg) scale(1)}",c+="25% { left:40px; top:0px; "+u.cssPrefix+"transform:rotate(90deg) scale(0.5)}",c+="50% { left:40px; top:40px; "+u.cssPrefix+"transform:rotate(180deg) scale(1.0)}",c+="75% { left:0px; top:40px; "+u.cssPrefix+"transform:rotate(270deg) scale(0.5)}",c+="100% { left:0px; top:0px; "+u.cssPrefix+"transform:rotate(360deg)scale(1)} }\n",r.innerHTML+=c,Wt.zBlocks=!0}Vt(h,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+a.scale+")"});var p=document.createElement("div");p.innerHTML="&nbsp",h.appendChild(p),Vt(p,{backgroundColor:i,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var f=document.createElement("div");f.innerHTML="&nbsp",h.appendChild(f),Vt(f,{backgroundColor:o,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*1+"s"});var g=document.createElement("div");g.innerHTML="&nbsp",h.appendChild(g),Vt(g,{backgroundColor:s,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*2+"s"});var m=document.createElement("div");m.innerHTML="&nbsp",h.appendChild(m),Vt(m,{backgroundColor:d,width:"30px",height:"30px",borderRadius:"1px",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+a.duration/4*3+"s"}),e.loader=!0}else if("zCircle1"==a.type){if(!Wt.zCircle1){var c="\n@"+u.cssPrefix+"keyframes "+a.type+" { ";c+="0% ,25%, 50%, 75%, 100%{ "+u.cssPrefix+"transform: scale(0.0);  } ",c+="12.5%  { "+u.cssPrefix+"transform: scale(1.0); background-color: "+i+";}",c+="37.5%  { "+u.cssPrefix+"transform: scale(1.0); background-color: "+o+";}",c+="62.5%  { "+u.cssPrefix+"transform: scale(1.0); background-color: "+s+";}",c+="87.5%  { "+u.cssPrefix+"transform: scale(1.0); background-color: "+d+";} }\n",r.innerHTML+=c,Wt.zCircle1=!0}Vt(h,{display:"inline-block",verticalAlign:"middle",width:"70px",height:"70px",transform:"scale("+a.scale+")"});var y=document.createElement("div");y.innerHTML="&nbsp",h.appendChild(y),Vt(y,{width:"100%",height:"100%",borderRadius:"50%",opacity:"0.6",position:"absolute",top:"0",left:"0",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}),e.loader=!0}else if("zBars"==a.type){if(!Wt.zBars){var c="\n@"+u.cssPrefix+"keyframes "+a.type+" { ";c+="0%, 40%, 100% { "+u.cssPrefix+"transform: scaleY(0.4) }",c+="20% { "+u.cssPrefix+"transform: scaleY(1.0) } }\n",r.innerHTML+=c,Wt.zBars=!0}Vt(h,{display:"inline-block",verticalAlign:"middle",width:"50px",height:"30px",textAlign:"center",fontSize:"10px",transform:"scale("+a.scale+")"});var v=document.createElement("div");v.innerHTML="&nbsp",h.appendChild(v),Vt(v,{backgroundColor:i,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var x=document.createElement("div");x.innerHTML="&nbsp",h.appendChild(x),Vt(x,{backgroundColor:o,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.1)+"s"});var b=document.createElement("div");b.innerHTML="&nbsp",h.appendChild(b),Vt(b,{backgroundColor:s,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.2)+"s"});var k=document.createElement("div");k.innerHTML="&nbsp",h.appendChild(k),Vt(k,{backgroundColor:d,marginLeft:"1px",display:"inline-block",width:"6px",height:"100%",borderRadius:"1px",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.3)+"s"}),e.loader=!0}else if("zCircle2"==a.type){if(!Wt.zCircle2){var c="\n@"+u.cssPrefix+"keyframes "+a.type+" { ";c+="0%, 80%, 100% { "+u.cssPrefix+"transform: scale(0.0) }",c+="40% { "+u.cssPrefix+"transform: scale(1.0) } }\n",r.innerHTML+=c,Wt.zCircle2=!0}Vt(h,{display:"inline-block",verticalAlign:"middle",width:"72px",height:"18px",textAlign:"center",fontSize:"10px",transform:"scale("+a.scale+")"});var w=document.createElement("div");w.innerHTML="&nbsp",h.appendChild(w),Vt(w,{backgroundColor:i,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"});var C=document.createElement("div");C.innerHTML="&nbsp",h.appendChild(C),Vt(C,{backgroundColor:o,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.2)+"s"});var O=document.createElement("div");O.innerHTML="&nbsp",h.appendChild(O),Vt(O,{backgroundColor:s,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.4)+"s"});var A=document.createElement("div");A.innerHTML="&nbsp",h.appendChild(A),Vt(A,{backgroundColor:d,display:"inline-block",width:"18px",height:"18px",borderRadius:"100%",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",animationDelay:"-"+(a.duration-.6)+"s"}),e.loader=!0}else if("zCrossBars"==a.type){if(!Wt.zCrossBars){var c="\n@"+u.cssPrefix+"keyframes "+a.type+" { ";c+="0%{left:-50%;}",c+="100%{left: 150%;} }\n",r.innerHTML+=c,Wt.zCrossBars=!0}Vt(h,{display:"inline-block",position:"relative",verticalAlign:"middle",width:"70px",height:"30px",boxSizing:"border-box",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(160, 150, 150)",borderRadius:"8px",overflow:"hidden",transform:"scale("+a.scale+")"});var v=document.createElement("div");v.innerHTML="&nbsp",h.appendChild(v),Vt(v,{backgroundColor:i,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration+"s"});var x=document.createElement("div");x.innerHTML="&nbsp",h.appendChild(x),Vt(x,{backgroundColor:o,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*80+"s"});var b=document.createElement("div");b.innerHTML="&nbsp",h.appendChild(b),Vt(b,{backgroundColor:s,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*60+"s"});var k=document.createElement("div");k.innerHTML="&nbsp",h.appendChild(k),Vt(k,{backgroundColor:d,width:"10px",height:"100%",position:"absolute",transform:"rotate(45deg) scaleY(2)",animationName:a.type,animationDuration:a.duration+"s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDelay:"-"+a.duration/100*40+"s"}),e.loader=!0}else Vt(h,{display:"inline-block",verticalAlign:"middle",width:"30px",height:"30px",position:"absolute",backgroundImage:"url('"+tt.imageFilePath+"loader_"+a.type+".gif')",backgroundSize:"30px 30px",backgroundRepeat:"no-repeat",backgroundPosition:"center"});return h}};tt.getFormattedValue=Ae,tt.generateFormatSpecifier=Pe,e.$ZC=typeof e.$ZC===tt?e.$ZC:tt}(window);